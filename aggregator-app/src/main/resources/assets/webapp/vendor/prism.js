var pe=Object.defineProperty;var de=(r,e,t)=>e in r?pe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var b=(r,e,t)=>de(r,typeof e!="symbol"?e+"":e,t);const ee=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i;function he(r){let e=r;for(;e;e=e.parentElement){const t=ee.exec(e.className);if(t)return t[1].toLowerCase()}return"none"}function V(r,e){r.className=r.className.replace(RegExp(ee,"gi"),""),r.classList.add("language-"+e)}function z(r,e,t=!1){var n,s;return((s=(n=r==null?void 0:r.closest(`.${e}, .no-${e}`))==null?void 0:n.classList)==null?void 0:s.contains(e))??t}function ge(r){const e=r.parentElement;if(e&&/pre/i.test(e.nodeName))return e}const M=Symbol.for("Prism rest"),D=Symbol.for("Prism tokenize");function te(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")}function O(r,e){Array.isArray(r)?r.forEach(e):r!=null&&e(r,0)}function fe(r){return r.charAt(0).toUpperCase()+r.slice(1)}function me(r){const[e,...t]=r.split(/-/);return e+t.map(fe).join("")}class X{constructor(){b(this,"_data",new Map)}has(e){return this._data.has(e)}get(e,t){let n=this._data.get(e);return n===void 0&&(n=t,this._data.set(e,n)),n}set(e,t){this._data.set(e,t)}}class xe{constructor(){b(this,"_all",new Map)}add(e,t){let n=this._all.get(e);n===void 0&&(n=[],this._all.set(e,n));const s=n;return s.push(t),()=>{const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}run(e,t){const n=this._all.get(e);if(!(!n||!n.length))for(const s of n)s(t)}}class be{constructor(){b(this,"head");b(this,"tail");b(this,"length");const e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}addAfter(e,t){const n=e.next,s={value:t,prev:e,next:n};return e.next=s,n.prev=s,this.length++,s}removeRange(e,t){let n=e.next,s=0;for(;s<t&&n.next!==null;s++)n=n.next;e.next=n,n.prev=e,this.length-=s}toArray(){const e=[];let t=this.head.next;for(;t.next!==null;)e.push(t.value),t=t.next;return e}}function Ee(r,e,t){const n=ye(r,e);for(const s in t)n[s]=t[s];return n}function ye(r,e){const t={},n=new Map;function s(a){if(a.pattern){const l={pattern:a.pattern};return a.lookbehind&&(l.lookbehind=a.lookbehind),a.greedy&&(l.greedy=a.greedy),a.alias&&(l.alias=Array.isArray(a.alias)?[...a.alias]:a.alias),a.inside&&(l.inside=i(a.inside)),l}else return a}function o(a){if(a)return Array.isArray(a)?a.map(s):s(a)}function i(a){return a===e?t:typeof a=="string"?a:u(a)}function u(a){let l=n.get(a);if(l===void 0){l=a===r?t:{},n.set(a,l);for(const[f,d]of Object.entries(a))l[f]=o(d);const c=a[M];c!=null&&(l[M]=i(c));const y=a[D];y&&(l[D]=y)}return l}return u(r)}class Ae{constructor(e){b(this,"aliasMap",new Map);b(this,"entries",new Map);b(this,"Prism");this.Prism=e}resolveAlias(e){return this.aliasMap.get(e)??e}has(e){return this.entries.has(this.resolveAlias(e))}add(...e){const t=new Set,n=s=>{const{id:o}=s;this.entries.has(o)||(this.entries.set(o,{proto:s}),t.add(o),O(s.alias,i=>this.aliasMap.set(i,o)),O(s.require,n),s.plugin&&(this.Prism.plugins[me(o)]=s.plugin(this.Prism)))};e.forEach(n),this.update(t)}update(e){const t=new Map,n=[],s=u=>{var c,y,f;const a=n.indexOf(u);if(a!==n.length-1)throw new Error(`Circular dependency ${n.slice(a).join(" -> ")} not allowed`);const l=this.entries.get(u);return!l||!i(l.proto)?!1:(l.evaluatedGrammar=void 0,(c=l.evaluatedEffect)==null||c.call(l),l.evaluatedEffect=(f=(y=l.proto).effect)==null?void 0:f.call(y,this.Prism),!0)},o=u=>{let a=t.get(u);return a===void 0&&(n.push(u),a=s(u),n.pop(),t.set(u,a)),a},i=u=>{let a=!1;return O(u.require,({id:l})=>{o(l)&&(a=!0)}),O(u.optional,l=>{o(this.resolveAlias(l))&&(a=!0)}),a||e.has(u.id)};this.entries.forEach((u,a)=>o(a))}getLanguage(e){e=this.resolveAlias(e);const t=this.entries.get(e),n=t==null?void 0:t.proto.grammar;if(!n)return;if(t.evaluatedGrammar)return t.evaluatedGrammar;if(typeof n=="object")return t.evaluatedGrammar=n;const s=o=>{const i=this.getLanguage(o);if(!i)throw new Error(`The language ${o} was not found.`);return i};return t.evaluatedGrammar=n({getLanguage:s,getOptionalLanguage:o=>this.getLanguage(o),extend:(o,i)=>Ee(s(o),o,i)})}}class G{constructor(e,t,n,s=""){b(this,"type");b(this,"content");b(this,"alias");b(this,"length");this.type=e,this.content=t,this.alias=n,this.length=s.length}addAlias(e){let t=this.alias;t?Array.isArray(t)||(this.alias=t=[t]):this.alias=t=[],t.push(e)}}/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 */class ke{constructor(){b(this,"hooks",new xe);b(this,"components",new Ae(this));b(this,"plugins",{})}highlightAll(e={}){const{root:t,async:n,callback:s}=e,o={callback:s,root:t??document,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code',state:new X};this.hooks.run("before-highlightall",o),o.elements=[...o.root.querySelectorAll(o.selector)],this.hooks.run("before-all-elements-highlight",o);for(const i of o.elements)this.highlightElement(i,{async:n,callback:o.callback})}highlightElement(e,t={}){const{async:n,callback:s}=t,o=he(e),i=this.components.resolveAlias(o),u=this.components.getLanguage(i);V(e,o);let a=e.parentElement;a&&a.nodeName.toLowerCase()==="pre"&&V(a,o);const l=e.textContent,c={element:e,language:o,grammar:u,code:l,state:new X},y=f=>{c.highlightedCode=f,this.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,this.hooks.run("after-highlight",c),this.hooks.run("complete",c),s==null||s(c.element)};if(this.hooks.run("before-sanity-check",c),a=c.element.parentElement,a&&a.nodeName.toLowerCase()==="pre"&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!c.code){this.hooks.run("complete",c),s==null||s(c.element);return}if(this.hooks.run("before-highlight",c),!c.grammar){y(te(c.code));return}n?n({language:c.language,code:c.code,grammar:c.grammar}).then(y,f=>console.log(f)):y(this.highlight(c.code,c.language,{grammar:c.grammar}))}highlight(e,t,n){const s=this.components.resolveAlias(t),o=(n==null?void 0:n.grammar)??this.components.getLanguage(s),i={code:e,grammar:o,language:t};if(this.hooks.run("before-tokenize",i),!i.grammar)throw new Error('The language "'+i.language+'" has no grammar.');return i.tokens=this.tokenize(i.code,i.grammar),this.hooks.run("after-tokenize",i),U(i.tokens,i.language,this.hooks)}tokenize(e,t){const n=t[D];if(n)return n(e,t,this);let s=F(this.components,t[M]);for(;s;)t={...t,...s},s=F(this.components,s[M]);const o=new be;return o.addAfter(o.head,e),this._matchGrammar(e,o,t,o.head,0),o.toArray()}_matchGrammar(e,t,n,s,o,i){for(const u in n){const a=n[u];if(!n.hasOwnProperty(u)||!a)continue;const l=Array.isArray(a)?a:[a];for(let c=0;c<l.length;++c){if(i&&i.cause===`${u},${c}`)return;const y=we(l[c]);let{pattern:f,lookbehind:d=!1,greedy:g=!1,alias:S,inside:$}=y;const C=F(this.components,$);g&&!f.global&&(y.pattern=f=RegExp(f.source,f.flags+"g"));for(let p=s.next,m=o;p.next!==null&&!(i&&m>=i.reach);m+=p.value.length,p=p.next){let h=p.value;if(t.length>e.length)return;if(h instanceof G)continue;let v=1,x;if(g){if(x=J(f,m,e,d),!x||x.index>=e.length)break;const T=x.index,ue=x.index+x[0].length;let L=m;for(L+=p.value.length;T>=L;){if(p=p.next,p.next===null)throw new Error("The linked list and the actual text have become de-synced");L+=p.value.length}if(L-=p.value.length,m=L,p.value instanceof G)continue;let _=p;for(;_.next!==null&&(L<ue||typeof _.value=="string");_=_.next)v++,L+=_.value.length;v--,h=e.slice(m,L),x.index-=m}else if(x=J(f,0,h,d),!x)continue;const N=x.index,q=x[0],A=h.slice(0,N),k=h.slice(N+q.length),w=m+h.length;i&&w>i.reach&&(i.reach=w);let R=p.prev;A&&(R=t.addAfter(R,A),m+=A.length),t.removeRange(R,v);const P=new G(u,C?this.tokenize(q,C):q,S,q);if(p=t.addAfter(R,P),k&&t.addAfter(p,k),v>1){const T={cause:`${u},${c}`,reach:w};this._matchGrammar(e,t,n,p.prev,m,T),i&&T.reach>i.reach&&(i.reach=T.reach)}}}}}}function J(r,e,t,n){r.lastIndex=e;const s=r.exec(t);if(s&&n&&s[1]){const o=s[1].length;s.index+=o,s[0]=s[0].slice(o)}return s}function U(r,e,t){if(typeof r=="string")return te(r);if(Array.isArray(r)){let i="";return r.forEach(u=>{i+=U(u,e,t)}),i}const n={type:r.type,content:U(r.content,e,t),tag:"span",classes:["token",r.type],attributes:{},language:e},s=r.alias;s&&(Array.isArray(s)?n.classes.push(...s):n.classes.push(s)),t.run("wrap",n);let o="";for(const i in n.attributes)o+=" "+i+'="'+(n.attributes[i]||"").replace(/"/g,"&quot;")+'"';return"<"+n.tag+' class="'+n.classes.join(" ")+'"'+o+">"+n.content+"</"+n.tag+">"}function we(r){return r.pattern?r:{pattern:r}}function F(r,e){if(e)return typeof e=="string"?r.getLanguage(e):e}const B=Symbol.for("Prism global"),j=globalThis,ne=j[B]??(j[B]=new ke),ve={id:"plain",alias:["text","txt","plaintext"],grammar:{}},Re={id:"regex",grammar(){const r={pattern:/\\[\\(){}[\]^$+*?|.]/,alias:"escape"},e=/\\(?:x[\da-fA-F]{2}|u[\da-fA-F]{4}|u\{[\da-fA-F]+\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/,t={pattern:/\.|\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},n={pattern:/\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},s="(?:[^\\\\-]|"+e.source+")",o=RegExp(s+"-"+s),i={pattern:/(<|')[^<>']+(?=[>']$)/,lookbehind:!0,alias:"variable"};return{"char-class":{pattern:/((?:^|[^\\])(?:\\\\)*)\[(?:[^\\\]]|\\[\s\S])*\]/,lookbehind:!0,inside:{"char-class-negation":{pattern:/(^\[)\^/,lookbehind:!0,alias:"operator"},"char-class-punctuation":{pattern:/^\[|\]$/,alias:"punctuation"},range:{pattern:o,inside:{escape:e,"range-punctuation":{pattern:/-/,alias:"operator"}}},"special-escape":r,"char-set":n,escape:e}},"special-escape":r,"char-set":t,backreference:[{pattern:/\\(?![123][0-7]{2})[1-9]/,alias:"keyword"},{pattern:/\\k<[^<>']+>/,alias:"keyword",inside:{"group-name":i}}],anchor:{pattern:/[$^]|\\[ABbGZz]/,alias:"function"},escape:e,group:[{pattern:/\((?:\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,alias:"punctuation",inside:{"group-name":i}},{pattern:/\)/,alias:"punctuation"}],quantifier:{pattern:/(?:[+*?]|\{\d+(?:,\d*)?\})[?+]?/,alias:"number"},alternation:{pattern:/\|/,alias:"keyword"}}}},K=/\b(?:AND|NOT|OR|PROX)\b/i,Le=/(?:"(?:\\[\s\S]|(?!")[^\\])*")/,Se=/[^\s()=<>"/]+/,E=RegExp("(?:"+Le.source+"|"+Se.source+")"),Ce=E,Z=/(?:<>|[=><]=?)/,se=RegExp("(?:"+Z.source+"|"+Ce.source+")"),re=RegExp("/\\s*"+E.source+"(?:\\s*"+Z.source+"\\s*"+E.source+")?"),ae=RegExp("(?:\\s*"+re.source+")*"),qe=RegExp(se.source+ae.source),H={pattern:re,inside:{modifier:{pattern:RegExp("(/\\s*)"+E.source),lookbehind:!0,alias:"property"},value:{pattern:RegExp(E.source+"$"),alias:"string"},comparitor:{pattern:Z,alias:"operator"},punctuation:/\//}},$e={pattern:RegExp("(?:"+E.source+"\\s*"+qe.source+"\\s*)?"+E.source),inside:{term:{pattern:RegExp(E.source+"(?!.)"),alias:"string"},index:{pattern:RegExp("^"+E.source),alias:"property"},"relation-modifier":H,relation:{pattern:se,alias:"operator"}}},Ne={pattern:RegExp(K.source+ae.source,"i"),inside:{boolean:{pattern:K,alias:"operator"},"boolean-modifier":H}},Pe={pattern:RegExp("(^\\s*)>\\s*(?:"+E.source+"\\s*=\\s*)?"+E.source),lookbehind:!0,inside:{uri:{pattern:RegExp(E.source+"$"),alias:"string"},prefix:{pattern:E,alias:"property"},punctuation:/[>=]/}},Te={pattern:RegExp("(^|\\s)sortby\\b(?:"+E.source+"\\b|[\\s=></])+$","i"),inside:{keyword:/sortby/i,"sortby-index-modifier":H,index:{pattern:E,alias:"property"}}},oe={id:"cql",grammar:()=>({prefix:Pe,sortby:Te,"bool-group":Ne,"search-clause":$e,punctuation:/[()]/})},_e={id:"fcs-cql",grammar:()=>({punctuation:/[()]/,operator:{pattern:/(\S\s)\b(?:AND|OR)\b/i,greedy:!0,lookbehind:!0},string:{pattern:/("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},"string-unquoted":{pattern:/\S+/,alias:"string"}})},I=/[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?/,Q=RegExp("\\b(?:"+I.source+":)?(?:"+I.source+")\\b(?=\\s*[!=])"),W=/("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/,ie=/\/(?:[iIcCld]+)/,Y=/=|!=/,ce={pattern:W,alias:"regex",inside:{escape:/\\(?:[\\'"nt.^$*+?(){[|]|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{2})/,"invalid-escape":/\\[\s\S]/,whitespace:/\u0009|\u000A|\u000B|\u000C|\u000D|\u0020|\u0085|\u00A0|\u1680|\u2000|\u2001|\u2002|\u2003|\u2004|\u2005|\u2006|\u2007|\u2008|\u2009|\u200A|\u2028|\u2029|\u202F|\u205F|\u3000/}},le={pattern:ie,inside:{punctuation:/\//,keyword:/\w/}},Oe={pattern:RegExp(Q.source+"\\s*(?:"+Y.source+")\\s*"+W.source+"(?:\\s*"+ie.source+")?"),inside:{attribute:{pattern:Q,alias:"property",inside:{qualifier:{pattern:RegExp(I.source+"(?=:)"),alias:"class-name"},punctuation:/:/,identifier:{pattern:I,alias:"class-name"}}},regexp:ce,operator:Y,"regexp-flag":le}},Me={id:"fcs-fcsql",grammar:()=>({segment:{pattern:/\[.*?(?:[|&()=]\s*(?:("|')(\\[\s\S]|(?!\1)[^\\])*\1)[^\]=]*?)*\]/,inside:{"basic-expression":Oe,"invalid-expression":W,operator:/[!&|]/,punctuation:/[()[\]]/}},string:ce,quantifier:{pattern:/(?:[*+?])|\{(?:\d+|\d+,|,\d+|\d+,\d+)\}/,alias:"operator",inside:{number:/\d+/,punctuation:/[{},]/}},"regexp-flag":le,within:{pattern:/within\s+\b(?:p|paragraph|s|sentence|session|t|text|turn|u|utterance)\b/,inside:{keyword:/\w+/}},operator:/\|/,punctuation:/[{}[\](),]/})},Ie=["AND","NOT","OR"],ze=["antonym","baseform","case","citation","definition","entryId","etymology","frequency","gender","holonym","hypernym","hyponym","lang","lemma","meronym","number","phonetic","pos","ref","related","segmentation","senseRef","sentiment","subordinate","superordinate","synonym","transcription","translation"],Ge=["fullMatch","honorWhitespace","ignoreAccents","ignoreCase","lang","masked","partialMatch","regexp","respectAccents","respectCase","unmasked"],Fe={id:"fcs-lexcql",require:oe,grammar({extend:r}){const e=r("cql",{});delete e.prefix,delete e.sortby;const t=e["bool-group"].inside,n=e["search-clause"].inside,s=n["relation-modifier"].inside,o=RegExp("\\b(?:"+Ie.toSorted().join("|")+")\\b","i");t.boolean.pattern=o;const i=new RegExp("(?:(?:<>|(?<!<|>)==?)(?![=><])|\\b(?:exact|is|scr)\\b)");n.relation.pattern=i;const u=RegExp("^\\b(?:"+ze.toSorted().join("|")+")\\b");n.index.pattern=u;const a=RegExp("(/\\s*)(?:"+Ge.toSorted().join("|")+")");return s.modifier.pattern=a,s.comparitor.pattern=/=/,e}},Be={id:"match-braces",effect(r){function e(d){const g=r.plugins.customClass;return g?g.apply(d):d}const t={"(":")","[":"]","{":"}"},n={"(":"brace-round","[":"brace-square","{":"brace-curly"},s={"${":"{"},o=12;let i=0;const u=/^(pair-\d+-)(close|open)$/;function a(d){const g=u.exec(d.id);return g?document.querySelector("#"+g[1]+(g[2]==="open"?"close":"open")):null}function l(){if(!z(this,"brace-hover",!0))return;const d=a(this);d&&[this,d].forEach(g=>{g.classList.add(e("brace-hover"))})}function c(){const d=a(this);d&&[this,d].forEach(g=>{g.classList.remove(e("brace-hover"))})}function y(){if(!z(this,"brace-select",!0))return;const d=a(this);d&&[this,d].forEach(g=>{g.classList.add(e("brace-selected"))})}const f=new WeakSet;return r.hooks.add("complete",d=>{const g=d.element,S=ge(g);if(!S)return;const $=[];if(z(g,"match-braces")&&$.push("(","[","{"),$.length===0)return;f.has(S)||(f.add(S),S.addEventListener("mousedown",()=>{const h=S.querySelector("code"),v=e("brace-selected");h==null||h.querySelectorAll("."+v).forEach(x=>{x.classList.remove(v)})}));const C=[...g.querySelectorAll("span."+e("token")+"."+e("punctuation"))],p=[];$.forEach(h=>{const v=t[h],x=e(n[h]),N=[],q=[];for(let A=0;A<C.length;A++){const k=C[A];if(k.childElementCount===0){let w=k.textContent||"";if(w=s[w]||w,w===h)p.push({index:A,open:!0,element:k}),k.classList.add(x),k.classList.add(e("brace-open")),q.push(A);else if(w===v){p.push({index:A,open:!1,element:k}),k.classList.add(x),k.classList.add(e("brace-close"));const R=q.pop();R!==void 0&&N.push([A,R])}}}N.forEach(A=>{const k=`pair-${i++}-`,w=C[A[0]],R=C[A[1]];w.id=k+"open",R.id=k+"close",[w,R].forEach(P=>{P.addEventListener("mouseenter",l),P.addEventListener("mouseleave",c),P.addEventListener("click",y)})})});let m=0;p.sort((h,v)=>h.index-v.index),p.forEach(h=>{h.open?(h.element.classList.add(e(`brace-level-${m%o+1}`)),m++):(m=Math.max(0,m-1),h.element.classList.add(e(`brace-level-${m%o+1}`)))})})}},je=[ve,Re,oe,_e,Me,Fe],De=[Be];ne.components.add(...je);ne.components.add(...De);export{ne as g};
//# sourceMappingURL=prism.js.map

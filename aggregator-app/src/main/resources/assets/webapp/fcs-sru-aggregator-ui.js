const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-querybuilder.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-querybuilder.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{r as h,u as He,c as $s,b as ae,j as e,L as ke,T as K,d as Ks,e as kt,N as ks,f as be,g as Mt,h as Pt,H as Xe,R as Ot,k as Ut,l as Ws,m as ws,n as vs,o as Qs,p as Le,q as Dt,s as Ht,t as Ft,v as Gs,w as Bt,x as qt,y as ss,Q as Vt,z as zt,A as $t,B as Kt,C as Wt}from"./vendor/react-ext.js";import{b as Qt}from"./vendor/react.js";/* empty css                      */import{C as oe,R as te,a as U,N as Ae,b as de,c as ts,d as E,B as ye,M as re,F as q,e as se,T as Je,f as Fe,g as Ys,h as Ce,I as Gt,D as ce,S as Xs,i as le,O as Oe,j as Be,L as Qe,A as he,P as ns,k as ds,l as Yt,m as hs,n as $e}from"./vendor/bootstrap.js";import{_ as Js,a as Zs,b as Xt,c as Jt,d as Zt}from"./locales/en/default.js";import{g as en}from"./vendor/prism.js";/*!
 * FCS SRU Aggragator UI
 * @module lib/fcs-sru-aggregator-ui.js
 * @version 0.0.0
 * @license GPL-3.0-or-later
 * @see {@link https://github.com/clarin-eric/fcs-sru-aggregator-ui.git}
 */(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var rs={},Ms;function sn(){if(Ms)return rs;Ms=1;var n=Qt();return rs.createRoot=n.createRoot,rs.hydrateRoot=n.hydrateRoot,rs}var tn=sn();const we="x-consortia";async function nn(n,s){const t=new URLSearchParams;s?.consortia!==void 0&&s?.consortia!==null&&t.set(we,s.consortia);const r="init"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function et(n,s){const t=new URLSearchParams;s?.consortia!==void 0&&s?.consortia!==null&&t.set(we,s.consortia);const r="resources"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function rn(n,s){const t=new URLSearchParams;s?.consortia!==void 0&&s?.consortia!==null&&t.set(we,s.consortia);const r="languages"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function an(n,s){const t=new URLSearchParams;s?.consortia!==void 0&&s?.consortia!==null&&t.set(we,s.consortia);const r="statistics"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function on(n,s){return(await n.post("search",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function ln(n,s,t){return(await n.post(`search/${s}`,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function cn(n,s){if(!s)throw new Error('Invalid "searchID" parameter!');return(await n.get(`search/${s}/metaonly`)).data}async function un(n,s,t){if(!s)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const a=(await n.get(`search/${s}/metaonly?resourceId=${encodeURIComponent(t)}`)).data.results.filter(i=>i.id===t);if(a.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${s}, resourceId: ${t})`);return a[0]}async function dn(n,s,t){if(!s)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const a=(await n.get(`search/${s}?resourceId=${encodeURIComponent(t)}`)).data.results.filter(i=>i.resource.id===t);if(a.length===0)throw new Error(`Results for resource not found! (searchId: ${s}, resourceId: ${t})`);return a[0].records===void 0&&console.warn("Using legacy FCS SRU Aggregator API with Search Results not in '.records'!",{searchID:s},a),a[0]}function hn(n,s,t,r,a,i){const c=new URLSearchParams({resourceId:t,format:r});(i==="byGuess"||i==="byMetaAndGuess")&&c.set("filterLanguage",a);const l=`search/${s}/download?${c.toString()}`;return n.getUri({url:l})}function mn(n,s,t,r,a,i){const c=new URLSearchParams({resourceId:t});r?c.set("filterLanguage",r):(i==="byGuess"||i==="byMetaAndGuess")&&c.set("filterLanguage",a);const l=`search/${s}/toWeblicht?${c.toString()}`;return n.getUri({url:l})}const gn=[we];function Ps(n){return n.entries().next().done?void 0:`?${n}`}function pn(){const[n]=He(),s=h.useMemo(()=>new URLSearchParams(Array.from(n.entries()).filter(([r])=>gn.includes(r))),[n]),t=h.useCallback(r=>{const a=new URLSearchParams(s);return $s(r).forEach((i,c)=>a.append(c,i)),a},[s]);return[s,t]}function Ue(){const[n,s]=pn(),t=Ps(n),r=h.useCallback(a=>Ps(s(a)),[s]);return[t,r]}function xn(){const{t:n}=ae(),s="urls.termsUseAndDisclaimer",t=n(s,{ns:"common"}),r=t!==s,a="urls.contact",i=n(a,{ns:"common"}),c=i!==a,l="footer.serviceInfo.text",d=n(l)!==l,[m]=Ue();return e.jsx("footer",{className:"text-muted",children:e.jsx(oe,{children:e.jsxs(te,{children:[e.jsxs(U,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[e.jsxs("div",{children:[e.jsx(ke,{to:{pathname:"/about",search:m},className:"hidden-xs",children:n("footer.links.about")}),e.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","0.0.0"]})]}),e.jsx(ke,{to:{pathname:"/stats",search:m},children:n("footer.links.statistics")})]}),e.jsx(U,{className:"text-center",children:d&&e.jsx(K,{i18nKey:l,components:{serviceBy:e.jsx("a",{href:n("footer.serviceInfo.urlServiceBy")}),hostedBy:e.jsx("a",{href:n("footer.serviceInfo.urlHostedBy")})}})}),e.jsxs(U,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&e.jsx("a",{href:t,children:n("footer.links.termsUseAndDisclaimer")}),c&&e.jsx("a",{href:i,children:n("footer.links.contact")})]})]})})})}const G=Ks(n=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authUsername:null,isAuthenticated:!1,setDeployPath:s=>n(t=>({deployPath:typeof s=="function"?s(t.deployPath):s})),setApiURL:s=>n(t=>({apiURL:typeof s=="function"?s(t.apiURL):s})),setValidatorURL:s=>n(t=>({validatorURL:typeof s=="function"?s(t.validatorURL):s})),setShowSearchResultLink:s=>n(t=>({showSearchResultLink:typeof s=="function"?s(t.showSearchResultLink):s})),setAppTitle:s=>n(t=>({appTitle:typeof s=="function"?s(t.appTitle):s})),setAppTitleHead:s=>n(t=>({appTitleHead:typeof s=="function"?s(t.appTitleHead):s})),setMatomoTrackingParams:s=>n(t=>({matomoTrackingParams:typeof s=="function"?s(t.matomoTrackingParams):s})),setAuthUsername:s=>n(t=>{const r=typeof s=="function"?s(t.authUsername):s;return{authUsername:r,isAuthenticated:r!==null&&r!=="anonymous"}})}));var fn=["en","de"];const ie=Ks(n=>({locale:"en",locales:fn??["en"],setLocale:s=>n(t=>({locale:typeof s=="function"?s(t.locale):s})),setLocales:s=>n(t=>({locales:typeof s=="function"?s(t.locales):s}))})),je=n=>{const s=kt(ie,n);return Object.assign(s,ie),s},jn=""+new URL("assets/clarin-logo-wide.png",import.meta.url).href,bn=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,gs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,qe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function yn(){const{t:n}=ae(),s=je(x=>x.locale),t=je(x=>x.locales),r=je(x=>x.setLocale),a=G.getState().authUsername,i=G.getState().isAuthenticated,c=G.getState().deployPath??"",l=c+(c.endsWith("/")?"":"/")+"login",[u]=Ue(),d="urls.helpWithTranslations",m=n(d,{ns:"common"}),N=m!==d;function p(x){x!==null&&r(x)}function C(){return i?e.jsxs(Ae.Text,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:gs},className:"d-md-inline d-none"})," ",e.jsx(K,{i18nKey:"header.login.signedInAs",components:[e.jsx("span",{className:"fw-bold",children:a})]})]}):e.jsxs(de.Link,{href:`${l}${u??""}`,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:gs},className:"d-md-inline d-none"})," ",n("header.login.login")]})}function w(){if(!t||t.length===1)return null;const x=new Intl.DisplayNames([s,"en"],{type:"language"}),j=e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:qe},className:"d-md-inline d-none"}),e.jsx("span",{className:"d-inline d-md-none",children:n("header.localeLabelOnMobile")})," ",s.toUpperCase()," "]});return e.jsxs(ts,{title:j,align:"end",className:"ms-md-2",onSelect:p,children:[t.map(I=>{const f=new Intl.DisplayNames([I,"en"],{type:"language"});return e.jsxs(ts.Item,{disabled:I===s,"aria-disabled":I===s,eventKey:I,title:n("header.localeOptionTitle",{code:I,name:f.of(I),context:I!==s?"translated":null,translated:x.of(I)}),children:[I.toUpperCase()," – ",f.of(I)]},I)}),N&&e.jsxs(e.Fragment,{children:[e.jsx(ts.Divider,{}),e.jsx(ts.Item,{className:"matomo_link text-wrap",target:"_blank",href:m,onClick:I=>I.stopPropagation(),children:n("header.localeHelpWithTranslations")})]})]})}function A(){return e.jsx(Ae.Brand,{className:"ms-md-4",children:e.jsx("img",{src:jn,alt:n("header.appLogoAlt"),height:30,className:"d-inline-block align-top",onError:({currentTarget:x})=>{console.warn("Logo not found!"),x.onerror=null,x.parentElement.style.display="none"}})})}return e.jsx("header",{children:e.jsx(Ae,{expand:"md",className:"bg-body-tertiary",children:e.jsxs(oe,{children:[e.jsxs(Ae.Brand,{as:ke,to:{pathname:"/",search:u},children:[e.jsx("img",{src:bn,width:"30",height:"30",className:"d-inline-block align-top",alt:`${n("header.title")} logo`})," ",n("header.title")]}),e.jsx(Ae.Toggle,{"aria-controls":"header-navbar-nav"}),e.jsx(Ae.Collapse,{id:"header-navbar-nav",children:e.jsxs(de,{className:"w-100 d-flex",children:[e.jsx(de.Link,{as:ks,to:{pathname:"/",search:u},children:n("header.menu.home")}),e.jsx(de.Link,{as:ks,to:{pathname:"/help",search:u},children:n("header.menu.help")}),e.jsx(Ae.Text,{className:"ms-auto d-md-block d-none"}),C(),w(),A()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function wn(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function vn(n){n==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",n)}function Sn(){h.useEffect(()=>{function n(){vn(wn())}return n(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",n)},[])}const Rn="modulepreload",Ln=function(n,s){return new URL(n,s).href},Os={},ue=function(s,t,r){let a=Promise.resolve();if(t&&t.length>0){let d=function(m){return Promise.all(m.map(N=>Promise.resolve(N).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const c=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=d(t.map(m=>{if(m=Ln(m,r),m in Os)return;Os[m]=!0;const N=m.endsWith(".css"),p=N?'[rel="stylesheet"]':"";if(!!r)for(let A=c.length-1;A>=0;A--){const x=c[A];if(x.href===m&&(!N||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${p}`))return;const w=document.createElement("link");if(w.rel=N?"stylesheet":Rn,N||(w.as="script"),w.crossOrigin="",w.href=m,u&&w.setAttribute("nonce",u),document.head.appendChild(w),N)return new Promise((A,x)=>{w.addEventListener("load",A),w.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return a.then(c=>{for(const l of c||[])l.status==="rejected"&&i(l.reason);return s().catch(i)})},Nn=(n,s,t)=>{const r=n[s];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((a,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Cn={en:{app:Zs,common:Js}},ps="clarin",In=ie.getInitialState().locale,Tn=ie.getInitialState().locales;function En(n,s){if(!n)return s;const t=typeof n=="string"?[n]:n;return[...t.map(a=>`${ps}.${a}`),...t]}const xs=["app","common"],An=En(xs);function as(n){return typeof n=="string"||!Array.isArray(n)?[String(n)]:n}function _n(n,s,t,r){if(t?.postProcessTryPrefixedNamespacesFirst!==void 0)return n;const a=as(s),i=as(t.ns||r.options.defaultNS||[]),c=r.resolve(a,t),u=(c?.res!==void 0?[...as(t.ns||[]),c.usedNS]:[...as(t.ns||[]),...i]).map(m=>m.startsWith(ps)?m:`${ps}.${m}`),d=r.translate(a,{...t,ns:u,postProcessTryPrefixedNamespacesFirst:!0});return a.includes(d)?n:d}be.use(Mt).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:_n}).use(Pt((n,s)=>Nn(Object.assign({"../locales/de/app.json":()=>ue(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>ue(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/common.json":()=>ue(()=>import("./locales/de/default.js").then(r=>r.b),[],import.meta.url),"../locales/de/textplus.app.json":()=>ue(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/clarin.app.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/clarin.common.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.h),[],import.meta.url),"../locales/en/common.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/querybuilder.json":()=>ue(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/querysuggestions.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.q),[],import.meta.url),"../locales/en/textplus.app.json":()=>ue(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>ue(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${n}/${s}.json`,4))).init({lng:In,fallbackLng:"en",supportedLngs:Tn,ns:An,defaultNS:xs,fallbackNS:xs,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Cn,partialBundledLanguages:!0,react:{nsMode:"fallback",transKeepBasicHtmlNodesFor:["br","strong","i","p","em","kbd","code"]}});be.addResourceBundle("en","clarin.app",Xt);be.addResourceBundle("en","clarin.common",Jt);be.addResourceBundle("en","app",Zs);be.addResourceBundle("en","querysuggestions",Zt);be.addResourceBundle("en","common",Js);Object.assign(window,{i18n:be});const kn=["Emanuel Dima","Erik Körner","Leif-Jöran Olsson","Yana Panchenko","Oliver Schonefeld","Dieter Van Uytvanck"],Mn=[{id:"dropwizard",name:"Dropwizard",url:"https://www.dropwizard.io/",license:"Apache License 2.0",licenseUrl:"https://github.com/dropwizard/dropwizard/blob/release/3.0.x/LICENSE",usage:"web server"},{id:"de.mpg.mpgaai:mpgaai-shhaa",name:"MPG-AAI - simple http header authn/z",url:"https://github.com/clarin-eric/mpgaai",license:"Apache License 2.0",licenseUrl:"http://www.apache.org/licenses/LICENSE-2.0.txt",usage:"AAI / Shibboleth support"},{id:"io.swagger.core.v3",name:"Swagger Core",url:"https://github.com/swagger-api/swagger-core",license:"Apache License 2.0",licenseUrl:"https://github.com/swagger-api/swagger-core/blob/master/LICENSE",usage:"REST API documentation"},{id:"org.glassfish.jersey",name:"Eclipse Jersey",url:"https://eclipse-ee4j.github.io/jersey/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/eclipse-ee4j/jersey/blob/2.x/LICENSE.md",usage:"RESTful web services"},{id:"org.slf4j",name:"Simple Logging Facade for Java (SLF4J)",url:"https://www.slf4j.org/",license:"MIT License",licenseUrl:"https://www.slf4j.org/license.html",usage:"logging"},{id:"org.junit",name:"JUnit 5",url:"https://junit.org/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/junit-team/junit-framework/blob/main/LICENSE.md",usage:"testing"},{id:"optimaize/language-detector",name:"Optimaize Language Detector",url:"https://github.com/optimaize/language-detector",license:"Apache License 2.0",licenseUrl:"https://github.com/optimaize/language-detector/blob/master/LICENSE",usage:"language detection of results"},{id:"org.apache.commons:commons-text",name:"Apache Commons Text",url:"https://commons.apache.org/proper/commons-text/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/commons-text/blob/master/LICENSE.txt",usage:"export format"},{id:"com.sun.xml.bind",name:"JAXB Reference Implementation",url:"https://eclipse-ee4j.github.io/jaxb-ri/",license:"Common Development and Distribution License (CCDL) 1.1",licenseUrl:"https://github.com/javaee/jaxb-v2/blob/2.3.0.1/jaxb-ri/License.txt",usage:"XML support",hide:!0},{id:"eu.clarin.weblicht:wlfxb",name:"Weblicht wlfxb",url:"https://weblicht.sfs.uni-tuebingen.de",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://github.com/weblicht/wlfxb/blob/master/LICENSE.txt",usage:"export format"},{id:"org.apache.poi:poi-ooxml",name:"Apache POI",url:"https://poi.apache.org/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/poi/blob/trunk/legal/LICENSE",usage:"export format"},{id:"org.jopendocument:jOpenDocument",name:"jOpenDocument",url:"https://www.jopendocument.org/",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://www.jopendocument.org/support.html",usage:"export format"},{id:"eu.clarin.sru:sru-client",name:"CLARIN SRU/CQL Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-sru-client/blob/main/LICENSE.txt",usage:"SRU / CQL client framework",hide:!0},{id:"eu.clarin.sru.fcs:fcs-simple-client",name:"CLARIN-FCS Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-simple-client/blob/main/LICENSE.txt",usage:"FCS client framework",hide:!0}],Pn=[{id:"react",name:"React",url:"https://react.dev/",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE"},{id:"react-dom",name:"ReactDOM",url:"https://react.dev/reference/react-dom",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE",hide:!0},{id:"react-router",name:"React Router",url:"https://reactrouter.com/",license:"MIT License",licenseUrl:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",usage:"single page application routing"},{id:"react-bootstrap",name:"React Bootstrap",url:"https://react-bootstrap.netlify.app/",license:"MIT License",licenseUrl:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE",usage:"react bindings for bootstrap"},{id:"bootstrap",name:"Bootstrap",url:"https://getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/bootstrap/blob/main/LICENSE",usage:"UI framework"},{id:"bootstrap-icons",name:"Bootstrap Icons",url:"https://icons.getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/icons/blob/main/LICENSE"},{id:"@tanstack/react-query",name:"TanStack Query",url:"https://tanstack.com/query",license:"MIT License",licenseUrl:"https://github.com/TanStack/query/blob/main/LICENSE",usage:"data loading via REST APIs"},{id:"axios",name:"Axios",url:"https://axios-http.com/",license:"MIT License",licenseUrl:"https://github.com/axios/axios/blob/v1.x/LICENSE",usage:"cross-browser support for REST API requests"},{id:"antlr4ng",name:"Next Generation TypeScript runtime for ANTLR4",url:"https://github.com/mike-lischke/antlr4ng",license:'The "BSD license"',licenseUrl:"https://github.com/mike-lischke/antlr4ng/blob/main/LICENSE.txt",usage:"query parser"},{id:"i18next",name:"i18next",url:"https://www.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next/blob/master/LICENSE",usage:"translations"},{id:"react-i18next",name:"react-i18next",url:"https://react.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/react-i18next/blob/master/LICENSE",usage:"translations",hide:!0},{id:"i18next-resources-to-backend",name:"i18next-resources-to-backend",url:"https://github.com/i18next/i18next-resources-to-backend",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next-resources-to-backend/blob/main/licence",usage:"translation resource loading",hide:!0},{id:"zustand",name:"Zustand",url:"https://zustand-demo.pmnd.rs/",license:"MIT License",licenseUrl:"https://github.com/pmndrs/zustand/blob/main/LICENSE",usage:"state management"},{id:"@nozbe/microfuzz",name:"microfuzz",url:"https://github.com/Nozbe/microfuzz",license:"MIT License",licenseUrl:"https://github.com/Nozbe/microfuzz/blob/main/LICENSE",usage:"fuzzy search"},{id:"react-helmet-async",name:"React Helmet (async fork)",url:"https://github.com/staylor/react-helmet-async",license:"Apache License 2.0",licenseUrl:"https://github.com/staylor/react-helmet-async/blob/main/LICENSE",usage:"HTML head modifications"},{id:"react-slugify",name:"react-slugify",url:"https://github.com/martpie/react-slugify",license:"MIT License",licenseUrl:"https://github.com/martpie/react-slugify/blob/master/LICENSE",usage:"jump id fragment generation"}];function On(){const{t:n}=ae(),s="urls.termsUseAndDisclaimer",t=n(s,{ns:"common"}),r=t!==s,a=G.getState().matomoTrackingEnabled,i=G.getState().appTitleHead,[c]=Ue();function l(u){return e.jsx("ul",{children:u.filter(d=>d.hide!==!0).map(d=>e.jsxs("li",{children:[d.url?e.jsx("a",{href:d.url,children:d.name}):e.jsx("span",{children:d.name}),d.license&&e.jsxs(e.Fragment,{children:[" ","(",d.licenseUrl?e.jsx("a",{href:d.licenseUrl,children:d.license}):e.jsx("span",{children:d.license}),")"]})]},d.id))})}return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{children:e.jsxs("title",{children:[i," – About"]})}),e.jsxs(oe,{className:"py-4",children:[e.jsx("h1",{className:"h1 mb-4",children:n("about.title")}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:n("about.people.title")}),e.jsx("p",{children:n("about.people.developedBy")}),e.jsx("ul",{children:kn.map(u=>e.jsx("li",{children:u},u))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:n("about.statistics.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"about.statistics.text",components:[e.jsx(ke,{to:{pathname:"/stats",search:c},children:"endpoint statistics"})]})})]}),(r||a)&&e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:n("about.privacyPolicy.title")}),r&&e.jsx("p",{children:e.jsx(K,{i18nKey:"about.privacyPolicy.termsInfo",components:[e.jsx("a",{href:t,children:"clarin.eu"})]})}),a&&e.jsx("p",{children:e.jsx(K,{i18nKey:"about.privacyPolicy.matomoInfo",components:[e.jsx("a",{href:"https://matomo.org/",children:"Matomo"})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:n("about.sourceCode.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"about.sourceCode.sourceInfo.text",components:[e.jsx("a",{href:n("about.sourceCode.sourceInfo.repoUrl"),children:"GitHub"}),e.jsx("a",{href:n("about.sourceCode.sourceInfo.licenseUrl"),children:"GPL 3.0 license"})]})}),e.jsx("p",{children:n("about.sourceCode.licenseInfo")})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:n("about.technology.title")}),e.jsx("p",{children:n("about.technology.backendUses")}),l(Mn),e.jsx("p",{children:n("about.technology.frontendUses")}),l(Pn),e.jsx("p",{children:e.jsx(K,{i18nKey:"about.technology.iconLicenseInfo",components:[e.jsx("a",{href:"http://www.freepik.com/",children:"Freepik"}),e.jsx("a",{href:"www.flaticon.com",children:"www.flaticon.com"}),e.jsx("a",{href:"http://creativecommons.org/licenses/by/3.0/",children:"CC BY 3.0"})]})})]})]})]})}const Me=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`,Ye=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`,st=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,tt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,Ze=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,Un=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-braces" viewBox="0 0 16 16">
  <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6M13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6"/>
</svg>`,nt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,rt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,at=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,it=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`,We=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,ot=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,cs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`,Ss=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`,Ve=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`,Dn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
</svg>`,Hn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16">
  <path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/>
</svg>`,lt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,ct=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-check" viewBox="0 0 16 16">
  <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
  <path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
</svg>`,ut=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-lock" viewBox="0 0 16 16">
  <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
  <path d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415"/>
</svg>`,dt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`,Fn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
</svg>`,ls={"arrow-clockwise":st,"envelope-arrow-up":rt,"exclamation-triangle":at,"eye-fill":Me,"gear-fill":We,"house-door":cs,"info-circle":Ss,"link-45deg":Ve,"three-dots":dt,balloon:tt,bank:Ze,download:nt,eye:it,highlights:ot,magic:Ye,search:lt,translate:qe};Object.assign(ls,{"plus-circle":Dn,"x-circle":Fn,braces:Un,magic:Ye,repeat:Hn});Object.assign(ls,{"shield-check":ct,"shield-lock":ut,person:gs});function Bn(){const{t:n}=ae(),s=G.getState().appTitleHead;function t(){const r=n("icons",{ns:"common",returnObjects:!0}),a=Object.getOwnPropertyNames(r).filter(i=>Object.getOwnPropertyNames(ls).includes(i)).toSorted((i,c)=>{const l=r[i],u=r[c];return!l.context||l.context.length===0?-1:!u.context||u.context.length===0||l.context.includes("statistics")?1:u.context.includes("statistics")?-1:l.context.includes("querybuilder")?1:u.context.includes("querybuilder")?-1:l.context[0].localeCompare(u.context[0])});return e.jsx(te,{xs:1,md:2,xl:3,children:a.map(i=>{const c=n(`icons.${i}.context`,{ns:"common",returnObjects:!0,defaultValue:[]});return e.jsx(U,{children:e.jsx(E,{className:"border-0",children:e.jsxs(E.Body,{children:[e.jsxs(E.Title,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ls[i]},"aria-hidden":"true",className:"rounded border px-2 pb-1"})," ",n(`icons.${i}.label`,{ns:"common"})]}),e.jsx(E.Text,{className:"mb-0",children:n(`icons.${i}.description`,{ns:"common"})}),c.length>0&&e.jsx(E.Text,{className:"mt-1",children:c.map(l=>e.jsx(ye,{children:l},l))})]})})},i)})})}return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{children:e.jsxs("title",{children:[s," – Help"]})}),e.jsxs(oe,{className:"my-4",children:[e.jsx("h1",{className:"h1",children:n("help.title")}),e.jsx("h2",{className:"h2",id:"performing-a-fcs-search-in-resources",children:n("help.performSearch.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textBasicSearch"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textAdvancedSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textLexicalSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textSearchProgress"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textViewResource",components:{iconEye:e.jsx("i",{dangerouslySetInnerHTML:{__html:Me},"aria-hidden":"true"})}})}),e.jsx("h2",{className:"h2",id:"adjusting-search-criteria",children:n("help.adjustSearchCriteria.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.adjustSearchCriteria.text"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.adjustSearchCriteria.textOtherSearchTypes"})}),e.jsx("h2",{className:"h2",id:"more-help",children:n("help.moreHelp.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.moreHelp.text",components:[e.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),e.jsx("a",{title:n("help.contactTitle"),href:n("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"})]})}),e.jsx("h2",{className:"h2",id:"more-help",children:n("help.icons.title")}),t()]})]})}const Rs=h.createContext({resources:[],languages:{},weblichtLanguages:[]});Rs.displayName="AggregatorDataContext";function qn({resources:n,languages:s,weblichtLanguages:t,children:r}){const a={resources:n,languages:s,weblichtLanguages:t};return e.jsx(Rs.Provider,{value:a,children:r})}function Ls(){return h.useContext(Rs)}const Ns=h.createContext(void 0);Ns.displayName="AxiosContext";function Te(){const n=h.useContext(Ns);if(!n)throw new Error('No "axios" instance set, use AxiosProvider to set one');return n}function Vn({axios:n,children:s}){return e.jsx(Ns.Provider,{value:n,children:s})}const Cs=h.createContext(void 0);Cs.displayName="SearchParamsContext";function Is(){const n=h.useContext(Cs);if(!n)throw new Error('No "params" data set, use SearchParamsProvider to set one');return n}function zn({language:n,languageFilter:s,queryType:t,query:r,resourceIDs:a,numberOfResults:i,children:c}){const l={language:n,languageFilter:s,queryType:t,query:r,resourceIDs:a,numberOfResults:i};return e.jsx(Cs.Provider,{value:l,children:c})}function $n(n,s=0){let t=3735928559^s,r=1103547991^s;for(let a=0,i;a<n.length;a++)i=n.charCodeAt(a),t=Math.imul(t^i,2654435761),r=Math.imul(r^i,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}window._paq=window._paq||[];function Kn({siteId:n,trackerUrl:s,enableLinkTracking:t=!0,domains:r=[],userId:a=void 0}){window._paq.push(["setTrackerUrl",s]),window._paq.push(["setSiteId",n]),a&&window._paq.push(["setUserId",a]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),t&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function Wn({srcUrl:n}){const s=document.createElement("script"),t=document.getElementsByTagName("script")[0];s.type="text/javascript",s.async=!0,s.defer=!0,s.src=n,t&&t.parentNode&&t.parentNode.insertBefore(s,t)}function Qn(n){if(!n)return!1;let s=null;if(typeof n=="string")try{s=JSON.parse(n)}catch(d){return console.error("Error trying to parse tracking params!",d),!1}else typeof n=="object"&&(s=n);const t=s.siteId,r=s.trackerUrl,a=s.srcUrl,i=s.domains,c=s.userId?.toString();if(a===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(t===void 0||!Number.isInteger(t))return console.warn('No "siteId" configuration set for tracking!'),!1;const l={siteId:t,trackerUrl:r,domains:i};c&&(l.userId=$n(c).toString());const u={srcUrl:a};return Kn(l),ht(document.location.href||window.location.href,document.title),Wn(u),!0}function ht(n,s,t){window._paq.push(["setDocumentTitle",s??document.title]),window._paq.push(["setCustomUrl",n]),t!==void 0&&window._paq.push(["setReferrerUrl",t]),window._paq.push(["trackPageView"])}function mt(n,s=!1,t=!1){window._paq.push(["trackSiteSearch",n,s,t])}const fs="byMeta",Gn="all",gt="resource",Yn="title-up",Re="mul";function us(n,s=void 0,t={}){return n===Re?t?.defaultAnyLanguage??"Any Language":s?.[n]||(t?.defaultUnknownLanguage??"Unknown Language")}function Ts(n){const s=ie.getState().locale,t=(i,c=null)=>({...i,subResources:i.subResources.map(l=>t(l,c??i)),rootResourceId:c?.id??null}),r=n.map(i=>t(i,null)),a=function(i,c){const l=B(i.institution,s)??"",u=B(c.institution,s)??"",d=l.localeCompare(u);if(d!==0)return d;const m=B(i.title,s)??"",N=B(c.title,s)??"";return m.toLowerCase().localeCompare(N.toLowerCase())};return Pe(r,i=>{i.subResources.sort(a)}),r.sort(a),r}function Xn(n,s){const t=[],r=[],a=[];return Object.entries(s).forEach(([i,c])=>{c.forEach(l=>{let u=!1;Pe(n,d=>{d.handle===l&&(u=!0,a.push(d))}),u||(console.warn("Handle not found in resources",l),r.push(l))})}),Pe(a,i=>{t.push(i.id)}),{selected:t,unavailable:r}}function Pe(n,s){const t=(r,a)=>{s(r,a)===!1||r.subResources.forEach(t)};n.forEach(t)}function Ge(n,s){let t;const r=a=>t!==void 0?!0:s(a)?(t=a,!0):a.subResources.find(r)!==void 0;return n.find(r),t}function Ne(n){const s=[];return Pe(n,t=>{s.push(t.id)}),s}function Jn(n,s){const t=new Map;return Pe(n,r=>{const a=s(r);t.has(a)||t.set(a,[]),t.get(a).push(r.id)}),t}function Zn(n,s,t){const r=[],a=i=>ft(i,a)||ir(i,s,t);return Pe(n,i=>{a(i)&&r.push(i.id)}),r}function er(n,s){const t=ie.getState().locale,r=new Set;return Pe(n,a=>{if(s.includes(a.id)){const i=B(a.institution,t)??"";r.add(i)}return!0}),Array.from(r)}function pt(n){const s=t=>[t,...t.subResources.map(s).flat()];return n.map(s).flat()}const xt=["en","eng","de","deu"];function sr(n){if(n===null)return null;if(typeof n=="string")return n;for(const t of xt)if(Object.hasOwn(n,t))return n[t];const s=Object.getOwnPropertyNames(n);return s.length>0?n[s[0]]:null}function tr(n,s){return n===null?null:typeof n=="string"?n:s&&Object.hasOwn(n,s)?n[s]:null}function B(n,s){s===void 0&&(s=ie.getState().locale);const t=tr(n,s);return t!==null?t:sr(n)}function nr(n,s){if(n===null||typeof n=="string")return;if(s===void 0&&(s=ie.getState().locale),s&&Object.hasOwn(n,s))return s;for(const r of xt)if(Object.hasOwn(n,r))return r;const t=Object.getOwnPropertyNames(n);if(t.length>0)return t[0]}function es(n,s="en"){const t=typeof n.title=="string"||n.title===null?[s]:Object.getOwnPropertyNames(n.title),r=typeof n.description=="string"||n.description===null?[s]:Object.getOwnPropertyNames(n.description),a=typeof n.institution=="string"||n.institution===null?[s]:Object.getOwnPropertyNames(n.institution),i=[...t,...r,...a];return Array.from(new Set(i))}function rr(n,s){return!(s==="fcs"&&!n.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||s==="lex"&&!n.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function ar(n,s){return!!(s===Re||n.languages&&n.languages.length===1&&n.languages[0]===s||n.languages&&n.languages.indexOf(s)>=0)}function ft(n,s){if(!n.subResources||n.subResources.length===0)return!1;let t=!1;const r=a=>{if(s?.(a)===!0){t=!0;return}a.subResources.forEach(r)};return n.subResources.forEach(r),t}function ir(n,s,t){return!(!rr(n,s)||!ar(n,t))}const jt={"title-up":(n,s)=>{const t=ie.getState().locale,r=B(n.title,t)??"",a=B(s.title,t)??"";return r.localeCompare(a)},"title-down":(n,s)=>{const t=ie.getState().locale,r=B(n.title,t)??"",a=B(s.title,t)??"";return-r.localeCompare(a)},"institution-up":(n,s)=>{const t=ie.getState().locale,r=B(n.institution,t)??"",a=B(s.institution,t)??"",i=B(n.title,t)??"",c=B(s.title,t)??"",l=r.localeCompare(a);return l!==0?l:i.localeCompare(c)},"institution-down":(n,s)=>{const t=ie.getState().locale,r=B(n.institution,t)??"",a=B(s.institution,t)??"",i=B(n.title,t)??"",c=B(s.title,t)??"",l=-r.localeCompare(a);return l!==0?l:i.localeCompare(c)}};function bt(n,s){const[t,r]=h.useState(n);return h.useEffect(()=>{const a=setTimeout(()=>{r(n)},s);return()=>{clearTimeout(a)}},[n,s]),t}function js(n,s,t=0,r=s){if(s===n&&s===r&&s.nodeType===Node.ELEMENT_NODE&&t===1)return s.nodeType,s.textContent?.length,s.textContent?.length||0;if(s===n||n===null)return t;const a=s.parentNode;if(a===null)return t;let i=0;const c=a.childNodes;for(let l=0;l<c.length;l++){const u=c[l];if(u===s)break;u.nodeType===Node.TEXT_NODE||u.nodeType===Node.ELEMENT_NODE?i+=u.textContent?.length||0:console.warn("unknown node type",{container:n,node:s,offset:t,parent:a,i:l,child:u})}return js(n,a,i+t,r)}function yt(n,s){const t=n.textContent?.length||0;if(t<s)return null;let r=0;const a=n.childNodes;for(let i=0;i<a.length;i++){const c=a[i];let l=0;if(c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?l=c.textContent?.length||0:console.warn("unknown node type, skip",{container:n,offset:s,child:c}),!(l===0&&a.length!==1)&&(r+=l,r>=s)){const u=s-(r-l);return c.nodeType===Node.ELEMENT_NODE?yt(c,u):{node:c,offset:u}}}return a.length,null}function bs(n,s){if(!s)return null;const t=js(n,s.startContainer,s.startOffset);if(s.startContainer.nodeType===Node.TEXT_NODE&&s.endContainer===s.startContainer)return[t,t+(s.endOffset-s.startOffset)];const r=js(n,s.endContainer,s.endOffset);return[t,r]}function or(n,s){if(!(document.activeElement===n))return null;const r=window.getSelection();if(!r)return null;const a=document.createRange(),i=yt(n,s);if(i)try{a.setStart(i.node,i.offset),a.collapse(!0),r.removeAllRanges(),r.addRange(a)}catch(c){console.error("Error trying to set cursor!",c,{container:n,offset:s,startRange:i})}}function Us(n){if(!(document.activeElement===n))return null;const t=window.getSelection();if(!t||t.rangeCount===0)return null;const r=t.getRangeAt(0),a=bs(n,r);return a?a[0]:null}function lr(n){return n==="cql"?"fcs-cql":n==="fcs"?"fcs-fcsql":n==="lex"?"fcs-lexcql":"plain"}function ys(n,s){const t=lr(s),r="match-braces rainbow-braces";let a=n;try{a=en.highlight(n,t)}catch(c){console.warn("Error trying to highlight value",{value:n,error:c,language:t})}return`<pre><code class="language-${t} ${r}">${a}</code></pre>`}function Ke(n){return n?(n=n.replace(/[\n\t]/g," "),n=n.replace(/&nbsp;|\u202F|\u00A0/g," "),n):""}const wt=Ot.forwardRef(({value:n,onChange:s,onCursorChange:t,disabled:r,placeholder:a,queryType:i,delay:c=200,...l},u)=>{const d=h.useRef(null),m=h.useRef(null);h.useImperativeHandle(u,()=>m.current);const[N,p]=h.useState(Ke(n)),[C,w]=h.useState(null),A=bt(N,c),[x,j]=h.useState(A);h.useEffect(()=>{const R=ys(A,i);if(j(R),m.current){const k=Us(m.current);w(k)}},[A,i]),h.useEffect(()=>{const R=Ke(n);if(A!==R&&(p(R),j(ys(R)),m.current)){const k=Us(m.current);w(k)}},[n,A]),h.useLayoutEffect(()=>{m.current&&C!==null&&or(m.current,C)});function I(R){const k=R.target.innerText;d.current&&(d.current.value=k),p(k),s?.(k)}function f(R){R.stopPropagation(),R.preventDefault();const W=(R.clipboardData||window.clipboardData).getData("text");L(W)}function H(R){R.key==="Enter"?(R.stopPropagation(),R.preventDefault(),d.current&&d.current.form?.requestSubmit()):R.key==="Backspace"?(R.stopPropagation(),R.preventDefault(),v()):R.key==="Delete"?(R.stopPropagation(),R.preventDefault(),$()):R.ctrlKey&&R.key==="a"||w(null)}function V(R=!1){if(!m.current||!t)return;const k=m.current;if(!(document.activeElement===k))return;const _=window.getSelection();if(!_||_.rangeCount===0)return;const T=[];for(let O=0;O<_.rangeCount;O++){const o=_.getRangeAt(O),y=bs(k,o);y&&T.push(y)}if(T.length===0)return;const[g,M]=T.pop();R?g===M&&(w(g),t?.(g)):t?.(g,g!==M?M:void 0)}function F(R){if(!m.current)return null;const k=m.current;if(!(document.activeElement===k))return null;const _=window.getSelection();if(!_||_.rangeCount===0)return null;const T=[];for(let o=0;o<_.rangeCount;o++){const y=_.getRangeAt(o),J=bs(k,y);J&&T.push(J)}if(T.length===0)return null;T.sort();const g=T.map(([o,y])=>y-o).reduce((o,y)=>o+y,0),M=k.innerText,O=T.toReversed().reduce((o,[y,J])=>o.slice(0,y)+o.slice(J),M);if(R==="backspace"){if(g===0){const o=T.filter(([y,J])=>y===J).map(([,y])=>y).pop();if(o===0)return null;if(o!==void 0)return{value:O.slice(0,o-1)+O.slice(o),offset:o-1}}else{const o=T.map(([,y])=>y).pop();if(o!==void 0)return{value:O,offset:o-g}}return console.warn('invalid "backspace" process, abort',{container:k,selectionIndices:T,oldValue:M,newValueSpansRemoved:O,numDeleted:g}),null}else if(R==="delete"){if(g===0){const o=T.filter(([y,J])=>y===J).map(([,y])=>y).pop();if(o!==void 0)return{value:O.slice(0,o)+O.slice(o+1),offset:o}}else{const o=T.map(([,y])=>y).pop();if(o!==void 0)return{value:O,offset:o-g}}return console.warn('invalid "delete" process, abort',{container:k,selectionIndices:T,oldValue:M,newValueSpansRemoved:O,numDeleted:g}),null}else if(R==="paste"){if(g===0){const o=T.filter(([y,J])=>y===J).map(([y])=>y).shift();if(o!==void 0)return{value:O,offset:o}}else{const o=T.map(([y])=>y).shift();if(o!==void 0)return{value:O,offset:o}}return console.warn('invalid "paste" process, abort',{container:k,selectionIndices:T,oldValue:M,newValueSpansRemoved:O,numDeleted:g}),null}}function L(R){const k=F("paste");if(!k)return;const W=Ke(R),{value:_,offset:T}=k,g=_.slice(0,T)+W+_.slice(T),M=T+R.length;p(g),w(M),d.current&&(d.current.value=g),s?.(g),t?.(M)}function v(){const R=F("backspace");if(!R)return;const{value:k,offset:W}=R,_=Ke(k);p(_),w(W),d.current&&(d.current.value=_),s?.(_),t?.(W)}function $(){const R=F("delete");if(!R)return;const{value:k,offset:W}=R,_=Ke(k);p(_),w(W),d.current&&(d.current.value=_),s?.(_),t?.(W)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{role:"input",disabled:r,placeholder:a,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...l,onInput:I,onPaste:f,onKeyDown:H,onKeyUp:()=>V(),onClick:()=>V(!0),tabIndex:r?-1:l.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:x},ref:m}),a&&n===""&&e.jsx("span",{className:"input-placeholder-simulacrum",children:a}),e.jsx("input",{type:"hidden",ref:d})]})});wt.displayName="ContentEditable";var me=Ut();function vt({show:n,languages:s,resources:t,searchLanguage:r,searchLanguageFilter:a,showResourceCounts:i,showLanguageFilterOptions:c=!0,onModalClose:l}){const{t:u}=ae(),[d,m]=h.useState(r||Re),[N,p]=h.useState(a||fs),[C,w]=h.useState(""),[A,x]=h.useState(i??!1),j=h.useMemo(()=>{const v=new Map;return t&&(t.forEach($=>$.languages.forEach(R=>v.set(R,(v.get(R)??0)+1))),v.set(Re,t.length)),v},[t]),I=me.useFuzzySearchList({list:Object.entries(s??{}).toSorted(),queryText:C,getText:v=>[v[0],v[1]],mapResultItem:({item:v,score:$,matches:R})=>({item:v,matches:R,score:$})});if(!s)return null;const f=Math.floor((I.length+2)/3);function H(v){l({language:d,filter:N,action:v})}function V(){m(r||Re),p(a||fs)}function F(){x(v=>!v)}function L(v,$,R,k){const W=d===v;let _="d-block py-0 my-1 border-0";return W&&(_+=" fw-semibold selected"),R===void 0&&(R=[null,null]),e.jsxs(se,{size:"sm",className:_,style:{color:`var(${W?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>m(v),"data-filter-score":k,children:[W&&e.jsx("span",{className:"selected-marker me-1",children:"✓"}),e.jsx(me.Highlight,{ranges:R[1],text:$})," ",e.jsx("sup",{children:e.jsx(me.Highlight,{ranges:R[0],text:v})}),A&&j.has(v)&&e.jsxs(e.Fragment,{children:[" (",j.get(v),")"]})]},v)}return e.jsxs(re,{show:n,onHide:()=>H("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[e.jsx(re.Header,{closeButton:!0,children:e.jsx(re.Title,{children:u("search.languagesModal.title")})}),e.jsxs(re.Body,{className:"px-0",children:[e.jsxs(oe,{className:["px-4"].concat(c?["pb-3 border-bottom"]:[]).join(" "),children:[e.jsxs(te,{children:[e.jsx(U,{sm:!0}),e.jsx(U,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:L(Re,u("languageCodeToName.any",{ns:"common"}))}),e.jsxs(U,{sm:!0,children:[e.jsx(q.Control,{size:"sm",placeholder:u("search.languagesModal.filterInputPlaceholder"),name:"languages-filter",value:C,onChange:v=>w(v.target.value)}),t&&e.jsx(q.Check,{name:"languages-show-count",id:"languages-show-count",checked:A,onChange:F,type:"checkbox",label:u("search.languagesModal.checkboxShowNumberOfResources"),className:"mt-1"})]})]}),e.jsxs(te,{children:[e.jsx(U,{sm:!0,children:I.slice(0,f).map(({item:[v,$],matches:R,score:k})=>L(v,$,R,k))}),e.jsx(U,{sm:!0,children:I.slice(f,2*f).map(({item:[v,$],matches:R,score:k})=>L(v,$,R,k))}),e.jsx(U,{sm:!0,children:I.slice(2*f).map(({item:[v,$],matches:R,score:k})=>L(v,$,R,k))})]})]}),c&&e.jsx(q,{children:e.jsx(oe,{className:"px-4 pt-3",children:["byMeta","byGuess","byMetaAndGuess"].map(v=>e.jsx(q.Check,{type:"radio",name:"filterOpts",value:v,id:`filterOpts-${v}`,checked:N===v,onChange:()=>p(v),label:u(`search.languagesModal.optionLanguage${v}`)},v))})})]}),e.jsxs(re.Footer,{children:[e.jsx(se,{variant:"secondary",onClick:V,children:u("search.languagesModal.buttonReset")}),e.jsx(se,{variant:"secondary",onClick:()=>H("abort"),children:u("search.languagesModal.buttonAbort")}),e.jsx(se,{variant:"primary",onClick:()=>H("confirm"),children:u("search.languagesModal.buttonConfirm")})]})]})}const Es=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],os=Object.fromEntries(["cql","fcs","lex"].map(n=>[n,Es.find(s=>s.id===n)])),Ds=["fcs","lex"],cr=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],ur="cql",is=[10,20,50,100,200,250],Ie="info:srw/diagnostic/1/61",dr=[{id:"cql-single-term",queryType:"cql",query:"Elephant",description:"Query with single term"},{id:"cql-with-boolean",queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{id:"cql-with-phrase",queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{id:"fcs-three-tokens-artznei",queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb'},{id:"lex-plain-string",queryType:"lex",query:"apple",description:"Search for plain string"},{id:"lex-lemma-with-language",queryType:"lex",query:'lemma =/lang=deu "Apfel"',description:'Search for German lemma "Apfel"'}];function hr({show:n,queryTypes:s,onModalClose:t}){const{t:r}=ae(),a=s&&s.length>0?s:["cql","fcs","lex"],i=dr.filter(d=>a.includes(d.queryType));if(i.length===0)return c("abort"),null;function c(d){t({query:void 0,queryType:void 0,action:d})}function l(d,m){t({query:d,queryType:m,action:"confirm"})}function u(d,m,N,p){return e.jsxs(te,{children:[e.jsx(U,{md:"auto",className:"d-none d-md-block",children:p&&`${p}.`}),e.jsxs(U,{className:"d-flex flex-column",children:[N!==void 0&&e.jsx("div",{children:N}),e.jsx("div",{dangerouslySetInnerHTML:{__html:ys(d,m)}})]}),e.jsx(U,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:e.jsx(se,{size:"sm",onClick:()=>l(d,m),children:r("search.suggestionsModal.buttonUseQuery")})})]},d)}return e.jsxs(re,{id:"search-query-suggestions-modal",show:n,onHide:()=>c("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(re.Header,{closeButton:!0,children:e.jsx(re.Title,{children:r("search.suggestionsModal.title")})}),e.jsx(re.Body,{className:"px-0",children:e.jsx(oe,{fluid:!0,children:a.map(d=>{const m=i.filter(N=>N.queryType===d);return m.length===0?null:e.jsxs(h.Fragment,{children:[e.jsx(te,{children:e.jsx(U,{children:e.jsx("h4",{className:"border-bottom pb-2",children:r(`queryTypes.${d}.nameLong`,{ns:"common",defaultValue:os[d]?.name??d.toUpperCase()})})})}),m.map((N,p)=>u(N.query,N.queryType,N.description,p+1))]},d)})})}),e.jsx(re.Footer,{children:e.jsx(se,{variant:"primary",onClick:()=>c("close"),children:r("search.suggestionsModal.buttonClose")})})]})}function St({disabled:n,value:s,onChange:t,delay:r=300}){const[a,i]=h.useState(s??""),c=bt(a,r);return h.useEffect(()=>{t(c)},[t,c]),e.jsx(q.Control,{type:"search",placeholder:"Search for ...",value:a,onChange:l=>i(l.target.value),disabled:n})}function Rt(n,s,t,r){const a=pt(s);r??=["title","institution","description"];const i=me.useFuzzySearchList({list:a,queryText:n,getText:p=>{const C=[];return r.includes("title")&&C.push(B(p.title,t)),r.includes("institution")&&C.push(B(p.institution,t)),r.includes("description")&&C.push(B(p.description,t)),C},mapResultItem:({item:p,score:C,matches:w})=>{const A=new Map;let x=0;return r.includes("title")&&A.set("title",w[x++]),r.includes("institution")&&A.set("institution",w[x++]),r.includes("description")&&A.set("description",w[x++]),{resource:p,matches:A,score:C}}}),c=i.reduce((p,{resource:C,matches:w})=>(p.set(C.id,w),p),new Map),l=i.reduce((p,{resource:C,score:w})=>p.set(C.id,w),new Map),u=new Set;i.filter(({resource:p})=>p.rootResourceId!==null).forEach(({resource:p,score:C})=>{const w=l.get(p.rootResourceId);w===void 0?(u.add(p.rootResourceId),l.set(p.rootResourceId,C)):C<w&&l.set(p.rootResourceId,C)});const d=s.filter(p=>u.has(p.id)).map(p=>({resource:p,score:l.get(p.id)}));return{resources:[...i.filter(({resource:p})=>!p.rootResourceId),...d].toSorted(({score:p},{score:C})=>p===C?0:p===void 0?1:C===void 0?-1:p-C).map(({resource:p})=>p),matches:c,scores:l}}function As({resource:n,selectedResourceIDs:s,highlighting:t,highlightings:r,shouldBeShown:a,localeForInfos:i,onSelectClick:c,languageCodeToName:l}){const{t:u}=ae(),d=G.getState().isAuthenticated,[m,N]=h.useState(!1),[p,C]=h.useState(!1);t??=r?.get(n.id)??new Map;const w=s.includes(n.id),A=es(n),x=je(v=>v.locale),[j,I]=h.useState(x);if(h.useEffect(()=>{x&&I(x)},[x]),h.useEffect(()=>{i&&I(i)},[i]),typeof a=="function"&&!a(n))return null;if(a===!1)return null;const f=typeof a=="function"?n.subResources.some(v=>a(v)):!0;function H(){m&&document.getSelection()?.type==="Range"||N(v=>!v)}function V(){c(n,!w)}function F(){C(v=>!v)}function L(){if(n.availabilityRestriction!=="NONE")return e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:d?ct:ut}})," "]})}return e.jsxs(e.Fragment,{children:[e.jsxs(te,{className:`p-2 m-1 ${m&&"border-bottom"}`,children:[e.jsx(U,{md:"auto",sm:1,onClick:V,children:e.jsx(q.Check,{id:`resource-selection-${n.id}`,"aria-label":u("search.results.resourceInfo.checkboxResourceAriaLabel",{title:n.title}),children:e.jsx(q.Check.Input,{checked:w,onChange:()=>{}})})}),e.jsxs(U,{md:8,sm:11,className:`mb-sm-2 ${m?"":"text-truncate"}`,onClick:H,children:[e.jsxs("h4",{className:`h5 ${m?"":"text-truncate"}`,children:[L(),e.jsx(me.Highlight,{text:B(n.title,j)??"",ranges:t.get("title")??null})," ",n.landingPage&&e.jsx("small",{children:e.jsxs("a",{href:n.landingPage,className:"matomo_link",target:"_blank",children:[u("search.resourcesModal.resource.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:cs}})]})})]}),e.jsx("p",{className:`mb-0 ${m?"":"text-truncate"}`,children:B(n.description,j)&&e.jsx(me.Highlight,{text:B(n.description,j)??"",ranges:t.get("description")??null})})]}),e.jsxs(U,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${m?"":" text-truncate"}`,onClick:H,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",e.jsx(me.Highlight,{text:B(n.institution,j)??"",ranges:t.get("institution")??null}),e.jsx("br",{}),e.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",n.languages.map(l).sort().join(", "),m&&A.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(Je,{type:"radio",name:`resources-${n.id}-info-languages`,defaultValue:j,onChange:v=>I(v),onClick:v=>v.stopPropagation(),className:"mt-2",children:A.toSorted().map(v=>e.jsx(Fe,{variant:"outline-secondary",size:"sm",id:`resources-${n.id}-info-languages-${v}`,value:v,type:"radio",children:v},v))})]})]}),f&&n.subResources.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-100"}),e.jsx(U,{md:"auto",sm:1,style:{width:"2.8rem"}}),e.jsx(U,{md:{span:8,offset:0},sm:{span:11,offset:1},children:e.jsx(se,{variant:"link",size:"sm",className:"ps-0",onClick:F,children:u("search.resourcesModal.resource.toggleExpand",{context:p?"collapse":"expand",count:n.subResources.length})})})]})]}),f&&p&&e.jsx(E,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:n.subResources.map(v=>e.jsx(As,{resource:v,highlightings:r,selectedResourceIDs:s,shouldBeShown:a,onSelectClick:c,languageCodeToName:l},v.id))})]})}function Hs({title:n,resources:s,selectedResourceIDs:t,resourceScores:r,highlightings:a,expanded:i,shouldBeShown:c,localeForInfos:l,onSelectClick:u,onExpandToggleClick:d,onSelectAllClick:m,onDeselectAllClick:N,languageCodeToName:p}){const{t:C}=ae(),[w,A]=h.useState(i);h.useEffect(()=>{A(i)},[i]);const x=r!==void 0?s.filter(f=>r.has(f.id)).toSorted((f,H)=>{const V=r.get(f.id),F=r.get(H.id);return V===F?0:V===void 0?1:F===void 0?-1:V-F}):s;if(x.length===0)return null;function j(){A(f=>!f),d(!w)}function I(){const f=s.filter(L=>!L.rootResourceId),H=Ne(f).length,V=f.length,F=Ne(f).filter(L=>t.includes(L)).length;return C("search.resourcesModal.grouped.msgResources",{count:V,nested:H-V,context:H-V?"nested":null})+(F!==H?C("search.resourcesModal.grouped.msgResourcesSelected",{count:F}):"")}return e.jsxs(oe,{className:"border-bottom pb-2 mb-4 px-0",children:[e.jsxs(te,{className:"px-3",children:[e.jsx(U,{md:9,sm:12,children:e.jsx("h3",{children:n})}),e.jsxs(U,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:[e.jsx(se,{size:"sm",variant:"secondary",onClick:j,"aria-expanded":w,children:C("search.resourcesModal.grouped.buttonExpand",{context:w?"hide":"show"})}),e.jsx(se,{size:"sm",onClick:()=>m(s),children:C("search.resourcesModal.grouped.buttonSelectAll")}),e.jsx(se,{size:"sm",onClick:()=>N(s),children:C("search.resourcesModal.grouped.buttonDeselectAll")})]})]}),e.jsx(te,{className:"px-3",children:e.jsx(U,{children:I()})}),e.jsx(Ys,{in:w,children:e.jsx(oe,{children:x.map(f=>e.jsx(As,{resource:f,highlightings:a,selectedResourceIDs:t,shouldBeShown:c,onSelectClick:u,languageCodeToName:p,localeForInfos:l},f.id))})})]})}function mr({show:n,showGrouping:s,resources:t,languages:r,availableResources:a,selectedResources:i,onModalClose:c}){const{t:l}=ae(),u=je(S=>S.locale),[d,m]=h.useState(u);h.useEffect(()=>{u&&m(u)},[u]);const N=new Intl.DisplayNames([u,"en"],{type:"language"}),[p,C]=h.useState(i||a),[w,A]=h.useState(Gn),[x,j]=h.useState(gt),[I,f]=h.useState(Yn),[H,V]=h.useState(""),[F,L]=h.useState({}),[v,$]=h.useState({});h.useEffect(()=>{s&&j(s)},[n,s]),h.useEffect(()=>C(i),[i]);const R=t.filter(S=>a.includes(S.id)).toSorted(jt[I]),W=R.map(S=>es(S)).flat().reduce((S,Y)=>S.set(Y,(S.get(Y)??0)+1),new Map),{resources:_,matches:T,scores:g}=Rt(H,R,d),M=h.useMemo(()=>{const S=new Map;return x==="institution"?Object.entries(F).forEach(([Y,ee])=>{S.set(Y,ee.resources.reduce((X,Se)=>{const pe=g.get(Se.id);return pe===void 0?X:X===void 0?pe:X<pe?X:pe},void 0))}):x==="language"&&Object.entries(v).forEach(([Y,ee])=>{S.set(Y,ee.resources.reduce((X,Se)=>{const pe=g.get(Se.id);return pe===void 0?X:X===void 0?pe:X<pe?X:pe},void 0))}),S},[x,g,F,v]);if(h.useMemo(()=>{const S={},Y={};t.forEach(ee=>{const X=B(ee.institution,d)??"";Object.getOwnPropertyNames(S).includes(X)||(S[X]={expanded:!0,resources:[]}),S[X].resources.push(ee),ee.languages.forEach(Se=>{Object.getOwnPropertyNames(Y).includes(Se)||(Y[Se]={expanded:!0,resources:[]}),Y[Se].resources.push(ee)})}),L(S),$(Y)},[t,d]),!t)return null;const O={total:Ne(t).length,totalRoot:t.length,available:a.length,selected:p.length,visible:Ne(_.map(S=>S)).length,visibleRoot:_.length};function o(S){return us(S,r,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})}function y(S,Y){const ee=p.filter(X=>!S.includes(X));C(Y?[...ee,...S]:ee)}function J(S){c({resourceIDs:p,action:S})}function Z(S){A(S.target.value)}function ne(S){j(S.target.value)}function fe(S){f(S.target.value)}function Ee(){C(a)}function ze(){C([])}function De(){C(_.map(S=>S.id))}function ve(S,Y){y(Ne([S]),Y)}function b(S){y(Ne(S),!0)}function D(S){y(Ne(S),!1)}function z(S){return!(!a.includes(S.id)||w==="selected"&&!p.includes(S.id)&&!ft(S,Y=>p.includes(Y.id)))}function ge(){return x==="institution"?Object.entries(F).toSorted(([S],[Y])=>{const ee=M.get(S),X=M.get(Y);return ee===X?0:ee===void 0?1:X===void 0?-1:ee-X}).map(([S,{expanded:Y,resources:ee}])=>e.jsx(Hs,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",S]}),resources:ee,selectedResourceIDs:p,resourceScores:g,highlightings:T,expanded:Y,shouldBeShown:z,onSelectAllClick:b,onExpandToggleClick:X=>{L({...F,[S]:{...F[S],expanded:X}})},onDeselectAllClick:D,onSelectClick:ve,languageCodeToName:o,localeForInfos:d},S)):x==="language"?Object.entries(v).toSorted(([S],[Y])=>{const ee=M.get(S),X=M.get(Y);return ee===X?0:ee===void 0?1:X===void 0?-1:ee-X}).map(([S,{expanded:Y,resources:ee}])=>e.jsx(Hs,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",o(S)," [",S,"]"]}),resources:ee,selectedResourceIDs:p,resourceScores:g,highlightings:T,expanded:Y,shouldBeShown:z,onSelectAllClick:b,onExpandToggleClick:X=>v[S].expanded=X,onDeselectAllClick:D,onSelectClick:ve,languageCodeToName:o,localeForInfos:d},S)):_.filter(S=>!S.rootResourceId).map(S=>e.jsx(As,{resource:S,selectedResourceIDs:p,highlighting:T.get(S.id),highlightings:T,shouldBeShown:z,onSelectClick:ve,languageCodeToName:o,localeForInfos:d},S.id))}return e.jsxs(re,{id:"resource-selection-modal",show:n,onHide:()=>J("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(re.Header,{closeButton:!0,children:e.jsx(re.Title,{children:l("search.resourcesModal.title")})}),e.jsxs(re.Body,{className:"px-0",children:[e.jsx(q,{className:"px-3 pb-3 border-bottom",onSubmit:S=>S.preventDefault(),children:e.jsxs(oe,{children:[e.jsxs(te,{className:"d-sm-flex row-gap-2 justify-content-around",children:[e.jsx(U,{md:2,sm:6,children:e.jsx(Ce,{label:"View",controlId:"resource-view-options-visibility",children:e.jsxs(q.Select,{value:w,onChange:Z,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"selected",children:"Selected only"})]})})}),e.jsx(U,{md:2,sm:6,children:e.jsx(Ce,{label:"Group by",controlId:"resource-view-options-grouping",children:e.jsxs(q.Select,{value:x,onChange:ne,children:[e.jsx("option",{value:"resource",children:"(Resource)"}),e.jsx("option",{value:"institution",children:"Institution"}),e.jsx("option",{value:"language",children:"Language"})]})})}),e.jsx(U,{md:2,sm:6,children:e.jsx(Ce,{label:"Sort by",controlId:"resource-view-options-sorting",children:e.jsxs(q.Select,{value:I,onChange:fe,disabled:x!=="resource"||H.trim()!=="",children:[e.jsx("option",{value:"title-up",children:"Title (up)"}),e.jsx("option",{value:"title-down",children:"Title (down)"}),e.jsx("option",{value:"institution-up",children:"Institution (up)"}),e.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),e.jsx(U,{md:3,sm:12,children:e.jsx(Ce,{label:"Resource filter query",controlId:"resource-view-options-filter",children:e.jsx(St,{value:H,onChange:S=>V(S)})})}),e.jsxs(U,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[e.jsx(se,{onClick:Ee,children:"Select all"}),e.jsx(se,{onClick:De,disabled:w!=="all"||H.trim()==="",children:"Select visible"}),e.jsx(se,{onClick:ze,children:"Deselect all"})]})]}),W.size>1&&e.jsxs(q.Group,{as:te,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(q.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:l("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(U,{sm:"auto",children:e.jsx(Je,{type:"radio",name:"resource-info-languages",defaultValue:d,onChange:S=>m(S),children:Array.from(W.entries()).toSorted().map(([S,Y])=>e.jsxs(Fe,{size:"sm",id:`resource-info-languages-${S}`,value:S,variant:"secondary",title:l("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:Y,language:S,languageName:N.of(S)}),children:[N.of(S)," ",e.jsx("sup",{children:S})]},S))})})]})]})}),e.jsx("p",{className:"m-4 mb-0",children:l("search.resourcesModal.msgResourcesSelected",{count:O.selected,total:O.visible,available:O.available,context:O.available!==O.visible?"available":null})}),e.jsx(oe,{className:"px-3 pt-3",children:ge()})]}),e.jsx(re.Footer,{children:e.jsx(se,{variant:"primary",onClick:()=>J("confirm"),children:l("search.resourcesModal.buttonConfirm")})})]})}function gr(){const[n,s]=h.useState(!1);return[n,()=>{n!==!0&&s(!0)}]}function pr(){const n=Ws(),{hash:s}=ws(),t=h.useMemo(()=>new URLSearchParams(s.substring(1)),[s]),r=h.useCallback(a=>{const i=$s(typeof a=="function"?a(new URLSearchParams(t)):a),c=i.entries().next().done?"":`#${i}`;s!==c&&n({hash:c})},[t,s,n]);return[t,r]}const xr=h.lazy(()=>ue(()=>import("./fcs-sru-aggregator-ui-querybuilder.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function Fs(n,s=""){const t=n.get("query");return t||s}function Bs(n,s="cql"){const t=n.get("queryType");if(t){if(Es.find(r=>r.id===t)!==void 0)return t;console.warn("Found unsupported queryType in search params",t)}return s}function fr({resources:n,languages:s,onSearch:t,onShowToast:r,availableResources:a=null,selectedResources:i=null,hasSearch:c=!1,disabled:l=!1}){const{t:u}=ae(),[d,m]=He(),[N,p]=pr(),[C,w]=h.useState(!1),[A,x]=h.useState(gt),[j,I]=h.useState(!1),[f,H]=h.useState(!1),[V,F]=h.useState(!1),[L,v]=gr(),[$,R]=h.useState(Re),[k,W]=h.useState(fs),[_,T]=h.useState(Bs(d,ur)),[g,M]=h.useState(a??[]),[O,o]=h.useState(i??[]),[y,J]=h.useState(is[0]),[Z,ne]=h.useState(Fs(d,"")),[fe]=h.useState(null),[Ee,ze]=h.useState(!1);h.useEffect(()=>{o(i??[])},[i]);const De=h.useCallback(P=>{const Q=Zn(P,_,k==="byGuess"?Re:$);return a&&a.length>0?Q.filter(xe=>a.includes(xe)):Q},[_,$,k,a]);h.useEffect(()=>{const P=De(n);M(P),o(Q=>Q.filter(xe=>P.includes(xe)))},[n,De]);const ve=h.useCallback(()=>{const P={language:$,languageFilter:k,queryType:_,query:Z,resourceIDs:O??[],numberOfResults:y};P.query!==""&&P.resourceIDs.length!==0&&t(P)},[$,k,y,t,Z,_,O]);h.useEffect(()=>{if(d&&(ne(Q=>Fs(d,Q)),T(Q=>Bs(d,Q)),!d.get("x-aggregation-context"))){const Q=d.get("mode");Q&&(Q==="search"&&ve(),d.delete("mode"),m(d))}},[d,m,ve]),h.useEffect(()=>{d.get("query")!==Z&&(d.set("query",Z),m(d))},[Z,d,m]),h.useEffect(()=>{d.get("queryType")!==_&&(d.set("queryType",_),m(d))},[_,d,m]),h.useEffect(()=>{N.has("openQueryBuilder")&&(v(),F(!0),N.delete("openQueryBuilder"),p(N))},[N,p,v]);const b=er(n,O??[]).length,D=n.find(P=>P.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,z=n.find(P=>P.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,ge=Ds.includes(_);function S(P){P&&T(P)}function Y(P){let Q=Number.parseInt(P.target.value);Q<10&&(Q=10),Q>250&&(Q=250),is.includes(Q)||console.warn("Invalid number of results?!",{valid:is,value:Q}),J(Q)}function ee({language:P,filter:Q,action:xe}){I(!1),xe!=="abort"&&(R(P),W(Q))}function X({resourceIDs:P,action:Q}){w(!1),Q!=="abort"&&o(P)}function Se({query:P,queryType:Q,action:xe}){H(!1),xe!=="abort"&&xe!=="close"&&(!P||!Q||(T(Q),ne(P)))}function pe({query:P,validResources:Q,action:xe}){F(!1),xe!=="abort"&&xe!=="close"&&(ne(P),O.length!==Q.length&&r?.({title:u("search.toasts.searchInput.title"),body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:u("search.toasts.searchInput.msgResourcesChangedDueToQuery")}),e.jsx("p",{children:u("search.toasts.searchInput.msgResourcesAmountChanged",{before:O.length,after:Q.length})}),e.jsx("hr",{}),e.jsx(se,{onClick:()=>o(O),children:u("search.toasts.searchInput.buttonRevertSelection")})]}),variant:"info",delay:7e3}),o(Q))}function _s(P){ne(P)}function At(P){P.preventDefault(),ve()}function _t(){const P=(O??[]).length,Q=n.length===P||g.length===P?"all":null;return u("search.searchInput.buttonSelectedResources",{count:P,context:Q})}return e.jsxs("search",{id:"fcs-query",children:[e.jsxs(q,{noValidate:!0,onSubmit:At,children:[e.jsxs(Gt,{size:c?void 0:"lg",hasValidation:!0,children:[e.jsx(se,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":u("search.searchInput.buttonOpenQuerySuggestions"),onClick:()=>H(!0),children:e.jsx("i",{dangerouslySetInnerHTML:{__html:tt},"aria-hidden":"true"})}),e.jsx(q.Control,{placeholder:"Elephant","aria-label":u("search.searchInput.inputQueryAriaLabel"),"aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:l,"aria-disabled":l,value:Z,isInvalid:!!fe,...Ee?{as:wt,queryType:_,onChange:_s}:{onChange:P=>_s(P.target.value)}}),ge&&e.jsx(se,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":u("search.searchInput.buttonOpenQueryBuilderAriaLabel"),className:"border-end-0 d-none d-md-block",onClick:()=>{v(),F(!0)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})}),e.jsx(Fe,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:Ee,onChange:()=>ze(P=>!P),variant:"outline-secondary","aria-label":u("search.searchInput.buttonEnhanceQueryAriaLabel",{context:Ee?"enabled":"disabled"}),className:"d-flex align-items-center border-end-0",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:ot},"aria-hidden":"true"})}),e.jsxs(se,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:l||Z.trim().length===0,"aria-disabled":l,"aria-label":u("search.searchInput.buttonSearchAriaLabel"),children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:lt},"aria-hidden":"true",className:"d-inline d-md-none"}),e.jsx("span",{className:"d-none d-md-inline",children:u("search.searchInput.buttonSearch")})]}),e.jsx(q.Control.Feedback,{type:"invalid",children:fe?.msg})]}),e.jsx("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:e.jsx(K,{i18nKey:"search.searchInput.filtersSummary",components:[e.jsxs(ce,{className:"d-inline-block",onSelect:S,"aria-disabled":l,"aria-label":u("search.searchInput.dropdownQueryTypeAriaLabel"),children:[e.jsxs(ce.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:l,"aria-disabled":l,style:os[_]?{"--color":os[_].color}:{},children:[u(`queryTypes.${_}.nameShort`,{ns:"common",defaultValue:os[_]?.searchLabel??_.toUpperCase()})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:We},"aria-hidden":"true"})]}),e.jsx(ce.Menu,{children:Es.filter(P=>P.id==="cql"||P.id==="fcs"&&D||P.id==="lex"&&z).map(P=>e.jsx(ce.Item,{as:"button",eventKey:P.id,onClick:Q=>Q.preventDefault(),style:{"--color":P.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:u(`queryTypes.${P.id}.nameLong`,{ns:"common",defaultValue:P.name})},P.id))})]}),e.jsxs(se,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:l,"aria-disabled":l,onClick:()=>{x("resource"),w(!0)},children:[_t()," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:We},"aria-hidden":"true"})]}),e.jsxs(se,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:l,"aria-disabled":l,onClick:()=>{x("institution"),w(!0)},children:[u("search.searchInput.buttonSelectedInstitutions",{count:b})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:We},"aria-hidden":"true"})]}),e.jsxs(se,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>I(!0),disabled:l,"aria-disabled":l,children:[us($,s??{},{defaultAnyLanguage:u("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:u("languageCodeToName.unknown",{ns:"common"})})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:We},"aria-hidden":"true"})]}),e.jsx(q.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:Y,value:y,"aria-label":u("search.searchInput.selectNumberOfSearchResultsAriaLabel"),disabled:l,"aria-disabled":l,children:is.map(P=>e.jsx("option",{value:P,children:P},P))})]})})]}),e.jsx(vt,{languages:s,resources:n,searchLanguage:$,show:j,onModalClose:ee}),e.jsx(mr,{resources:n,languages:s,availableResources:g,selectedResources:O??[],show:C,showGrouping:A,onModalClose:X}),e.jsx(hr,{queryTypes:[_],show:f,onModalClose:Se}),Ds.includes(_)&&L&&e.jsx(h.Suspense,{fallback:e.jsx(e.Fragment,{children:u("loading",{ns:"querybuilder",defaultValue:u("generic.loadingComponent",{ns:"common"})})}),children:e.jsx(xr,{query:Z,queryType:_,resources:n,selectedResources:O,show:V,onModalClose:pe})})]})}function jr({searchId:n,resourceId:s,numberOfResults:t,pollDelay:r=1500}){const{t:a}=ae(),i=Te(),c=vs(),[l,u]=h.useState(!1),{isPending:d,mutate:m,reset:N}=Qs({mutationFn:ln.bind(null,i,n,{resourceId:s,numberOfResults:t}),mutationKey:["search-result-load-more",n,s],onSuccess:async f=>{f!==void 0&&n!==f&&console.warn("SearchIDs should be the same?!",{searchId:n,searchIdNewButSame:f,resourceId:s}),await c.invalidateQueries({queryKey:["search-results",n,s]}),u(!0)}});r??=1500;const{data:p,isLoading:C,isFetching:w}=Le({queryKey:["search-results",n,s],queryFn:un.bind(null,i,n,s),enabled:l,refetchInterval(f){return f.state.data&&f.state.data.inProgress?r:!1}}),A=d||C||w,x=!!p&&!p.inProgress,j=A||l;l&&x&&(l&&u(!1),c.invalidateQueries({queryKey:["search-result-details",n,s]}));async function I(){N(),m()}return e.jsx(se,{className:"more-results-button",disabled:j,onClick:I,children:j?e.jsx(Xs,{animation:"border",className:"d-block"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:dt}})," ",a("search.results.buttonLoadMore")]})})}function br(n,s=".."){const t=n.map(l=>l.split("/")),r=Math.max(...t.map(l=>l.length)),i=Array.from(Array(r).keys()).map(l=>new Set(t.map(u=>u.length>l?u[l]:!1)).size===1).reduce((l,u,d,m,N=s??"..")=>u?l&&l[l.length-1]!==N?l.concat([N]):l:l.concat([d]),[]);return n.map(l=>[l,l.split("/")]).map(([l,u])=>[l,i.map(d=>typeof d=="number"?u[d]:d).join("/").replace(/\/+$/,"")]).reduce((l,[u,d])=>l.set(u,d),new Map)}function yr(n,s){const t=n.filter(a=>a.spans.every(i=>i.text&&i.text.length===(i.range?.[1]??0)-(i.range?.[0]??0))||a.spans.every(i=>i.text&&i.text.length===(i.range?.[1]??0)-(i.range?.[0]??0)+1));return s?t.filter(a=>{const i=s.get(a.id);return i?!!["text","word"].includes(i.layerType.toLowerCase()):!0}).toSorted((a,i)=>{const c=s.get(a.id),l=s.get(i.id);if(c===void 0||l===void 0){if(c===l)return 0;if(c===void 0)return 1;if(l===void 0)return-1}const u=c.layerType.toLowerCase(),d=l.layerType.toLowerCase();if(u==="word"||d==="word"){if(u===d)return 0;if(u==="word")return-1;if(d==="word")return 1}if(c.qualifier!==null&&c.qualifier!==void 0||l.qualifier!==null&&l.qualifier!==void 0){if(c.qualifier!==null&&c.qualifier!==void 0&&l.qualifier!==null&&l.qualifier!==void 0)return 0;if(c.qualifier!==null&&c.qualifier!==void 0)return 1;if(l.qualifier!==null&&l.qualifier!==void 0)return-1}return 0}):t}function Lt({data:n,resource:s}){const t=h.useRef(null),r=s?.availableLayers?.reduce((i,c)=>i.set(c.resultId,c),new Map);function a(i){const c=i.map(p=>p.id),l=br(c),u=Math.max(...i.map(p=>p.spans.length)),m=yr(i,r)?.[0]?.id;i.sort((p,C)=>m===void 0?0:p.id===m?-1:C.id===m?1:0);const N=c.length>1;return e.jsxs(le,{hover:!0,responsive:!0,className:"mb-0 results-plain",style:{width:"unset"},children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[r!==void 0&&N&&e.jsx("th",{scope:"col",children:"Layer Type"}),N&&e.jsx("th",{scope:"col",children:"Layer Identifier"}),Array(u).fill(null).map((p,C)=>e.jsx("th",{scope:"col",children:"Token"},C))]})}),e.jsx("tbody",{children:i.map(p=>e.jsxs("tr",{className:["text-nowrap"].concat([p.id===m&&i.length>1?"table-primary":null]).filter(Boolean).join(" "),children:[r!==void 0&&N&&e.jsx("td",{scope:"row",className:"text-uppercase",children:r.get(p.id)?.layerType}),N&&e.jsx("td",{scope:"row",title:p.id,className:"border-end",children:l.get(p.id)}),p.spans.map((C,w)=>e.jsx("td",{children:C.hit?e.jsx("mark",{children:e.jsx("strong",{children:C.text})},w):C.text},C.range?.join("-")??w))]},p.id))})]})}return e.jsxs(e.Fragment,{children:[e.jsxs(le,{responsive:!0,striped:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Annotation Layers"})]})}),e.jsx("tbody",{children:n.records.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:c+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[i.ref&&e.jsx("a",{href:i.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})})," ",i.pid&&e.jsx(Oe,{placement:"auto-start",container:t,delay:{show:250,hide:400},overlay:e.jsx(Be,{id:`ttip-${i.pid}-${c}`,children:i.pid}),children:e.jsx(ye,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:a(i.adv)})]},`${i.pid??i.ref??n.resource.id}-${c}`))})]}),e.jsx("div",{ref:t,className:"tooltip-mounting-point"})]})}function Nt({data:n}){const s=h.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(le,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Left Context"}),e.jsx("th",{scope:"col",children:"Hit"}),e.jsx("th",{scope:"col",children:"Right Context"})]})}),e.jsx("tbody",{children:n.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})})," ",t.pid&&e.jsx(Oe,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ye,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.left}),e.jsx("td",{children:t.hits.keyword&&e.jsx("mark",{children:e.jsx("strong",{children:t.hits.keyword})})}),e.jsx("td",{children:t.hits.right})]},`${t.pid??t.ref??n.resource.id}-${r}`))})]}),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function Ct({data:n}){const s=h.useRef(null);return e.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[n.records.map((t,r)=>e.jsx(E,{className:"flex-grow-1 w-100",children:e.jsxs(E.Body,{children:[e.jsx(E.Title,{children:t.lex.fields.filter(a=>a.type==="lemma").map(a=>a.values).flat(1).map(a=>e.jsx("span",{children:a.value}))}),e.jsxs(Qe,{variant:"flush",children:[(t.lex.lang||t.lex.langUri)&&e.jsxs(Qe.Item,{children:[e.jsx("strong",{children:"lang"}),": ",t.lex.lang," ",t.lex.langUri]}),t.lex.fields.filter(a=>a.type!=="lemma").map(a=>e.jsxs(Qe.Item,{children:[e.jsx("strong",{children:a.type}),":",a.values.map((i,c)=>e.jsx("span",{className:"ms-2 lex-value",children:i.value},c))]},a.type))]}),e.jsx(E.Link,{children:t.ref&&e.jsxs("a",{href:t.ref,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})," Original results ..."]})}),e.jsx(E.Link,{children:t.pid&&e.jsx(Oe,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ye,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${t.pid??t.ref??n.resource.id}-${r}`)),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function It({data:n}){const s=h.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(le,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:n.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})})," ",t.pid&&e.jsx(Oe,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ye,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.fragments.map((a,i)=>a.hit&&!a.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:a.text})},i):a.hit&&a.hitKind?e.jsx("span",{className:`lex-hitkind-${a.hitKind}`,title:`Annotated as "${a.hitKind.split("-").slice(1).join("-")}"`,children:a.text},i):e.jsx("span",{children:a.text},i))})]},`${t.pid??t.ref??n.resource.id}-${r}`))})]}),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function Tt({data:n}){const s=h.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(le,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:n.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})})," ",t.pid&&e.jsx(Oe,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ye,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.fragments.map((a,i)=>a.hit&&!a.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:a.text})},i):e.jsx("span",{children:a.text},i))})]},`${t.pid??t.ref??n.resource.id}-${r}`))})]}),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function wr({show:n,searchId:s,resourceId:t,result:r,viewMode:a,showDiagnostics:i,onModalClose:c}){const l=Te(),{t:u}=ae(),d=je(g=>g.locale),{languages:m,resources:N,weblichtLanguages:p}=Ls(),{numberOfResults:C,queryType:w,language:A,languageFilter:x}=Is(),[j,I]=h.useState(d);h.useEffect(()=>{d&&I(d)},[d]);const f=new Intl.DisplayNames([d,"en"],{type:"language"}),[H,V]=h.useState(i);h.useEffect(()=>V(i),[i]);const[F,L]=h.useState(a);h.useEffect(()=>L(a),[a]);const v=es(r.resource),$=r.exception||r.diagnostics?.filter(g=>g.uri!==Ie).length>0;function R(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.records.length,!0)}let k=null,W=!1;if(!p.includes(A)){if(A===Re)if(r.resource.languages&&r.resource.languages.length===1)k=r.resource.languages[0];else{const g=[...new Set(r.records.map(M=>M.lang).filter(M=>M!==null))];g.length===1&&(k=g[0])}k||(console.warn("Cannot use WebLicht: unsupported language",{language:A,languageFilter:x}),W=!0)}function _(g){L(g.target.value)}function T(){if(!r)return null;if(F==="annotation-layers"&&r.hasAdvResults){const g=Ge(N,M=>M.id===r.id);return e.jsx(Lt,{data:r,resource:g})}return F==="kwic"&&(w!=="lex"||!r.isLexHits)?e.jsx(Nt,{data:r}):F==="lexical-entry"&&r.hasLexResults?e.jsx(Ct,{data:r}):w==="lex"&&r.isLexHits?e.jsx(It,{data:r}):e.jsx(Tt,{data:r})}return e.jsxs(re,{show:n,onHide:()=>c(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[e.jsx(re.Header,{closeButton:!0,children:e.jsx(re.Title,{children:B(r.resource.title,j)})}),e.jsxs(re.Body,{className:"resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":u("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",u("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:B(r.resource.institution,j)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ss}})," ",u("search.results.resourceInfo.labelDescription")]}),B(r.resource.description,j)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:B(r.resource.description,j)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",u("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:r.resource.languages.map(m?g=>us(g,m,{defaultAnyLanguage:u("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:u("languageCodeToName.unknown",{ns:"common"})}):g=>g).toSorted().join(", ")}),v&&v.length>1&&e.jsx(Je,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:j,onChange:g=>I(g),className:"mt-2 mb-3",children:v.toSorted().map(g=>e.jsxs(Fe,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${g}`,value:g,children:[f.of(g)," ",e.jsx("sup",{children:g})]},g))}),e.jsx("dt",{children:u("search.results.resourceInfo.labelPID")}),e.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&e.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:cs}})," ",u("search.results.resourceInfo.moreInformation")]}),e.jsx("hr",{}),e.jsxs(te,{className:"row-gap-2",children:[e.jsx(U,{lg:"auto",md:3,sm:6,children:e.jsx(Ce,{label:u("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(q.Select,{value:F,onChange:_,children:[e.jsx("option",{value:"plain",children:u("search.results.displayOptions.viewModeOptions.plain")}),(w!=="lex"||!r.isLexHits)&&e.jsx("option",{value:"kwic",children:u("search.results.displayOptions.viewModeOptions.kwic")}),w==="fcs"&&e.jsx("option",{value:"annotation-layers",children:u("search.results.displayOptions.viewModeOptions.annotation-layers")}),w==="lex"&&e.jsx("option",{value:"lexical-entry",children:u("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(U,{lg:3,md:3,sm:6,className:"align-content-center",children:e.jsx(q.Check,{disabled:!$,checked:H,onChange:()=>V(g=>!g),id:"results-modal-view-warnings-errors",label:u("search.results.displayOptions.optionShowWarningsErrors")})}),e.jsxs(U,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[e.jsxs(ce,{children:[e.jsxs(ce.Toggle,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:nt}})," ",u("search.results.buttonDownload")]}),e.jsx(ce.Menu,{children:cr.map(({id:g,label:M})=>e.jsx(ce.Item,{href:hn(l,s,t,g,A,x),className:"matomo_download",children:e.jsx(K,{i18nKey:"search.results.msgButtonDownloadOption",values:{label:u(`downloadFormats.${g}.name`,{ns:"common",defaultValue:M})}})},g))})]}),e.jsxs(se,{disabled:W,"aria-disabled":W,href:mn(l,s,t,k,A,x),className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:rt}})," ",u("search.results.buttonSendToWeblicht")]})]})]}),e.jsx("hr",{}),e.jsx("p",{children:e.jsx(K,{i18nKey:"search.results.msgShowingXresults",values:{count:r.records.length,context:R()?"hasmore":null,total:r.numberOfRecords}})}),T()]}),H&&$&&e.jsxs(re.Body,{className:"border-top",children:[r.exception&&e.jsxs(he,{variant:"danger","aria-label":u("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(he.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:u("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":u("search.results.diagnostics.msgAriaLabel"),children:r.exception.message})]}),r.exception.cause&&e.jsx("p",{className:"mb-0 small",children:u("search.results.diagnostics.msgCause",{cause:r.exception.cause})}),r.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:r.exception.klass}})})]}),r.diagnostics.filter(g=>g.uri!==Ie).map(g=>e.jsxs(he,{variant:"warning",children:[e.jsx(he.Heading,{style:{fontSize:"1rem"},children:g.message}),g.diagnostic&&e.jsx("p",{className:"mb-0 small",children:u("search.results.diagnostics.msgDiagnosticDetails",{details:g.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:g.uri}})})]},`${g.uri}-${g.message}-${g.diagnostic}`))]}),R()&&e.jsx(re.Footer,{className:"justify-content-center border-top py-2",children:e.jsx(jr,{searchId:s,resourceId:t,numberOfResults:C})})]})}function vr({searchId:n,resourceId:s,resultInfo:t,viewMode:r,showResourceDetails:a,showDiagnostics:i}){const c=Te(),{t:l}=ae(),u=je(g=>g.locale),{languages:d,resources:m}=Ls(),{queryType:N}=Is(),[p,C]=h.useState(u);h.useEffect(()=>{u&&C(u)},[u]);const w=new Intl.DisplayNames([u,"en"],{type:"language"}),A=h.useId(),[x,j]=h.useState(!0),[I,f]=h.useState(!1),H=t.inProgress,V=t.numberOfRecordsLoaded>0,F=t.exception||t.diagnostics?.filter(g=>g.uri!==Ie).length>0,{data:L,isLoading:v,isError:$}=Le({queryKey:["search-result-details",n,s],queryFn:dn.bind(null,c,n,s),enabled:!H}),R=L?es(L.resource):[];if(H||!V&&(i&&!F||!i)||!L)return null;function k(){f(!0)}function W(){f(!1)}function _(){return L?L.numberOfRecords===-1?L.records.length:L.numberOfRecords===L.records.length&&L.nextRecordPosition===-1?`${L.records.length} / ${L.numberOfRecords}?`:`${L.records.length} / ${L.numberOfRecords}`:null}function T(){if(!L)return null;if(r==="annotation-layers"&&L.hasAdvResults){const g=Ge(m,M=>M.id===L.id);return e.jsx(Lt,{data:L,resource:g})}return r==="kwic"&&(N!=="lex"||!L.isLexHits)?e.jsx(Nt,{data:L}):r==="lexical-entry"&&L.hasLexResults?e.jsx(Ct,{data:L}):N==="lex"&&L.isLexHits?e.jsx(It,{data:L}):e.jsx(Tt,{data:L})}return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"my-1 resource-search-result",role:"group","aria-label":l("search.results.resultResourceAriaLabel",{title:L.resource.title}),children:[e.jsxs(E.Header,{className:"d-flex accordion",children:[e.jsxs("button",{type:"button",onClick:()=>j(g=>!g),"aria-controls":A,"aria-expanded":x,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${x?"":"collapsed"}`,children:[e.jsx(ye,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":l("search.results.resultCountAriaLabel"),children:_()}),e.jsx("span",{"aria-label":l("search.results.resultResourceTitleAriaLabel"),className:"user-select-text",children:B(L.resource.title,p)}),e.jsx("small",{className:"text-muted user-select-text","aria-label":l("search.results.resultResourceInstitutionAriaLabel"),children:B(L.resource.institution,p)})]}),e.jsx("div",{className:"d-inline-block ms-auto",children:e.jsxs(se,{size:"sm",onClick:k,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:it}})," View"]})})]}),e.jsx(Ys,{in:x,children:e.jsxs("div",{id:A,children:[a&&e.jsxs(E.Body,{className:"border-bottom resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":l("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",l("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:B(L.resource.institution,p)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ss}})," ",l("search.results.resourceInfo.labelDescription")]}),B(L.resource.description,p)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:B(L.resource.description,p)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",l("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:L.resource.languages.map(d?g=>us(g,d,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})}):g=>g).toSorted().join(", ")})]}),R&&R.length>1&&e.jsx(Je,{type:"radio",name:`${L.resource.id}-result-info-languages`,defaultValue:p,onChange:g=>C(g),className:"mt-2",children:R.toSorted().map(g=>e.jsxs(Fe,{variant:"outline-secondary",size:"sm",id:`${L.resource.id}-result-info-languages-${g}`,value:g,children:[w.of(g)," ",e.jsx("sup",{children:g})]},g))})]}),V&&e.jsx(E.Body,{children:T()}),i&&F&&e.jsxs(E.Body,{className:V?"border-top":"",children:[L.exception&&e.jsxs(he,{variant:"danger","aria-label":l("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(he.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:l("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":l("search.results.diagnostics.msgAriaLabel"),children:L.exception.message})]}),L.exception.cause&&e.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgCause",{cause:L.exception.cause})}),L.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:L.exception.klass}})})]}),L.diagnostics.filter(g=>g.uri!==Ie).map(g=>e.jsxs(he,{variant:"warning",children:[e.jsx(he.Heading,{style:{fontSize:"1rem"},children:g.message}),g.diagnostic&&e.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgDiagnosticDetails",{details:g.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:g.uri}})})]},`${g.uri}-${g.message}-${g.diagnostic}`))]})]})})]}),e.jsx(wr,{show:I,searchId:n,resourceId:s,result:L,viewMode:r,showDiagnostics:i,onModalClose:W})]})}const Sr="plain",Rr="lexical-entry",Lr="plain",Nr="default",Cr={default:()=>()=>0,"title-up":n=>(s,t)=>{const r=ie.getState().locale,a=B(n.get(s.id)?.title??null,r)??"",i=B(n.get(t.id)?.title??null,r)??"";return a.localeCompare(i)},"title-down":n=>(s,t)=>{const r=ie.getState().locale,a=B(n.get(s.id)?.title??null,r)??"",i=B(n.get(t.id)?.title??null,r)??"";return-a.localeCompare(i)},"result-count-total-up":()=>(n,s)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded,r=s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded;return t-r},"result-count-total-down":()=>(n,s)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded;return(s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded)-t}},qs=1500;function Ir({searchId:n,pollDelay:s=qs}){const{t}=ae(),r=Te(),{resources:a}=Ls(),{query:i,queryType:c,resourceIDs:l}=Is(),[u,d]=h.useState(c==="lex"?Rr:c==="fcs"?Lr:Sr),[m,N]=h.useState(Nr),[p,C]=h.useState(""),[w,A]=h.useState(!1),[x,j]=h.useState(!1),I=h.useMemo(()=>{const o=new Map;return a?.forEach(y=>{o.set(y.id,y)}),Cr[m](o)},[m,a]);s??=qs;const{data:f}=Le({queryKey:["search-results",n],queryFn:cn.bind(null,r,n??""),enabled:!!n,refetchInterval(o){return o.state.data&&o.state.data.inProgress>0?s:!1}}),H=h.useMemo(()=>f?.results.toSorted(I)||[],[f,I]),V=c==="lex"&&f?.results.every(o=>o.numberOfRecords<=0||o.isLexHits===!0),F=l.length,L=f?.inProgress??F,v=h.useMemo(()=>f?.results.filter(o=>(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)>0).length??0,[f]),$=h.useMemo(()=>f?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)>0&&o.diagnostics.filter(y=>y.uri!==Ie).length>0).length??0,[f]),R=h.useMemo(()=>f?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)<=0&&o.diagnostics.filter(y=>y.uri!==Ie).length===0&&o.exception===null).length??0,[f]),k=h.useMemo(()=>f?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)<=0&&(o.diagnostics.filter(y=>y.uri!==Ie).length>0||o.exception!==null)).length??0,[f]),W=h.useMemo(()=>f?.results.filter(o=>!o.inProgress&&o.numberOfRecords<=0&&o.exception!==null).length??0,[f]),_=h.useMemo(()=>f?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)<=0&&o.diagnostics.filter(y=>y.uri!==Ie).length>0&&o.exception===null).length??0,[f]),T=h.useMemo(()=>f?.results.map(o=>o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded).reduce((o,y)=>o+y,0)??0,[f]),g=h.useMemo(()=>f?.results.map(o=>o.numberOfRecordsLoaded).reduce((o,y)=>o+y,0)??0,[f]);{const[o,y]=h.useState(!1);h.useEffect(()=>{f&&L===0&&(o||(y(!0),mt(i,c,g)))},[f,L,i,c,n,o,g])}function M(o){d(o.target.value)}function O(o){N(o.target.value)}return e.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[e.jsx(Oe,{placement:"auto",overlay:e.jsxs(ds,{id:"search-progress-information-popover",children:[e.jsx(ds.Header,{children:t("search.results.progressPopover.title")}),e.jsxs(ds.Body,{style:{textIndent:"2rem hanging"},children:[e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesRequested",count:F})}),L>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesRequestedPending",count:L})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResults",count:R+k})}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsOK",count:R})}),_>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsWarnings",count:_})}),W>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsErrors",count:W})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithResults",count:v})}),$>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithResultsWarnings",count:$})}),e.jsx("hr",{className:"mt-2 mb-0"}),e.jsx("hr",{className:"mt-1 mb-1"}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithResultsTotal",count:g,values:{available:T}})})]})]}),children:e.jsxs(ns,{className:"mb-3",children:[e.jsx(ns,{variant:"success",now:v,max:F,label:e.jsx("span",{children:t("search.results.progressBar.numWithResults",{count:v})}),"aria-label":t("search.results.progressBar.numWithResultsAriaLabel")}),e.jsx(ns,{variant:"secondary",now:R+k,max:F,label:e.jsx("span",{children:t("search.results.progressBar.numWithResults",{count:R+k})}),"aria-label":t("search.results.progressBar.numWithoutResultsAriaLabel")}),e.jsx(ns,{striped:!0,animated:!0,now:L,max:F,label:e.jsx("span",{children:t("search.results.progressBar.numResultsPending",{count:L})}),"aria-label":t("search.results.progressBar.numResultsPendingAriaLabel")})]})}),e.jsx(E,{className:"mb-2",role:"group","aria-label":t("search.results.displayOptions.cardAriaLabel"),children:e.jsx(E.Body,{children:e.jsxs(te,{className:"row-gap-2",children:[e.jsx(U,{lg:"auto",md:6,sm:6,children:e.jsx(Ce,{label:t("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(q.Select,{value:u,onChange:M,children:[e.jsx("option",{value:"plain",children:t("search.results.displayOptions.viewModeOptions.plain")}),(c!=="lex"||!V)&&e.jsx("option",{value:"kwic",children:t("search.results.displayOptions.viewModeOptions.kwic")}),c==="fcs"&&e.jsx("option",{value:"annotation-layers",children:t("search.results.displayOptions.viewModeOptions.annotation-layers")}),c==="lex"&&e.jsx("option",{value:"lexical-entry",children:t("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(U,{lg:"auto",md:6,sm:6,children:e.jsx(Ce,{label:t("search.results.displayOptions.sortingLabel"),controlId:"results-sorting",children:e.jsxs(q.Select,{value:m,onChange:O,children:[e.jsx("option",{value:"default",children:t("search.results.displayOptions.sortingOptions.default")}),e.jsx("option",{value:"title-up",children:t("search.results.displayOptions.sortingOptions.title-up")}),e.jsx("option",{value:"title-down",children:t("search.results.displayOptions.sortingOptions.title-down")}),e.jsx("option",{value:"result-count-total-up",children:t("search.results.displayOptions.sortingOptions.result-count-total-up")}),e.jsx("option",{value:"result-count-total-down",children:t("search.results.displayOptions.sortingOptions.result-count-total-down")})]})})}),e.jsx(U,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:e.jsx(Ce,{label:t("search.results.displayOptions.resultFilterQueryLabel"),controlId:"result-filter",children:e.jsx(St,{disabled:m!=="default"||!0,value:p,onChange:o=>C(o)})})}),e.jsxs(U,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[e.jsx(q.Check,{checked:w,onChange:()=>A(o=>!o),id:"results-view-resource-details",label:t("search.results.displayOptions.optionShowResultDetails")}),e.jsx(q.Check,{checked:x,onChange:()=>j(o=>!o),id:"results-view-warnings-errors",label:t("search.results.displayOptions.optionShowWarningsErrors")})]})]})})}),n&&f&&H.map(o=>e.jsx(vr,{searchId:n,resourceId:o.id,resultInfo:o,viewMode:u,showResourceDetails:w,showDiagnostics:x},`${n}-${o.id}`))]})}const Tr=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,Vs=""+new URL("assets/logo-fcs.png",import.meta.url).href;function Er(){const n=Te(),{t:s}=ae(),[t,r]=He(),[a,i]=h.useState([]),[c,l]=h.useState({}),[u,d]=h.useState([]),[m,N]=h.useState(null),[p,C]=h.useState(!1),[w,A]=h.useState(null),[x,j]=h.useState([]),I=G.getState().appTitleHead,f=G.getState().isAuthenticated,H={consortia:t.get(we)},{data:V,isLoading:F,isError:L}=Le({queryKey:["init"],queryFn:nn.bind(null,n,H)});h.useEffect(()=>{if(!V)return;const T=Ts(V.resources);l(V.languages),d(V.weblichtLanguages),i(T);{const g=Jn(T,O=>O.availabilityRestriction==="NONE"),M=(g.get(!1)??[]).length;if(!f&&M>0){g.get(!1);const O=g.get(!0);N(O),j(o=>[...o,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(K,{i18nKey:"search.toasts.resourceSelection.msgAuthOnlyResourcesNotSelected",count:M}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:(g.get(!1)??[]).map(y=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:y}))})]}),variant:"success"}])}else N(Ne(T))}},[V,f,s]),h.useEffect(()=>{if(!a||a.length===0)return;const T=t.get("x-aggregation-context");if(T){try{const g=JSON.parse(T),{selected:M,unavailable:O}=Xn(a,g);M.length>0&&(N(M),j(o=>[...o,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(K,{i18nKey:"search.toasts.resourceSelection.msgPreselectedResources",count:M.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:M.map(y=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:y}))})]}),variant:"success"}])),O.length>0&&j(o=>[...o,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(K,{i18nKey:"search.toasts.resourceSelection.msgUnableToSelectResources",count:O.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:O.map(y=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:y}))})]}),variant:"warning"}])}catch(g){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:T},g),g instanceof Error&&j(M=>[...M,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[s("search.toasts.resourceSelection.msgErrorUnableToSelectResources",{error:g.name}),e.jsx("br",{}),e.jsx("small",{children:g.message})]}),variant:"error"}])}t.delete("x-aggregation-context"),r(t)}},[a,t,r,s]);const v=F||L,{mutate:$,data:R,isPending:k}=Qs({mutationKey:["search"],mutationFn:({query:T,queryType:g,language:M,numberOfResults:O,resourceIDs:o})=>on(n,{query:T,queryType:g,language:M,numberOfResults:O.toString(),resourceIds:o})});function W(T){N(T.resourceIDs),A(T),C(!0),mt(T.query,T.queryType),$(T)}function _(T){j(g=>[...g,T])}return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{children:e.jsx("title",{children:I})}),e.jsxs(oe,{id:"search",children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:e.jsx(Yt,{position:"top-end",className:"mt-2",style:{zIndex:100},children:x.map((T,g)=>e.jsxs(hs,{bg:T.variant,onClose:()=>j(M=>M.filter(O=>O!==T)),delay:T.delay??5e3,autohide:!0,children:[e.jsx(hs.Header,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:T.title})}),e.jsx(hs.Body,{children:T.body})]},g))})}),!p&&e.jsx(te,{children:e.jsx(U,{className:"text-center",children:e.jsxs("picture",{children:[e.jsx("source",{srcSet:Vs,media:"(prefers-color-scheme: light)"}),e.jsx("source",{srcSet:Tr,media:"(prefers-color-scheme: dark)"}),e.jsx("img",{src:Vs,className:"logo",alt:"FCS logo"})]})})}),e.jsx(te,{className:"mt-3",children:e.jsx(U,{children:e.jsx(fr,{resources:a,languages:c,availableResources:null,selectedResources:m,onSearch:W,onShowToast:_,hasSearch:p,disabled:v})})}),!p&&e.jsx(te,{className:"mt-3",children:e.jsxs(U,{children:[e.jsx("p",{children:e.jsx(K,{i18nKey:"search.intro.textGeneral"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"search.intro.textLearnMore",components:[e.jsxs("a",{href:s("search.intro.url"),children:["page ",e.jsx("em",{children:"Content Search"})," at CLARIN.eu"]})]})})]})}),p&&k&&e.jsx(te,{children:e.jsx(U,{className:"text-center my-5",children:e.jsx(Xs,{animation:"border"})})}),w&&R&&e.jsx(qn,{resources:a,languages:c,weblichtLanguages:u,children:e.jsx(zn,{...w,children:e.jsx(Ir,{searchId:R})})})]})]})}function Ar(){const n=Ws(),[s]=Ue();return h.useCallback((r,a,i)=>{const c=Dt(r,a);n({pathname:c,search:s},i)},[n,s])}function _r(){const n=h.useContext(Ht),s=ws(),t=n.matches.map(a=>a.route),r=Ft(t,s);return r!==null&&r.length>0?r[0]:null}const _e="resource",kr="institution",Mr="url";function Et(n){const s=new URL(n).hostname,t=s.split(".");if(t.length<=1)return s;const r=t.at(-1);if(t.length===2)return r;const a=t.at(-2);return r.length===2&&a.length===2||r.length===3&&a.length===2?`${a}.${r}`:r}function Pr(n){const s=Et(n),t=new URL(n),l=`${t.hostname.slice(0,-(s.length+1)).split(".").slice(-1)}.${s}`;return t.port?`${l}:${t.port}`:l}function zs(n){const s=new URL(n),r=s.hostname.split(".").toReversed(),a=n.substring(n.indexOf("/",s.protocol.length+2+s.hostname.length));return[...r,s.port,a]}function ms(n,s){const t=zs(n),r=zs(s),a=Math.min(t.length,r.length);for(let i=0;i<a;i++){const c=t[i],l=r[i],u=c.localeCompare(l);if(u!==0)return u}return 0}function Or(){const n=Te();vs();const{t:s}=ae(),t=je(b=>b.locale),[,r]=Ue(),[a,i]=He(),[c,l]=h.useState([]),[u,d]=h.useState([]),[m,N]=h.useState({}),[p,C]=h.useState(kr),[w,A]=h.useState(Mr),[x,j]=h.useState(!1);a.get(we)?.split(",");const I={consortia:a.get(we)},{data:f,isPending:H,isError:V,error:F}=Le({queryKey:["resources"],queryFn:et.bind(null,n,I)}),{data:L,isPending:v,isError:$,error:R}=Le({queryKey:["languages"],queryFn:rn.bind(null,n,I)}),{data:k,isPending:W,isError:_,error:T}=Le({queryKey:["resources-all"],queryFn:()=>[]});h.useEffect(()=>{if(!f)return;const b=Ts(f);l(b)},[f]),h.useEffect(()=>{L&&N(L)},[L]);const g=pt(c),M=g.reduce((b,D)=>{const z=D.endpoint.url;return b.has(z)||b.set(z,[]),b.get(z).push(D),b},new Map),O=Array.from(M.keys()).reduce((b,D)=>{const z=Pr(D);return b.has(z)||b.set(z,[]),b.get(z).push(D),b},new Map),o=Array.from(M.keys()).reduce((b,D)=>{const z=Et(D);return b.has(z)||b.set(z,[]),b.get(z).push(D),b},new Map),y=g.reduce((b,D)=>{const z=B(D.institution,t)??D.endpointInstitution.name;return b.has(z)||b.set(z,[]),b.get(z).push(D),b},new Map),J=g.reduce((b,D)=>{const z=D.endpointInstitution.name;return b.has(z)||b.set(z,[]),b.get(z).push(D),b},new Map),Z=g.reduce((b,D)=>{const z=D.searchCapabilitiesResolved;for(const ge of z)b.has(ge)||b.set(ge,[]),b.get(ge).push(D);return b},new Map),ne=g.reduce((b,D)=>{const z=D.availabilityRestriction;return b.has(z)||b.set(z,[]),b.get(z).push(D),b},new Map),fe=c&&c.length>0,Ee=m&&Object.getOwnPropertyNames(m).length>0,ze=fe&&Ee,De=Array.from(ne.keys()).filter(b=>b!=="NONE").length>0;function ve(){return w==="tld"?e.jsxs(le,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thEndpointDomain")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountURLsForDomain")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from(o.entries()).toSorted(([b],[D])=>ms(`http://${b}`,`http://${D}`)).map(([b,D])=>{const z=D.map(ge=>M.get(ge)).flat();return e.jsxs("tr",{children:[e.jsx("td",{children:b}),e.jsx("td",{children:D.length}),e.jsx("td",{children:z.length})]},b)})})]}):w==="domain"?e.jsxs(le,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thEndpointDomain")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountURLsForDomain")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from(O.entries()).toSorted(([b],[D])=>ms(`http://${b}`,`http://${D}`)).map(([b,D])=>{const z=D.map(ge=>M.get(ge)).flat();return e.jsxs("tr",{children:[e.jsx("td",{children:b}),e.jsx("td",{children:D.length}),e.jsx("td",{children:z.length})]},b)})})]}):e.jsxs(le,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thEndpointUrl")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from(M.entries()).toSorted(([b],[D])=>ms(b,D)).map(([b,D])=>e.jsxs("tr",{children:[e.jsx("td",{children:b}),e.jsx("td",{children:D.length})]},b))})]})}return e.jsxs(oe,{className:"d-grid gap-2 mt-3",children:[(H||V)&&e.jsx(te,{children:e.jsxs(U,{children:[H?s("statistics.loading",{context:"what",what:"resources"}):null,e.jsx("br",{}),V?F.message:null]})}),(v||$)&&e.jsx(te,{children:e.jsxs(U,{children:[v?s("statistics.loading",{context:"what",what:"languages"}):null,e.jsx("br",{}),$?R.message:null]})}),!1,e.jsxs(E,{className:"p-3",children:[e.jsx("h3",{className:"h4 pb-1 mb-3 border-bottom",children:s("statistics.fcs.title")}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"overview",children:s("statistics.fcs.titleOverall")}),e.jsxs(le,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thStatsKey")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thStatsValue")})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:s("statistics.fcs.tdLabelResourceCount")}),e.jsx("td",{children:g.length})]}),e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:s("statistics.fcs.tdLabelEndpointCount")}),e.jsx("td",{children:M.size})]}),e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:s("statistics.fcs.tdLabelInstitutionCount")}),e.jsx("td",{children:J.size})]})]})]}),!1,e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"institutions",children:s("statistics.fcs.titleInstitutions")}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderInstitutionStats")}),e.jsx(E.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:s("statistics.fcs.tdLabelInstitutionCount")}),e.jsx("dd",{children:y.size}),e.jsx("dt",{children:s("statistics.fcs.tdLabelInstitutionHosterCount")}),e.jsx("dd",{children:J.size})]})})]}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderInstitutions")}),e.jsxs(E.Body,{children:[e.jsx(q,{onSubmit:b=>b.preventDefault(),children:e.jsxs(U,{className:"filter-checkboxes",lg:12,md:12,children:[e.jsx(q.Text,{className:"me-2",children:s("statistics.fcs.labelForResourceInstitutionVariants")}),["institution","hoster"].map(b=>e.jsx(q.Check,{type:"radio",name:"resourceInstitutionVariant",value:b,id:`resourceInstitutionVariant-${b}`,checked:p===b,onChange:()=>C(b),label:s(`statistics.fcs.resourceInstitutionVariant${b}`)},b))]})}),e.jsxs(le,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thInstitutionName")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from((p==="hoster"?J:y).entries()).map(([b,D])=>e.jsxs("tr",{children:[e.jsx("td",{children:b}),e.jsx("td",{children:D.length})]},b))})]})]})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",id:"endpoints",children:s("statistics.fcs.titleEndpoints")}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderEndpointStats")}),e.jsx(E.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:s("statistics.fcs.tdLabelEndpointCount")}),e.jsx("dd",{children:M.size}),e.jsx("dt",{children:s("statistics.fcs.tdLabelEndpointDomainCount")}),e.jsx("dd",{children:O.size})]})})]}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderEndpoints")}),e.jsxs(E.Body,{children:[e.jsx(q,{onSubmit:b=>b.preventDefault(),children:e.jsxs(U,{className:"filter-checkboxes",lg:12,md:12,children:[e.jsx(q.Text,{className:"me-2",children:s("statistics.fcs.labelForResourceInstitutionVariants")}),["url","domain","tld"].map(b=>e.jsx(q.Check,{type:"radio",name:"endpointURLVariant",value:b,id:`endpointURLVariant-${b}`,checked:w===b,onChange:()=>A(b),label:s(`statistics.fcs.endpointURLVariant${b}`)},b))]})}),ve()]})]}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"resources",children:s("statistics.fcs.titleResources")}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderResourceStats")}),e.jsx(E.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:s("statistics.fcs.tdLabelResourceCount")}),e.jsx("dd",{children:g.length}),e.jsx("dt",{children:s("statistics.fcs.tdLabelRootResourceCount")}),e.jsx("dd",{children:c.length}),e.jsx("dt",{children:s("statistics.fcs.tdLabelResourceWithAvailabilityRestrictionCount")}),e.jsx("dd",{children:Array.from(ne.entries()).filter(([b])=>b!=="NONE").map(([,b])=>b).flat().length})]})}),ze&&e.jsx(E.Footer,{className:"d-flex gap-2",children:e.jsx(se,{variant:"primary",onClick:()=>j(!0),children:s("statistics.fcs.btnOpenResourceLanguageSelectionModal")})})]}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderSearchCapabilities")}),e.jsx(E.Body,{children:e.jsxs(le,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thSearchCapability")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from(Z.entries()).map(([b,D])=>e.jsxs("tr",{children:[e.jsx("td",{children:b}),e.jsx("td",{children:D.length})]},b))})]})})]}),De&&e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:s("statistics.fcs.cardHeaderResourcesWithAvailabilityRestrictions")}),e.jsx(E.Body,{children:e.jsxs(le,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("caption",{children:s("statistics.fcs.tblAvailabilityRestrictionCaption")}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:s("statistics.fcs.thAvailabilityRestriction")}),e.jsx("th",{scope:"col",children:s("statistics.fcs.thResourceTitle")})]})}),e.jsx("tbody",{children:Array.from(ne.entries()).filter(([b])=>b!=="NONE").map(([b,D])=>D.map(z=>e.jsxs("tr",{children:[e.jsx("td",{children:b}),e.jsxs("td",{children:[B(z.title,t)," ",e.jsx(ke,{to:{pathname:"/stats/resources",search:r({[_e]:z.id})},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Me},className:"align-baseline ms-2"})})]})]},z.id)))})]})})]})]}),e.jsx(vt,{languages:m,resources:c,showResourceCounts:!0,showLanguageFilterOptions:!1,show:x,onModalClose:()=>j(!1)})]})}function Ur({validatorUrl:n}){const s=Te(),{t}=ae(),r=je(o=>o.locale),[a,i]=h.useState(r),c=new Intl.DisplayNames([r,"en"],{type:"language"}),[,l]=Ue(),[u,d]=He(),[m,N]=h.useState([]),[p,C]=h.useState(""),[w,A]=h.useState(u.get(_e)),x=Ge(m,o=>o.id===w);if(x===void 0){const o=Ge(m,y=>y.handle===w);if(o!==void 0){const y=o.id;y!==w&&(A(y),u.set(_e,y),d(u))}}const j=w?x:void 0,I={consortia:u.get(we)},{data:f,isPending:H,isError:V,error:F}=Le({queryKey:["resources"],queryFn:et.bind(null,s,I)});h.useEffect(()=>{if(!f)return;const o=Ts(f);N(o)},[f]),h.useEffect(()=>{const o=u.get(_e);o&&o!==w&&A(o)},[u,w]);const v=m.map(o=>es(o)).flat().reduce((o,y)=>o.set(y,(o.get(y)??0)+1),new Map),$=m.toSorted(jt["title-up"]),{resources:R,matches:k}=Rt(p,$,a,["title","institution"]);function W(o){if(!o)return;const y=o;A(y),u.set(_e,y),d(u)}function _(o,y,J=0){const Z=y?.get(o.id)??new Map,ne=e.jsx(ce.Item,{eventKey:o.id,style:{paddingInlineStart:`${1+J*1}em`},children:e.jsx(me.Highlight,{text:B(o.title,a)??"",ranges:Z.get("title")??null})},o.id);return o.subResources&&o.subResources.length>0?e.jsxs(h.Fragment,{children:[ne,o.subResources.map(fe=>_(fe,k,J+1))]},o.id):ne}function T(o,y,J="–"){if(y===null)return null;const Z=nr(y,r);return e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t(`statistics.resources.cardHeader${o[0].toUpperCase()}${o.slice(1)}`)}),typeof y=="string"?e.jsx(E.Body,{children:y||J}):e.jsx(Qe,{className:"list-group-flush",children:Object.entries(y).map(([ne,fe])=>e.jsxs(Qe.Item,{children:[e.jsxs(ye,{bg:Z===ne?"primary":"secondary",className:"me-2",children:[c.of(ne)," ",e.jsx("sup",{children:ne})]})," ",fe||J]},ne))})]})}function g(o){if(!m||!o)return null;const y=o.rootResourceId===null?o:Ge(m,Z=>Z.id===o.rootResourceId);if(!y)return null;function J(Z){return e.jsxs("li",{children:[Z.id===o.id?e.jsx("strong",{children:Z.handle}):e.jsxs(e.Fragment,{children:[Z.handle,e.jsx(ke,{to:{search:l({[_e]:Z.id})},onClick:ne=>{ne.preventDefault(),W(Z.id)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Me},className:"align-baseline ms-2 me-1"})})]})," ","– ",B(Z.title,r),Z.subResources.length>0&&e.jsx("ul",{children:Z.subResources.map(ne=>J(ne))})]},Z.id)}return e.jsx("ul",{children:J(y)})}const M=j&&(j.availableDataViews?.find(o=>o.mimeType==="application/x-clarin-fcs-lex+xml")||j.availableLexFields&&j.availableLexFields.length>0),O=j&&(j.availableDataViews?.find(o=>o.mimeType==="application/x-clarin-fcs-adv+xml")||j.availableLayers&&j.availableLayers.length>0);return e.jsxs(oe,{className:"d-grid gap-2 mt-3",children:[(H||V)&&e.jsx(te,{children:e.jsxs(U,{children:[H?t("statistics.loading"):null,e.jsx("br",{}),V?F.message:null]})}),e.jsx(q,{onSubmit:o=>o.preventDefault(),children:e.jsxs(ce,{onSelect:W,children:[e.jsxs(ce.Toggle,{className:"resource-selector",variant:"outline-dark",children:[t("statistics.resources.dropdownLabel",{count:m.length})," "]}),e.jsxs(ce.Menu,{children:[e.jsxs(ce.ItemText,{children:[e.jsx(q.Control,{value:p,onChange:o=>C(o.target.value)}),v.size>1&&e.jsxs(q.Group,{as:te,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(q.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:t("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(U,{sm:"auto",children:e.jsx(Je,{type:"radio",name:"resource-info-languages",defaultValue:a,onChange:o=>i(o),children:Array.from(v.entries()).toSorted().map(([o,y])=>e.jsxs(Fe,{size:"sm",id:`resource-info-languages-${o}`,value:o,variant:"secondary",title:t("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:y,language:o,languageName:c.of(o)}),children:[c.of(o)," ",e.jsx("sup",{children:o})]},o))})})]})]}),e.jsx(ce.Divider,{}),R.map(o=>_(o,k))]})]})}),j&&e.jsxs(E,{className:"p-3 mt-3",children:[e.jsx("h3",{className:"h4 pb-1 mb-3 border-bottom",children:B(j.title,r)}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",children:t("statistics.resources.titleBasicMetadata")}),T("title",j.title),T("description",j.description),T("institution",j.institution),j.landingPage&&e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t("statistics.resources.cardHeaderLandingPage")}),e.jsx(E.Body,{children:e.jsx("a",{href:j.landingPage,className:"matomo_link",target:"_blank",children:j.landingPage})})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",children:t("statistics.resources.titleTechnicalMetadata")}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t("statistics.resources.cardHeaderResource")}),e.jsx(E.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.resourcePid")}),e.jsx("dd",{children:j.handle}),e.jsx("dt",{children:t("statistics.labels.resourceHierarchy")}),e.jsx("dd",{children:g(j)}),e.jsx("dt",{children:t("statistics.labels.searchCapabilitiesOfResource")}),e.jsx("dd",{children:j.searchCapabilitiesResolved.join(", ")}),e.jsx("dt",{children:t("statistics.labels.availabilityRestriction")}),e.jsx("dd",{children:j.availabilityRestriction})]})})]}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t("statistics.resources.cardHeaderEndpoint")}),e.jsx(E.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.endpointUrl")}),e.jsxs("dd",{children:[j.endpoint.url," ",n&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${n}?url=${encodeURIComponent(j.endpoint.url)}`,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Me},className:"align-baseline ms-2"})})]})]}),e.jsx("dt",{children:t("statistics.labels.fcsVersion")}),e.jsx("dd",{children:j.endpoint.protocol}),e.jsx("dt",{children:t("statistics.labels.searchCapabilitiesOfEndpoint")}),e.jsx("dd",{children:j.endpoint.searchCapabilities.join(", ")}),e.jsx("dt",{children:t("statistics.labels.endpointInstitution")}),e.jsxs("dd",{children:[j.endpointInstitution.name,j.endpointInstitution.link&&e.jsxs(e.Fragment,{children:[" – ",e.jsxs("a",{href:j.endpointInstitution.link,className:"matomo_link",target:"_blank",children:[t("statistics.labels.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:cs}})]})]})]})]})})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",children:t("statistics.resources.titleSeachInformation")}),e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t("statistics.resources.cardHeaderDataViews")}),e.jsx(E.Body,{children:j.availableDataViews&&e.jsxs(le,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewIdentifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewMimeType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewDeliveryPolicy")})]})}),e.jsx("tbody",{children:j.availableDataViews.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.identifier}),e.jsx("td",{children:o.mimeType}),e.jsx("td",{children:o.deliveryPolicy})]},o.identifier))})]})})]}),O&&e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t("statistics.resources.cardHeaderAdvancedDataView")}),e.jsx(E.Body,{children:j.availableLayers&&e.jsxs(le,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thLayerType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thQualifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thResultId")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thIdentifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thEncoding")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thAltValueInfo")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thAltValueInfoURI")})]})}),e.jsx("tbody",{children:j.availableLayers.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.layerType}),e.jsx("td",{children:o.qualifier}),e.jsx("td",{children:o.resultId}),e.jsx("td",{children:o.identifier}),e.jsx("td",{children:o.encoding}),e.jsx("td",{children:o.altValueInfo}),e.jsx("td",{children:o.altValueInfoURI})]},o.identifier))})]})})]}),M&&e.jsxs(E,{className:"my-2",children:[e.jsx(E.Header,{children:t("statistics.resources.cardHeaderLexDataView")}),e.jsx(E.Body,{children:j.availableLexFields&&e.jsxs(le,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thLexFieldType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thLexIdentifier")})]})}),e.jsx("tbody",{children:j.availableLexFields.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.type}),e.jsx("td",{children:o.id})]},o.id))})]})})]})]})]})}function Dr({url:n,statistics:s,validatorUrl:t,isScan:r}){const{t:a,i18n:i}=ae(),[,c]=Ue(),l=new Intl.NumberFormat(i.language,{style:"unit",unit:"second",unitDisplay:"short"});function u(d,m){const N=e.jsx(me.Highlight,{text:d.title,ranges:s.matchResources?.[m]??null}),p=e.jsx(ke,{to:{pathname:"/stats/resources",search:c({[_e]:d.handle})},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Me},className:"align-baseline ms-2"})});return d.valid&&d.notes.length===0?e.jsxs(e.Fragment,{children:[N," ",p]}):e.jsx(Oe,{placement:"auto-start",delay:{show:250,hide:400},overlay:e.jsxs(Be,{id:`resource-info-warning-${d.handle}`,children:[!d.valid&&a("statistics.errors.notAvailableInAggregator"),!d.valid&&d.notes.length>=1&&e.jsx("hr",{className:"mt-2 mb-1"}),d.notes.length===1?d.notes[0]:d.notes.length>=1?e.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:d.notes.map((C,w)=>e.jsx("li",{children:C},w))}):null]}),children:e.jsxs("span",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:at},className:"align-baseline me-2"}),d.valid?N:e.jsx("s",{children:N})," ",p]})})}return e.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[e.jsxs("h4",{className:"h5",id:`${Gs(n)}-${r?"scan":"search"}`,children:[e.jsx(me.Highlight,{text:n,ranges:s.matchEndpoint}),t&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${t}?url=${encodeURIComponent(n)}`,children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Me},className:"align-baseline ms-2"})})]})]}),e.jsxs("dl",{className:"ps-sm-4",children:[e.jsx("dt",{children:a("statistics.labels.fcsVersion")}),e.jsx("dd",{children:s.version}),e.jsx("dt",{children:a("statistics.labels.searchCapabilities")}),e.jsx("dd",{children:s.searchCapabilities.join(", ")}),e.jsx("dt",{children:a("statistics.labels.maxConcurrentScanRequests")}),e.jsx("dd",{children:s.maxConcurrentRequests}),e.jsx("dt",{children:a("statistics.labels.requestStatistics")}),e.jsx("dd",{className:"mb-0",children:a("statistics.labels.numberOfRequests",{count:s.numberOfRequests})}),s.avgQueueTime!==0&&e.jsx("dd",{className:"mb-0",children:a("statistics.labels.queueTime",{avg:l.format(s.avgQueueTime),max:l.format(s.maxQueueTime)})}),e.jsx("dd",{children:a("statistics.labels.executionTime",{avg:l.format(s.avgExecutionTime),max:l.format(s.maxExecutionTime)})}),s.rootResources?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:a("statistics.labels.resources")}),e.jsx("dd",{children:a("statistics.labels.numberOfRootResources",{count:s.rootResources.length})}),e.jsx("dd",{children:e.jsx("ul",{children:s.rootResources.map((d,m)=>typeof d=="string"?e.jsx("li",{children:e.jsx(me.Highlight,{text:d,ranges:s.matchResources?.[m]??null})},d):e.jsx("li",{children:u(d,m)},d.handle))})})]}),e.jsxs(e.Fragment,{children:[Object.entries(s.diagnostics||{}).map(([d,m])=>e.jsxs(he,{variant:"warning",style:{fontSize:"0.85rem"},children:[e.jsxs(he.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(ye,{bg:"warning",children:[m.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:a("statistics.diagnostic.diagnostic")})," ",m.diagnostic.message,m.diagnostic.diagnostic&&e.jsxs(e.Fragment,{children:[" - ",e.jsx("small",{children:m.diagnostic.diagnostic})]})]}),e.jsxs("p",{className:"mb-0",children:[a("statistics.diagnostic.context")," ",e.jsx("a",{href:m.context,children:m.context})]})]},d)),Object.entries(s.errors||{}).map(([d,m])=>e.jsxs(he,{variant:"danger",style:{fontSize:"0.85rem"},children:[e.jsxs(he.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(ye,{bg:"danger",children:[m.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:a("statistics.diagnostic.exception")})," ",m.exception.message]}),e.jsxs("p",{className:"mb-0",children:[a("statistics.diagnostic.context")," ",e.jsx("a",{href:m.context,children:m.context})]}),m.exception.cause&&e.jsxs("p",{className:"mb-0",children:[a("statistics.diagnostic.causedBy")," ",m.exception.cause]})]},d))]})]})]},n)}function Hr({data:n,validatorUrl:s}){const{t,i18n:r}=ae(),[a,i]=h.useState(""),[c,l]=h.useState(["institution","endpoint","resources"]),[u,d]=h.useState(!1),m=`-${n.isScan?"scan":"search"}`,N=h.useMemo(()=>Object.entries(n.institutions).toSorted().map(([x,j])=>Object.entries(j).toSorted().map(([I,f])=>({institutionName:x,endpointUrl:I,endpointInfo:{...f,rootResources:f.rootResources.toSorted()}}))).flat(1).filter(u?x=>Object.keys(x.endpointInfo.diagnostics).length>0||Object.keys(x.endpointInfo.errors).length>0:()=>!0),[n,u]),p=N.filter(x=>Object.keys(x.endpointInfo.diagnostics).length>0||Object.keys(x.endpointInfo.errors).length>0),w=me.useFuzzySearchList({list:N,queryText:a,getText:x=>{const j=[];return c.length===0?j.push(x.institutionName,x.endpointUrl,...x.endpointInfo.rootResources.map(I=>typeof I=="string"?I:I.title)):(c.includes("institution")&&j.push(x.institutionName),c.includes("endpoint")&&j.push(x.endpointUrl),c.includes("resources")&&j.push(...x.endpointInfo.rootResources.map(I=>typeof I=="string"?I:I.title))),j},mapResultItem:({item:x,score:j,matches:I})=>({item:x,matches:I,score:j})}).reduce((x,j)=>{const{institutionName:I,endpointUrl:f,endpointInfo:H}=j.item;return Object.getOwnPropertyNames(x).includes(I)||(x[I]={match:c.length===0||c.includes("institution")?j.matches[0]:null,endpoints:{}}),x[I].endpoints[f]={...H,matchEndpoint:c.length===0||c.includes("endpoint")?j.matches[c.length===0||c.includes("institution")?1:0]:null,matchResources:c.length===0||c.includes("resources")?j.matches.slice(0+(c.length===0||c.includes("institution")?1:0)+(c.length===0||c.includes("endpoint")?1:0)):[]},x},{});function A(x){c.includes(x)?l(c.filter(j=>j!==x)):l([...c,x])}return e.jsxs(oe,{className:"d-grid gap-2 mt-3",children:[e.jsx(he,{variant:"info",className:"mb-0",children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.startDate")}),e.jsx("dd",{className:"mb-0",children:new Date(n.date).toLocaleString(r.language)}),e.jsx("dt",{children:t("statistics.labels.timeout")}),e.jsx("dd",{className:"mb-0",children:new Intl.NumberFormat(r.language,{style:"unit",unit:"second",unitDisplay:"short"}).format(n.timeout)})]})}),e.jsx(q,{onSubmit:x=>x.preventDefault(),children:e.jsxs(te,{className:"gy-2",children:[e.jsx(U,{lg:6,md:12,children:e.jsx(q.Control,{placeholder:t("statistics.filter.inputPlaceholder"),value:a,onChange:x=>i(x.target.value)})}),e.jsxs(U,{className:"filter-checkboxes",lg:6,md:12,children:[e.jsx(q.Text,{className:"me-2",children:t("statistics.filter.labelForCheckboxes")}),e.jsx(q.Check,{type:"checkbox",checked:c.includes("institution"),onChange:()=>A("institution"),id:`filter-institution-name${m}`,label:t("statistics.filter.checkboxInstitution")}),e.jsx(q.Check,{type:"checkbox",checked:c.includes("endpoint"),onChange:()=>A("endpoint"),id:`filter-endpoint-url${m}`,label:t("statistics.filter.checkboxEndpoint")}),e.jsx(q.Check,{type:"checkbox",checked:c.includes("resources"),onChange:()=>A("resources"),id:`filter-resource-names${m}`,label:t("statistics.filter.checkboxResources")})]})]})}),e.jsx(te,{children:e.jsx(U,{children:e.jsx(q.Check,{type:"checkbox",checked:u,onChange:()=>d(!u),id:`filter-show-issues-only${m}`,label:t("statistics.filter.checkboxShowWithIssues",{count:p.length})})})}),Object.entries(w).map(([x,{match:j,endpoints:I}])=>e.jsxs(E,{className:"p-2",children:[e.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${Gs(x)}${m}`,children:e.jsx(me.Highlight,{text:x,ranges:j})}),Object.entries(I).toSorted().map(([f,H])=>e.jsx(Dr,{url:f,statistics:H,validatorUrl:s,isScan:n.isScan},f))]},x))]})}const Fr=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],Br=Object.fromEntries(Fr.map(n=>[n.id,n])),qr=["resources","fcs"];function Vr(){const n=Te(),s=vs(),[t]=He(),{t:r}=ae(),{categoryId:a}=Bt(),i=_r(),c=Ar(),l={consortia:t.get(we)},{isPending:u,isError:d,data:m,error:N}=Le({queryKey:["statistics"],queryFn:an.bind(null,n,l)}),[p,C]=h.useState(G.getState().validatorURL);G.subscribe(f=>C(f.validatorURL));const w=G.getState().appTitleHead,A=[...m!==void 0?Object.keys(m).toSorted():[],...qr],x=a!=null&&A.includes(a)?a:A.length>0?A[0]:void 0;function j(){s.invalidateQueries({queryKey:["statistics"]}),s.invalidateQueries({queryKey:["resources"]}),s.invalidateQueries({queryKey:["languages"]})}function I(f){i?.params.categoryId,i&&i.params.categoryId!==f&&i.route.path&&c(i.route.path,{categoryId:f})}return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{children:e.jsxs("title",{children:[w," – Statistics"]})}),e.jsxs(oe,{id:"statistics",className:"my-4",children:[e.jsx("h1",{className:"h1",children:r("statistics.title")}),(u||d)&&e.jsx(te,{children:e.jsxs(U,{children:[u?r("statistics.loading"):null,e.jsx("br",{}),d?N.message:null]})}),m&&e.jsxs($e.Container,{activeKey:a&&A.includes(a)?a:x,onSelect:I,children:[e.jsxs(de,{className:"nav-tabs",as:"ul",children:[Object.keys(m).map(f=>e.jsx(de.Item,{as:"li",role:"presentation",children:e.jsx(de.Link,{as:"button",eventKey:f,children:r(`statistics.tabs.${f}`,{defaultValue:Br[f]?.label??f})})},f)),e.jsx(de.Item,{as:"li",role:"presentation",children:e.jsx(de.Link,{as:"button",eventKey:"resources",children:r("statistics.tabs.resources")})},"resources"),e.jsx(de.Item,{as:"li",role:"presentation",children:e.jsx(de.Link,{as:"button",eventKey:"fcs",children:r("statistics.tabs.fcs")})},"fcs"),e.jsx(de.Item,{as:"li",role:"presentation",className:"ms-auto",children:e.jsxs(de.Link,{as:"button",onClick:j,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:st}})," ",r("statistics.tabs.btnRefresh")]})})]}),e.jsxs($e.Content,{children:[Object.entries(m).map(([f,H])=>e.jsx($e.Pane,{eventKey:f,children:e.jsx(Hr,{data:H,validatorUrl:p})},f)),e.jsx($e.Pane,{eventKey:"resources",children:e.jsx(Ur,{validatorUrl:p})},"resources"),e.jsx($e.Pane,{eventKey:"fcs",children:e.jsx(Or,{})},"fcs")]})]})]})]})}function zr(){const n=G.getState().appTitleHead;Sn();const s=je(t=>t.locale);h.useEffect(()=>{be.language!==s&&be.changeLanguage(s)},[s]);{const t=ws(),[r,a]=h.useState(t.pathname);h.useEffect(()=>{const i=t.pathname;i!==r&&(a(i+t.search),ht(i,document.title,r))},[t,r])}return e.jsxs(e.Fragment,{children:[e.jsx(Xe,{children:e.jsx("title",{children:n})}),e.jsx(yn,{}),e.jsx("main",{children:e.jsxs(qt,{children:[e.jsx(ss,{index:!0,element:e.jsx(Er,{})}),e.jsx(ss,{path:"/about",element:e.jsx(On,{})}),e.jsx(ss,{path:"/help",element:e.jsx(Bn,{})}),e.jsx(ss,{path:"/stats/:categoryId?",element:e.jsx(Vr,{})})]})}),e.jsx(xn,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const $r=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function Kr(){window.MyAggregator.DEPLOY_PATH!==void 0&&G.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&G.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&G.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&G.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&G.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&G.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&G.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_USERNAME!==void 0&&G.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(n,s){return n[s]},set(n,s,t){return $r.includes(s)?(console.error(`Configuration ${s} can only be set on initialization!`),!1):s==="VALIDATOR_URL"?t===null||typeof t=="string"?(G.getState().setValidatorURL(t),!0):!1:s==="SHOW_SEARCH_RESULT_LINK"?typeof t=="boolean"?(G.getState().setShowSearchResultLink(t),!0):!1:s==="AUTH_USERNAME"?t===null||typeof t=="string"?(G.getState().setAuthUsername(t),!0):!1:(n[s]=t,!0)}}),Object.assign(window.MyAggregator,{getAppStore:()=>G})}function Wr(){const n=ie.getState(),s=[navigator.language,...navigator.languages];let t=!1;for(const r of s){if(r===n.locale){t=!0;break}if(n.locales.includes(r)){n.setLocale(r),t=!0;break}}t||console.warn("User locale",s,"was not found in available languages",n.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>ie})}Kr();Wr();G.getInitialState(),G.getState();ie.getInitialState(),ie.getState();const Qr=G.getState().deployPath,Gr=G.getState().apiURL,Yr=ie.getState().locale;be.changeLanguage(Yr);const Xr=new Vt({defaultOptions:{queries:{}}}),Jr=zt.create({baseURL:Gr,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const n=G.getState().matomoTrackingParams;Qn(n)||console.warn("Unable to setup tracking ...")}const Zr="root",ea=document.getElementById(Zr),sa=tn.createRoot(ea);sa.render(e.jsx(h.StrictMode,{children:e.jsx(Vn,{axios:Jr,children:e.jsx($t,{client:Xr,children:e.jsx(Kt,{children:e.jsx(Wt,{basename:Qr,children:e.jsx(zr,{})})})})})}));export{wt as C,Un as b,pt as f,ot as h,Dn as p,Hn as r,bt as u,Fn as x};

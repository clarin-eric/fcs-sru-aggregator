const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-querybuilder.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-querybuilder.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{r as d,u as Ve,c as ns,b as oe,j as e,L as Ue,T as Q,d as rs,e as zs,N as zt,f as Le,g as $s,h as Ks,H as tt,R as Ws,k as Qs,s as kt,l as is,m as Mt,n as Pt,o as as,p as Re,q as Gs,t as Ys,v as Xs,w as Js,x as Zs,y as at,Q as en,z as tn,A as sn,B as nn,C as rn}from"./vendor/react-ext.js";import{b as an}from"./vendor/react.js";/* empty css                      */import{C as ue,R as ee,a as H,N as Pe,b as xe,c as ot,d as T,B as Ce,M as ie,F as K,e as ne,T as st,f as ze,g as os,h as Ae,I as on,D as ge,S as ls,i as de,O as Fe,j as $e,L as Je,A as fe,P as lt,k as yt,l as ln,m as wt,n as Ge}from"./vendor/bootstrap.js";import{_ as cs,a as ds,b as cn,c as dn,d as un}from"./locales/en/default.js";import{g as hn}from"./vendor/prism.js";/*!
 * FCS SRU Aggragator UI
 * @module lib/fcs-sru-aggregator-ui.js
 * @version 1.0.0-alpha
 * @license GPL-3.0-or-later
 * @see {@link https://github.com/clarin-eric/fcs-sru-aggregator-ui.git}
 */(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var ct={},$t;function mn(){if($t)return ct;$t=1;var s=an();return ct.createRoot=s.createRoot,ct.hydrateRoot=s.hydrateRoot,ct}var gn=mn();const he="x-consortia";async function pn(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(he,n.consortia);const r="init"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function Rt(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(he,n.consortia);const r="resources"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function us(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(he,n.consortia);const r="languages"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function xn(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(he,n.consortia);const r="statistics"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function fn(s,n){return(await s.post("search",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function jn(s,n,t){return(await s.post(`search/${n}`,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function bn(s,n){if(!n)throw new Error('Invalid "searchID" parameter!');return(await s.get(`search/${n}/metaonly`)).data}async function yn(s,n,t){if(!n)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await s.get(`search/${n}/metaonly?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.id===t);if(i.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${n}, resourceId: ${t})`);return i[0]}async function wn(s,n,t){if(!n)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await s.get(`search/${n}?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.resource.id===t);if(i.length===0)throw new Error(`Results for resource not found! (searchId: ${n}, resourceId: ${t})`);return i[0].records===void 0&&console.warn("Using legacy FCS SRU Aggregator API with Search Results not in '.records'!",{searchID:n},i),i[0]}function vn(s,n,t,r,i,a){const l=new URLSearchParams({resourceId:t,format:r});(a==="byGuess"||a==="byMetaAndGuess")&&l.set("filterLanguage",i);const o=`search/${n}/download?${l.toString()}`;return s.getUri({url:o})}function Sn(s,n,t,r,i,a){const l=new URLSearchParams({resourceId:t});r?l.set("filterLanguage",r):(a==="byGuess"||a==="byMetaAndGuess")&&l.set("filterLanguage",i);const o=`search/${n}/toWeblicht?${l.toString()}`;return s.getUri({url:o})}const Rn=[he];function Kt(s){return s.entries().next().done?void 0:`?${s}`}function Ln(){const[s]=Ve(),n=d.useMemo(()=>new URLSearchParams(Array.from(s.entries()).filter(([r])=>Rn.includes(r))),[s]),t=d.useCallback(r=>{const i=new URLSearchParams(n);return ns(r).forEach((a,l)=>i.append(l,a)),i},[n]);return[n,t]}function Be(){const[s,n]=Ln(),t=Kt(s),r=d.useCallback(i=>Kt(n(i)),[n]);return[t,r]}function Cn(){const{t:s}=oe(),n="urls.termsUseAndDisclaimer",t=s(n,{ns:"common"}),r=t!==n,i="urls.contact",a=s(i,{ns:"common"}),l=a!==i,o="footer.serviceInfo.text",h=s(o)!==o,[x]=Be();return e.jsx("footer",{className:"text-muted",children:e.jsx(ue,{children:e.jsxs(ee,{children:[e.jsxs(H,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[e.jsxs("div",{children:[e.jsx(Ue,{to:{pathname:"/about",search:x},className:"hidden-xs",children:s("footer.links.about")}),e.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","4.0.0-SNAPSHOT"]})]}),e.jsx(Ue,{to:{pathname:"/stats",search:x},children:s("footer.links.statistics")})]}),e.jsx(H,{className:"text-center",children:h&&e.jsx(Q,{i18nKey:o,components:{serviceBy:e.jsx("a",{href:s("footer.serviceInfo.urlServiceBy")}),hostedBy:e.jsx("a",{href:s("footer.serviceInfo.urlHostedBy")})}})}),e.jsxs(H,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&e.jsx("a",{href:t,children:s("footer.links.termsUseAndDisclaimer")}),l&&e.jsx("a",{href:a,children:s("footer.links.contact")})]})]})})})}const G=rs(s=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authEnabled:!0,authUsername:null,isAuthenticated:!1,setDeployPath:n=>s(t=>({deployPath:typeof n=="function"?n(t.deployPath):n})),setApiURL:n=>s(t=>({apiURL:typeof n=="function"?n(t.apiURL):n})),setValidatorURL:n=>s(t=>({validatorURL:typeof n=="function"?n(t.validatorURL):n})),setShowSearchResultLink:n=>s(t=>({showSearchResultLink:typeof n=="function"?n(t.showSearchResultLink):n})),setAppTitle:n=>s(t=>({appTitle:typeof n=="function"?n(t.appTitle):n})),setAppTitleHead:n=>s(t=>({appTitleHead:typeof n=="function"?n(t.appTitleHead):n})),setMatomoTrackingParams:n=>s(t=>({matomoTrackingParams:typeof n=="function"?n(t.matomoTrackingParams):n})),setAuthEnabled:n=>s(t=>({authEnabled:typeof n=="function"?n(t.authEnabled):n})),setAuthUsername:n=>s(t=>{const r=typeof n=="function"?n(t.authUsername):n;return{authUsername:r,isAuthenticated:r!==null&&r!=="anonymous"}})}));var Nn=["en","de"];const le=rs(s=>({locale:"en",locales:Nn??["en"],setLocale:n=>s(t=>({locale:typeof n=="function"?n(t.locale):n})),setLocales:n=>s(t=>({locales:typeof n=="function"?n(t.locales):n}))})),we=s=>{const n=zs(le,s);return Object.assign(n,le),n},In=""+new URL("assets/clarin-logo-wide.png",import.meta.url).href,Tn=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,Lt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,Ke=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function An(){const{t:s}=oe(),n=we(j=>j.locale),t=we(j=>j.locales),r=we(j=>j.setLocale),i=G.getState().authEnabled,a=G.getState().authUsername,l=G.getState().isAuthenticated,o=G.getState().deployPath??"",c=o+(o.endsWith("/")?"":"/")+"login",[h]=Be(),x="urls.helpWithTranslations",R=s(x,{ns:"common"}),f=R!==x;function y(j){j!==null&&r(j)}function N(){return i?l?e.jsxs(Pe.Text,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Lt},className:"d-md-inline d-none"})," ",e.jsx(Q,{i18nKey:"header.login.signedInAs",components:[e.jsx("span",{className:"fw-bold",children:a})]})]}):e.jsxs(xe.Link,{href:`${c}${h??""}`,disabled:!i,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Lt},className:"d-md-inline d-none"})," ",s("header.login.login")]}):null}function _(){if(!t||t.length===1)return null;const j=new Intl.DisplayNames([n,"en"],{type:"language"}),P=e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke},className:"d-md-inline d-none"}),e.jsx("span",{className:"d-inline d-md-none",children:s("header.localeLabelOnMobile")})," ",n.toUpperCase()," "]});return e.jsxs(ot,{title:P,align:"end",className:"ms-md-2",onSelect:y,children:[t.map(b=>{const q=new Intl.DisplayNames([b,"en"],{type:"language"});return e.jsxs(ot.Item,{disabled:b===n,"aria-disabled":b===n,eventKey:b,title:s("header.localeOptionTitle",{code:b,name:q.of(b),context:b!==n?"translated":null,translated:j.of(b)}),children:[b.toUpperCase()," – ",q.of(b)]},b)}),f&&e.jsxs(e.Fragment,{children:[e.jsx(ot.Divider,{}),e.jsx(ot.Item,{className:"matomo_link text-wrap",target:"_blank",href:R,onClick:b=>b.stopPropagation(),children:s("header.localeHelpWithTranslations")})]})]})}function v(){return e.jsx(Pe.Brand,{className:"ms-md-4",children:e.jsx("img",{src:In,alt:s("header.appLogoAlt"),height:30,className:"d-inline-block align-top",onError:({currentTarget:j})=>{console.warn("Logo not found!"),j.onerror=null,j.parentElement.style.display="none"}})})}return e.jsx("header",{children:e.jsx(Pe,{expand:"md",className:"bg-body-tertiary",children:e.jsxs(ue,{children:[e.jsxs(Pe.Brand,{as:Ue,to:{pathname:"/",search:h},children:[e.jsx("img",{src:Tn,width:"30",height:"30",className:"d-inline-block align-top",alt:`${s("header.title")} logo`})," ",s("header.title")]}),e.jsx(Pe.Toggle,{"aria-controls":"header-navbar-nav"}),e.jsx(Pe.Collapse,{id:"header-navbar-nav",children:e.jsxs(xe,{className:"w-100 d-flex",children:[e.jsx(xe.Link,{as:zt,to:{pathname:"/",search:h},children:s("header.menu.home")}),e.jsx(xe.Link,{as:zt,to:{pathname:"/help",search:h},children:s("header.menu.help")}),e.jsx(Pe.Text,{className:"ms-auto d-md-block d-none"}),N(),_(),v()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function En(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function _n(s){s==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",s)}function kn(){d.useEffect(()=>{function s(){_n(En())}return s(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",s)},[])}const Mn="modulepreload",Pn=function(s,n){return new URL(s,n).href},Wt={},pe=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){let h=function(x){return Promise.all(x.map(R=>Promise.resolve(R).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const l=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=h(t.map(x=>{if(x=Pn(x,r),x in Wt)return;Wt[x]=!0;const R=x.endsWith(".css"),f=R?'[rel="stylesheet"]':"";if(r)for(let N=l.length-1;N>=0;N--){const _=l[N];if(_.href===x&&(!R||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${f}`))return;const y=document.createElement("link");if(y.rel=R?"stylesheet":Mn,R||(y.as="script"),y.crossOrigin="",y.href=x,c&&y.setAttribute("nonce",c),document.head.appendChild(y),R)return new Promise((N,_)=>{y.addEventListener("load",N),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${x}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return n().catch(a)})},On=(s,n,t)=>{const r=s[n];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Un={en:{app:ds,common:cs}},Ct="clarin",Hn=le.getInitialState().locale,Dn=le.getInitialState().locales;function Fn(s,n){if(!s)return n;const t=typeof s=="string"?[s]:s;return[...t.map(i=>`${Ct}.${i}`),...t]}const Nt=["app","common"],Bn=Fn(Nt);function dt(s){return typeof s=="string"||!Array.isArray(s)?[String(s)]:s}function qn(s,n,t,r){if(t?.postProcessTryPrefixedNamespacesFirst!==void 0)return s;const i=dt(n),a=dt(t.ns||r.options.defaultNS||[]),l=r.resolve(i,t),c=(l?.res!==void 0?[...dt(t.ns||[]),l.usedNS]:[...dt(t.ns||[]),...a]).map(x=>x.startsWith(Ct)?x:`${Ct}.${x}`),h=r.translate(i,{...t,ns:c,postProcessTryPrefixedNamespacesFirst:!0});return i.includes(h)?s:h}Le.use($s).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:qn}).use(Ks((s,n)=>On(Object.assign({"../locales/de/app.json":()=>pe(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>pe(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/common.json":()=>pe(()=>import("./locales/de/default.js").then(r=>r.b),[],import.meta.url),"../locales/de/textplus.app.json":()=>pe(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>pe(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/clarin.app.json":()=>pe(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/clarin.common.json":()=>pe(()=>import("./locales/en/default.js").then(r=>r.h),[],import.meta.url),"../locales/en/common.json":()=>pe(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/querybuilder.json":()=>pe(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/querysuggestions.json":()=>pe(()=>import("./locales/en/default.js").then(r=>r.q),[],import.meta.url),"../locales/en/textplus.app.json":()=>pe(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>pe(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${s}/${n}.json`,4))).init({lng:Hn,fallbackLng:"en",supportedLngs:Dn,ns:Bn,defaultNS:Nt,fallbackNS:Nt,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Un,partialBundledLanguages:!0,react:{nsMode:"fallback",transKeepBasicHtmlNodesFor:["br","strong","i","p","em","kbd","code"]}});Le.addResourceBundle("en","clarin.app",cn);Le.addResourceBundle("en","clarin.common",dn);Le.addResourceBundle("en","app",ds);Le.addResourceBundle("en","querysuggestions",un);Le.addResourceBundle("en","common",cs);Object.assign(window,{i18n:Le});function Vn(s){let n=null;const t=document.body;function r(){n=document.createElement("script"),n.src=s,n.async=!0,t.appendChild(n)}function i(){n!==null&&t.removeChild(n)}return[r,i]}function zn(s,{delay:n=void 0}={}){d.useEffect(()=>{if(!s)return;const[t,r]=Vn(s);let i;return n!==void 0&&n>0?i=setTimeout(()=>{t()},n):t(),()=>{i!==void 0&&clearTimeout(i),r()}},[s,n])}function $n(s,n=0){let t=3735928559^n,r=1103547991^n;for(let i=0,a;i<s.length;i++)a=s.charCodeAt(i),t=Math.imul(t^a,2654435761),r=Math.imul(r^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}window._paq=window._paq||[];function Kn({siteId:s,trackerUrl:n,enableLinkTracking:t=!0,domains:r=[],userId:i=void 0}){window._paq.push(["setTrackerUrl",n]),window._paq.push(["setSiteId",s]),i&&window._paq.push(["setUserId",i]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),t&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function Wn({srcUrl:s}){const n=document.createElement("script"),t=document.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=s,t&&t.parentNode&&t.parentNode.insertBefore(n,t)}function hs(s){if(!s)return null;let n=null;if(typeof s=="string")try{n=JSON.parse(s)}catch(t){return console.error("Error trying to parse tracking params!",t),null}else typeof s=="object"&&(n=s);if(n&&!Object.hasOwn(n,"indexUrl")&&Object.hasOwn(n,"srcUrl")){const i=`${n.srcUrl.split("/").slice(0,-1).join("/")}/index.php`;n.indexUrl=i}return n}function Qn(s){const n=hs(s);if(n===null)return!1;const t=n.siteId,r=n.trackerUrl,i=n.srcUrl,a=n.domains,l=n.userId?.toString();if(i===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(t===void 0||!Number.isInteger(t))return console.warn('No "siteId" configuration set for tracking!'),!1;const o={siteId:t,trackerUrl:r,domains:a};l&&(o.userId=$n(l).toString());const c={srcUrl:i};return Kn(o),ms(document.location.href||window.location.href,document.title),Wn(c),!0}function ms(s,n,t){window._paq.push(["setDocumentTitle",n??document.title]),window._paq.push(["setCustomUrl",s]),t!==void 0&&window._paq.push(["setReferrerUrl",t]),window._paq.push(["trackPageView"])}function gs(s,n=!1,t=!1){window._paq.push(["trackSiteSearch",s,n,t])}const Gn=["Emanuel Dima","Erik Körner","Leif-Jöran Olsson","Yana Panchenko","Oliver Schonefeld","Dieter Van Uytvanck"],Yn=[{id:"dropwizard",name:"Dropwizard",url:"https://www.dropwizard.io/",license:"Apache License 2.0",licenseUrl:"https://github.com/dropwizard/dropwizard/blob/release/3.0.x/LICENSE",usage:"web server"},{id:"de.mpg.mpgaai:mpgaai-shhaa",name:"MPG-AAI - simple http header authn/z",url:"https://github.com/clarin-eric/mpgaai",license:"Apache License 2.0",licenseUrl:"http://www.apache.org/licenses/LICENSE-2.0.txt",usage:"AAI / Shibboleth support"},{id:"io.swagger.core.v3",name:"Swagger Core",url:"https://github.com/swagger-api/swagger-core",license:"Apache License 2.0",licenseUrl:"https://github.com/swagger-api/swagger-core/blob/master/LICENSE",usage:"REST API documentation"},{id:"org.glassfish.jersey",name:"Eclipse Jersey",url:"https://eclipse-ee4j.github.io/jersey/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/eclipse-ee4j/jersey/blob/2.x/LICENSE.md",usage:"RESTful web services"},{id:"org.slf4j",name:"Simple Logging Facade for Java (SLF4J)",url:"https://www.slf4j.org/",license:"MIT License",licenseUrl:"https://www.slf4j.org/license.html",usage:"logging"},{id:"org.junit",name:"JUnit 5",url:"https://junit.org/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/junit-team/junit-framework/blob/main/LICENSE.md",usage:"testing"},{id:"optimaize/language-detector",name:"Optimaize Language Detector",url:"https://github.com/optimaize/language-detector",license:"Apache License 2.0",licenseUrl:"https://github.com/optimaize/language-detector/blob/master/LICENSE",usage:"language detection of results"},{id:"org.apache.commons:commons-text",name:"Apache Commons Text",url:"https://commons.apache.org/proper/commons-text/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/commons-text/blob/master/LICENSE.txt",usage:"export format"},{id:"com.sun.xml.bind",name:"JAXB Reference Implementation",url:"https://eclipse-ee4j.github.io/jaxb-ri/",license:"Common Development and Distribution License (CCDL) 1.1",licenseUrl:"https://github.com/javaee/jaxb-v2/blob/2.3.0.1/jaxb-ri/License.txt",usage:"XML support",hide:!0},{id:"eu.clarin.weblicht:wlfxb",name:"Weblicht wlfxb",url:"https://weblicht.sfs.uni-tuebingen.de",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://github.com/weblicht/wlfxb/blob/master/LICENSE.txt",usage:"export format"},{id:"org.apache.poi:poi-ooxml",name:"Apache POI",url:"https://poi.apache.org/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/poi/blob/trunk/legal/LICENSE",usage:"export format"},{id:"org.jopendocument:jOpenDocument",name:"jOpenDocument",url:"https://www.jopendocument.org/",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://www.jopendocument.org/support.html",usage:"export format"},{id:"eu.clarin.sru:sru-client",name:"CLARIN SRU/CQL Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-sru-client/blob/main/LICENSE.txt",usage:"SRU / CQL client framework",hide:!0},{id:"eu.clarin.sru.fcs:fcs-simple-client",name:"CLARIN-FCS Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-simple-client/blob/main/LICENSE.txt",usage:"FCS client framework",hide:!0}],Xn=[{id:"react",name:"React",url:"https://react.dev/",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE"},{id:"react-dom",name:"ReactDOM",url:"https://react.dev/reference/react-dom",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE",hide:!0},{id:"react-router",name:"React Router",url:"https://reactrouter.com/",license:"MIT License",licenseUrl:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",usage:"single page application routing"},{id:"react-bootstrap",name:"React Bootstrap",url:"https://react-bootstrap.netlify.app/",license:"MIT License",licenseUrl:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE",usage:"react bindings for bootstrap"},{id:"bootstrap",name:"Bootstrap",url:"https://getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/bootstrap/blob/main/LICENSE",usage:"UI framework"},{id:"bootstrap-icons",name:"Bootstrap Icons",url:"https://icons.getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/icons/blob/main/LICENSE"},{id:"@tanstack/react-query",name:"TanStack Query",url:"https://tanstack.com/query",license:"MIT License",licenseUrl:"https://github.com/TanStack/query/blob/main/LICENSE",usage:"data loading via REST APIs"},{id:"axios",name:"Axios",url:"https://axios-http.com/",license:"MIT License",licenseUrl:"https://github.com/axios/axios/blob/v1.x/LICENSE",usage:"cross-browser support for REST API requests"},{id:"antlr4ng",name:"Next Generation TypeScript runtime for ANTLR4",url:"https://github.com/mike-lischke/antlr4ng",license:'The "BSD license"',licenseUrl:"https://github.com/mike-lischke/antlr4ng/blob/main/LICENSE.txt",usage:"query parser"},{id:"i18next",name:"i18next",url:"https://www.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next/blob/master/LICENSE",usage:"translations"},{id:"react-i18next",name:"react-i18next",url:"https://react.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/react-i18next/blob/master/LICENSE",usage:"translations",hide:!0},{id:"i18next-resources-to-backend",name:"i18next-resources-to-backend",url:"https://github.com/i18next/i18next-resources-to-backend",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next-resources-to-backend/blob/main/licence",usage:"translation resource loading",hide:!0},{id:"zustand",name:"Zustand",url:"https://zustand-demo.pmnd.rs/",license:"MIT License",licenseUrl:"https://github.com/pmndrs/zustand/blob/main/LICENSE",usage:"state management"},{id:"@nozbe/microfuzz",name:"microfuzz",url:"https://github.com/Nozbe/microfuzz",license:"MIT License",licenseUrl:"https://github.com/Nozbe/microfuzz/blob/main/LICENSE",usage:"fuzzy search"},{id:"react-helmet-async",name:"React Helmet (async fork)",url:"https://github.com/staylor/react-helmet-async",license:"Apache License 2.0",licenseUrl:"https://github.com/staylor/react-helmet-async/blob/main/LICENSE",usage:"HTML head modifications"},{id:"react-slugify",name:"react-slugify",url:"https://github.com/martpie/react-slugify",license:"MIT License",licenseUrl:"https://github.com/martpie/react-slugify/blob/master/LICENSE",usage:"jump id fragment generation"}];function Jn(){const{t:s}=oe(),n=we(f=>f.locale),t="urls.termsUseAndDisclaimer",r=s(t,{ns:"common"}),i=r!==t,a=G.getState().matomoTrackingEnabled,l=hs(G.getState().matomoTrackingParams)?.indexUrl,o=l?`${l}?module=CoreAdminHome&action=optOutJS&language=auto&div=matomo-opt-out`:null;zn(o,{delay:300});const c=G.getState().appTitleHead,[h]=Be();function x(f){return e.jsx("ul",{children:f.filter(y=>y.hide!==!0).map(y=>e.jsxs("li",{children:[y.url?e.jsx("a",{href:y.url,children:y.name}):e.jsx("span",{children:y.name}),y.license&&e.jsxs(e.Fragment,{children:[" ","(",y.licenseUrl?e.jsx("a",{href:y.licenseUrl,children:y.license}):e.jsx("span",{children:y.license}),")"]})]},y.id))})}function R(f){const y=Date.parse(f);return Intl.DateTimeFormat(n,{dateStyle:"medium",timeStyle:"long"}).format(y)}return e.jsxs(e.Fragment,{children:[e.jsx(tt,{children:e.jsxs("title",{children:[c," – About"]})}),e.jsxs(ue,{className:"py-4",children:[e.jsx("h1",{className:"h1 mb-4",children:s("about.title")}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.people.title")}),e.jsx("p",{children:s("about.people.developedBy")}),e.jsx("ul",{children:Gn.map(f=>e.jsx("li",{children:f},f))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.statistics.title")}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"about.statistics.text",components:[e.jsx(Ue,{to:{pathname:"/stats",search:h},children:"endpoint statistics"})]})})]}),(i||a)&&e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.privacyPolicy.title")}),i&&e.jsx("p",{children:e.jsx(Q,{i18nKey:"about.privacyPolicy.termsInfo",components:[e.jsx("a",{href:r,children:"clarin.eu"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(Q,{i18nKey:"about.privacyPolicy.matomoInfo",components:[e.jsx("a",{href:"https://matomo.org/",children:"Matomo"})]})}),o&&e.jsx(T,{className:"mb-3",id:"matomo-opt-out-container",children:e.jsx(T.Body,{id:"matomo-opt-out"})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.sourceCode.title")}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"about.sourceCode.sourceInfo.text",components:[e.jsx("a",{href:s("about.sourceCode.sourceInfo.repoUrl"),children:"GitHub"}),e.jsx("a",{href:s("about.sourceCode.sourceInfo.licenseUrl"),children:"GPL 3.0 license"})]})}),e.jsx("p",{children:s("about.sourceCode.licenseInfo")})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.versions.title")}),e.jsxs(ee,{children:[e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.versions.backend.text")}),e.jsxs("dl",{className:"ms-4",children:[e.jsx("dt",{children:s("about.versions.backend.lblVersion")}),e.jsx("dd",{children:e.jsx("code",{children:"4.0.0-SNAPSHOT"})}),e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblSHA")}),e.jsx("dd",{children:e.jsx("code",{children:"da5912d"})})]}),"",e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblRef")}),e.jsx("dd",{children:e.jsx("code",{children:"master"})})]}),e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblDate")}),e.jsx("dd",{children:R("2025-11-18T10:14:40+01:00")})]})]})]}),e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.versions.frontend.text")}),e.jsxs("dl",{className:"ms-4",children:[e.jsx("dt",{children:s("about.versions.frontend.lblVersion")}),e.jsx("dd",{children:e.jsx("code",{children:"1.0.0-alpha"})}),e.jsx("dt",{children:s("about.versions.frontend.lblSHA")}),e.jsx("dd",{children:e.jsx("code",{children:"31d8543"})}),!1,e.jsx("dt",{children:s("about.versions.frontend.lblDate")}),e.jsx("dd",{children:R("2025-11-18T13:56:03+01:00")})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.technology.title")}),e.jsxs(ee,{children:[e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.technology.backendUses")}),x(Yn)]}),e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.technology.frontendUses")}),x(Xn)]})]}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"about.technology.iconLicenseInfo",components:[e.jsx("a",{href:"http://www.freepik.com/",children:"Freepik"}),e.jsx("a",{href:"www.flaticon.com",children:"www.flaticon.com"}),e.jsx("a",{href:"http://creativecommons.org/licenses/by/3.0/",children:"CC BY 3.0"})]})})]})]})]})}const He=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`,et=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`,ps=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,xs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,nt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,Zn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-braces" viewBox="0 0 16 16">
  <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6M13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6"/>
</svg>`,fs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,js=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,bs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,ys=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`,Xe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,ws=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,pt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`,Ot=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`,We=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`,er=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
</svg>`,tr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16">
  <path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/>
</svg>`,vs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,Ss=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-check" viewBox="0 0 16 16">
  <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
  <path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
</svg>`,Rs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-lock" viewBox="0 0 16 16">
  <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
  <path d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415"/>
</svg>`,Ls=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`,sr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
</svg>`,mt={"arrow-clockwise":ps,"envelope-arrow-up":js,"exclamation-triangle":bs,"eye-fill":He,"gear-fill":Xe,"house-door":pt,"info-circle":Ot,"link-45deg":We,"three-dots":Ls,balloon:xs,bank:nt,download:fs,eye:ys,highlights:ws,magic:et,search:vs,translate:Ke};Object.assign(mt,{"plus-circle":er,"x-circle":sr,braces:Zn,magic:et,repeat:tr});Object.assign(mt,{"shield-check":Ss,"shield-lock":Rs,person:Lt});function nr(){const{t:s}=oe(),n=G.getState().appTitleHead;function t(){const r=s("icons",{ns:"common",returnObjects:!0}),i=Object.getOwnPropertyNames(r).filter(a=>Object.getOwnPropertyNames(mt).includes(a)).toSorted((a,l)=>{const o=r[a],c=r[l];return!o.context||o.context.length===0?-1:!c.context||c.context.length===0||o.context.includes("developer")?1:c.context.includes("developer")?-1:o.context.includes("statistics")?1:c.context.includes("statistics")?-1:o.context.includes("querybuilder")?1:c.context.includes("querybuilder")?-1:o.context.includes("authentication")?1:c.context.includes("authentication")?-1:o.context[0].localeCompare(c.context[0])});return e.jsx(ee,{xs:1,md:2,xl:3,children:i.map(a=>{const l=s(`icons.${a}.context`,{ns:"common",returnObjects:!0,defaultValue:[]});return e.jsx(H,{children:e.jsx(T,{className:"border-0",children:e.jsxs(T.Body,{children:[e.jsxs(T.Title,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:mt[a]},"aria-hidden":"true",className:"rounded border px-2 pb-1"})," ",s(`icons.${a}.label`,{ns:"common"})]}),e.jsx(T.Text,{className:"mb-0",children:s(`icons.${a}.description`,{ns:"common"})}),l.length>0&&e.jsx(T.Text,{className:"mt-1",children:l.map(o=>e.jsx(Ce,{children:o},o))})]})})},a)})})}return e.jsxs(e.Fragment,{children:[e.jsx(tt,{children:e.jsxs("title",{children:[n," – Help"]})}),e.jsxs(ue,{className:"my-4",children:[e.jsx("h1",{className:"h1",children:s("help.title")}),e.jsx("h2",{className:"h2",id:"performing-a-fcs-search-in-resources",children:s("help.performSearch.title")}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.performSearch.textBasicSearch"})}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.performSearch.textAdvancedSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.performSearch.textLexicalSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.performSearch.textSearchProgress"})}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.performSearch.textViewResource",components:{iconEye:e.jsx("i",{dangerouslySetInnerHTML:{__html:He},"aria-hidden":"true"})}})}),e.jsx("h2",{className:"h2",id:"adjusting-search-criteria",children:s("help.adjustSearchCriteria.title")}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.adjustSearchCriteria.text"})}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.adjustSearchCriteria.textOtherSearchTypes"})}),e.jsx("h2",{className:"h2",id:"more-help",children:s("help.moreHelp.title")}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"help.moreHelp.text",components:[e.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),e.jsx("a",{title:s("help.contactTitle"),href:s("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"})]})}),e.jsx("h2",{className:"h2",id:"more-help",children:s("help.icons.title")}),t()]})]})}const Ut=d.createContext({resources:[],languages:{},weblichtLanguages:[]});Ut.displayName="AggregatorDataContext";function rr({resources:s,languages:n,weblichtLanguages:t,children:r}){const i={resources:s,languages:n,weblichtLanguages:t};return e.jsx(Ut.Provider,{value:i,children:r})}function Ht(){return d.useContext(Ut)}const Dt=d.createContext(void 0);Dt.displayName="AxiosContext";function _e(){const s=d.useContext(Dt);if(!s)throw new Error('No "axios" instance set, use AxiosProvider to set one');return s}function ir({axios:s,children:n}){return e.jsx(Dt.Provider,{value:s,children:n})}const Ft=d.createContext(void 0);Ft.displayName="SearchParamsContext";function Bt(){const s=d.useContext(Ft);if(!s)throw new Error('No "params" data set, use SearchParamsProvider to set one');return s}function ar({language:s,languageFilter:n,queryType:t,query:r,resourceIDs:i,numberOfResults:a,children:l}){const o={language:s,languageFilter:n,queryType:t,query:r,resourceIDs:i,numberOfResults:a};return e.jsx(Ft.Provider,{value:o,children:l})}const It="byMeta",or="all",Cs="resource",lr="title-up",ye="mul";function xt(s,n=void 0,t={}){return s===ye?t?.defaultAnyLanguage??"Any Language":n?.[s]||(t?.defaultUnknownLanguage??"Unknown Language")}function gt(s){const n=le.getState().locale,t=(a,l=null)=>({...a,subResources:a.subResources.map(o=>t(o,l??a)),rootResourceId:l?.id??null}),r=s.map(a=>t(a,null)),i=function(a,l){const o=$(a.institution,n)??"",c=$(l.institution,n)??"",h=o.localeCompare(c);if(h!==0)return h;const x=$(a.title,n)??"",R=$(l.title,n)??"";return x.toLowerCase().localeCompare(R.toLowerCase())};return De(r,a=>{a.subResources.sort(i)}),r.sort(i),r}function cr(s,n){const t=[],r=[],i=[];return Object.entries(n).forEach(([a,l])=>{l.forEach(o=>{let c=!1;De(s,h=>{h.handle===o&&(c=!0,i.push(h))}),c||(console.warn("Handle not found in resources",o),r.push(o))})}),De(i,a=>{t.push(a.id)}),{selected:t,unavailable:r}}function De(s,n){const t=(r,i)=>{n(r,i)===!1||r.subResources.forEach(t)};s.forEach(t)}function Ze(s,n){let t;const r=i=>t!==void 0?!0:n(i)?(t=i,!0):i.subResources.find(r)!==void 0;return s.find(r),t}function Se(s){const n=[];return De(s,t=>{n.push(t.id)}),n}function dr(s,n){const t=new Map;return De(s,r=>{const i=n(r);t.has(i)||t.set(i,[]),t.get(i).push(r.id)}),t}function vt(s,n,t){const r=[],i=a=>Is(a,i)||fr(a,n,t);return De(s,a=>{i(a)&&r.push(a.id)}),r}function ur(s,n){const t=le.getState().locale,r=new Set;return De(s,i=>{if(n.includes(i.id)){const a=$(i.institution,t)??"";r.add(a)}return!0}),Array.from(r)}function Tt(s){const n=t=>[t,...t.subResources.map(n).flat()];return s.map(n).flat()}const Ns=["en","eng","de","deu"];function hr(s){if(s===null)return null;if(typeof s=="string")return s;for(const t of Ns)if(Object.hasOwn(s,t))return s[t];const n=Object.getOwnPropertyNames(s);return n.length>0?s[n[0]]:null}function mr(s,n){return s===null?null:typeof s=="string"?s:n&&Object.hasOwn(s,n)?s[n]:null}function $(s,n){n===void 0&&(n=le.getState().locale);const t=mr(s,n);return t!==null?t:hr(s)}function gr(s,n){if(s===null||typeof s=="string")return;if(n===void 0&&(n=le.getState().locale),n&&Object.hasOwn(s,n))return n;for(const r of Ns)if(Object.hasOwn(s,r))return r;const t=Object.getOwnPropertyNames(s);if(t.length>0)return t[0]}function rt(s,n="en"){const t=typeof s.title=="string"||s.title===null?[n]:Object.getOwnPropertyNames(s.title),r=typeof s.description=="string"||s.description===null?[n]:Object.getOwnPropertyNames(s.description),i=typeof s.institution=="string"||s.institution===null?[n]:Object.getOwnPropertyNames(s.institution),a=[...t,...r,...i];return Array.from(new Set(a))}function pr(s,n){return!(n==="fcs"&&!s.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||n==="lex"&&!s.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function xr(s,n){return!!(n===ye||s.languages&&s.languages.length===1&&s.languages[0]===n||s.languages&&s.languages.indexOf(n)>=0)}function Is(s,n){if(!s.subResources||s.subResources.length===0)return!1;let t=!1;const r=i=>{if(n?.(i)===!0){t=!0;return}i.subResources.forEach(r)};return s.subResources.forEach(r),t}function fr(s,n,t){return!(!pr(s,n)||!xr(s,t))}const Ts={"title-up":(s,n)=>{const t=le.getState().locale,r=$(s.title,t)??"",i=$(n.title,t)??"";return r.localeCompare(i)},"title-down":(s,n)=>{const t=le.getState().locale,r=$(s.title,t)??"",i=$(n.title,t)??"";return-r.localeCompare(i)},"institution-up":(s,n)=>{const t=le.getState().locale,r=$(s.institution,t)??"",i=$(n.institution,t)??"",a=$(s.title,t)??"",l=$(n.title,t)??"",o=r.localeCompare(i);return o!==0?o:a.localeCompare(l)},"institution-down":(s,n)=>{const t=le.getState().locale,r=$(s.institution,t)??"",i=$(n.institution,t)??"",a=$(s.title,t)??"",l=$(n.title,t)??"",o=-r.localeCompare(i);return o!==0?o:a.localeCompare(l)}};function As(s,n){const[t,r]=d.useState(s);return d.useEffect(()=>{const i=setTimeout(()=>{r(s)},n);return()=>{clearTimeout(i)}},[s,n]),t}function At(s,n,t=0,r=n){if(n===s&&n===r&&n.nodeType===Node.ELEMENT_NODE&&t===1)return n.nodeType,n.textContent?.length,n.textContent?.length||0;if(n===s||s===null)return t;const i=n.parentNode;if(i===null)return t;let a=0;const l=i.childNodes;for(let o=0;o<l.length;o++){const c=l[o];if(c===n)break;c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?a+=c.textContent?.length||0:console.warn("unknown node type",{container:s,node:n,offset:t,parent:i,i:o,child:c})}return At(s,i,a+t,r)}function Es(s,n){const t=s.textContent?.length||0;if(t<n)return null;let r=0;const i=s.childNodes;for(let a=0;a<i.length;a++){const l=i[a];let o=0;if(l.nodeType===Node.TEXT_NODE||l.nodeType===Node.ELEMENT_NODE?o=l.textContent?.length||0:console.warn("unknown node type, skip",{container:s,offset:n,child:l}),!(o===0&&i.length!==1)&&(r+=o,r>=n)){const c=n-(r-o);return l.nodeType===Node.ELEMENT_NODE?Es(l,c):{node:l,offset:c}}}return i.length,null}function Et(s,n){if(!n)return null;const t=At(s,n.startContainer,n.startOffset);if(n.startContainer.nodeType===Node.TEXT_NODE&&n.endContainer===n.startContainer)return[t,t+(n.endOffset-n.startOffset)];const r=At(s,n.endContainer,n.endOffset);return[t,r]}function jr(s,n){if(!(document.activeElement===s))return null;const r=window.getSelection();if(!r)return null;const i=document.createRange(),a=Es(s,n);if(a)try{i.setStart(a.node,a.offset),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}catch(l){console.error("Error trying to set cursor!",l,{container:s,offset:n,startRange:a})}}function Qt(s){if(!(document.activeElement===s))return null;const t=window.getSelection();if(!t||t.rangeCount===0)return null;const r=t.getRangeAt(0),i=Et(s,r);return i?i[0]:null}function br(s){return s==="cql"?"fcs-cql":s==="fcs"?"fcs-fcsql":s==="lex"?"fcs-lexcql":"plain"}function _t(s,n){const t=br(n),r="match-braces rainbow-braces";let i=s;try{i=hn.highlight(s,t)}catch(l){console.warn("Error trying to highlight value",{value:s,error:l,language:t})}return`<pre><code class="language-${t} ${r}">${i}</code></pre>`}function Ye(s){return s?(s=s.replace(/[\n\t]/g," "),s=s.replace(/&nbsp;|\u202F|\u00A0/g," "),s):""}const _s=Ws.forwardRef(({value:s,onChange:n,onCursorChange:t,disabled:r,placeholder:i,queryType:a,delay:l=200,...o},c)=>{const h=d.useRef(null),x=d.useRef(null);d.useImperativeHandle(c,()=>x.current);const[R,f]=d.useState(Ye(s)),[y,N]=d.useState(null),_=As(R,l),[v,j]=d.useState(_);d.useEffect(()=>{const C=_t(_,a);if(j(C),x.current){const k=Qt(x.current);N(k)}},[_,a]),d.useEffect(()=>{const C=Ye(s);if(_!==C&&(f(C),j(_t(C)),x.current)){const k=Qt(x.current);N(k)}},[s,_]),d.useLayoutEffect(()=>{x.current&&y!==null&&jr(x.current,y)});function P(C){const k=C.target.innerText;h.current&&(h.current.value=k),f(k),n?.(k)}function b(C){C.stopPropagation(),C.preventDefault();const F=(C.clipboardData||window.clipboardData).getData("text");I(F)}function q(C){C.key==="Enter"?(C.stopPropagation(),C.preventDefault(),h.current&&h.current.form?.requestSubmit()):C.key==="Backspace"?(C.stopPropagation(),C.preventDefault(),L()):C.key==="Delete"?(C.stopPropagation(),C.preventDefault(),z()):C.ctrlKey&&C.key==="a"||N(null)}function X(C=!1){if(!x.current||!t)return;const k=x.current;if(!(document.activeElement===k))return;const A=window.getSelection();if(!A||A.rangeCount===0)return;const D=[];for(let M=0;M<A.rangeCount;M++){const g=A.getRangeAt(M),u=Et(k,g);u&&D.push(u)}if(D.length===0)return;const[p,O]=D.pop();C?p===O&&(N(p),t?.(p)):t?.(p,p!==O?O:void 0)}function V(C){if(!x.current)return null;const k=x.current;if(!(document.activeElement===k))return null;const A=window.getSelection();if(!A||A.rangeCount===0)return null;const D=[];for(let g=0;g<A.rangeCount;g++){const u=A.getRangeAt(g),B=Et(k,u);B&&D.push(B)}if(D.length===0)return null;D.sort();const p=D.map(([g,u])=>u-g).reduce((g,u)=>g+u,0),O=k.innerText,M=D.toReversed().reduce((g,[u,B])=>g.slice(0,u)+g.slice(B),O);if(C==="backspace"){if(p===0){const g=D.filter(([u,B])=>u===B).map(([,u])=>u).pop();if(g===0)return null;if(g!==void 0)return{value:M.slice(0,g-1)+M.slice(g),offset:g-1}}else{const g=D.map(([,u])=>u).pop();if(g!==void 0)return{value:M,offset:g-p}}return console.warn('invalid "backspace" process, abort',{container:k,selectionIndices:D,oldValue:O,newValueSpansRemoved:M,numDeleted:p}),null}else if(C==="delete"){if(p===0){const g=D.filter(([u,B])=>u===B).map(([,u])=>u).pop();if(g!==void 0)return{value:M.slice(0,g)+M.slice(g+1),offset:g}}else{const g=D.map(([,u])=>u).pop();if(g!==void 0)return{value:M,offset:g-p}}return console.warn('invalid "delete" process, abort',{container:k,selectionIndices:D,oldValue:O,newValueSpansRemoved:M,numDeleted:p}),null}else if(C==="paste"){if(p===0){const g=D.filter(([u,B])=>u===B).map(([u])=>u).shift();if(g!==void 0)return{value:M,offset:g}}else{const g=D.map(([u])=>u).shift();if(g!==void 0)return{value:M,offset:g}}return console.warn('invalid "paste" process, abort',{container:k,selectionIndices:D,oldValue:O,newValueSpansRemoved:M,numDeleted:p}),null}}function I(C){const k=V("paste");if(!k)return;const F=Ye(C),{value:A,offset:D}=k,p=A.slice(0,D)+F+A.slice(D),O=D+C.length;f(p),N(O),h.current&&(h.current.value=p),n?.(p),t?.(O)}function L(){const C=V("backspace");if(!C)return;const{value:k,offset:F}=C,A=Ye(k);f(A),N(F),h.current&&(h.current.value=A),n?.(A),t?.(F)}function z(){const C=V("delete");if(!C)return;const{value:k,offset:F}=C,A=Ye(k);f(A),N(F),h.current&&(h.current.value=A),n?.(A),t?.(F)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{role:"input",disabled:r,placeholder:i,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...o,onInput:P,onPaste:b,onKeyDown:q,onKeyUp:()=>X(),onClick:()=>X(!0),tabIndex:r?-1:o.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:v},ref:x}),i&&s===""&&e.jsx("span",{className:"input-placeholder-simulacrum",children:i}),e.jsx("input",{type:"hidden",ref:h})]})});_s.displayName="ContentEditable";var je=Qs();function ks({show:s,languages:n,resources:t,searchLanguage:r,searchLanguageFilter:i,showResourceCounts:a,showLanguageFilterOptions:l=!0,onModalClose:o}){const{t:c}=oe(),[h,x]=d.useState(r||ye),[R,f]=d.useState(i||It),[y,N]=d.useState(""),[_,v]=d.useState(a??!1),j=d.useMemo(()=>{const L=new Map;return t&&(t.forEach(z=>z.languages.forEach(C=>L.set(C,(L.get(C)??0)+1))),L.set(ye,t.length)),L},[t]),P=je.useFuzzySearchList({list:Object.entries(n??{}).toSorted(),queryText:y,getText:L=>[L[0],L[1]],mapResultItem:({item:L,score:z,matches:C})=>({item:L,matches:C,score:z})});if(!n)return null;const b=Math.floor((P.length+2)/3);function q(L){o({language:h,filter:R,action:L})}function X(){x(r||ye),f(i||It)}function V(){v(L=>!L)}function I(L,z,C,k){const F=h===L;let A="d-block py-0 my-1 border-0";return F&&(A+=" fw-semibold selected"),C===void 0&&(C=[null,null]),e.jsxs(ne,{size:"sm",className:A,style:{color:`var(${F?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>x(L),"data-filter-score":k,children:[F&&e.jsx("span",{className:"selected-marker me-1",children:"✓"}),e.jsx(je.Highlight,{ranges:C[1],text:z})," ",e.jsx("sup",{children:e.jsx(je.Highlight,{ranges:C[0],text:L})}),_&&j.has(L)&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("span",{className:"text-muted",children:["(",j.get(L),")"]})]})]},L)}return e.jsxs(ie,{show:s,onHide:()=>q("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:c("search.languagesModal.title")})}),e.jsxs(ie.Body,{className:"px-0",children:[e.jsxs(ue,{className:["px-4"].concat(l?["pb-3 border-bottom"]:[]).join(" "),children:[e.jsxs(ee,{children:[e.jsx(H,{sm:!0}),e.jsx(H,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:I(ye,c("languageCodeToName.any",{ns:"common"}))}),e.jsxs(H,{sm:!0,children:[e.jsx(K.Control,{size:"sm",placeholder:c("search.languagesModal.filterInputPlaceholder"),name:"languages-filter",value:y,onChange:L=>N(L.target.value)}),t&&e.jsx(K.Check,{name:"languages-show-count",id:"languages-show-count",checked:_,onChange:V,type:"checkbox",label:c("search.languagesModal.checkboxShowNumberOfResources"),className:"mt-1"})]})]}),e.jsxs(ee,{children:[e.jsx(H,{sm:!0,children:P.slice(0,b).map(({item:[L,z],matches:C,score:k})=>I(L,z,C,k))}),e.jsx(H,{sm:!0,children:P.slice(b,2*b).map(({item:[L,z],matches:C,score:k})=>I(L,z,C,k))}),e.jsx(H,{sm:!0,children:P.slice(2*b).map(({item:[L,z],matches:C,score:k})=>I(L,z,C,k))})]})]}),l&&e.jsx(K,{children:e.jsx(ue,{className:"px-4 pt-3",children:["byMeta","byGuess","byMetaAndGuess"].map(L=>e.jsx(K.Check,{type:"radio",name:"filterOpts",value:L,id:`filterOpts-${L}`,checked:R===L,onChange:()=>f(L),label:c(`search.languagesModal.optionLanguage${L}`)},L))})})]}),e.jsxs(ie.Footer,{children:[e.jsx(ne,{variant:"secondary",onClick:X,children:c("search.languagesModal.buttonReset")}),e.jsx(ne,{variant:"secondary",onClick:()=>q("abort"),children:c("search.languagesModal.buttonAbort")}),e.jsx(ne,{variant:"primary",onClick:()=>q("confirm"),children:c("search.languagesModal.buttonConfirm")})]})]})}const qt=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],ht=Object.fromEntries(["cql","fcs","lex"].map(s=>[s,qt.find(n=>n.id===s)])),Gt=["fcs","lex"],yr=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],wr="cql",ut=[10,20,50,100,200,250],Ee="info:srw/diagnostic/1/61",vr=[{id:"cql-single-term",queryType:"cql",query:"Elephant",description:"Query with single term"},{id:"cql-with-boolean",queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{id:"cql-with-phrase",queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{id:"fcs-three-tokens-artznei",queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb',resourceIDs:["https://clarin.bbaw.de/fcs/dta#http://hdl.handle.net/11858/00-203C-0000-0023-8324-0"]},{id:"lex-plain-string",queryType:"lex",query:"apple",description:"Search for plain string"},{id:"lex-lemma-with-language",queryType:"lex",query:'lemma =/lang=deu "Apfel"',description:'Search for German lemma "Apfel"'}];function Sr({show:s,queryTypes:n,onModalClose:t}){const{t:r}=oe(),i=n&&n.length>0?n:["cql","fcs","lex"],a=vr.filter(h=>i.includes(h.queryType));if(a.length===0)return l("abort"),null;function l(h){t({query:void 0,queryType:void 0,resourceIDs:void 0,action:h})}function o(h,x,R=void 0){t({query:h,queryType:x,resourceIDs:R,action:"confirm"})}function c(h,x,R,f,y){return e.jsxs(ee,{children:[e.jsx(H,{md:"auto",className:"d-none d-md-block",children:y&&`${y}.`}),e.jsxs(H,{className:"d-flex flex-column",children:[R!==void 0&&e.jsx("div",{children:R}),e.jsx("div",{dangerouslySetInnerHTML:{__html:_t(h,x)}})]}),e.jsx(H,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:e.jsx(ne,{size:"sm",onClick:()=>o(h,x,f),children:r("search.suggestionsModal.buttonUseQuery")})})]},h)}return e.jsxs(ie,{id:"search-query-suggestions-modal",show:s,onHide:()=>l("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:r("search.suggestionsModal.title")})}),e.jsx(ie.Body,{className:"px-0",children:e.jsx(ue,{fluid:!0,children:i.map(h=>{const x=a.filter(R=>R.queryType===h);return x.length===0?null:e.jsxs(d.Fragment,{children:[e.jsx(ee,{children:e.jsx(H,{children:e.jsx("h4",{className:"border-bottom pb-2",children:r(`queryTypes.${h}.nameLong`,{ns:"common",defaultValue:ht[h]?.name??h.toUpperCase()})})})}),x.map((R,f)=>c(R.query,R.queryType,R.description,R.resourceIDs,f+1))]},h)})})}),e.jsx(ie.Footer,{children:e.jsx(ne,{variant:"primary",onClick:()=>l("close"),children:r("search.suggestionsModal.buttonClose")})})]})}function Ms({disabled:s,value:n,onChange:t,delay:r=300}){const[i,a]=d.useState(n??""),l=As(i,r);return d.useEffect(()=>{t(l)},[t,l]),e.jsx(K.Control,{type:"search",placeholder:"Search for ...",value:i,onChange:o=>a(o.target.value),disabled:s})}function Ps(s,n,t,r){const i=Tt(n);r??=["title","institution","description"];const a=je.useFuzzySearchList({list:i,queryText:s,getText:f=>{const y=[];return r.includes("title")&&y.push($(f.title,t)),r.includes("institution")&&y.push($(f.institution,t)),r.includes("description")&&y.push($(f.description,t)),y},mapResultItem:({item:f,score:y,matches:N})=>{const _=new Map;let v=0;return r.includes("title")&&_.set("title",N[v++]),r.includes("institution")&&_.set("institution",N[v++]),r.includes("description")&&_.set("description",N[v++]),{resource:f,matches:_,score:y}}}),l=a.reduce((f,{resource:y,matches:N})=>(f.set(y.id,N),f),new Map),o=a.reduce((f,{resource:y,score:N})=>f.set(y.id,N),new Map),c=new Set;a.filter(({resource:f})=>f.rootResourceId!==null).forEach(({resource:f,score:y})=>{const N=o.get(f.rootResourceId);N===void 0?(c.add(f.rootResourceId),o.set(f.rootResourceId,y)):y<N&&o.set(f.rootResourceId,y)});const h=n.filter(f=>c.has(f.id)).map(f=>({resource:f,score:o.get(f.id)}));return{resources:[...a.filter(({resource:f})=>!f.rootResourceId),...h].toSorted(({score:f},{score:y})=>f===y?0:f===void 0?1:y===void 0?-1:f-y).map(({resource:f})=>f),matches:l,scores:o}}function Vt({resource:s,selectedResourceIDs:n,highlighting:t,highlightings:r,shouldBeShown:i,localeForInfos:a,onSelectClick:l,languageCodeToName:o}){const{t:c}=oe(),h=G.getState().isAuthenticated,[x,R]=d.useState(!1),[f,y]=d.useState(!1);t??=r?.get(s.id)??new Map;const N=n.includes(s.id),_=rt(s),v=we(L=>L.locale),[j,P]=d.useState(v);if(d.useEffect(()=>{v&&P(v)},[v]),d.useEffect(()=>{a&&P(a)},[a]),typeof i=="function"&&!i(s))return null;if(i===!1)return null;const b=typeof i=="function"?s.subResources.some(L=>i(L)):!0;function q(){x&&document.getSelection()?.type==="Range"||R(L=>!L)}function X(){l(s,!N)}function V(){y(L=>!L)}function I(){if(s.availabilityRestriction!=="NONE")return e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:h?Ss:Rs}})," "]})}return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{className:`p-2 m-1 ${x&&"border-bottom"}`,children:[e.jsx(H,{md:"auto",sm:1,onClick:X,children:e.jsx(K.Check,{id:`resource-selection-${s.id}`,"aria-label":c("search.results.resourceInfo.checkboxResourceAriaLabel",{title:s.title}),children:e.jsx(K.Check.Input,{checked:N,onChange:()=>{}})})}),e.jsxs(H,{md:8,sm:11,className:`mb-sm-2 ${x?"":"text-truncate"}`,onClick:q,children:[e.jsxs("h4",{className:`h5 ${x?"":"text-truncate"}`,children:[I(),e.jsx(je.Highlight,{text:$(s.title,j)??"",ranges:t.get("title")??null})," ",s.landingPage&&e.jsx("small",{children:e.jsxs("a",{href:s.landingPage,className:"matomo_link",target:"_blank",children:[c("search.resourcesModal.resource.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})]})})]}),e.jsx("p",{className:`mb-0 ${x?"":"text-truncate"}`,children:$(s.description,j)&&e.jsx(je.Highlight,{text:$(s.description,j)??"",ranges:t.get("description")??null})})]}),e.jsxs(H,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${x?"":" text-truncate"}`,onClick:q,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:nt}})," ",e.jsx(je.Highlight,{text:$(s.institution,j)??"",ranges:t.get("institution")??null}),e.jsx("br",{}),e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",s.languages.map(o).sort().join(", "),x&&_.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(st,{type:"radio",name:`resources-${s.id}-info-languages`,defaultValue:j,onChange:L=>P(L),onClick:L=>L.stopPropagation(),className:"mt-2",children:_.toSorted().map(L=>e.jsx(ze,{variant:"outline-secondary",size:"sm",id:`resources-${s.id}-info-languages-${L}`,value:L,type:"radio",children:L},L))})]})]}),b&&s.subResources.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-100"}),e.jsx(H,{md:"auto",sm:1,style:{width:"2.8rem"}}),e.jsx(H,{md:{span:8,offset:0},sm:{span:11,offset:1},children:e.jsx(ne,{variant:"link",size:"sm",className:"ps-0",onClick:V,children:c("search.resourcesModal.resource.toggleExpand",{context:f?"collapse":"expand",count:s.subResources.length})})})]})]}),b&&f&&e.jsx(T,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:s.subResources.map(L=>e.jsx(Vt,{resource:L,highlightings:r,selectedResourceIDs:n,shouldBeShown:i,onSelectClick:l,languageCodeToName:o},L.id))})]})}function Yt({title:s,titleId:n,resources:t,selectedResourceIDs:r,resourceScores:i,highlightings:a,expanded:l,shouldBeShown:o,localeForInfos:c,onSelectClick:h,onExpandToggleClick:x,onSelectAllClick:R,onDeselectAllClick:f,languageCodeToName:y}){const{t:N}=oe(),[_,v]=d.useState(l);d.useEffect(()=>{v(l)},[l]);const j=d.useMemo(()=>Se(t),[t]),P=j.filter(F=>r.includes(F)),b=P.length===j.length,q=P.length===0,X=!b&&!q,V=b||!q,I=d.useRef(null);I.current&&(I.current.indeterminate=X);const L=d.useMemo(()=>i!==void 0?t.filter(F=>i.has(F.id)).toSorted((F,A)=>{const D=i.get(F.id),p=i.get(A.id);return D===p?0:D===void 0?1:p===void 0?-1:D-p}):t,[i,t]);if(L.length===0)return null;function z(){v(F=>!F),x(!_)}function C(){X||!V?R(t):f(t)}function k(){const F=t.filter(O=>!O.rootResourceId),A=Se(F).length,D=F.length,p=Se(F).filter(O=>r.includes(O)).length;return N("search.resourcesModal.grouped.msgResources",{count:D,nested:A-D,context:A-D?"nested":null})+(p!==A?N("search.resourcesModal.grouped.msgResourcesSelected",{count:p}):"")}return e.jsxs(ue,{className:"border-bottom pb-2 mb-4 px-0",children:[e.jsxs(ee,{className:"px-3",children:[e.jsx(H,{md:"auto",sm:1,className:"mt-1",onClick:C,children:e.jsx(K.Check,{id:`resource-group-selection-${kt(n)}`,"aria-label":N("search.results.resourceInfo.checkboxResourceAriaLabel",{title:n}),children:e.jsx(K.Check.Input,{checked:V,ref:I,onChange:()=>{}})})}),e.jsx(H,{md:9,sm:11,children:e.jsx("h3",{children:s})}),e.jsx(H,{md:2,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:e.jsx(ne,{size:"sm",variant:"secondary",onClick:z,"aria-expanded":_,children:N("search.resourcesModal.grouped.buttonExpand",{context:_?"hide":"show"})})})]}),e.jsx(ee,{className:"px-3 ps-4 ms-4",children:e.jsx(H,{md:{span:11,offset:0},sm:{span:11,offset:1},children:k()})}),e.jsx(os,{in:_,children:e.jsx(ue,{children:L.map(F=>e.jsx(Vt,{resource:F,highlightings:a,selectedResourceIDs:r,shouldBeShown:o,onSelectClick:h,languageCodeToName:y,localeForInfos:c},F.id))})})]})}function Rr({show:s,showGrouping:n,resources:t,languages:r,availableResources:i,selectedResources:a,onModalClose:l}){const{t:o}=oe(),c=we(w=>w.locale),[h,x]=d.useState(c);d.useEffect(()=>{c&&x(c)},[c]);const R=new Intl.DisplayNames([c,"en"],{type:"language"}),[f,y]=d.useState(a||i),[N,_]=d.useState(or),[v,j]=d.useState(Cs),[P,b]=d.useState(lr),[q,X]=d.useState(""),[V,I]=d.useState({}),[L,z]=d.useState({});d.useEffect(()=>{n&&j(n)},[s,n]),d.useEffect(()=>y(a),[a]);const C=t.filter(w=>i.includes(w.id)).toSorted(Ts[P]),F=C.map(w=>rt(w)).flat().reduce((w,J)=>w.set(J,(w.get(J)??0)+1),new Map),{resources:A,matches:D,scores:p}=Ps(q,C,h),O=d.useMemo(()=>{const w=new Map;return v==="institution"?Object.entries(V).forEach(([J,Z])=>{w.set(J,Z.resources.reduce((m,S)=>{const E=p.get(S.id);return E===void 0?m:m===void 0?E:m<E?m:E},void 0))}):v==="language"&&Object.entries(L).forEach(([J,Z])=>{w.set(J,Z.resources.reduce((m,S)=>{const E=p.get(S.id);return E===void 0?m:m===void 0?E:m<E?m:E},void 0))}),w},[v,p,V,L]);if(d.useMemo(()=>{const w={},J={};t.forEach(Z=>{const m=$(Z.institution,h)??"";Object.getOwnPropertyNames(w).includes(m)||(w[m]={expanded:!0,resources:[]}),w[m].resources.push(Z),Z.languages.forEach(S=>{Object.getOwnPropertyNames(J).includes(S)||(J[S]={expanded:!0,resources:[]}),J[S].resources.push(Z)})}),I(w),z(J)},[t,h]),!t)return null;const M={total:Se(t).length,totalRoot:t.length,available:i.length,selected:f.length,visible:Se(A.map(w=>w)).length,visibleRoot:A.length};function g(w){return xt(w,r,{defaultAnyLanguage:o("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:o("languageCodeToName.unknown",{ns:"common"})})}function u(w,J){const Z=f.filter(m=>!w.includes(m));y(J?[...Z,...w]:Z)}function B(w){l({resourceIDs:f,action:w})}function re(w){_(w.target.value)}function te(w){j(w.target.value)}function ae(w){b(w.target.value)}function be(){y(i)}function ke(){y([])}function ve(){y(A.map(w=>w.id))}function Ie(w,J){u(Se([w]),J)}function Te(w){u(Se(w),!0)}function qe(w){u(Se(w),!1)}function Me(w){return!(!i.includes(w.id)||N==="selected"&&!f.includes(w.id)&&!Is(w,J=>f.includes(J.id)))}function Qe(){return v==="institution"?Object.entries(V).toSorted(([w],[J])=>{const Z=O.get(w),m=O.get(J);return Z===m?0:Z===void 0?1:m===void 0?-1:Z-m}).map(([w,{expanded:J,resources:Z}])=>e.jsx(Yt,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:nt}})," ",w]}),titleId:w,resources:Z,selectedResourceIDs:f,resourceScores:p,highlightings:D,expanded:J,shouldBeShown:Me,onSelectAllClick:Te,onExpandToggleClick:m=>{I({...V,[w]:{...V[w],expanded:m}})},onDeselectAllClick:qe,onSelectClick:Ie,languageCodeToName:g,localeForInfos:h},w)):v==="language"?Object.entries(L).toSorted(([w],[J])=>{const Z=O.get(w),m=O.get(J);return Z===m?0:Z===void 0?1:m===void 0?-1:Z-m}).map(([w,{expanded:J,resources:Z}])=>e.jsx(Yt,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",g(w)," [",w,"]"]}),titleId:w,resources:Z,selectedResourceIDs:f,resourceScores:p,highlightings:D,expanded:J,shouldBeShown:Me,onSelectAllClick:Te,onExpandToggleClick:m=>L[w].expanded=m,onDeselectAllClick:qe,onSelectClick:Ie,languageCodeToName:g,localeForInfos:h},w)):A.filter(w=>!w.rootResourceId).map(w=>e.jsx(Vt,{resource:w,selectedResourceIDs:f,highlighting:D.get(w.id),highlightings:D,shouldBeShown:Me,onSelectClick:Ie,languageCodeToName:g,localeForInfos:h},w.id))}return e.jsxs(ie,{id:"resource-selection-modal",show:s,onHide:()=>B("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:o("search.resourcesModal.title")})}),e.jsxs(ie.Body,{className:"px-0",children:[e.jsx(K,{className:"px-3 pb-3 border-bottom",onSubmit:w=>w.preventDefault(),children:e.jsxs(ue,{children:[e.jsxs(ee,{className:"d-sm-flex row-gap-2 justify-content-around",children:[e.jsx(H,{md:2,sm:6,children:e.jsx(Ae,{label:"View",controlId:"resource-view-options-visibility",children:e.jsxs(K.Select,{value:N,onChange:re,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"selected",children:"Selected only"})]})})}),e.jsx(H,{md:2,sm:6,children:e.jsx(Ae,{label:"Group by",controlId:"resource-view-options-grouping",children:e.jsxs(K.Select,{value:v,onChange:te,children:[e.jsx("option",{value:"resource",children:"(Resource)"}),e.jsx("option",{value:"institution",children:"Institution"}),e.jsx("option",{value:"language",children:"Language"})]})})}),e.jsx(H,{md:2,sm:6,children:e.jsx(Ae,{label:"Sort by",controlId:"resource-view-options-sorting",children:e.jsxs(K.Select,{value:P,onChange:ae,disabled:v!=="resource"||q.trim()!=="",children:[e.jsx("option",{value:"title-up",children:"Title (up)"}),e.jsx("option",{value:"title-down",children:"Title (down)"}),e.jsx("option",{value:"institution-up",children:"Institution (up)"}),e.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),e.jsx(H,{md:3,sm:12,children:e.jsx(Ae,{label:"Resource filter query",controlId:"resource-view-options-filter",children:e.jsx(Ms,{value:q,onChange:w=>X(w)})})}),e.jsxs(H,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[e.jsx(ne,{onClick:be,children:"Select all"}),e.jsx(ne,{onClick:ve,disabled:N!=="all"||q.trim()==="",children:"Select visible"}),e.jsx(ne,{onClick:ke,children:"Deselect all"})]})]}),F.size>1&&e.jsxs(K.Group,{as:ee,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(K.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:o("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(H,{sm:"auto",children:e.jsx(st,{type:"radio",name:"resource-info-languages",defaultValue:h,onChange:w=>x(w),children:Array.from(F.entries()).toSorted().map(([w,J])=>e.jsxs(ze,{size:"sm",id:`resource-info-languages-${w}`,value:w,variant:"secondary",title:o("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:J,language:w,languageName:R.of(w)}),children:[R.of(w)," ",e.jsx("sup",{children:w})]},w))})})]})]})}),e.jsx("p",{className:"m-4 mb-0",children:o("search.resourcesModal.msgResourcesSelected",{count:M.selected,total:M.visible,available:M.available,context:M.available!==M.visible?"available":null})}),e.jsx(ue,{className:"px-3 pt-3",children:Qe()})]}),e.jsx(ie.Footer,{children:e.jsx(ne,{variant:"primary",onClick:()=>B("confirm"),children:o("search.resourcesModal.buttonConfirm")})})]})}function Lr(){const[s,n]=d.useState(!1);return[s,()=>{s!==!0&&n(!0)}]}function Cr(){const s=is(),{hash:n}=Mt(),t=d.useMemo(()=>new URLSearchParams(n.substring(1)),[n]),r=d.useCallback(i=>{const a=ns(typeof i=="function"?i(new URLSearchParams(t)):i),l=a.entries().next().done?"":`#${a}`;n!==l&&s({hash:l})},[t,n,s]);return[t,r]}const Nr=d.lazy(()=>pe(()=>import("./fcs-sru-aggregator-ui-querybuilder.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function Xt(s,n=""){const t=s.get("query");return t||n}function Jt(s,n="cql"){const t=s.get("queryType");if(t){if(qt.find(r=>r.id===t)!==void 0)return t;console.warn("Found unsupported queryType in search params",t)}return n}function Ir({resources:s,languages:n,onSearch:t,onShowToast:r,availableResources:i=null,selectedResources:a=null,hasSearch:l=!1,disabled:o=!1}){const{t:c}=oe(),[h,x]=Ve(),[R,f]=Cr(),[y,N]=d.useState(!1),[_,v]=d.useState(Cs),[j,P]=d.useState(!1),[b,q]=d.useState(!1),[X,V]=d.useState(!1),[I,L]=Lr(),[z,C]=d.useState(ye),[k,F]=d.useState(It),[A,D]=d.useState(Jt(h,wr)),[p,O]=d.useState(i??[]),[M,g]=d.useState(a??[]),[u,B]=d.useState(ut[0]),[re,te]=d.useState(Xt(h,"")),[ae]=d.useState(null),[be,ke]=d.useState(!1);d.useEffect(()=>{g(a??[])},[a]);const ve=d.useCallback(()=>g(vt(s,"cql",ye)),[s]),Ie=d.useCallback(U=>{const W=vt(U,A,k==="byGuess"?ye:z);return i&&i.length>0?W.filter(me=>i.includes(me)):W},[A,z,k,i]);d.useEffect(()=>{const U=Ie(s);O(U),g(W=>W.filter(me=>U.includes(me)))},[s,Ie]);const Te=d.useCallback(()=>{const U={language:z,languageFilter:k,queryType:A,query:re,resourceIDs:M??[],numberOfResults:u};U.query!==""&&U.resourceIDs.length!==0&&t(U)},[z,k,u,t,re,A,M]);d.useEffect(()=>{if(h&&(te(W=>Xt(h,W)),D(W=>Jt(h,W)),!h.get("x-aggregation-context"))){const W=h.get("mode");W&&(W==="search"&&Te(),h.delete("mode"),x(h))}},[h,x,Te]),d.useEffect(()=>{h.get("query")!==re&&(h.set("query",re),x(h))},[re,h,x]),d.useEffect(()=>{h.get("queryType")!==A&&(h.set("queryType",A),x(h))},[A,h,x]),d.useEffect(()=>{R.has("openQueryBuilder")&&(L(),V(!0),R.delete("openQueryBuilder"),f(R))},[R,f,L]);const qe=ur(s,M??[]).length,Me=s.find(U=>U.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,Qe=s.find(U=>U.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,w=Gt.includes(A);function J(U){if(!U)return;const W=U;W!==A&&ve(),D(W)}function Z(U){let W=Number.parseInt(U.target.value);W<10&&(W=10),W>250&&(W=250),ut.includes(W)||console.warn("Invalid number of results?!",{valid:ut,value:W}),B(W)}function m({language:U,filter:W,action:me}){if(P(!1),me==="abort")return;(U!==z||W!==k)&&ve(),C(U),F(W)}function S({resourceIDs:U,action:W}){N(!1),W!=="abort"&&(U.length,M.length,g(U))}function E({query:U,queryType:W,resourceIDs:me,action:ft}){if(q(!1),ft==="abort"||ft==="close"||!U||!W)return;const jt=me!==void 0&&me.length>0;let bt=jt,it=me??[];if(jt){const qs=vt(s,W,k==="byGuess"?ye:z);it=it.filter(Vs=>qs.includes(Vs)),bt=it.length>0}W!==A&&!bt&&ve(),bt?g(it):jt&&console.warn("Suggested query also had suggested resources but they do not fit the available resources (probably due to language filter)!",{language:z,queryType:W,resourceIDs:me}),D(W),te(U)}function se({query:U,validResources:W,action:me}){V(!1),me!=="abort"&&me!=="close"&&(te(U),M.length!==W.length&&r?.({title:c("search.toasts.searchInput.title"),body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:c("search.toasts.searchInput.msgResourcesChangedDueToQuery")}),e.jsx("p",{children:c("search.toasts.searchInput.msgResourcesAmountChanged",{before:M.length,after:W.length})}),e.jsx("hr",{}),e.jsx(ne,{onClick:()=>g(M),children:c("search.toasts.searchInput.buttonRevertSelection")})]}),variant:"info",delay:7e3}),g(W))}function ce(U){te(U)}function Y(U){U.preventDefault(),Te()}function Ne(){const U=(M??[]).length,W=s.length===U||p.length===U?"all":null;return c("search.searchInput.buttonSelectedResources",{count:U,context:W})}return e.jsxs("search",{id:"fcs-query",children:[e.jsxs(K,{noValidate:!0,onSubmit:Y,children:[e.jsxs(on,{size:l?void 0:"lg",hasValidation:!0,children:[e.jsx(ne,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":c("search.searchInput.buttonOpenQuerySuggestions"),onClick:()=>q(!0),children:e.jsx("i",{dangerouslySetInnerHTML:{__html:xs},"aria-hidden":"true"})}),e.jsx(K.Control,{placeholder:"Elephant","aria-label":c("search.searchInput.inputQueryAriaLabel"),"aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:o,"aria-disabled":o,value:re,isInvalid:!!ae,...be?{as:_s,queryType:A,onChange:ce}:{onChange:U=>ce(U.target.value)}}),w&&e.jsx(ne,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":c("search.searchInput.buttonOpenQueryBuilderAriaLabel"),className:"border-end-0 d-none d-md-block",onClick:()=>{L(),V(!0)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})}),e.jsx(ze,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:be,onChange:()=>ke(U=>!U),variant:"outline-secondary","aria-label":c("search.searchInput.buttonEnhanceQueryAriaLabel",{context:be?"enabled":"disabled"}),className:"d-flex align-items-center border-end-0",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:ws},"aria-hidden":"true"})}),e.jsxs(ne,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:o||re.trim().length===0,"aria-disabled":o,"aria-label":c("search.searchInput.buttonSearchAriaLabel"),children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:vs},"aria-hidden":"true",className:"d-inline d-md-none"}),e.jsx("span",{className:"d-none d-md-inline",children:c("search.searchInput.buttonSearch")})]}),e.jsx(K.Control.Feedback,{type:"invalid",children:ae?.msg})]}),e.jsx("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:e.jsx(Q,{i18nKey:"search.searchInput.filtersSummary",components:[e.jsxs(ge,{className:"d-inline-block",onSelect:J,"aria-disabled":o,"aria-label":c("search.searchInput.dropdownQueryTypeAriaLabel"),children:[e.jsxs(ge.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:o,"aria-disabled":o,style:ht[A]?{"--color":ht[A].color}:{},children:[c(`queryTypes.${A}.nameShort`,{ns:"common",defaultValue:ht[A]?.searchLabel??A.toUpperCase()})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Xe},"aria-hidden":"true"})]}),e.jsx(ge.Menu,{children:qt.filter(U=>U.id==="cql"||U.id==="fcs"&&Me||U.id==="lex"&&Qe).map(U=>e.jsx(ge.Item,{as:"button",eventKey:U.id,onClick:W=>W.preventDefault(),style:{"--color":U.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:c(`queryTypes.${U.id}.nameLong`,{ns:"common",defaultValue:U.name})},U.id))})]}),e.jsxs(ne,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{v("resource"),N(!0)},children:[Ne()," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Xe},"aria-hidden":"true"})]}),e.jsxs(ne,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{v("institution"),N(!0)},children:[c("search.searchInput.buttonSelectedInstitutions",{count:qe})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Xe},"aria-hidden":"true"})]}),e.jsxs(ne,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>P(!0),disabled:o,"aria-disabled":o,children:[xt(z,n??{},{defaultAnyLanguage:c("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:c("languageCodeToName.unknown",{ns:"common"})})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Xe},"aria-hidden":"true"})]}),e.jsx(K.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:Z,value:u,"aria-label":c("search.searchInput.selectNumberOfSearchResultsAriaLabel"),disabled:o,"aria-disabled":o,children:ut.map(U=>e.jsx("option",{value:U,children:U},U))})]})})]}),e.jsx(ks,{languages:n,resources:s,searchLanguage:z,show:j,onModalClose:m}),e.jsx(Rr,{resources:s,languages:n,availableResources:p,selectedResources:M??[],show:y,showGrouping:_,onModalClose:S}),e.jsx(Sr,{queryTypes:[A],show:b,onModalClose:E}),Gt.includes(A)&&I&&e.jsx(d.Suspense,{fallback:e.jsx(e.Fragment,{children:c("loading",{ns:"querybuilder",defaultValue:c("generic.loadingComponent",{ns:"common"})})}),children:e.jsx(Nr,{query:re,queryType:A,resources:s,selectedResources:M,show:X,onModalClose:se})})]})}function Tr({searchId:s,resourceId:n,numberOfResults:t,pollDelay:r=1500}){const{t:i}=oe(),a=_e(),l=Pt(),[o,c]=d.useState(!1),{isPending:h,mutate:x,reset:R}=as({mutationFn:jn.bind(null,a,s,{resourceId:n,numberOfResults:t}),mutationKey:["search-result-load-more",s,n],onSuccess:async b=>{b!==void 0&&s!==b&&console.warn("SearchIDs should be the same?!",{searchId:s,searchIdNewButSame:b,resourceId:n}),await l.invalidateQueries({queryKey:["search-results",s,n]}),c(!0)}});r??=1500;const{data:f,isLoading:y,isFetching:N}=Re({queryKey:["search-results",s,n],queryFn:yn.bind(null,a,s,n),enabled:o,refetchInterval(b){return b.state.data&&b.state.data.inProgress?r:!1}}),_=h||y||N,v=!!f&&!f.inProgress,j=_||o;o&&v&&(o&&c(!1),l.invalidateQueries({queryKey:["search-result-details",s,n]}));async function P(){R(),x()}return e.jsx(ne,{className:"more-results-button",disabled:j,onClick:P,children:j?e.jsx(ls,{animation:"border",className:"d-block"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ls}})," ",i("search.results.buttonLoadMore")]})})}function Ar(s,n=".."){const t=s.map(o=>o.split("/")),r=Math.max(...t.map(o=>o.length)),a=Array.from(Array(r).keys()).map(o=>new Set(t.map(c=>c.length>o?c[o]:!1)).size===1).reduce((o,c,h,x,R=n??"..")=>c?o&&o[o.length-1]!==R?o.concat([R]):o:o.concat([h]),[]);return s.map(o=>[o,o.split("/")]).map(([o,c])=>[o,a.map(h=>typeof h=="number"?c[h]:h).join("/").replace(/\/+$/,"")]).reduce((o,[c,h])=>o.set(c,h),new Map)}function Er(s,n){const t=s.filter(i=>i.spans.every(a=>a.text&&a.text.length===(a.range?.[1]??0)-(a.range?.[0]??0))||i.spans.every(a=>a.text&&a.text.length===(a.range?.[1]??0)-(a.range?.[0]??0)+1));return n?t.filter(i=>{const a=n.get(i.id);return a?!!["text","word"].includes(a.layerType.toLowerCase()):!0}).toSorted((i,a)=>{const l=n.get(i.id),o=n.get(a.id);if(l===void 0||o===void 0){if(l===o)return 0;if(l===void 0)return 1;if(o===void 0)return-1}const c=l.layerType.toLowerCase(),h=o.layerType.toLowerCase();if(c==="word"||h==="word"){if(c===h)return 0;if(c==="word")return-1;if(h==="word")return 1}if(l.qualifier!==null&&l.qualifier!==void 0||o.qualifier!==null&&o.qualifier!==void 0){if(l.qualifier!==null&&l.qualifier!==void 0&&o.qualifier!==null&&o.qualifier!==void 0)return 0;if(l.qualifier!==null&&l.qualifier!==void 0)return 1;if(o.qualifier!==null&&o.qualifier!==void 0)return-1}return 0}):t}function Os({data:s,resource:n}){const t=d.useRef(null),r=n?.availableLayers?.reduce((a,l)=>a.set(l.resultId,l),new Map);function i(a){const l=a.map(f=>f.id),o=Ar(l),c=Math.max(...a.map(f=>f.spans.length)),x=Er(a,r)?.[0]?.id;a.sort((f,y)=>x===void 0?0:f.id===x?-1:y.id===x?1:0);const R=l.length>1;return e.jsxs(de,{hover:!0,responsive:!0,className:"mb-0 results-plain",style:{width:"unset"},children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[r!==void 0&&R&&e.jsx("th",{scope:"col",children:"Layer Type"}),R&&e.jsx("th",{scope:"col",children:"Layer Identifier"}),Array(c).fill(null).map((f,y)=>e.jsx("th",{scope:"col",children:"Token"},y))]})}),e.jsx("tbody",{children:a.map(f=>e.jsxs("tr",{className:["text-nowrap"].concat([f.id===x&&a.length>1?"table-primary":null]).filter(Boolean).join(" "),children:[r!==void 0&&R&&e.jsx("td",{scope:"row",className:"text-uppercase",children:r.get(f.id)?.layerType}),R&&e.jsx("td",{scope:"row",title:f.id,className:"border-end",children:o.get(f.id)}),f.spans.map((y,N)=>e.jsx("td",{children:y.hit?e.jsx("mark",{children:e.jsx("strong",{children:y.text})},N):y.text},y.range?.join("-")??N))]},f.id))})]})}return e.jsxs(e.Fragment,{children:[e.jsxs(de,{responsive:!0,striped:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Annotation Layers"})]})}),e.jsx("tbody",{children:s.records.filter(a=>a.adv!==null).map((a,l)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:l+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[a.ref&&e.jsx("a",{href:a.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:We}})})," ",a.pid&&e.jsx(Fe,{placement:"auto-start",container:t,delay:{show:250,hide:400},overlay:e.jsx($e,{id:`ttip-${a.pid}-${l}`,children:a.pid}),children:e.jsx(Ce,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:i(a.adv)})]},`${a.pid??a.ref??s.resource.id}-${l}`))})]}),e.jsx("div",{ref:t,className:"tooltip-mounting-point"})]})}function Us({data:s}){const n=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(de,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Left Context"}),e.jsx("th",{scope:"col",children:"Hit"}),e.jsx("th",{scope:"col",children:"Right Context"})]})}),e.jsx("tbody",{children:s.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:We}})})," ",t.pid&&e.jsx(Fe,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx($e,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(Ce,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.left}),e.jsx("td",{children:t.hits.keyword&&e.jsx("mark",{children:e.jsx("strong",{children:t.hits.keyword})})}),e.jsx("td",{children:t.hits.right})]},`${t.pid??t.ref??s.resource.id}-${r}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function Hs({data:s}){const n=d.useRef(null);return e.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[s.records.filter(t=>t.lex!==null).map((t,r)=>e.jsx(T,{className:"flex-grow-1 w-100",children:e.jsxs(T.Body,{children:[e.jsx(T.Title,{children:t.lex.fields.filter(i=>i.type==="lemma").map(i=>i.values).flat(1).map(i=>e.jsx("span",{children:i.value}))}),e.jsxs(Je,{variant:"flush",children:[(t.lex.lang||t.lex.langUri)&&e.jsxs(Je.Item,{children:[e.jsx("strong",{children:"lang"}),": ",t.lex.lang," ",t.lex.langUri]}),t.lex.fields.filter(i=>i.type!=="lemma").map(i=>e.jsxs(Je.Item,{children:[e.jsx("strong",{children:i.type}),":",i.values.map((a,l)=>e.jsx("span",{className:"ms-2 lex-value",children:a.value},l))]},i.type))]}),e.jsx(T.Link,{children:t.ref&&e.jsxs("a",{href:t.ref,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:We}})," Original results ..."]})}),e.jsx(T.Link,{children:t.pid&&e.jsx(Fe,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx($e,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(Ce,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${t.pid??t.ref??s.resource.id}-${r}`)),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function Ds({data:s}){const n=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(de,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:s.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:We}})})," ",t.pid&&e.jsx(Fe,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx($e,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(Ce,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.fragments.map((i,a)=>i.hit&&!i.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:i.text})},a):i.hit&&i.hitKind?e.jsx("span",{className:`lex-hitkind-${i.hitKind}`,title:`Annotated as "${i.hitKind.split("-").slice(1).join("-")}"`,children:i.text},a):e.jsx("span",{children:i.text},a))})]},`${t.pid??t.ref??s.resource.id}-${r}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function Fs({data:s}){const n=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(de,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:s.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:We}})})," ",t.pid&&e.jsx(Fe,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx($e,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(Ce,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.fragments.map((i,a)=>i.hit&&!i.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:i.text})},a):e.jsx("span",{children:i.text},a))})]},`${t.pid??t.ref??s.resource.id}-${r}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function _r({show:s,searchId:n,resourceId:t,result:r,viewMode:i,showDiagnostics:a,onModalClose:l}){const o=_e(),{t:c}=oe(),h=we(p=>p.locale),{languages:x,resources:R,weblichtLanguages:f}=Ht(),{numberOfResults:y,queryType:N,language:_,languageFilter:v}=Bt(),[j,P]=d.useState(h);d.useEffect(()=>{h&&P(h)},[h]);const b=new Intl.DisplayNames([h,"en"],{type:"language"}),[q,X]=d.useState(a);d.useEffect(()=>X(a),[a]);const[V,I]=d.useState(i);d.useEffect(()=>I(i),[i]);const L=rt(r.resource),z=r.exception||r.diagnostics?.filter(p=>p.uri!==Ee).length>0;function C(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.records.length,!0)}let k=null,F=!1;if(!f.includes(_)){if(_===ye)if(r.resource.languages&&r.resource.languages.length===1)k=r.resource.languages[0];else{const p=[...new Set(r.records.map(O=>O.lang).filter(O=>O!==null))];p.length===1&&(k=p[0])}k||(console.warn("Cannot use WebLicht: unsupported language",{language:_,languageFilter:v}),F=!0)}function A(p){I(p.target.value)}function D(){if(!r)return null;if(V==="annotation-layers"&&r.hasAdvResults){const p=Ze(R,O=>O.id===r.id);return e.jsx(Os,{data:r,resource:p})}return V==="kwic"&&(N!=="lex"||!r.isLexHits)?e.jsx(Us,{data:r}):V==="lexical-entry"&&r.hasLexResults?e.jsx(Hs,{data:r}):N==="lex"&&r.isLexHits?e.jsx(Ds,{data:r}):e.jsx(Fs,{data:r})}return e.jsxs(ie,{show:s,onHide:()=>l(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:$(r.resource.title,j)})}),e.jsxs(ie.Body,{className:"resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":c("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:nt}})," ",c("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:$(r.resource.institution,j)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ot}})," ",c("search.results.resourceInfo.labelDescription")]}),$(r.resource.description,j)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:$(r.resource.description,j)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",c("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:r.resource.languages.map(x?p=>xt(p,x,{defaultAnyLanguage:c("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:c("languageCodeToName.unknown",{ns:"common"})}):p=>p).toSorted().join(", ")}),L&&L.length>1&&e.jsx(st,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:j,onChange:p=>P(p),className:"mt-2 mb-3",children:L.toSorted().map(p=>e.jsxs(ze,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${p}`,value:p,children:[b.of(p)," ",e.jsx("sup",{children:p})]},p))}),e.jsx("dt",{children:c("search.results.resourceInfo.labelPID")}),e.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&e.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})," ",c("search.results.resourceInfo.moreInformation")]}),e.jsx("hr",{}),e.jsxs(ee,{className:"row-gap-2",children:[e.jsx(H,{lg:"auto",md:3,sm:6,children:e.jsx(Ae,{label:c("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(K.Select,{value:V,onChange:A,children:[e.jsx("option",{value:"plain",children:c("search.results.displayOptions.viewModeOptions.plain")}),(N!=="lex"||!r.isLexHits)&&e.jsx("option",{value:"kwic",children:c("search.results.displayOptions.viewModeOptions.kwic")}),N==="fcs"&&e.jsx("option",{value:"annotation-layers",children:c("search.results.displayOptions.viewModeOptions.annotation-layers")}),N==="lex"&&e.jsx("option",{value:"lexical-entry",children:c("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(H,{lg:3,md:3,sm:6,className:"align-content-center",children:e.jsx(K.Check,{disabled:!z,checked:q,onChange:()=>X(p=>!p),id:"results-modal-view-warnings-errors",label:c("search.results.displayOptions.optionShowWarningsErrors")})}),e.jsxs(H,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[e.jsxs(ge,{children:[e.jsxs(ge.Toggle,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:fs}})," ",c("search.results.buttonDownload")]}),e.jsx(ge.Menu,{children:yr.map(({id:p,label:O})=>e.jsx(ge.Item,{href:vn(o,n,t,p,_,v),className:"matomo_download",children:e.jsx(Q,{i18nKey:"search.results.msgButtonDownloadOption",values:{label:c(`downloadFormats.${p}.name`,{ns:"common",defaultValue:O})}})},p))})]}),e.jsxs(ne,{disabled:F,"aria-disabled":F,href:Sn(o,n,t,k,_,v),className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:js}})," ",c("search.results.buttonSendToWeblicht")]}),!1]})]}),e.jsx("hr",{}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"search.results.msgShowingXresults",values:{count:r.records.length,context:C()?"hasmore":null,total:r.numberOfRecords}})}),D()]}),q&&z&&e.jsxs(ie.Body,{className:"border-top",children:[r.exception&&e.jsxs(fe,{variant:"danger","aria-label":c("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(fe.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:c("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":c("search.results.diagnostics.msgAriaLabel"),children:r.exception.message})]}),r.exception.cause&&e.jsx("p",{className:"mb-0 small",children:c("search.results.diagnostics.msgCause",{cause:r.exception.cause})}),r.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(Q,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:r.exception.klass}})})]}),r.diagnostics.filter(p=>p.uri!==Ee).map(p=>e.jsxs(fe,{variant:"warning",children:[e.jsx(fe.Heading,{style:{fontSize:"1rem"},children:p.message}),p.diagnostic&&e.jsx("p",{className:"mb-0 small",children:c("search.results.diagnostics.msgDiagnosticDetails",{details:p.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(Q,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:p.uri}})})]},`${p.uri}-${p.message}-${p.diagnostic}`))]}),C()&&e.jsx(ie.Footer,{className:"justify-content-center border-top py-2",children:e.jsx(Tr,{searchId:n,resourceId:t,numberOfResults:y})})]})}function kr({searchId:s,resourceId:n,resultInfo:t,viewMode:r,showResourceDetails:i,showDiagnostics:a}){const l=_e(),{t:o}=oe(),c=we(p=>p.locale),{languages:h,resources:x}=Ht(),{queryType:R}=Bt(),[f,y]=d.useState(c);d.useEffect(()=>{c&&y(c)},[c]);const N=new Intl.DisplayNames([c,"en"],{type:"language"}),_=d.useId(),[v,j]=d.useState(!0),[P,b]=d.useState(!1),q=t.inProgress,X=t.numberOfRecordsLoaded>0,V=t.exception||t.diagnostics?.filter(p=>p.uri!==Ee).length>0,{data:I,isLoading:L,isError:z}=Re({queryKey:["search-result-details",s,n],queryFn:wn.bind(null,l,s,n),enabled:!q}),C=I?rt(I.resource):[];if(q||!X&&(a&&!V||!a)||!I)return null;function k(){b(!0)}function F(){b(!1)}function A(){return I?I.numberOfRecords===-1?I.records.length:I.numberOfRecords===I.records.length&&I.nextRecordPosition===-1?`${I.records.length} / ${I.numberOfRecords}?`:`${I.records.length} / ${I.numberOfRecords}`:null}function D(){if(!I)return null;if(r==="annotation-layers"&&I.hasAdvResults){const p=Ze(x,O=>O.id===I.id);return e.jsx(Os,{data:I,resource:p})}return r==="kwic"&&(R!=="lex"||!I.isLexHits)?e.jsx(Us,{data:I}):r==="lexical-entry"&&I.hasLexResults?e.jsx(Hs,{data:I}):R==="lex"&&I.isLexHits?e.jsx(Ds,{data:I}):e.jsx(Fs,{data:I})}return e.jsxs(e.Fragment,{children:[e.jsxs(T,{className:"my-1 resource-search-result",role:"group","aria-label":o("search.results.resultResourceAriaLabel",{title:I.resource.title}),children:[e.jsxs(T.Header,{className:"d-flex accordion",children:[e.jsxs("button",{type:"button",onClick:()=>j(p=>!p),"aria-controls":_,"aria-expanded":v,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${v?"":"collapsed"}`,children:[e.jsx(Ce,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":o("search.results.resultCountAriaLabel"),children:A()}),e.jsx("span",{"aria-label":o("search.results.resultResourceTitleAriaLabel"),className:"user-select-text",children:$(I.resource.title,f)}),e.jsx("small",{className:"text-muted user-select-text","aria-label":o("search.results.resultResourceInstitutionAriaLabel"),children:$(I.resource.institution,f)})]}),e.jsx("div",{className:"d-inline-block ms-auto",children:e.jsxs(ne,{size:"sm",onClick:k,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ys}})," View"]})})]}),e.jsx(os,{in:v,children:e.jsxs("div",{id:_,children:[i&&e.jsxs(T.Body,{className:"border-bottom resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":o("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:nt}})," ",o("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:$(I.resource.institution,f)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ot}})," ",o("search.results.resourceInfo.labelDescription")]}),$(I.resource.description,f)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:$(I.resource.description,f)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",o("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:I.resource.languages.map(h?p=>xt(p,h,{defaultAnyLanguage:o("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:o("languageCodeToName.unknown",{ns:"common"})}):p=>p).toSorted().join(", ")})]}),C&&C.length>1&&e.jsx(st,{type:"radio",name:`${I.resource.id}-result-info-languages`,defaultValue:f,onChange:p=>y(p),className:"mt-2",children:C.toSorted().map(p=>e.jsxs(ze,{variant:"outline-secondary",size:"sm",id:`${I.resource.id}-result-info-languages-${p}`,value:p,children:[N.of(p)," ",e.jsx("sup",{children:p})]},p))})]}),X&&e.jsx(T.Body,{children:D()}),a&&V&&e.jsxs(T.Body,{className:X?"border-top":"",children:[I.exception&&e.jsxs(fe,{variant:"danger","aria-label":o("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(fe.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:o("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":o("search.results.diagnostics.msgAriaLabel"),children:I.exception.message})]}),I.exception.cause&&e.jsx("p",{className:"mb-0 small",children:o("search.results.diagnostics.msgCause",{cause:I.exception.cause})}),I.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(Q,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:I.exception.klass}})})]}),I.diagnostics.filter(p=>p.uri!==Ee).map(p=>e.jsxs(fe,{variant:"warning",children:[e.jsx(fe.Heading,{style:{fontSize:"1rem"},children:p.message}),p.diagnostic&&e.jsx("p",{className:"mb-0 small",children:o("search.results.diagnostics.msgDiagnosticDetails",{details:p.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(Q,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:p.uri}})})]},`${p.uri}-${p.message}-${p.diagnostic}`))]})]})})]}),e.jsx(_r,{show:P,searchId:s,resourceId:n,result:I,viewMode:r,showDiagnostics:a,onModalClose:F})]})}const Mr="plain",Pr="lexical-entry",Or="plain",Ur="default",Hr={default:()=>()=>0,"title-up":s=>(n,t)=>{const r=le.getState().locale,i=$(s.get(n.id)?.title??null,r)??"",a=$(s.get(t.id)?.title??null,r)??"";return i.localeCompare(a)},"title-down":s=>(n,t)=>{const r=le.getState().locale,i=$(s.get(n.id)?.title??null,r)??"",a=$(s.get(t.id)?.title??null,r)??"";return-i.localeCompare(a)},"result-count-total-up":()=>(s,n)=>{const t=s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded,r=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded;return t-r},"result-count-total-down":()=>(s,n)=>{const t=s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded;return(n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded)-t}},Zt=1500;function Dr({searchId:s,pollDelay:n=Zt}){const{t}=oe(),r=_e(),{resources:i}=Ht(),{query:a,queryType:l,resourceIDs:o}=Bt(),[c,h]=d.useState(l==="lex"?Pr:l==="fcs"?Or:Mr),[x,R]=d.useState(Ur),[f,y]=d.useState(""),[N,_]=d.useState(!1),[v,j]=d.useState(!1),P=d.useMemo(()=>{const g=new Map;return i?.forEach(u=>{g.set(u.id,u)}),Hr[x](g)},[x,i]);n??=Zt;const{data:b}=Re({queryKey:["search-results",s],queryFn:bn.bind(null,r,s??""),enabled:!!s,refetchInterval(g){return g.state.data&&g.state.data.inProgress>0?n:!1}}),q=d.useMemo(()=>b?.results.toSorted(P)||[],[b,P]),X=l==="lex"&&b?.results.every(g=>g.numberOfRecords<=0||g.isLexHits===!0),V=o.length,I=b?.inProgress??V,L=d.useMemo(()=>b?.results.filter(g=>(g.numberOfRecords!==-1?g.numberOfRecords:g.numberOfRecordsLoaded)>0).length??0,[b]),z=d.useMemo(()=>b?.results.filter(g=>!g.inProgress&&(g.numberOfRecords!==-1?g.numberOfRecords:g.numberOfRecordsLoaded)>0&&g.diagnostics.filter(u=>u.uri!==Ee).length>0).length??0,[b]),C=d.useMemo(()=>b?.results.filter(g=>!g.inProgress&&(g.numberOfRecords!==-1?g.numberOfRecords:g.numberOfRecordsLoaded)<=0&&g.diagnostics.filter(u=>u.uri!==Ee).length===0&&g.exception===null).length??0,[b]),k=d.useMemo(()=>b?.results.filter(g=>!g.inProgress&&(g.numberOfRecords!==-1?g.numberOfRecords:g.numberOfRecordsLoaded)<=0&&(g.diagnostics.filter(u=>u.uri!==Ee).length>0||g.exception!==null)).length??0,[b]),F=d.useMemo(()=>b?.results.filter(g=>!g.inProgress&&g.numberOfRecords<=0&&g.exception!==null).length??0,[b]),A=d.useMemo(()=>b?.results.filter(g=>!g.inProgress&&(g.numberOfRecords!==-1?g.numberOfRecords:g.numberOfRecordsLoaded)<=0&&g.diagnostics.filter(u=>u.uri!==Ee).length>0&&g.exception===null).length??0,[b]),D=d.useMemo(()=>b?.results.map(g=>g.numberOfRecords!==-1?g.numberOfRecords:g.numberOfRecordsLoaded).reduce((g,u)=>g+u,0)??0,[b]),p=d.useMemo(()=>b?.results.map(g=>g.numberOfRecordsLoaded).reduce((g,u)=>g+u,0)??0,[b]);{const[g,u]=d.useState(!1);d.useEffect(()=>{b&&I===0&&(g||(u(!0),gs(a,l,p)))},[b,I,a,l,s,g,p])}function O(g){h(g.target.value)}function M(g){R(g.target.value)}return e.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[e.jsx(Fe,{placement:"auto",overlay:e.jsxs(yt,{id:"search-progress-information-popover",children:[e.jsx(yt.Header,{children:t("search.results.progressPopover.title")}),e.jsxs(yt.Body,{style:{textIndent:"2rem hanging"},children:[e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesRequested",count:V})}),I>0&&e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesRequestedPending",count:I})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithoutResults",count:C+k})}),e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsOK",count:C})}),A>0&&e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsWarnings",count:A})}),F>0&&e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsErrors",count:F})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithResults",count:L})}),z>0&&e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithResultsWarnings",count:z})}),e.jsx("hr",{className:"mt-2 mb-0"}),e.jsx("hr",{className:"mt-1 mb-1"}),e.jsx("div",{children:e.jsx(Q,{i18nKey:"search.results.progressPopover.numResourcesWithResultsTotal",count:p,values:{available:D}})})]})]}),children:e.jsxs(lt,{className:"mb-3",children:[e.jsx(lt,{variant:"success",now:L,max:V,label:e.jsx("span",{children:t("search.results.progressBar.numWithResults",{count:L})}),"aria-label":t("search.results.progressBar.numWithResultsAriaLabel")}),e.jsx(lt,{variant:"secondary",now:C+k,max:V,label:e.jsx("span",{children:t("search.results.progressBar.numWithoutResults",{count:C+k})}),"aria-label":t("search.results.progressBar.numWithoutResultsAriaLabel")}),e.jsx(lt,{striped:!0,animated:!0,now:I,max:V,label:e.jsx("span",{children:t("search.results.progressBar.numResultsPending",{count:I})}),"aria-label":t("search.results.progressBar.numResultsPendingAriaLabel")})]})}),e.jsx(T,{className:"mb-2",role:"group","aria-label":t("search.results.displayOptions.cardAriaLabel"),children:e.jsx(T.Body,{children:e.jsxs(ee,{className:"row-gap-2",children:[e.jsx(H,{lg:"auto",md:6,sm:6,children:e.jsx(Ae,{label:t("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(K.Select,{value:c,onChange:O,children:[e.jsx("option",{value:"plain",children:t("search.results.displayOptions.viewModeOptions.plain")}),(l!=="lex"||!X)&&e.jsx("option",{value:"kwic",children:t("search.results.displayOptions.viewModeOptions.kwic")}),l==="fcs"&&e.jsx("option",{value:"annotation-layers",children:t("search.results.displayOptions.viewModeOptions.annotation-layers")}),l==="lex"&&e.jsx("option",{value:"lexical-entry",children:t("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(H,{lg:"auto",md:6,sm:6,children:e.jsx(Ae,{label:t("search.results.displayOptions.sortingLabel"),controlId:"results-sorting",children:e.jsxs(K.Select,{value:x,onChange:M,children:[e.jsx("option",{value:"default",children:t("search.results.displayOptions.sortingOptions.default")}),e.jsx("option",{value:"title-up",children:t("search.results.displayOptions.sortingOptions.title-up")}),e.jsx("option",{value:"title-down",children:t("search.results.displayOptions.sortingOptions.title-down")}),e.jsx("option",{value:"result-count-total-up",children:t("search.results.displayOptions.sortingOptions.result-count-total-up")}),e.jsx("option",{value:"result-count-total-down",children:t("search.results.displayOptions.sortingOptions.result-count-total-down")})]})})}),e.jsx(H,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:e.jsx(Ae,{label:t("search.results.displayOptions.resultFilterQueryLabel"),controlId:"result-filter",children:e.jsx(Ms,{disabled:x!=="default"||!0,value:f,onChange:g=>y(g)})})}),e.jsxs(H,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[e.jsx(K.Check,{checked:N,onChange:()=>_(g=>!g),id:"results-view-resource-details",label:t("search.results.displayOptions.optionShowResultDetails")}),e.jsx(K.Check,{checked:v,onChange:()=>j(g=>!g),id:"results-view-warnings-errors",label:t("search.results.displayOptions.optionShowWarningsErrors")})]})]})})}),s&&b&&q.map(g=>e.jsx(kr,{searchId:s,resourceId:g.id,resultInfo:g,viewMode:c,showResourceDetails:N,showDiagnostics:v},`${s}-${g.id}`))]})}const Fr=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,es=""+new URL("assets/logo-fcs.png",import.meta.url).href;function Br(){const s=_e(),{t:n}=oe(),[t,r]=Ve(),[i,a]=d.useState([]),[l,o]=d.useState({}),[c,h]=d.useState([]),[x,R]=d.useState(null),[f,y]=d.useState(!1),[N,_]=d.useState(null),[v,j]=d.useState([]),P=G.getState().appTitleHead,b=G.getState().authEnabled,q=G.getState().isAuthenticated,X={consortia:t.get(he)},{data:V,isLoading:I,isError:L}=Re({queryKey:["init"],queryFn:pn.bind(null,s,X)});d.useEffect(()=>{if(!V)return;const p=gt(V.resources);if(o(V.languages),h(V.weblichtLanguages),a(p),b){const O=dr(p,g=>g.availabilityRestriction==="NONE"),M=(O.get(!1)??[]).length;if(!q&&M>0){O.get(!1);const g=O.get(!0);R(g),j(u=>[...u,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(Q,{i18nKey:"search.toasts.resourceSelection.msgAuthOnlyResourcesNotSelected",count:M}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:(O.get(!1)??[]).map(B=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:B},B))})]}),variant:"success"}])}else R(Se(p))}else R(Se(p))},[V,b,q,n]),d.useEffect(()=>{if(!i||i.length===0)return;const p=t.get("x-aggregation-context");if(p){try{const O=JSON.parse(p),{selected:M,unavailable:g}=cr(i,O);M.length>0&&(R(M),j(u=>[...u,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(Q,{i18nKey:"search.toasts.resourceSelection.msgPreselectedResources",count:M.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:M.map(B=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:B}))})]}),variant:"success"}])),g.length>0&&j(u=>[...u,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(Q,{i18nKey:"search.toasts.resourceSelection.msgUnableToSelectResources",count:g.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:g.map(B=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:B}))})]}),variant:"warning"}])}catch(O){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:p},O),O instanceof Error&&j(M=>[...M,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[n("search.toasts.resourceSelection.msgErrorUnableToSelectResources",{error:O.name}),e.jsx("br",{}),e.jsx("small",{children:O.message})]}),variant:"error"}])}t.delete("x-aggregation-context"),r(t)}},[i,t,r,n]);const z=I||L,{mutate:C,data:k,isPending:F}=as({mutationKey:["search"],mutationFn:({query:p,queryType:O,language:M,numberOfResults:g,resourceIDs:u})=>fn(s,{query:p,queryType:O,language:M,numberOfResults:g.toString(),resourceIds:u})});function A(p){R(p.resourceIDs),_(p),y(!0),gs(p.query,p.queryType),C(p)}function D(p){j(O=>[...O,p])}return e.jsxs(e.Fragment,{children:[e.jsx(tt,{children:e.jsx("title",{children:P})}),e.jsxs(ue,{id:"search",children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:e.jsx(ln,{position:"top-end",className:"mt-2",style:{zIndex:100},children:v.map((p,O)=>e.jsxs(wt,{bg:p.variant,onClose:()=>j(M=>M.filter(g=>g!==p)),delay:p.delay??5e3,autohide:!0,children:[e.jsx(wt.Header,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:p.title})}),e.jsx(wt.Body,{children:p.body})]},O))})}),!f&&e.jsx(ee,{children:e.jsx(H,{className:"text-center",children:e.jsxs("picture",{children:[e.jsx("source",{srcSet:es,media:"(prefers-color-scheme: light)"}),e.jsx("source",{srcSet:Fr,media:"(prefers-color-scheme: dark)"}),e.jsx("img",{src:es,className:"logo",alt:"FCS logo"})]})})}),e.jsx(ee,{className:"mt-3",children:e.jsx(H,{children:e.jsx(Ir,{resources:i,languages:l,availableResources:null,selectedResources:x,onSearch:A,onShowToast:D,hasSearch:f,disabled:z})})}),!f&&e.jsx(ee,{className:"mt-3",children:e.jsxs(H,{children:[e.jsx("p",{children:e.jsx(Q,{i18nKey:"search.intro.textGeneral"})}),e.jsx("p",{children:e.jsx(Q,{i18nKey:"search.intro.textLearnMore",components:[e.jsxs("a",{href:n("search.intro.url"),children:["page ",e.jsx("em",{children:"Content Search"})," at CLARIN.eu"]})]})})]})}),f&&F&&e.jsx(ee,{children:e.jsx(H,{className:"text-center my-5",children:e.jsx(ls,{animation:"border"})})}),N&&k&&e.jsx(rr,{resources:i,languages:l,weblichtLanguages:c,children:e.jsx(ar,{...N,children:e.jsx(Dr,{searchId:k})})})]})]})}function qr(){const s=is(),[n]=Be();return d.useCallback((r,i,a)=>{const l=Gs(r,i);s({pathname:l,search:n},a)},[s,n])}function Vr(){const s=d.useContext(Ys),n=Mt(),t=s.matches.map(i=>i.route),r=Xs(t,n);return r!==null&&r.length>0?r[0]:null}function zr(s){const n=d.useRef();return d.useEffect(()=>{n.current=s}),n.current}const Oe="resource",$r="institution",Kr="url";function Bs(s){const n=new URL(s).hostname,t=n.split(".");if(t.length<=1)return n;const r=t.at(-1);if(t.length===2)return r;const i=t.at(-2);return r.length===2&&i.length===2||r.length===3&&i.length===2?`${i}.${r}`:r}function Wr(s){const n=Bs(s),t=new URL(s),o=`${t.hostname.slice(0,-(n.length+1)).split(".").slice(-1)}.${n}`;return t.port?`${o}:${t.port}`:o}function ts(s){const n=new URL(s),r=n.hostname.split(".").toReversed(),i=s.substring(s.indexOf("/",n.protocol.length+2+n.hostname.length));return[...r,n.port,i]}function St(s,n){const t=ts(s),r=ts(n),i=Math.min(t.length,r.length);for(let a=0;a<i;a++){const l=t[a],o=r[a],c=l.localeCompare(o);if(c!==0)return c}return 0}const ss=new Map([["BASIC_SEARCH",0],["ADVANCED_SEARCH",1],["LEX_SEARCH",2],["AUTHENTICATED_SEARCH",3]]);function Qr(s,n){const t=ss.get(s),r=ss.get(n);return t===void 0?1:r===void 0?-1:t-r}function Gr(){const s=_e(),n=Pt(),{t}=oe(),r=we(m=>m.locale),[,i]=Be(),[a,l]=Ve(),[o,c]=d.useState([]),[h,x]=d.useState([]),[R,f]=d.useState({}),[y,N]=d.useState($r),[_,v]=d.useState(Kr),[j,P]=d.useState(!1),b=a.get(he)?.split(",")??[],q={consortia:a.get(he)},{data:X,isPending:V,isError:I,error:L}=Re({queryKey:["resources"],queryFn:Rt.bind(null,s,q)}),{data:z,isPending:C,isError:k,error:F}=Re({queryKey:["languages"],queryFn:us.bind(null,s,q)}),{data:A,isPending:D,isError:p,error:O}=Re({queryKey:["resources-all"],queryFn:Rt.bind(null,s,void 0)});d.useEffect(()=>{if(!X)return;const m=gt(X);c(m)},[X]),d.useEffect(()=>{z&&f(z)},[z]);{d.useEffect(()=>{A&&x(gt(A))},[A]);const m=a.get(he),S=zr(m);d.useEffect(()=>{const E=a.get(he);S!==E&&n.invalidateQueries()},[S,n,a])}const M=Tt(o),g=M.reduce((m,S)=>{const E=S.endpoint.url;return m.has(E)||m.set(E,[]),m.get(E).push(S),m},new Map),u=Array.from(g.keys()).reduce((m,S)=>{const E=Wr(S);return m.has(E)||m.set(E,[]),m.get(E).push(S),m},new Map),B=Array.from(g.keys()).reduce((m,S)=>{const E=Bs(S);return m.has(E)||m.set(E,[]),m.get(E).push(S),m},new Map),re=M.reduce((m,S)=>{const E=S.endpoint.url;m.has(E)||m.set(E,new Set);const se=m.get(E);return S.endpoint.searchCapabilities.forEach(ce=>se.add(ce)),m},new Map),te=M.reduce((m,S)=>{const E=$(S.institution,r)??S.endpointInstitution.name;return m.has(E)||m.set(E,[]),m.get(E).push(S),m},new Map),ae=M.reduce((m,S)=>{const E=S.endpointInstitution.name;return m.has(E)||m.set(E,[]),m.get(E).push(S),m},new Map),be=M.reduce((m,S)=>{const E=S.searchCapabilitiesResolved;for(const se of E)m.has(se)||m.set(se,[]),m.get(se).push(S);return m},new Map),ke=M.reduce((m,S)=>{const E=S.availabilityRestriction;return m.has(E)||m.set(E,[]),m.get(E).push(S),m},new Map),ve=Tt(h).reduce((m,S)=>{const E=S.endpointInstitution.consortium??null;m.has(E)||m.set(E,{resources:[],endpoints:new Set});const se=m.get(E);return se.resources.push(S),se.endpoints.add(S.endpoint.url),m},new Map),Ie=o&&o.length>0,Te=R&&Object.getOwnPropertyNames(R).length>0,qe=Ie&&Te,Me=Array.from(ke.keys()).filter(m=>m!=="NONE").length>0;function Qe(m){const S=a.get(he)?.split(",").filter(Boolean)??[],E=S.includes(m)?S.filter(se=>se!==m):S.concat([m]);E.length===0?a.delete(he):a.set(he,E.join(",")),l(a)}function w(m){return Array.from(m.map(S=>re.get(S)).filter(S=>S!==void 0).reduce((S,E)=>(E.forEach(se=>S.add(se)),S),new Set)).toSorted(Qr).map(S=>S.endsWith("_SEARCH")?S.substring(0,S.indexOf("_SEARCH")):S)}function J(){return e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thInstitutionName")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortia")})]})}),e.jsx("tbody",{children:Array.from((y==="hoster"?ae:te).entries()).toSorted().map(([m,S])=>{const E=Array.from(S.map(Y=>Y.endpoint.url).reduce((Y,Ne)=>Y.add(Ne),new Set)),se=w(E),ce=Array.from(S.map(Y=>Y.endpointInstitution.consortium).filter(Y=>Y!==void 0).reduce((Y,Ne)=>Y.add(Ne),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:S.length}),e.jsx("td",{children:se.join(", ")}),e.jsx("td",{children:ce.join(", ")})]},m)})})]})}function Z(){return _==="tld"?e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thEndpointDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountURLsForDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortia")})]})}),e.jsx("tbody",{children:Array.from(B.entries()).toSorted(([m],[S])=>St(`http://${m}`,`http://${S}`)).map(([m,S])=>{const E=S.map(Y=>g.get(Y)).filter(Y=>Y!==void 0).flat(),se=w(S),ce=Array.from(E.map(Y=>Y.endpointInstitution.consortium).filter(Y=>Y!==void 0).reduce((Y,Ne)=>Y.add(Ne),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:S.length}),e.jsx("td",{children:E.length}),e.jsx("td",{children:se.join(", ")}),e.jsx("td",{children:ce.join(", ")})]},m)})})]}):_==="domain"?e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thEndpointDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountURLsForDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortia")})]})}),e.jsx("tbody",{children:Array.from(u.entries()).toSorted(([m],[S])=>St(`http://${m}`,`http://${S}`)).map(([m,S])=>{const E=S.map(Y=>g.get(Y)).filter(Y=>Y!==void 0).flat(),se=w(S),ce=Array.from(E.map(Y=>Y.endpointInstitution.consortium).filter(Y=>Y!==void 0).reduce((Y,Ne)=>Y.add(Ne),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:S.length}),e.jsx("td",{children:E.length}),e.jsx("td",{children:se.join(", ")}),e.jsx("td",{children:ce.join(", ")})]},m)})})]}):e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thEndpointUrl")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortium")})]})}),e.jsx("tbody",{children:Array.from(g.entries()).toSorted(([m],[S])=>St(m,S)).map(([m,S])=>{const E=w([m]),se=Array.from(S.map(ce=>ce.endpointInstitution.consortium).filter(ce=>ce!==void 0).reduce((ce,Y)=>ce.add(Y),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:S.length}),e.jsx("td",{children:E.join(", ")}),e.jsx("td",{children:se.join(", ")})]},m)})})]})}return e.jsxs(ue,{className:"d-grid gap-2 mt-3",children:[(V||I)&&e.jsx(ee,{children:e.jsxs(H,{children:[V?t("statistics.loading",{context:"what",what:"resources"}):null,e.jsx("br",{}),I?L.message:null]})}),(C||k)&&e.jsx(ee,{children:e.jsxs(H,{children:[C?t("statistics.loading",{context:"what",what:"languages"}):null,e.jsx("br",{}),k?F.message:null]})}),e.jsx(e.Fragment,{children:(D||p)&&e.jsx(ee,{children:e.jsxs(H,{children:[D?t("statistics.loading",{context:"what",what:"resources-all"}):null,e.jsx("br",{}),p?O.message:null]})})}),e.jsxs(T,{className:"p-3",children:[e.jsx("h3",{className:"h4 pb-1 mb-3 border-bottom",children:t("statistics.fcs.title")}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"overview",children:t("statistics.fcs.titleOverall")}),e.jsxs(de,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thStatsKey")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thStatsValue")})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelResourceCount")}),e.jsx("td",{children:M.length})]}),e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelEndpointCount")}),e.jsx("td",{children:g.size})]}),e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelInstitutionCount")}),e.jsx("td",{children:ae.size})]}),ve.size>1&&e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelConsortiaCount")}),e.jsx("td",{children:ve.size})]})]})]}),ve.size>1&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"consortia",children:t("statistics.fcs.titleConsortia")}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderConsortia")}),e.jsx(T.Body,{children:e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortium")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountEndpoints")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thActions")})]})}),e.jsx("tbody",{children:Array.from(ve.entries()).map(([m,{resources:S,endpoints:E}])=>{const se=Array.from(E),ce=w(se);return e.jsxs("tr",{className:m&&b.includes(m)?"table-primary":void 0,children:[e.jsx("td",{children:m??t("statistics.fcs.tdNoConsortium")}),e.jsx("td",{children:E.size}),e.jsx("td",{children:S.length}),e.jsx("td",{children:ce.join(", ")}),e.jsx("td",{className:m===null?"":"py-0 align-middle",children:m===null?"–":e.jsx(ne,{size:"sm",onClick:()=>Qe(m),children:t("statistics.fcs.btnToggleConsortium",{context:b.includes(m)?"remove":"add"})})})]},m)})})]})})]})]}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"institutions",children:t("statistics.fcs.titleInstitutions")}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderInstitutionStats")}),e.jsx(T.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.fcs.tdLabelInstitutionCount")}),e.jsx("dd",{children:te.size}),e.jsx("dt",{children:t("statistics.fcs.tdLabelInstitutionHosterCount")}),e.jsx("dd",{children:ae.size})]})})]}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderInstitutions")}),e.jsxs(T.Body,{children:[e.jsx(K,{onSubmit:m=>m.preventDefault(),children:e.jsxs(H,{className:"filter-checkboxes",lg:12,md:12,children:[e.jsx(K.Text,{className:"me-2",children:t("statistics.fcs.labelForResourceInstitutionVariants")}),["institution","hoster"].map(m=>e.jsx(K.Check,{type:"radio",name:"resourceInstitutionVariant",value:m,id:`resourceInstitutionVariant-${m}`,checked:y===m,onChange:()=>N(m),label:t(`statistics.fcs.resourceInstitutionVariant${m}`)},m))]})}),J()]})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",id:"endpoints",children:t("statistics.fcs.titleEndpoints")}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderEndpointStats")}),e.jsx(T.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.fcs.tdLabelEndpointCount")}),e.jsx("dd",{children:g.size}),e.jsx("dt",{children:t("statistics.fcs.tdLabelEndpointDomainCount")}),e.jsx("dd",{children:u.size})]})})]}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderEndpoints")}),e.jsxs(T.Body,{children:[e.jsx(K,{onSubmit:m=>m.preventDefault(),children:e.jsxs(H,{className:"filter-checkboxes",lg:12,md:12,children:[e.jsx(K.Text,{className:"me-2",children:t("statistics.fcs.labelForResourceInstitutionVariants")}),["url","domain","tld"].map(m=>e.jsx(K.Check,{type:"radio",name:"endpointURLVariant",value:m,id:`endpointURLVariant-${m}`,checked:_===m,onChange:()=>v(m),label:t(`statistics.fcs.endpointURLVariant${m}`)},m))]})}),Z()]})]}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"resources",children:t("statistics.fcs.titleResources")}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderResourceStats")}),e.jsx(T.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.fcs.tdLabelResourceCount")}),e.jsx("dd",{children:M.length}),e.jsx("dt",{children:t("statistics.fcs.tdLabelRootResourceCount")}),e.jsx("dd",{children:o.length}),e.jsx("dt",{children:t("statistics.fcs.tdLabelResourceWithAvailabilityRestrictionCount")}),e.jsx("dd",{children:Array.from(ke.entries()).filter(([m])=>m!=="NONE").map(([,m])=>m).flat().length})]})}),qe&&e.jsx(T.Footer,{className:"d-flex gap-2",children:e.jsx(ne,{variant:"primary",onClick:()=>P(!0),children:t("statistics.fcs.btnOpenResourceLanguageSelectionModal")})})]}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderSearchCapabilities")}),e.jsx(T.Body,{children:e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapability")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from(be.entries()).map(([m,S])=>e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:S.length})]},m))})]})})]}),Me&&e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.fcs.cardHeaderResourcesWithAvailabilityRestrictions")}),e.jsx(T.Body,{children:e.jsxs(de,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("caption",{children:t("statistics.fcs.tblAvailabilityRestrictionCaption")}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thAvailabilityRestriction")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thResourceTitle")})]})}),e.jsx("tbody",{children:Array.from(ke.entries()).filter(([m])=>m!=="NONE").map(([m,S])=>S.map(E=>e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsxs("td",{children:[$(E.title,r)," ",e.jsx(Ue,{to:{pathname:"/stats/resources",search:i({[Oe]:E.id})},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:He},className:"align-baseline ms-2"})})]})]},E.id)))})]})})]})]}),e.jsx(ks,{languages:R,resources:o,showResourceCounts:!0,showLanguageFilterOptions:!1,show:j,onModalClose:()=>P(!1)})]})}function Yr({validatorUrl:s}){const n=_e(),{t}=oe(),r=we(u=>u.locale),[i,a]=d.useState(r),l=new Intl.DisplayNames([r,"en"],{type:"language"}),[,o]=Be(),[c,h]=Ve(),[x,R]=d.useState([]),[f,y]=d.useState(""),[N,_]=d.useState(c.get(Oe)),v=Ze(x,u=>u.id===N);if(v===void 0){const u=Ze(x,B=>B.handle===N);if(u!==void 0){const B=u.id;B!==N&&(_(B),c.set(Oe,B),h(c))}}const j=N?v:void 0,P={consortia:c.get(he)},{data:b,isPending:q,isError:X,error:V}=Re({queryKey:["resources"],queryFn:Rt.bind(null,n,P)}),{data:I}=Re({queryKey:["languages"],queryFn:us.bind(null,n,P)});d.useEffect(()=>{if(!b)return;const u=gt(b);R(u)},[b]),d.useEffect(()=>{const u=c.get(Oe);u&&u!==N&&_(u)},[c,N]);const z=x.map(u=>rt(u)).flat().reduce((u,B)=>u.set(B,(u.get(B)??0)+1),new Map),C=x.toSorted(Ts["title-up"]),{resources:k,matches:F}=Ps(f,C,i,["title","institution"]);function A(u){if(!u)return;const B=u;_(B),c.set(Oe,B),h(c)}function D(u,B,re=0){const te=B?.get(u.id)??new Map,ae=e.jsx(ge.Item,{eventKey:u.id,style:{paddingInlineStart:`${1+re*1}em`},children:e.jsx(je.Highlight,{text:$(u.title,i)??"",ranges:te.get("title")??null})},u.id);return u.subResources&&u.subResources.length>0?e.jsxs(d.Fragment,{children:[ae,u.subResources.map(be=>D(be,F,re+1))]},u.id):ae}function p(u,B,re="–"){if(B===null)return null;const te=gr(B,r);return e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t(`statistics.resources.cardHeader${u[0].toUpperCase()}${u.slice(1)}`)}),typeof B=="string"?e.jsx(T.Body,{children:B||re}):e.jsx(Je,{className:"list-group-flush",children:Object.entries(B).map(([ae,be])=>e.jsxs(Je.Item,{children:[e.jsxs(Ce,{bg:te===ae?"primary":"secondary",className:"me-2",children:[l.of(ae)," ",e.jsx("sup",{children:ae})]})," ",be||re]},ae))})]})}function O(u){if(!x||!u)return null;const B=u.rootResourceId===null?u:Ze(x,te=>te.id===u.rootResourceId);if(!B)return null;function re(te){return e.jsxs("li",{children:[te.id===u.id?e.jsx("strong",{children:te.handle}):e.jsxs(e.Fragment,{children:[te.handle,e.jsx(Ue,{to:{search:o({[Oe]:te.id})},onClick:ae=>{ae.preventDefault(),A(te.id)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:He},className:"align-baseline ms-2 me-1"})})]})," ","– ",$(te.title,r),te.subResources.length>0&&e.jsx("ul",{children:te.subResources.map(ae=>re(ae))})]},te.id)}return e.jsx("ul",{children:re(B)})}const M=j&&(j.availableDataViews?.find(u=>u.mimeType==="application/x-clarin-fcs-lex+xml")||j.availableLexFields&&j.availableLexFields.length>0),g=j&&(j.availableDataViews?.find(u=>u.mimeType==="application/x-clarin-fcs-adv+xml")||j.availableLayers&&j.availableLayers.length>0);return e.jsxs(ue,{className:"d-grid gap-2 mt-3",children:[(q||X)&&e.jsx(ee,{children:e.jsxs(H,{children:[q?t("statistics.loading"):null,e.jsx("br",{}),X?V.message:null]})}),e.jsx(K,{onSubmit:u=>u.preventDefault(),children:e.jsxs(ge,{onSelect:A,children:[e.jsxs(ge.Toggle,{className:"resource-selector",variant:"outline-dark",children:[t("statistics.resources.dropdownLabel",{count:x.length})," "]}),e.jsxs(ge.Menu,{children:[e.jsxs(ge.ItemText,{children:[e.jsx(K.Control,{value:f,onChange:u=>y(u.target.value)}),z.size>1&&e.jsxs(K.Group,{as:ee,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(K.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:t("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(H,{sm:"auto",children:e.jsx(st,{type:"radio",name:"resource-info-languages",defaultValue:i,onChange:u=>a(u),children:Array.from(z.entries()).toSorted().map(([u,B])=>e.jsxs(ze,{size:"sm",id:`resource-info-languages-${u}`,value:u,variant:"secondary",title:t("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:B,language:u,languageName:l.of(u)}),children:[l.of(u)," ",e.jsx("sup",{children:u})]},u))})})]})]}),e.jsx(ge.Divider,{}),k.map(u=>D(u,F))]})]})}),j&&e.jsxs(T,{className:"p-3 mt-3",children:[e.jsx("h3",{className:"h4 pb-1 mb-3 border-bottom",children:$(j.title,r)}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",children:t("statistics.resources.titleBasicMetadata")}),p("title",j.title),p("description",j.description),p("institution",j.institution),j.landingPage&&e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderLandingPage")}),e.jsx(T.Body,{children:e.jsx("a",{href:j.landingPage,className:"matomo_link",target:"_blank",children:j.landingPage})})]}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderLanguages")}),e.jsx(T.Body,{children:e.jsx("ul",{className:"mb-0",children:j.languages.toSorted().map(u=>e.jsxs("li",{children:[e.jsx("strong",{children:u}),I&&u in I&&e.jsxs(e.Fragment,{children:[": ",I[u]]})]},u))})})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",children:t("statistics.resources.titleTechnicalMetadata")}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderResource")}),e.jsx(T.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.resourcePid")}),e.jsx("dd",{children:j.handle}),e.jsx("dt",{children:t("statistics.labels.resourceHierarchy")}),e.jsx("dd",{children:O(j)}),e.jsx("dt",{children:t("statistics.labels.searchCapabilitiesOfResource")}),e.jsx("dd",{children:j.searchCapabilitiesResolved.join(", ")}),e.jsx("dt",{children:t("statistics.labels.availabilityRestriction")}),e.jsx("dd",{children:j.availabilityRestriction})]})})]}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderEndpoint")}),e.jsx(T.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.endpointUrl")}),e.jsxs("dd",{children:[j.endpoint.url," ",s&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${s}?url=${encodeURIComponent(j.endpoint.url)}`,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:He},className:"align-baseline ms-2"})})]})]}),e.jsx("dt",{children:t("statistics.labels.fcsVersion")}),e.jsx("dd",{children:j.endpoint.protocol}),e.jsx("dt",{children:t("statistics.labels.searchCapabilitiesOfEndpoint")}),e.jsx("dd",{children:j.endpoint.searchCapabilities.join(", ")}),e.jsx("dt",{children:t("statistics.labels.endpointInstitution")}),e.jsxs("dd",{children:[j.endpointInstitution.name,j.endpointInstitution.link&&e.jsxs(e.Fragment,{children:[" – ",e.jsxs("a",{href:j.endpointInstitution.link,className:"matomo_link",target:"_blank",children:[t("statistics.labels.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})]})]})]})]})})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",children:t("statistics.resources.titleSeachInformation")}),e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderDataViews")}),e.jsx(T.Body,{children:j.availableDataViews&&e.jsxs(de,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewIdentifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewMimeType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewDeliveryPolicy")})]})}),e.jsx("tbody",{children:j.availableDataViews.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.identifier}),e.jsx("td",{children:u.mimeType}),e.jsx("td",{children:u.deliveryPolicy})]},u.identifier))})]})})]}),g&&e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderAdvancedDataView")}),e.jsx(T.Body,{children:j.availableLayers&&e.jsxs(de,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thLayerType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thQualifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thResultId")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thIdentifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thEncoding")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thAltValueInfo")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thAltValueInfoURI")})]})}),e.jsx("tbody",{children:j.availableLayers.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.layerType}),e.jsx("td",{children:u.qualifier}),e.jsx("td",{children:u.resultId}),e.jsx("td",{children:u.identifier}),e.jsx("td",{children:u.encoding}),e.jsx("td",{children:u.altValueInfo}),e.jsx("td",{children:u.altValueInfoURI})]},u.identifier))})]})})]}),M&&e.jsxs(T,{className:"my-2",children:[e.jsx(T.Header,{children:t("statistics.resources.cardHeaderLexDataView")}),e.jsx(T.Body,{children:j.availableLexFields&&e.jsxs(de,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thLexFieldType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thLexIdentifier")})]})}),e.jsx("tbody",{children:j.availableLexFields.map(u=>e.jsxs("tr",{children:[e.jsx("td",{children:u.type}),e.jsx("td",{children:u.id})]},u.id))})]})})]})]})]})}function Xr({url:s,statistics:n,validatorUrl:t,isScan:r}){const{t:i,i18n:a}=oe(),[,l]=Be(),o=new Intl.NumberFormat(a.language,{style:"unit",unit:"second",unitDisplay:"short"});function c(h,x){const R=e.jsx(je.Highlight,{text:h.title,ranges:n.matchResources?.[x]??null}),f=e.jsx(Ue,{to:{pathname:"/stats/resources",search:l({[Oe]:h.handle})},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:He},className:"align-baseline ms-2"})});return h.valid&&h.notes.length===0?e.jsxs(e.Fragment,{children:[R," ",f]}):e.jsx(Fe,{placement:"auto-start",delay:{show:250,hide:400},overlay:e.jsxs($e,{id:`resource-info-warning-${h.handle}`,children:[!h.valid&&i("statistics.errors.notAvailableInAggregator"),!h.valid&&h.notes.length>=1&&e.jsx("hr",{className:"mt-2 mb-1"}),h.notes.length===1?h.notes[0]:h.notes.length>=1?e.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:h.notes.map((y,N)=>e.jsx("li",{children:y},N))}):null]}),children:e.jsxs("span",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:bs},className:"align-baseline me-2"}),h.valid?R:e.jsx("s",{children:R})," ",f]})})}return e.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[e.jsxs("h4",{className:"h5",id:`${kt(s)}-${r?"scan":"search"}`,children:[e.jsx(je.Highlight,{text:s,ranges:n.matchEndpoint}),t&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${t}?url=${encodeURIComponent(s)}`,children:e.jsx("i",{dangerouslySetInnerHTML:{__html:He},className:"align-baseline ms-2"})})]})]}),e.jsxs("dl",{className:"ps-sm-4",children:[e.jsx("dt",{children:i("statistics.labels.fcsVersion")}),e.jsx("dd",{children:n.version}),e.jsx("dt",{children:i("statistics.labels.searchCapabilities")}),e.jsx("dd",{children:n.searchCapabilities.join(", ")}),e.jsx("dt",{children:i("statistics.labels.maxConcurrentScanRequests")}),e.jsx("dd",{children:n.maxConcurrentRequests}),e.jsx("dt",{children:i("statistics.labels.requestStatistics")}),e.jsx("dd",{className:"mb-0",children:i("statistics.labels.numberOfRequests",{count:n.numberOfRequests})}),n.avgQueueTime!==0&&e.jsx("dd",{className:"mb-0",children:i("statistics.labels.queueTime",{avg:o.format(n.avgQueueTime),max:o.format(n.maxQueueTime)})}),e.jsx("dd",{children:i("statistics.labels.executionTime",{avg:o.format(n.avgExecutionTime),max:o.format(n.maxExecutionTime)})}),n.rootResources?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:i("statistics.labels.resources")}),e.jsx("dd",{children:i("statistics.labels.numberOfRootResources",{count:n.rootResources.length})}),e.jsx("dd",{children:e.jsx("ul",{children:n.rootResources.map((h,x)=>typeof h=="string"?e.jsx("li",{children:e.jsx(je.Highlight,{text:h,ranges:n.matchResources?.[x]??null})},h):e.jsx("li",{children:c(h,x)},h.handle))})})]}),e.jsxs(e.Fragment,{children:[Object.entries(n.diagnostics||{}).map(([h,x])=>e.jsxs(fe,{variant:"warning",style:{fontSize:"0.85rem"},children:[e.jsxs(fe.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(Ce,{bg:"warning",children:[x.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.diagnostic")})," ",x.diagnostic.message,x.diagnostic.diagnostic&&e.jsxs(e.Fragment,{children:[" - ",e.jsx("small",{children:x.diagnostic.diagnostic})]})]}),e.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",e.jsx("a",{href:x.context,children:x.context})]})]},h)),Object.entries(n.errors||{}).map(([h,x])=>e.jsxs(fe,{variant:"danger",style:{fontSize:"0.85rem"},children:[e.jsxs(fe.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(Ce,{bg:"danger",children:[x.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.exception")})," ",x.exception.message]}),e.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",e.jsx("a",{href:x.context,children:x.context})]}),x.exception.cause&&e.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.causedBy")," ",x.exception.cause]})]},h))]})]})]},s)}function Jr({data:s,validatorUrl:n}){const{t,i18n:r}=oe(),[i,a]=d.useState(""),[l,o]=d.useState(["institution","endpoint","resources"]),[c,h]=d.useState(!1),x=`-${s.isScan?"scan":"search"}`,R=d.useMemo(()=>Object.entries(s.institutions).toSorted().map(([v,j])=>Object.entries(j).toSorted().map(([P,b])=>({institutionName:v,endpointUrl:P,endpointInfo:{...b,rootResources:b.rootResources.toSorted()}}))).flat(1).filter(c?v=>Object.keys(v.endpointInfo.diagnostics).length>0||Object.keys(v.endpointInfo.errors).length>0:()=>!0),[s,c]),f=R.filter(v=>Object.keys(v.endpointInfo.diagnostics).length>0||Object.keys(v.endpointInfo.errors).length>0),N=je.useFuzzySearchList({list:R,queryText:i,getText:v=>{const j=[];return l.length===0?j.push(v.institutionName,v.endpointUrl,...v.endpointInfo.rootResources.map(P=>typeof P=="string"?P:P.title)):(l.includes("institution")&&j.push(v.institutionName),l.includes("endpoint")&&j.push(v.endpointUrl),l.includes("resources")&&j.push(...v.endpointInfo.rootResources.map(P=>typeof P=="string"?P:P.title))),j},mapResultItem:({item:v,score:j,matches:P})=>({item:v,matches:P,score:j})}).reduce((v,j)=>{const{institutionName:P,endpointUrl:b,endpointInfo:q}=j.item;return Object.getOwnPropertyNames(v).includes(P)||(v[P]={match:l.length===0||l.includes("institution")?j.matches[0]:null,endpoints:{}}),v[P].endpoints[b]={...q,matchEndpoint:l.length===0||l.includes("endpoint")?j.matches[l.length===0||l.includes("institution")?1:0]:null,matchResources:l.length===0||l.includes("resources")?j.matches.slice(0+(l.length===0||l.includes("institution")?1:0)+(l.length===0||l.includes("endpoint")?1:0)):[]},v},{});function _(v){l.includes(v)?o(l.filter(j=>j!==v)):o([...l,v])}return e.jsxs(ue,{className:"d-grid gap-2 mt-3",children:[e.jsx(fe,{variant:"info",className:"mb-0",children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.startDate")}),e.jsx("dd",{className:"mb-0",children:new Date(s.date).toLocaleString(r.language)}),e.jsx("dt",{children:t("statistics.labels.timeout")}),e.jsx("dd",{className:"mb-0",children:new Intl.NumberFormat(r.language,{style:"unit",unit:"second",unitDisplay:"short"}).format(s.timeout)})]})}),e.jsx(K,{onSubmit:v=>v.preventDefault(),children:e.jsxs(ee,{className:"gy-2",children:[e.jsx(H,{lg:6,md:12,children:e.jsx(K.Control,{placeholder:t("statistics.filter.inputPlaceholder"),value:i,onChange:v=>a(v.target.value)})}),e.jsxs(H,{className:"filter-checkboxes",lg:6,md:12,children:[e.jsx(K.Text,{className:"me-2",children:t("statistics.filter.labelForCheckboxes")}),e.jsx(K.Check,{type:"checkbox",checked:l.includes("institution"),onChange:()=>_("institution"),id:`filter-institution-name${x}`,label:t("statistics.filter.checkboxInstitution")}),e.jsx(K.Check,{type:"checkbox",checked:l.includes("endpoint"),onChange:()=>_("endpoint"),id:`filter-endpoint-url${x}`,label:t("statistics.filter.checkboxEndpoint")}),e.jsx(K.Check,{type:"checkbox",checked:l.includes("resources"),onChange:()=>_("resources"),id:`filter-resource-names${x}`,label:t("statistics.filter.checkboxResources")})]})]})}),e.jsx(ee,{children:e.jsx(H,{children:e.jsx(K.Check,{type:"checkbox",checked:c,onChange:()=>h(!c),id:`filter-show-issues-only${x}`,label:t("statistics.filter.checkboxShowWithIssues",{count:f.length})})})}),Object.entries(N).map(([v,{match:j,endpoints:P}])=>e.jsxs(T,{className:"p-2",children:[e.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${kt(v)}${x}`,children:e.jsx(je.Highlight,{text:v,ranges:j})}),Object.entries(P).toSorted().map(([b,q])=>e.jsx(Xr,{url:b,statistics:q,validatorUrl:n,isScan:s.isScan},b))]},v))]})}const Zr=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],ei=Object.fromEntries(Zr.map(s=>[s.id,s])),ti=["resources","fcs"];function si(){const s=_e(),n=Pt(),[t]=Ve(),{t:r}=oe(),{categoryId:i}=Js(),a=Vr(),l=qr(),o={consortia:t.get(he)},{isPending:c,isError:h,data:x,error:R}=Re({queryKey:["statistics"],queryFn:xn.bind(null,s,o)}),[f,y]=d.useState(G.getState().validatorURL);G.subscribe(b=>y(b.validatorURL));const N=G.getState().appTitleHead,_=[...x!==void 0?Object.keys(x).toSorted():[],...ti],v=i!=null&&_.includes(i)?i:_.length>0?_[0]:void 0;function j(){n.invalidateQueries({queryKey:["statistics"]}),n.invalidateQueries({queryKey:["resources"]}),n.invalidateQueries({queryKey:["languages"]}),n.invalidateQueries({queryKey:["resources-all"]}),n.invalidateQueries({queryKey:["consortia"]})}function P(b){a?.params.categoryId,a&&a.params.categoryId!==b&&a.route.path&&l(a.route.path,{categoryId:b})}return e.jsxs(e.Fragment,{children:[e.jsx(tt,{children:e.jsxs("title",{children:[N," – Statistics"]})}),e.jsxs(ue,{id:"statistics",className:"my-4",children:[e.jsx("h1",{className:"h1",children:r("statistics.title")}),(c||h)&&e.jsx(ee,{children:e.jsxs(H,{children:[c?r("statistics.loading"):null,e.jsx("br",{}),h?R.message:null]})}),x&&e.jsxs(Ge.Container,{activeKey:i&&_.includes(i)?i:v,onSelect:P,children:[e.jsxs(xe,{className:"nav-tabs",as:"ul",children:[Object.keys(x).map(b=>e.jsx(xe.Item,{as:"li",role:"presentation",children:e.jsx(xe.Link,{as:"button",eventKey:b,children:r(`statistics.tabs.${b}`,{defaultValue:ei[b]?.label??b})})},b)),e.jsx(xe.Item,{as:"li",role:"presentation",children:e.jsx(xe.Link,{as:"button",eventKey:"resources",children:r("statistics.tabs.resources")})},"resources"),e.jsx(xe.Item,{as:"li",role:"presentation",children:e.jsx(xe.Link,{as:"button",eventKey:"fcs",children:r("statistics.tabs.fcs")})},"fcs"),e.jsx(xe.Item,{as:"li",role:"presentation",className:"ms-auto",children:e.jsxs(xe.Link,{as:"button",onClick:j,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ps}})," ",r("statistics.tabs.btnRefresh")]})})]}),e.jsxs(Ge.Content,{children:[Object.entries(x).map(([b,q])=>e.jsx(Ge.Pane,{eventKey:b,children:e.jsx(Jr,{data:q,validatorUrl:f})},b)),e.jsx(Ge.Pane,{eventKey:"resources",children:e.jsx(Yr,{validatorUrl:f})},"resources"),e.jsx(Ge.Pane,{eventKey:"fcs",children:e.jsx(Gr,{})},"fcs")]})]})]})]})}function ni(){const s=G.getState().appTitleHead;kn();const n=we(t=>t.locale);d.useEffect(()=>{Le.language!==n&&Le.changeLanguage(n)},[n]);{const t=Mt(),[r,i]=d.useState(t.pathname);d.useEffect(()=>{const a=t.pathname;a!==r&&(i(a+t.search),ms(a,document.title,r))},[t,r])}return e.jsxs(e.Fragment,{children:[e.jsx(tt,{children:e.jsx("title",{children:s})}),e.jsx(An,{}),e.jsx("main",{children:e.jsxs(Zs,{children:[e.jsx(at,{index:!0,element:e.jsx(Br,{})}),e.jsx(at,{path:"/about",element:e.jsx(Jn,{})}),e.jsx(at,{path:"/help",element:e.jsx(nr,{})}),e.jsx(at,{path:"/stats/:categoryId?",element:e.jsx(si,{})})]})}),e.jsx(Cn,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const ri=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function ii(){window.MyAggregator.DEPLOY_PATH!==void 0&&G.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&G.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&G.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&G.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&G.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&G.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&G.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_ENABLED!==void 0&&G.getState().setAuthEnabled(window.MyAggregator.AUTH_ENABLED),window.MyAggregator.AUTH_USERNAME!==void 0&&G.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(s,n){return s[n]},set(s,n,t){if(ri.includes(n))return console.error(`Configuration ${n} can only be set on initialization!`),!1;if(n==="VALIDATOR_URL")return t===null||typeof t=="string"?(G.getState().setValidatorURL(t),!0):!1;if(n==="SHOW_SEARCH_RESULT_LINK")return typeof t=="boolean"?(G.getState().setShowSearchResultLink(t),!0):!1;{if(n==="AUTH_USERNAME")return t===null||typeof t=="string"?(G.getState().setAuthUsername(t),!0):!1;if(n==="AUTH_ENABLED")return typeof t=="boolean"?(G.getState().setAuthEnabled(t),!0):!1}return s[n]=t,!0}}),Object.assign(window.MyAggregator,{getAppStore:()=>G})}function ai(){const s=le.getState(),n=[navigator.language,...navigator.languages];let t=!1;for(const r of n){if(r===s.locale){t=!0;break}if(s.locales.includes(r)){s.setLocale(r),t=!0;break}}t||console.warn("User locale",n,"was not found in available languages",s.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>le})}ii();ai();G.getInitialState(),G.getState();le.getInitialState(),le.getState();const oi=G.getState().deployPath,li=G.getState().apiURL,ci=le.getState().locale;Le.changeLanguage(ci);const di=new en({defaultOptions:{queries:{}}}),ui=tn.create({baseURL:li,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const s=G.getState().matomoTrackingParams;Qn(s)||console.warn("Unable to setup tracking ...")}const hi="root",mi=document.getElementById(hi),gi=gn.createRoot(mi);gi.render(e.jsx(d.StrictMode,{children:e.jsx(ir,{axios:ui,children:e.jsx(sn,{client:di,children:e.jsx(nn,{children:e.jsx(rn,{basename:oi,children:e.jsx(ni,{})})})})})}));export{_s as C,Zn as b,Tt as f,ws as h,er as p,tr as r,As as u,sr as x};

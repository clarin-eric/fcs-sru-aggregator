const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-querybuilder.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-querybuilder.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{r as u,u as qe,c as Yt,b as ae,j as e,L as Pe,T as K,d as Xt,e as Ps,N as Ut,f as we,g as Os,h as Us,H as et,R as Hs,k as Ds,l as Jt,m as Nt,n as It,o as Zt,p as Ce,q as Fs,s as Bs,t as qs,v as es,w as Vs,x as zs,y as rt,Q as $s,z as Ks,A as Ws,B as Qs,C as Gs}from"./vendor/react-ext.js";import{b as Ys}from"./vendor/react.js";/* empty css                      */import{C as de,R as te,a as H,N as ke,b as ge,c as it,d as A,B as ve,M as ie,F as z,e as ne,T as tt,f as Ve,g as ts,h as Ne,I as Xs,D as he,S as ss,i as ce,O as He,j as ze,L as Xe,A as pe,P as at,k as pt,l as Js,m as xt,n as Qe}from"./vendor/bootstrap.js";import{_ as ns,a as rs,b as Zs,c as en,d as tn}from"./locales/en/default.js";import{g as sn}from"./vendor/prism.js";/*!
 * FCS SRU Aggragator UI
 * @module lib/fcs-sru-aggregator-ui.js
 * @version 1.0.0-alpha
 * @license GPL-3.0-or-later
 * @see {@link https://github.com/clarin-eric/fcs-sru-aggregator-ui.git}
 */(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var ot={},Ht;function nn(){if(Ht)return ot;Ht=1;var s=Ys();return ot.createRoot=s.createRoot,ot.hydrateRoot=s.hydrateRoot,ot}var rn=nn();const ue="x-consortia";async function an(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(ue,n.consortia);const r="init"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function jt(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(ue,n.consortia);const r="resources"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function on(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(ue,n.consortia);const r="languages"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function ln(s,n){const t=new URLSearchParams;n?.consortia!==void 0&&n?.consortia!==null&&t.set(ue,n.consortia);const r="statistics"+(t.entries().next().done?"":`?${t}`);return(await s.get(r)).data}async function cn(s,n){return(await s.post("search",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function dn(s,n,t){return(await s.post(`search/${n}`,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function un(s,n){if(!n)throw new Error('Invalid "searchID" parameter!');return(await s.get(`search/${n}/metaonly`)).data}async function hn(s,n,t){if(!n)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await s.get(`search/${n}/metaonly?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.id===t);if(i.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${n}, resourceId: ${t})`);return i[0]}async function mn(s,n,t){if(!n)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await s.get(`search/${n}?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.resource.id===t);if(i.length===0)throw new Error(`Results for resource not found! (searchId: ${n}, resourceId: ${t})`);return i[0].records===void 0&&console.warn("Using legacy FCS SRU Aggregator API with Search Results not in '.records'!",{searchID:n},i),i[0]}function gn(s,n,t,r,i,a){const c=new URLSearchParams({resourceId:t,format:r});(a==="byGuess"||a==="byMetaAndGuess")&&c.set("filterLanguage",i);const l=`search/${n}/download?${c.toString()}`;return s.getUri({url:l})}function pn(s,n,t,r,i,a){const c=new URLSearchParams({resourceId:t});r?c.set("filterLanguage",r):(a==="byGuess"||a==="byMetaAndGuess")&&c.set("filterLanguage",i);const l=`search/${n}/toWeblicht?${c.toString()}`;return s.getUri({url:l})}const xn=[ue];function Dt(s){return s.entries().next().done?void 0:`?${s}`}function fn(){const[s]=qe(),n=u.useMemo(()=>new URLSearchParams(Array.from(s.entries()).filter(([r])=>xn.includes(r))),[s]),t=u.useCallback(r=>{const i=new URLSearchParams(n);return Yt(r).forEach((a,c)=>i.append(c,a)),i},[n]);return[n,t]}function De(){const[s,n]=fn(),t=Dt(s),r=u.useCallback(i=>Dt(n(i)),[n]);return[t,r]}function jn(){const{t:s}=ae(),n="urls.termsUseAndDisclaimer",t=s(n,{ns:"common"}),r=t!==n,i="urls.contact",a=s(i,{ns:"common"}),c=a!==i,l="footer.serviceInfo.text",h=s(l)!==l,[p]=De();return e.jsx("footer",{className:"text-muted",children:e.jsx(de,{children:e.jsxs(te,{children:[e.jsxs(H,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[e.jsxs("div",{children:[e.jsx(Pe,{to:{pathname:"/about",search:p},className:"hidden-xs",children:s("footer.links.about")}),e.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","4.0.0-SNAPSHOT"]})]}),e.jsx(Pe,{to:{pathname:"/stats",search:p},children:s("footer.links.statistics")})]}),e.jsx(H,{className:"text-center",children:h&&e.jsx(K,{i18nKey:l,components:{serviceBy:e.jsx("a",{href:s("footer.serviceInfo.urlServiceBy")}),hostedBy:e.jsx("a",{href:s("footer.serviceInfo.urlHostedBy")})}})}),e.jsxs(H,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&e.jsx("a",{href:t,children:s("footer.links.termsUseAndDisclaimer")}),c&&e.jsx("a",{href:a,children:s("footer.links.contact")})]})]})})})}const W=Xt(s=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authEnabled:!0,authUsername:null,isAuthenticated:!1,setDeployPath:n=>s(t=>({deployPath:typeof n=="function"?n(t.deployPath):n})),setApiURL:n=>s(t=>({apiURL:typeof n=="function"?n(t.apiURL):n})),setValidatorURL:n=>s(t=>({validatorURL:typeof n=="function"?n(t.validatorURL):n})),setShowSearchResultLink:n=>s(t=>({showSearchResultLink:typeof n=="function"?n(t.showSearchResultLink):n})),setAppTitle:n=>s(t=>({appTitle:typeof n=="function"?n(t.appTitle):n})),setAppTitleHead:n=>s(t=>({appTitleHead:typeof n=="function"?n(t.appTitleHead):n})),setMatomoTrackingParams:n=>s(t=>({matomoTrackingParams:typeof n=="function"?n(t.matomoTrackingParams):n})),setAuthEnabled:n=>s(t=>({authEnabled:typeof n=="function"?n(t.authEnabled):n})),setAuthUsername:n=>s(t=>{const r=typeof n=="function"?n(t.authUsername):n;return{authUsername:r,isAuthenticated:r!==null&&r!=="anonymous"}})}));var bn=["en","de"];const oe=Xt(s=>({locale:"en",locales:bn??["en"],setLocale:n=>s(t=>({locale:typeof n=="function"?n(t.locale):n})),setLocales:n=>s(t=>({locales:typeof n=="function"?n(t.locales):n}))})),be=s=>{const n=Ps(oe,s);return Object.assign(n,oe),n},yn=""+new URL("assets/clarin-logo-wide.png",import.meta.url).href,wn=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,bt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,$e=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function vn(){const{t:s}=ae(),n=be(f=>f.locale),t=be(f=>f.locales),r=be(f=>f.setLocale),i=W.getState().authEnabled,a=W.getState().authUsername,c=W.getState().isAuthenticated,l=W.getState().deployPath??"",d=l+(l.endsWith("/")?"":"/")+"login",[h]=De(),p="urls.helpWithTranslations",L=s(p,{ns:"common"}),x=L!==p;function b(f){f!==null&&r(f)}function N(){return i?c?e.jsxs(ke.Text,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:bt},className:"d-md-inline d-none"})," ",e.jsx(K,{i18nKey:"header.login.signedInAs",components:[e.jsx("span",{className:"fw-bold",children:a})]})]}):e.jsxs(ge.Link,{href:`${d}${h??""}`,disabled:!i,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:bt},className:"d-md-inline d-none"})," ",s("header.login.login")]}):null}function _(){if(!t||t.length===1)return null;const f=new Intl.DisplayNames([n,"en"],{type:"language"}),O=e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:$e},className:"d-md-inline d-none"}),e.jsx("span",{className:"d-inline d-md-none",children:s("header.localeLabelOnMobile")})," ",n.toUpperCase()," "]});return e.jsxs(it,{title:O,align:"end",className:"ms-md-2",onSelect:b,children:[t.map(j=>{const B=new Intl.DisplayNames([j,"en"],{type:"language"});return e.jsxs(it.Item,{disabled:j===n,"aria-disabled":j===n,eventKey:j,title:s("header.localeOptionTitle",{code:j,name:B.of(j),context:j!==n?"translated":null,translated:f.of(j)}),children:[j.toUpperCase()," – ",B.of(j)]},j)}),x&&e.jsxs(e.Fragment,{children:[e.jsx(it.Divider,{}),e.jsx(it.Item,{className:"matomo_link text-wrap",target:"_blank",href:L,onClick:j=>j.stopPropagation(),children:s("header.localeHelpWithTranslations")})]})]})}function S(){return e.jsx(ke.Brand,{className:"ms-md-4",children:e.jsx("img",{src:yn,alt:s("header.appLogoAlt"),height:30,className:"d-inline-block align-top",onError:({currentTarget:f})=>{console.warn("Logo not found!"),f.onerror=null,f.parentElement.style.display="none"}})})}return e.jsx("header",{children:e.jsx(ke,{expand:"md",className:"bg-body-tertiary",children:e.jsxs(de,{children:[e.jsxs(ke.Brand,{as:Pe,to:{pathname:"/",search:h},children:[e.jsx("img",{src:wn,width:"30",height:"30",className:"d-inline-block align-top",alt:`${s("header.title")} logo`})," ",s("header.title")]}),e.jsx(ke.Toggle,{"aria-controls":"header-navbar-nav"}),e.jsx(ke.Collapse,{id:"header-navbar-nav",children:e.jsxs(ge,{className:"w-100 d-flex",children:[e.jsx(ge.Link,{as:Ut,to:{pathname:"/",search:h},children:s("header.menu.home")}),e.jsx(ge.Link,{as:Ut,to:{pathname:"/help",search:h},children:s("header.menu.help")}),e.jsx(ke.Text,{className:"ms-auto d-md-block d-none"}),N(),_(),S()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function Sn(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Rn(s){s==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",s)}function Ln(){u.useEffect(()=>{function s(){Rn(Sn())}return s(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",s)},[])}const Cn="modulepreload",Nn=function(s,n){return new URL(s,n).href},Ft={},me=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){let h=function(p){return Promise.all(p.map(L=>Promise.resolve(L).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const c=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");i=h(t.map(p=>{if(p=Nn(p,r),p in Ft)return;Ft[p]=!0;const L=p.endsWith(".css"),x=L?'[rel="stylesheet"]':"";if(r)for(let N=c.length-1;N>=0;N--){const _=c[N];if(_.href===p&&(!L||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${x}`))return;const b=document.createElement("link");if(b.rel=L?"stylesheet":Cn,L||(b.as="script"),b.crossOrigin="",b.href=p,d&&b.setAttribute("nonce",d),document.head.appendChild(b),L)return new Promise((N,_)=>{b.addEventListener("load",N),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return i.then(c=>{for(const l of c||[])l.status==="rejected"&&a(l.reason);return n().catch(a)})},In=(s,n,t)=>{const r=s[n];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Tn={en:{app:rs,common:ns}},yt="clarin",An=oe.getInitialState().locale,En=oe.getInitialState().locales;function _n(s,n){if(!s)return n;const t=typeof s=="string"?[s]:s;return[...t.map(i=>`${yt}.${i}`),...t]}const wt=["app","common"],kn=_n(wt);function lt(s){return typeof s=="string"||!Array.isArray(s)?[String(s)]:s}function Mn(s,n,t,r){if(t?.postProcessTryPrefixedNamespacesFirst!==void 0)return s;const i=lt(n),a=lt(t.ns||r.options.defaultNS||[]),c=r.resolve(i,t),d=(c?.res!==void 0?[...lt(t.ns||[]),c.usedNS]:[...lt(t.ns||[]),...a]).map(p=>p.startsWith(yt)?p:`${yt}.${p}`),h=r.translate(i,{...t,ns:d,postProcessTryPrefixedNamespacesFirst:!0});return i.includes(h)?s:h}we.use(Os).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:Mn}).use(Us((s,n)=>In(Object.assign({"../locales/de/app.json":()=>me(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>me(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/common.json":()=>me(()=>import("./locales/de/default.js").then(r=>r.b),[],import.meta.url),"../locales/de/textplus.app.json":()=>me(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>me(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/clarin.app.json":()=>me(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/clarin.common.json":()=>me(()=>import("./locales/en/default.js").then(r=>r.h),[],import.meta.url),"../locales/en/common.json":()=>me(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/querybuilder.json":()=>me(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/querysuggestions.json":()=>me(()=>import("./locales/en/default.js").then(r=>r.q),[],import.meta.url),"../locales/en/textplus.app.json":()=>me(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>me(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${s}/${n}.json`,4))).init({lng:An,fallbackLng:"en",supportedLngs:En,ns:kn,defaultNS:wt,fallbackNS:wt,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Tn,partialBundledLanguages:!0,react:{nsMode:"fallback",transKeepBasicHtmlNodesFor:["br","strong","i","p","em","kbd","code"]}});we.addResourceBundle("en","clarin.app",Zs);we.addResourceBundle("en","clarin.common",en);we.addResourceBundle("en","app",rs);we.addResourceBundle("en","querysuggestions",tn);we.addResourceBundle("en","common",ns);Object.assign(window,{i18n:we});function Pn(s){let n=null;const t=document.body;function r(){n=document.createElement("script"),n.src=s,n.async=!0,t.appendChild(n)}function i(){n!==null&&t.removeChild(n)}return[r,i]}function On(s,{delay:n=void 0}={}){u.useEffect(()=>{if(!s)return;const[t,r]=Pn(s);let i;return n!==void 0&&n>0?i=setTimeout(()=>{t()},n):t(),()=>{i!==void 0&&clearTimeout(i),r()}},[s,n])}function Un(s,n=0){let t=3735928559^n,r=1103547991^n;for(let i=0,a;i<s.length;i++)a=s.charCodeAt(i),t=Math.imul(t^a,2654435761),r=Math.imul(r^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}window._paq=window._paq||[];function Hn({siteId:s,trackerUrl:n,enableLinkTracking:t=!0,domains:r=[],userId:i=void 0}){window._paq.push(["setTrackerUrl",n]),window._paq.push(["setSiteId",s]),i&&window._paq.push(["setUserId",i]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),t&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function Dn({srcUrl:s}){const n=document.createElement("script"),t=document.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=s,t&&t.parentNode&&t.parentNode.insertBefore(n,t)}function is(s){if(!s)return null;let n=null;if(typeof s=="string")try{n=JSON.parse(s)}catch(t){return console.error("Error trying to parse tracking params!",t),null}else typeof s=="object"&&(n=s);if(n&&!Object.hasOwn(n,"indexUrl")&&Object.hasOwn(n,"srcUrl")){const i=`${n.srcUrl.split("/").slice(0,-1).join("/")}/index.php`;n.indexUrl=i}return n}function Fn(s){const n=is(s);if(n===null)return!1;const t=n.siteId,r=n.trackerUrl,i=n.srcUrl,a=n.domains,c=n.userId?.toString();if(i===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(t===void 0||!Number.isInteger(t))return console.warn('No "siteId" configuration set for tracking!'),!1;const l={siteId:t,trackerUrl:r,domains:a};c&&(l.userId=Un(c).toString());const d={srcUrl:i};return Hn(l),as(document.location.href||window.location.href,document.title),Dn(d),!0}function as(s,n,t){window._paq.push(["setDocumentTitle",n??document.title]),window._paq.push(["setCustomUrl",s]),t!==void 0&&window._paq.push(["setReferrerUrl",t]),window._paq.push(["trackPageView"])}function os(s,n=!1,t=!1){window._paq.push(["trackSiteSearch",s,n,t])}const Bn=["Emanuel Dima","Erik Körner","Leif-Jöran Olsson","Yana Panchenko","Oliver Schonefeld","Dieter Van Uytvanck"],qn=[{id:"dropwizard",name:"Dropwizard",url:"https://www.dropwizard.io/",license:"Apache License 2.0",licenseUrl:"https://github.com/dropwizard/dropwizard/blob/release/3.0.x/LICENSE",usage:"web server"},{id:"de.mpg.mpgaai:mpgaai-shhaa",name:"MPG-AAI - simple http header authn/z",url:"https://github.com/clarin-eric/mpgaai",license:"Apache License 2.0",licenseUrl:"http://www.apache.org/licenses/LICENSE-2.0.txt",usage:"AAI / Shibboleth support"},{id:"io.swagger.core.v3",name:"Swagger Core",url:"https://github.com/swagger-api/swagger-core",license:"Apache License 2.0",licenseUrl:"https://github.com/swagger-api/swagger-core/blob/master/LICENSE",usage:"REST API documentation"},{id:"org.glassfish.jersey",name:"Eclipse Jersey",url:"https://eclipse-ee4j.github.io/jersey/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/eclipse-ee4j/jersey/blob/2.x/LICENSE.md",usage:"RESTful web services"},{id:"org.slf4j",name:"Simple Logging Facade for Java (SLF4J)",url:"https://www.slf4j.org/",license:"MIT License",licenseUrl:"https://www.slf4j.org/license.html",usage:"logging"},{id:"org.junit",name:"JUnit 5",url:"https://junit.org/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/junit-team/junit-framework/blob/main/LICENSE.md",usage:"testing"},{id:"optimaize/language-detector",name:"Optimaize Language Detector",url:"https://github.com/optimaize/language-detector",license:"Apache License 2.0",licenseUrl:"https://github.com/optimaize/language-detector/blob/master/LICENSE",usage:"language detection of results"},{id:"org.apache.commons:commons-text",name:"Apache Commons Text",url:"https://commons.apache.org/proper/commons-text/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/commons-text/blob/master/LICENSE.txt",usage:"export format"},{id:"com.sun.xml.bind",name:"JAXB Reference Implementation",url:"https://eclipse-ee4j.github.io/jaxb-ri/",license:"Common Development and Distribution License (CCDL) 1.1",licenseUrl:"https://github.com/javaee/jaxb-v2/blob/2.3.0.1/jaxb-ri/License.txt",usage:"XML support",hide:!0},{id:"eu.clarin.weblicht:wlfxb",name:"Weblicht wlfxb",url:"https://weblicht.sfs.uni-tuebingen.de",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://github.com/weblicht/wlfxb/blob/master/LICENSE.txt",usage:"export format"},{id:"org.apache.poi:poi-ooxml",name:"Apache POI",url:"https://poi.apache.org/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/poi/blob/trunk/legal/LICENSE",usage:"export format"},{id:"org.jopendocument:jOpenDocument",name:"jOpenDocument",url:"https://www.jopendocument.org/",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://www.jopendocument.org/support.html",usage:"export format"},{id:"eu.clarin.sru:sru-client",name:"CLARIN SRU/CQL Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-sru-client/blob/main/LICENSE.txt",usage:"SRU / CQL client framework",hide:!0},{id:"eu.clarin.sru.fcs:fcs-simple-client",name:"CLARIN-FCS Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-simple-client/blob/main/LICENSE.txt",usage:"FCS client framework",hide:!0}],Vn=[{id:"react",name:"React",url:"https://react.dev/",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE"},{id:"react-dom",name:"ReactDOM",url:"https://react.dev/reference/react-dom",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE",hide:!0},{id:"react-router",name:"React Router",url:"https://reactrouter.com/",license:"MIT License",licenseUrl:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",usage:"single page application routing"},{id:"react-bootstrap",name:"React Bootstrap",url:"https://react-bootstrap.netlify.app/",license:"MIT License",licenseUrl:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE",usage:"react bindings for bootstrap"},{id:"bootstrap",name:"Bootstrap",url:"https://getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/bootstrap/blob/main/LICENSE",usage:"UI framework"},{id:"bootstrap-icons",name:"Bootstrap Icons",url:"https://icons.getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/icons/blob/main/LICENSE"},{id:"@tanstack/react-query",name:"TanStack Query",url:"https://tanstack.com/query",license:"MIT License",licenseUrl:"https://github.com/TanStack/query/blob/main/LICENSE",usage:"data loading via REST APIs"},{id:"axios",name:"Axios",url:"https://axios-http.com/",license:"MIT License",licenseUrl:"https://github.com/axios/axios/blob/v1.x/LICENSE",usage:"cross-browser support for REST API requests"},{id:"antlr4ng",name:"Next Generation TypeScript runtime for ANTLR4",url:"https://github.com/mike-lischke/antlr4ng",license:'The "BSD license"',licenseUrl:"https://github.com/mike-lischke/antlr4ng/blob/main/LICENSE.txt",usage:"query parser"},{id:"i18next",name:"i18next",url:"https://www.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next/blob/master/LICENSE",usage:"translations"},{id:"react-i18next",name:"react-i18next",url:"https://react.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/react-i18next/blob/master/LICENSE",usage:"translations",hide:!0},{id:"i18next-resources-to-backend",name:"i18next-resources-to-backend",url:"https://github.com/i18next/i18next-resources-to-backend",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next-resources-to-backend/blob/main/licence",usage:"translation resource loading",hide:!0},{id:"zustand",name:"Zustand",url:"https://zustand-demo.pmnd.rs/",license:"MIT License",licenseUrl:"https://github.com/pmndrs/zustand/blob/main/LICENSE",usage:"state management"},{id:"@nozbe/microfuzz",name:"microfuzz",url:"https://github.com/Nozbe/microfuzz",license:"MIT License",licenseUrl:"https://github.com/Nozbe/microfuzz/blob/main/LICENSE",usage:"fuzzy search"},{id:"react-helmet-async",name:"React Helmet (async fork)",url:"https://github.com/staylor/react-helmet-async",license:"Apache License 2.0",licenseUrl:"https://github.com/staylor/react-helmet-async/blob/main/LICENSE",usage:"HTML head modifications"},{id:"react-slugify",name:"react-slugify",url:"https://github.com/martpie/react-slugify",license:"MIT License",licenseUrl:"https://github.com/martpie/react-slugify/blob/master/LICENSE",usage:"jump id fragment generation"}];function zn(){const{t:s}=ae(),n=be(x=>x.locale),t="urls.termsUseAndDisclaimer",r=s(t,{ns:"common"}),i=r!==t,a=W.getState().matomoTrackingEnabled,c=is(W.getState().matomoTrackingParams)?.indexUrl,l=c?`${c}?module=CoreAdminHome&action=optOutJS&language=auto&div=matomo-opt-out`:null;On(l,{delay:300});const d=W.getState().appTitleHead,[h]=De();function p(x){return e.jsx("ul",{children:x.filter(b=>b.hide!==!0).map(b=>e.jsxs("li",{children:[b.url?e.jsx("a",{href:b.url,children:b.name}):e.jsx("span",{children:b.name}),b.license&&e.jsxs(e.Fragment,{children:[" ","(",b.licenseUrl?e.jsx("a",{href:b.licenseUrl,children:b.license}):e.jsx("span",{children:b.license}),")"]})]},b.id))})}function L(x){const b=Date.parse(x);return Intl.DateTimeFormat(n,{dateStyle:"medium",timeStyle:"long"}).format(b)}return e.jsxs(e.Fragment,{children:[e.jsx(et,{children:e.jsxs("title",{children:[d," – About"]})}),e.jsxs(de,{className:"py-4",children:[e.jsx("h1",{className:"h1 mb-4",children:s("about.title")}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.people.title")}),e.jsx("p",{children:s("about.people.developedBy")}),e.jsx("ul",{children:Bn.map(x=>e.jsx("li",{children:x},x))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.statistics.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"about.statistics.text",components:[e.jsx(Pe,{to:{pathname:"/stats",search:h},children:"endpoint statistics"})]})})]}),(i||a)&&e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.privacyPolicy.title")}),i&&e.jsx("p",{children:e.jsx(K,{i18nKey:"about.privacyPolicy.termsInfo",components:[e.jsx("a",{href:r,children:"clarin.eu"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(K,{i18nKey:"about.privacyPolicy.matomoInfo",components:[e.jsx("a",{href:"https://matomo.org/",children:"Matomo"})]})}),l&&e.jsx(A,{className:"mb-3",id:"matomo-opt-out-container",children:e.jsx(A.Body,{id:"matomo-opt-out"})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.sourceCode.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"about.sourceCode.sourceInfo.text",components:[e.jsx("a",{href:s("about.sourceCode.sourceInfo.repoUrl"),children:"GitHub"}),e.jsx("a",{href:s("about.sourceCode.sourceInfo.licenseUrl"),children:"GPL 3.0 license"})]})}),e.jsx("p",{children:s("about.sourceCode.licenseInfo")})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.versions.title")}),e.jsxs(te,{children:[e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.versions.backend.text")}),e.jsxs("dl",{className:"ms-4",children:[e.jsx("dt",{children:s("about.versions.backend.lblVersion")}),e.jsx("dd",{children:e.jsx("code",{children:"4.0.0-SNAPSHOT"})}),e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblSHA")}),e.jsx("dd",{children:e.jsx("code",{children:"e0c026e"})})]}),e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblTag")}),e.jsx("dd",{children:e.jsx("code",{children:"4.0.0-alpha-15"})})]}),e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblRef")}),e.jsx("dd",{children:e.jsx("code",{children:"feature/modules"})})]}),e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:s("about.versions.backend.lblDate")}),e.jsx("dd",{children:L("2025-09-17T16:45:11+02:00")})]})]})]}),e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.versions.frontend.text")}),e.jsxs("dl",{className:"ms-4",children:[e.jsx("dt",{children:s("about.versions.frontend.lblVersion")}),e.jsx("dd",{children:e.jsx("code",{children:"1.0.0-alpha"})}),e.jsx("dt",{children:s("about.versions.frontend.lblSHA")}),e.jsx("dd",{children:e.jsx("code",{children:"b460adc"})}),!1,e.jsx("dt",{children:s("about.versions.frontend.lblDate")}),e.jsx("dd",{children:L("2025-10-07T14:27:44+02:00")})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:s("about.technology.title")}),e.jsxs(te,{children:[e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.technology.backendUses")}),p(qn)]}),e.jsxs(H,{md:12,lg:6,children:[e.jsx("p",{children:s("about.technology.frontendUses")}),p(Vn)]})]}),e.jsx("p",{children:e.jsx(K,{i18nKey:"about.technology.iconLicenseInfo",components:[e.jsx("a",{href:"http://www.freepik.com/",children:"Freepik"}),e.jsx("a",{href:"www.flaticon.com",children:"www.flaticon.com"}),e.jsx("a",{href:"http://creativecommons.org/licenses/by/3.0/",children:"CC BY 3.0"})]})})]})]})]})}const Oe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`,Ze=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`,ls=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,cs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,st=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,$n=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-braces" viewBox="0 0 16 16">
  <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6M13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6"/>
</svg>`,ds=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,us=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,hs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,ms=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`,Ye=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,gs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,mt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`,Tt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`,Ke=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`,Kn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
</svg>`,Wn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16">
  <path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/>
</svg>`,ps=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,xs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-check" viewBox="0 0 16 16">
  <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
  <path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
</svg>`,fs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-lock" viewBox="0 0 16 16">
  <path d="M5.338 1.59a61 61 0 0 0-2.837.856.48.48 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.7 10.7 0 0 0 2.287 2.233c.346.244.652.42.893.533q.18.085.293.118a1 1 0 0 0 .101.025 1 1 0 0 0 .1-.025q.114-.034.294-.118c.24-.113.547-.29.893-.533a10.7 10.7 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.8 11.8 0 0 1-2.517 2.453 7 7 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7 7 0 0 1-1.048-.625 11.8 11.8 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 63 63 0 0 1 5.072.56"/>
  <path d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415"/>
</svg>`,js=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`,Qn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
</svg>`,ut={"arrow-clockwise":ls,"envelope-arrow-up":us,"exclamation-triangle":hs,"eye-fill":Oe,"gear-fill":Ye,"house-door":mt,"info-circle":Tt,"link-45deg":Ke,"three-dots":js,balloon:cs,bank:st,download:ds,eye:ms,highlights:gs,magic:Ze,search:ps,translate:$e};Object.assign(ut,{"plus-circle":Kn,"x-circle":Qn,braces:$n,magic:Ze,repeat:Wn});Object.assign(ut,{"shield-check":xs,"shield-lock":fs,person:bt});function Gn(){const{t:s}=ae(),n=W.getState().appTitleHead;function t(){const r=s("icons",{ns:"common",returnObjects:!0}),i=Object.getOwnPropertyNames(r).filter(a=>Object.getOwnPropertyNames(ut).includes(a)).toSorted((a,c)=>{const l=r[a],d=r[c];return!l.context||l.context.length===0?-1:!d.context||d.context.length===0||l.context.includes("statistics")?1:d.context.includes("statistics")?-1:l.context.includes("querybuilder")?1:d.context.includes("querybuilder")?-1:l.context[0].localeCompare(d.context[0])});return e.jsx(te,{xs:1,md:2,xl:3,children:i.map(a=>{const c=s(`icons.${a}.context`,{ns:"common",returnObjects:!0,defaultValue:[]});return e.jsx(H,{children:e.jsx(A,{className:"border-0",children:e.jsxs(A.Body,{children:[e.jsxs(A.Title,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ut[a]},"aria-hidden":"true",className:"rounded border px-2 pb-1"})," ",s(`icons.${a}.label`,{ns:"common"})]}),e.jsx(A.Text,{className:"mb-0",children:s(`icons.${a}.description`,{ns:"common"})}),c.length>0&&e.jsx(A.Text,{className:"mt-1",children:c.map(l=>e.jsx(ve,{children:l},l))})]})})},a)})})}return e.jsxs(e.Fragment,{children:[e.jsx(et,{children:e.jsxs("title",{children:[n," – Help"]})}),e.jsxs(de,{className:"my-4",children:[e.jsx("h1",{className:"h1",children:s("help.title")}),e.jsx("h2",{className:"h2",id:"performing-a-fcs-search-in-resources",children:s("help.performSearch.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textBasicSearch"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textAdvancedSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textLexicalSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textSearchProgress"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.performSearch.textViewResource",components:{iconEye:e.jsx("i",{dangerouslySetInnerHTML:{__html:Oe},"aria-hidden":"true"})}})}),e.jsx("h2",{className:"h2",id:"adjusting-search-criteria",children:s("help.adjustSearchCriteria.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.adjustSearchCriteria.text"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.adjustSearchCriteria.textOtherSearchTypes"})}),e.jsx("h2",{className:"h2",id:"more-help",children:s("help.moreHelp.title")}),e.jsx("p",{children:e.jsx(K,{i18nKey:"help.moreHelp.text",components:[e.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),e.jsx("a",{title:s("help.contactTitle"),href:s("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"})]})}),e.jsx("h2",{className:"h2",id:"more-help",children:s("help.icons.title")}),t()]})]})}const At=u.createContext({resources:[],languages:{},weblichtLanguages:[]});At.displayName="AggregatorDataContext";function Yn({resources:s,languages:n,weblichtLanguages:t,children:r}){const i={resources:s,languages:n,weblichtLanguages:t};return e.jsx(At.Provider,{value:i,children:r})}function Et(){return u.useContext(At)}const _t=u.createContext(void 0);_t.displayName="AxiosContext";function Te(){const s=u.useContext(_t);if(!s)throw new Error('No "axios" instance set, use AxiosProvider to set one');return s}function Xn({axios:s,children:n}){return e.jsx(_t.Provider,{value:s,children:n})}const kt=u.createContext(void 0);kt.displayName="SearchParamsContext";function Mt(){const s=u.useContext(kt);if(!s)throw new Error('No "params" data set, use SearchParamsProvider to set one');return s}function Jn({language:s,languageFilter:n,queryType:t,query:r,resourceIDs:i,numberOfResults:a,children:c}){const l={language:s,languageFilter:n,queryType:t,query:r,resourceIDs:i,numberOfResults:a};return e.jsx(kt.Provider,{value:l,children:c})}const vt="byMeta",Zn="all",bs="resource",er="title-up",Le="mul";function gt(s,n=void 0,t={}){return s===Le?t?.defaultAnyLanguage??"Any Language":n?.[s]||(t?.defaultUnknownLanguage??"Unknown Language")}function ht(s){const n=oe.getState().locale,t=(a,c=null)=>({...a,subResources:a.subResources.map(l=>t(l,c??a)),rootResourceId:c?.id??null}),r=s.map(a=>t(a,null)),i=function(a,c){const l=V(a.institution,n)??"",d=V(c.institution,n)??"",h=l.localeCompare(d);if(h!==0)return h;const p=V(a.title,n)??"",L=V(c.title,n)??"";return p.toLowerCase().localeCompare(L.toLowerCase())};return Ue(r,a=>{a.subResources.sort(i)}),r.sort(i),r}function tr(s,n){const t=[],r=[],i=[];return Object.entries(n).forEach(([a,c])=>{c.forEach(l=>{let d=!1;Ue(s,h=>{h.handle===l&&(d=!0,i.push(h))}),d||(console.warn("Handle not found in resources",l),r.push(l))})}),Ue(i,a=>{t.push(a.id)}),{selected:t,unavailable:r}}function Ue(s,n){const t=(r,i)=>{n(r,i)===!1||r.subResources.forEach(t)};s.forEach(t)}function Je(s,n){let t;const r=i=>t!==void 0?!0:n(i)?(t=i,!0):i.subResources.find(r)!==void 0;return s.find(r),t}function ye(s){const n=[];return Ue(s,t=>{n.push(t.id)}),n}function sr(s,n){const t=new Map;return Ue(s,r=>{const i=n(r);t.has(i)||t.set(i,[]),t.get(i).push(r.id)}),t}function nr(s,n,t){const r=[],i=a=>ws(a,i)||dr(a,n,t);return Ue(s,a=>{i(a)&&r.push(a.id)}),r}function rr(s,n){const t=oe.getState().locale,r=new Set;return Ue(s,i=>{if(n.includes(i.id)){const a=V(i.institution,t)??"";r.add(a)}return!0}),Array.from(r)}function St(s){const n=t=>[t,...t.subResources.map(n).flat()];return s.map(n).flat()}const ys=["en","eng","de","deu"];function ir(s){if(s===null)return null;if(typeof s=="string")return s;for(const t of ys)if(Object.hasOwn(s,t))return s[t];const n=Object.getOwnPropertyNames(s);return n.length>0?s[n[0]]:null}function ar(s,n){return s===null?null:typeof s=="string"?s:n&&Object.hasOwn(s,n)?s[n]:null}function V(s,n){n===void 0&&(n=oe.getState().locale);const t=ar(s,n);return t!==null?t:ir(s)}function or(s,n){if(s===null||typeof s=="string")return;if(n===void 0&&(n=oe.getState().locale),n&&Object.hasOwn(s,n))return n;for(const r of ys)if(Object.hasOwn(s,r))return r;const t=Object.getOwnPropertyNames(s);if(t.length>0)return t[0]}function nt(s,n="en"){const t=typeof s.title=="string"||s.title===null?[n]:Object.getOwnPropertyNames(s.title),r=typeof s.description=="string"||s.description===null?[n]:Object.getOwnPropertyNames(s.description),i=typeof s.institution=="string"||s.institution===null?[n]:Object.getOwnPropertyNames(s.institution),a=[...t,...r,...i];return Array.from(new Set(a))}function lr(s,n){return!(n==="fcs"&&!s.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||n==="lex"&&!s.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function cr(s,n){return!!(n===Le||s.languages&&s.languages.length===1&&s.languages[0]===n||s.languages&&s.languages.indexOf(n)>=0)}function ws(s,n){if(!s.subResources||s.subResources.length===0)return!1;let t=!1;const r=i=>{if(n?.(i)===!0){t=!0;return}i.subResources.forEach(r)};return s.subResources.forEach(r),t}function dr(s,n,t){return!(!lr(s,n)||!cr(s,t))}const vs={"title-up":(s,n)=>{const t=oe.getState().locale,r=V(s.title,t)??"",i=V(n.title,t)??"";return r.localeCompare(i)},"title-down":(s,n)=>{const t=oe.getState().locale,r=V(s.title,t)??"",i=V(n.title,t)??"";return-r.localeCompare(i)},"institution-up":(s,n)=>{const t=oe.getState().locale,r=V(s.institution,t)??"",i=V(n.institution,t)??"",a=V(s.title,t)??"",c=V(n.title,t)??"",l=r.localeCompare(i);return l!==0?l:a.localeCompare(c)},"institution-down":(s,n)=>{const t=oe.getState().locale,r=V(s.institution,t)??"",i=V(n.institution,t)??"",a=V(s.title,t)??"",c=V(n.title,t)??"",l=-r.localeCompare(i);return l!==0?l:a.localeCompare(c)}};function Ss(s,n){const[t,r]=u.useState(s);return u.useEffect(()=>{const i=setTimeout(()=>{r(s)},n);return()=>{clearTimeout(i)}},[s,n]),t}function Rt(s,n,t=0,r=n){if(n===s&&n===r&&n.nodeType===Node.ELEMENT_NODE&&t===1)return n.nodeType,n.textContent?.length,n.textContent?.length||0;if(n===s||s===null)return t;const i=n.parentNode;if(i===null)return t;let a=0;const c=i.childNodes;for(let l=0;l<c.length;l++){const d=c[l];if(d===n)break;d.nodeType===Node.TEXT_NODE||d.nodeType===Node.ELEMENT_NODE?a+=d.textContent?.length||0:console.warn("unknown node type",{container:s,node:n,offset:t,parent:i,i:l,child:d})}return Rt(s,i,a+t,r)}function Rs(s,n){const t=s.textContent?.length||0;if(t<n)return null;let r=0;const i=s.childNodes;for(let a=0;a<i.length;a++){const c=i[a];let l=0;if(c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?l=c.textContent?.length||0:console.warn("unknown node type, skip",{container:s,offset:n,child:c}),!(l===0&&i.length!==1)&&(r+=l,r>=n)){const d=n-(r-l);return c.nodeType===Node.ELEMENT_NODE?Rs(c,d):{node:c,offset:d}}}return i.length,null}function Lt(s,n){if(!n)return null;const t=Rt(s,n.startContainer,n.startOffset);if(n.startContainer.nodeType===Node.TEXT_NODE&&n.endContainer===n.startContainer)return[t,t+(n.endOffset-n.startOffset)];const r=Rt(s,n.endContainer,n.endOffset);return[t,r]}function ur(s,n){if(!(document.activeElement===s))return null;const r=window.getSelection();if(!r)return null;const i=document.createRange(),a=Rs(s,n);if(a)try{i.setStart(a.node,a.offset),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}catch(c){console.error("Error trying to set cursor!",c,{container:s,offset:n,startRange:a})}}function Bt(s){if(!(document.activeElement===s))return null;const t=window.getSelection();if(!t||t.rangeCount===0)return null;const r=t.getRangeAt(0),i=Lt(s,r);return i?i[0]:null}function hr(s){return s==="cql"?"fcs-cql":s==="fcs"?"fcs-fcsql":s==="lex"?"fcs-lexcql":"plain"}function Ct(s,n){const t=hr(n),r="match-braces rainbow-braces";let i=s;try{i=sn.highlight(s,t)}catch(c){console.warn("Error trying to highlight value",{value:s,error:c,language:t})}return`<pre><code class="language-${t} ${r}">${i}</code></pre>`}function Ge(s){return s?(s=s.replace(/[\n\t]/g," "),s=s.replace(/&nbsp;|\u202F|\u00A0/g," "),s):""}const Ls=Hs.forwardRef(({value:s,onChange:n,onCursorChange:t,disabled:r,placeholder:i,queryType:a,delay:c=200,...l},d)=>{const h=u.useRef(null),p=u.useRef(null);u.useImperativeHandle(d,()=>p.current);const[L,x]=u.useState(Ge(s)),[b,N]=u.useState(null),_=Ss(L,c),[S,f]=u.useState(_);u.useEffect(()=>{const C=Ct(_,a);if(f(C),p.current){const k=Bt(p.current);N(k)}},[_,a]),u.useEffect(()=>{const C=Ge(s);if(_!==C&&(x(C),f(Ct(C)),p.current)){const k=Bt(p.current);N(k)}},[s,_]),u.useLayoutEffect(()=>{p.current&&b!==null&&ur(p.current,b)});function O(C){const k=C.target.innerText;h.current&&(h.current.value=k),x(k),n?.(k)}function j(C){C.stopPropagation(),C.preventDefault();const F=(C.clipboardData||window.clipboardData).getData("text");I(F)}function B(C){C.key==="Enter"?(C.stopPropagation(),C.preventDefault(),h.current&&h.current.form?.requestSubmit()):C.key==="Backspace"?(C.stopPropagation(),C.preventDefault(),v()):C.key==="Delete"?(C.stopPropagation(),C.preventDefault(),$()):C.ctrlKey&&C.key==="a"||N(null)}function X(C=!1){if(!p.current||!t)return;const k=p.current;if(!(document.activeElement===k))return;const E=window.getSelection();if(!E||E.rangeCount===0)return;const D=[];for(let P=0;P<E.rangeCount;P++){const o=E.getRangeAt(P),y=Lt(k,o);y&&D.push(y)}if(D.length===0)return;const[g,U]=D.pop();C?g===U&&(N(g),t?.(g)):t?.(g,g!==U?U:void 0)}function q(C){if(!p.current)return null;const k=p.current;if(!(document.activeElement===k))return null;const E=window.getSelection();if(!E||E.rangeCount===0)return null;const D=[];for(let o=0;o<E.rangeCount;o++){const y=E.getRangeAt(o),G=Lt(k,y);G&&D.push(G)}if(D.length===0)return null;D.sort();const g=D.map(([o,y])=>y-o).reduce((o,y)=>o+y,0),U=k.innerText,P=D.toReversed().reduce((o,[y,G])=>o.slice(0,y)+o.slice(G),U);if(C==="backspace"){if(g===0){const o=D.filter(([y,G])=>y===G).map(([,y])=>y).pop();if(o===0)return null;if(o!==void 0)return{value:P.slice(0,o-1)+P.slice(o),offset:o-1}}else{const o=D.map(([,y])=>y).pop();if(o!==void 0)return{value:P,offset:o-g}}return console.warn('invalid "backspace" process, abort',{container:k,selectionIndices:D,oldValue:U,newValueSpansRemoved:P,numDeleted:g}),null}else if(C==="delete"){if(g===0){const o=D.filter(([y,G])=>y===G).map(([,y])=>y).pop();if(o!==void 0)return{value:P.slice(0,o)+P.slice(o+1),offset:o}}else{const o=D.map(([,y])=>y).pop();if(o!==void 0)return{value:P,offset:o-g}}return console.warn('invalid "delete" process, abort',{container:k,selectionIndices:D,oldValue:U,newValueSpansRemoved:P,numDeleted:g}),null}else if(C==="paste"){if(g===0){const o=D.filter(([y,G])=>y===G).map(([y])=>y).shift();if(o!==void 0)return{value:P,offset:o}}else{const o=D.map(([y])=>y).shift();if(o!==void 0)return{value:P,offset:o}}return console.warn('invalid "paste" process, abort',{container:k,selectionIndices:D,oldValue:U,newValueSpansRemoved:P,numDeleted:g}),null}}function I(C){const k=q("paste");if(!k)return;const F=Ge(C),{value:E,offset:D}=k,g=E.slice(0,D)+F+E.slice(D),U=D+C.length;x(g),N(U),h.current&&(h.current.value=g),n?.(g),t?.(U)}function v(){const C=q("backspace");if(!C)return;const{value:k,offset:F}=C,E=Ge(k);x(E),N(F),h.current&&(h.current.value=E),n?.(E),t?.(F)}function $(){const C=q("delete");if(!C)return;const{value:k,offset:F}=C,E=Ge(k);x(E),N(F),h.current&&(h.current.value=E),n?.(E),t?.(F)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{role:"input",disabled:r,placeholder:i,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...l,onInput:O,onPaste:j,onKeyDown:B,onKeyUp:()=>X(),onClick:()=>X(!0),tabIndex:r?-1:l.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:S},ref:p}),i&&s===""&&e.jsx("span",{className:"input-placeholder-simulacrum",children:i}),e.jsx("input",{type:"hidden",ref:h})]})});Ls.displayName="ContentEditable";var xe=Ds();function Cs({show:s,languages:n,resources:t,searchLanguage:r,searchLanguageFilter:i,showResourceCounts:a,showLanguageFilterOptions:c=!0,onModalClose:l}){const{t:d}=ae(),[h,p]=u.useState(r||Le),[L,x]=u.useState(i||vt),[b,N]=u.useState(""),[_,S]=u.useState(a??!1),f=u.useMemo(()=>{const v=new Map;return t&&(t.forEach($=>$.languages.forEach(C=>v.set(C,(v.get(C)??0)+1))),v.set(Le,t.length)),v},[t]),O=xe.useFuzzySearchList({list:Object.entries(n??{}).toSorted(),queryText:b,getText:v=>[v[0],v[1]],mapResultItem:({item:v,score:$,matches:C})=>({item:v,matches:C,score:$})});if(!n)return null;const j=Math.floor((O.length+2)/3);function B(v){l({language:h,filter:L,action:v})}function X(){p(r||Le),x(i||vt)}function q(){S(v=>!v)}function I(v,$,C,k){const F=h===v;let E="d-block py-0 my-1 border-0";return F&&(E+=" fw-semibold selected"),C===void 0&&(C=[null,null]),e.jsxs(ne,{size:"sm",className:E,style:{color:`var(${F?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>p(v),"data-filter-score":k,children:[F&&e.jsx("span",{className:"selected-marker me-1",children:"✓"}),e.jsx(xe.Highlight,{ranges:C[1],text:$})," ",e.jsx("sup",{children:e.jsx(xe.Highlight,{ranges:C[0],text:v})}),_&&f.has(v)&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("span",{className:"text-muted",children:["(",f.get(v),")"]})]})]},v)}return e.jsxs(ie,{show:s,onHide:()=>B("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:d("search.languagesModal.title")})}),e.jsxs(ie.Body,{className:"px-0",children:[e.jsxs(de,{className:["px-4"].concat(c?["pb-3 border-bottom"]:[]).join(" "),children:[e.jsxs(te,{children:[e.jsx(H,{sm:!0}),e.jsx(H,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:I(Le,d("languageCodeToName.any",{ns:"common"}))}),e.jsxs(H,{sm:!0,children:[e.jsx(z.Control,{size:"sm",placeholder:d("search.languagesModal.filterInputPlaceholder"),name:"languages-filter",value:b,onChange:v=>N(v.target.value)}),t&&e.jsx(z.Check,{name:"languages-show-count",id:"languages-show-count",checked:_,onChange:q,type:"checkbox",label:d("search.languagesModal.checkboxShowNumberOfResources"),className:"mt-1"})]})]}),e.jsxs(te,{children:[e.jsx(H,{sm:!0,children:O.slice(0,j).map(({item:[v,$],matches:C,score:k})=>I(v,$,C,k))}),e.jsx(H,{sm:!0,children:O.slice(j,2*j).map(({item:[v,$],matches:C,score:k})=>I(v,$,C,k))}),e.jsx(H,{sm:!0,children:O.slice(2*j).map(({item:[v,$],matches:C,score:k})=>I(v,$,C,k))})]})]}),c&&e.jsx(z,{children:e.jsx(de,{className:"px-4 pt-3",children:["byMeta","byGuess","byMetaAndGuess"].map(v=>e.jsx(z.Check,{type:"radio",name:"filterOpts",value:v,id:`filterOpts-${v}`,checked:L===v,onChange:()=>x(v),label:d(`search.languagesModal.optionLanguage${v}`)},v))})})]}),e.jsxs(ie.Footer,{children:[e.jsx(ne,{variant:"secondary",onClick:X,children:d("search.languagesModal.buttonReset")}),e.jsx(ne,{variant:"secondary",onClick:()=>B("abort"),children:d("search.languagesModal.buttonAbort")}),e.jsx(ne,{variant:"primary",onClick:()=>B("confirm"),children:d("search.languagesModal.buttonConfirm")})]})]})}const Pt=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],dt=Object.fromEntries(["cql","fcs","lex"].map(s=>[s,Pt.find(n=>n.id===s)])),qt=["fcs","lex"],mr=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],gr="cql",ct=[10,20,50,100,200,250],Ie="info:srw/diagnostic/1/61",pr=[{id:"cql-single-term",queryType:"cql",query:"Elephant",description:"Query with single term"},{id:"cql-with-boolean",queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{id:"cql-with-phrase",queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{id:"fcs-three-tokens-artznei",queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb'},{id:"lex-plain-string",queryType:"lex",query:"apple",description:"Search for plain string"},{id:"lex-lemma-with-language",queryType:"lex",query:'lemma =/lang=deu "Apfel"',description:'Search for German lemma "Apfel"'}];function xr({show:s,queryTypes:n,onModalClose:t}){const{t:r}=ae(),i=n&&n.length>0?n:["cql","fcs","lex"],a=pr.filter(h=>i.includes(h.queryType));if(a.length===0)return c("abort"),null;function c(h){t({query:void 0,queryType:void 0,action:h})}function l(h,p){t({query:h,queryType:p,action:"confirm"})}function d(h,p,L,x){return e.jsxs(te,{children:[e.jsx(H,{md:"auto",className:"d-none d-md-block",children:x&&`${x}.`}),e.jsxs(H,{className:"d-flex flex-column",children:[L!==void 0&&e.jsx("div",{children:L}),e.jsx("div",{dangerouslySetInnerHTML:{__html:Ct(h,p)}})]}),e.jsx(H,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:e.jsx(ne,{size:"sm",onClick:()=>l(h,p),children:r("search.suggestionsModal.buttonUseQuery")})})]},h)}return e.jsxs(ie,{id:"search-query-suggestions-modal",show:s,onHide:()=>c("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:r("search.suggestionsModal.title")})}),e.jsx(ie.Body,{className:"px-0",children:e.jsx(de,{fluid:!0,children:i.map(h=>{const p=a.filter(L=>L.queryType===h);return p.length===0?null:e.jsxs(u.Fragment,{children:[e.jsx(te,{children:e.jsx(H,{children:e.jsx("h4",{className:"border-bottom pb-2",children:r(`queryTypes.${h}.nameLong`,{ns:"common",defaultValue:dt[h]?.name??h.toUpperCase()})})})}),p.map((L,x)=>d(L.query,L.queryType,L.description,x+1))]},h)})})}),e.jsx(ie.Footer,{children:e.jsx(ne,{variant:"primary",onClick:()=>c("close"),children:r("search.suggestionsModal.buttonClose")})})]})}function Ns({disabled:s,value:n,onChange:t,delay:r=300}){const[i,a]=u.useState(n??""),c=Ss(i,r);return u.useEffect(()=>{t(c)},[t,c]),e.jsx(z.Control,{type:"search",placeholder:"Search for ...",value:i,onChange:l=>a(l.target.value),disabled:s})}function Is(s,n,t,r){const i=St(n);r??=["title","institution","description"];const a=xe.useFuzzySearchList({list:i,queryText:s,getText:x=>{const b=[];return r.includes("title")&&b.push(V(x.title,t)),r.includes("institution")&&b.push(V(x.institution,t)),r.includes("description")&&b.push(V(x.description,t)),b},mapResultItem:({item:x,score:b,matches:N})=>{const _=new Map;let S=0;return r.includes("title")&&_.set("title",N[S++]),r.includes("institution")&&_.set("institution",N[S++]),r.includes("description")&&_.set("description",N[S++]),{resource:x,matches:_,score:b}}}),c=a.reduce((x,{resource:b,matches:N})=>(x.set(b.id,N),x),new Map),l=a.reduce((x,{resource:b,score:N})=>x.set(b.id,N),new Map),d=new Set;a.filter(({resource:x})=>x.rootResourceId!==null).forEach(({resource:x,score:b})=>{const N=l.get(x.rootResourceId);N===void 0?(d.add(x.rootResourceId),l.set(x.rootResourceId,b)):b<N&&l.set(x.rootResourceId,b)});const h=n.filter(x=>d.has(x.id)).map(x=>({resource:x,score:l.get(x.id)}));return{resources:[...a.filter(({resource:x})=>!x.rootResourceId),...h].toSorted(({score:x},{score:b})=>x===b?0:x===void 0?1:b===void 0?-1:x-b).map(({resource:x})=>x),matches:c,scores:l}}function Ot({resource:s,selectedResourceIDs:n,highlighting:t,highlightings:r,shouldBeShown:i,localeForInfos:a,onSelectClick:c,languageCodeToName:l}){const{t:d}=ae(),h=W.getState().isAuthenticated,[p,L]=u.useState(!1),[x,b]=u.useState(!1);t??=r?.get(s.id)??new Map;const N=n.includes(s.id),_=nt(s),S=be(v=>v.locale),[f,O]=u.useState(S);if(u.useEffect(()=>{S&&O(S)},[S]),u.useEffect(()=>{a&&O(a)},[a]),typeof i=="function"&&!i(s))return null;if(i===!1)return null;const j=typeof i=="function"?s.subResources.some(v=>i(v)):!0;function B(){p&&document.getSelection()?.type==="Range"||L(v=>!v)}function X(){c(s,!N)}function q(){b(v=>!v)}function I(){if(s.availabilityRestriction!=="NONE")return e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:h?xs:fs}})," "]})}return e.jsxs(e.Fragment,{children:[e.jsxs(te,{className:`p-2 m-1 ${p&&"border-bottom"}`,children:[e.jsx(H,{md:"auto",sm:1,onClick:X,children:e.jsx(z.Check,{id:`resource-selection-${s.id}`,"aria-label":d("search.results.resourceInfo.checkboxResourceAriaLabel",{title:s.title}),children:e.jsx(z.Check.Input,{checked:N,onChange:()=>{}})})}),e.jsxs(H,{md:8,sm:11,className:`mb-sm-2 ${p?"":"text-truncate"}`,onClick:B,children:[e.jsxs("h4",{className:`h5 ${p?"":"text-truncate"}`,children:[I(),e.jsx(xe.Highlight,{text:V(s.title,f)??"",ranges:t.get("title")??null})," ",s.landingPage&&e.jsx("small",{children:e.jsxs("a",{href:s.landingPage,className:"matomo_link",target:"_blank",children:[d("search.resourcesModal.resource.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})]})})]}),e.jsx("p",{className:`mb-0 ${p?"":"text-truncate"}`,children:V(s.description,f)&&e.jsx(xe.Highlight,{text:V(s.description,f)??"",ranges:t.get("description")??null})})]}),e.jsxs(H,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${p?"":" text-truncate"}`,onClick:B,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:st}})," ",e.jsx(xe.Highlight,{text:V(s.institution,f)??"",ranges:t.get("institution")??null}),e.jsx("br",{}),e.jsx("i",{dangerouslySetInnerHTML:{__html:$e}})," ",s.languages.map(l).sort().join(", "),p&&_.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(tt,{type:"radio",name:`resources-${s.id}-info-languages`,defaultValue:f,onChange:v=>O(v),onClick:v=>v.stopPropagation(),className:"mt-2",children:_.toSorted().map(v=>e.jsx(Ve,{variant:"outline-secondary",size:"sm",id:`resources-${s.id}-info-languages-${v}`,value:v,type:"radio",children:v},v))})]})]}),j&&s.subResources.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-100"}),e.jsx(H,{md:"auto",sm:1,style:{width:"2.8rem"}}),e.jsx(H,{md:{span:8,offset:0},sm:{span:11,offset:1},children:e.jsx(ne,{variant:"link",size:"sm",className:"ps-0",onClick:q,children:d("search.resourcesModal.resource.toggleExpand",{context:x?"collapse":"expand",count:s.subResources.length})})})]})]}),j&&x&&e.jsx(A,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:s.subResources.map(v=>e.jsx(Ot,{resource:v,highlightings:r,selectedResourceIDs:n,shouldBeShown:i,onSelectClick:c,languageCodeToName:l},v.id))})]})}function Vt({title:s,titleId:n,resources:t,selectedResourceIDs:r,resourceScores:i,highlightings:a,expanded:c,shouldBeShown:l,localeForInfos:d,onSelectClick:h,onExpandToggleClick:p,onSelectAllClick:L,onDeselectAllClick:x,languageCodeToName:b}){const{t:N}=ae(),[_,S]=u.useState(c);u.useEffect(()=>{S(c)},[c]);const f=u.useMemo(()=>ye(t),[t]),O=f.filter(F=>r.includes(F)),j=O.length===f.length,B=O.length===0,X=!j&&!B,q=j||!B,I=u.useRef(null);I.current&&(I.current.indeterminate=X);const v=u.useMemo(()=>i!==void 0?t.filter(F=>i.has(F.id)).toSorted((F,E)=>{const D=i.get(F.id),g=i.get(E.id);return D===g?0:D===void 0?1:g===void 0?-1:D-g}):t,[i,t]);if(v.length===0)return null;function $(){S(F=>!F),p(!_)}function C(){X||!q?L(t):x(t)}function k(){const F=t.filter(U=>!U.rootResourceId),E=ye(F).length,D=F.length,g=ye(F).filter(U=>r.includes(U)).length;return N("search.resourcesModal.grouped.msgResources",{count:D,nested:E-D,context:E-D?"nested":null})+(g!==E?N("search.resourcesModal.grouped.msgResourcesSelected",{count:g}):"")}return e.jsxs(de,{className:"border-bottom pb-2 mb-4 px-0",children:[e.jsxs(te,{className:"px-3",children:[e.jsx(H,{md:"auto",sm:1,className:"mt-1",onClick:C,children:e.jsx(z.Check,{id:`resource-group-selection-${n}`,"aria-label":N("search.results.resourceInfo.checkboxResourceAriaLabel",{title:n}),children:e.jsx(z.Check.Input,{checked:q,ref:I,onChange:()=>{}})})}),e.jsx(H,{md:9,sm:11,children:e.jsx("h3",{children:s})}),e.jsx(H,{md:2,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:e.jsx(ne,{size:"sm",variant:"secondary",onClick:$,"aria-expanded":_,children:N("search.resourcesModal.grouped.buttonExpand",{context:_?"hide":"show"})})})]}),e.jsx(te,{className:"px-3 ps-4 ms-4",children:e.jsx(H,{md:{span:11,offset:0},sm:{span:11,offset:1},children:k()})}),e.jsx(ts,{in:_,children:e.jsx(de,{children:v.map(F=>e.jsx(Ot,{resource:F,highlightings:a,selectedResourceIDs:r,shouldBeShown:l,onSelectClick:h,languageCodeToName:b,localeForInfos:d},F.id))})})]})}function fr({show:s,showGrouping:n,resources:t,languages:r,availableResources:i,selectedResources:a,onModalClose:c}){const{t:l}=ae(),d=be(w=>w.locale),[h,p]=u.useState(d);u.useEffect(()=>{d&&p(d)},[d]);const L=new Intl.DisplayNames([d,"en"],{type:"language"}),[x,b]=u.useState(a||i),[N,_]=u.useState(Zn),[S,f]=u.useState(bs),[O,j]=u.useState(er),[B,X]=u.useState(""),[q,I]=u.useState({}),[v,$]=u.useState({});u.useEffect(()=>{n&&f(n)},[s,n]),u.useEffect(()=>b(a),[a]);const C=t.filter(w=>i.includes(w.id)).toSorted(vs[O]),F=C.map(w=>nt(w)).flat().reduce((w,J)=>w.set(J,(w.get(J)??0)+1),new Map),{resources:E,matches:D,scores:g}=Is(B,C,h),U=u.useMemo(()=>{const w=new Map;return S==="institution"?Object.entries(q).forEach(([J,ee])=>{w.set(J,ee.resources.reduce((m,R)=>{const T=g.get(R.id);return T===void 0?m:m===void 0?T:m<T?m:T},void 0))}):S==="language"&&Object.entries(v).forEach(([J,ee])=>{w.set(J,ee.resources.reduce((m,R)=>{const T=g.get(R.id);return T===void 0?m:m===void 0?T:m<T?m:T},void 0))}),w},[S,g,q,v]);if(u.useMemo(()=>{const w={},J={};t.forEach(ee=>{const m=V(ee.institution,h)??"";Object.getOwnPropertyNames(w).includes(m)||(w[m]={expanded:!0,resources:[]}),w[m].resources.push(ee),ee.languages.forEach(R=>{Object.getOwnPropertyNames(J).includes(R)||(J[R]={expanded:!0,resources:[]}),J[R].resources.push(ee)})}),I(w),$(J)},[t,h]),!t)return null;const P={total:ye(t).length,totalRoot:t.length,available:i.length,selected:x.length,visible:ye(E.map(w=>w)).length,visibleRoot:E.length};function o(w){return gt(w,r,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})}function y(w,J){const ee=x.filter(m=>!w.includes(m));b(J?[...ee,...w]:ee)}function G(w){c({resourceIDs:x,action:w})}function Z(w){_(w.target.value)}function re(w){f(w.target.value)}function fe(w){j(w.target.value)}function Ae(){b(i)}function Ee(){b([])}function Se(){b(E.map(w=>w.id))}function Re(w,J){y(ye([w]),J)}function Fe(w){y(ye(w),!0)}function Be(w){y(ye(w),!1)}function _e(w){return!(!i.includes(w.id)||N==="selected"&&!x.includes(w.id)&&!ws(w,J=>x.includes(J.id)))}function We(){return S==="institution"?Object.entries(q).toSorted(([w],[J])=>{const ee=U.get(w),m=U.get(J);return ee===m?0:ee===void 0?1:m===void 0?-1:ee-m}).map(([w,{expanded:J,resources:ee}])=>e.jsx(Vt,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:st}})," ",w]}),titleId:w,resources:ee,selectedResourceIDs:x,resourceScores:g,highlightings:D,expanded:J,shouldBeShown:_e,onSelectAllClick:Fe,onExpandToggleClick:m=>{I({...q,[w]:{...q[w],expanded:m}})},onDeselectAllClick:Be,onSelectClick:Re,languageCodeToName:o,localeForInfos:h},w)):S==="language"?Object.entries(v).toSorted(([w],[J])=>{const ee=U.get(w),m=U.get(J);return ee===m?0:ee===void 0?1:m===void 0?-1:ee-m}).map(([w,{expanded:J,resources:ee}])=>e.jsx(Vt,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:$e}})," ",o(w)," [",w,"]"]}),titleId:w,resources:ee,selectedResourceIDs:x,resourceScores:g,highlightings:D,expanded:J,shouldBeShown:_e,onSelectAllClick:Fe,onExpandToggleClick:m=>v[w].expanded=m,onDeselectAllClick:Be,onSelectClick:Re,languageCodeToName:o,localeForInfos:h},w)):E.filter(w=>!w.rootResourceId).map(w=>e.jsx(Ot,{resource:w,selectedResourceIDs:x,highlighting:D.get(w.id),highlightings:D,shouldBeShown:_e,onSelectClick:Re,languageCodeToName:o,localeForInfos:h},w.id))}return e.jsxs(ie,{id:"resource-selection-modal",show:s,onHide:()=>G("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:l("search.resourcesModal.title")})}),e.jsxs(ie.Body,{className:"px-0",children:[e.jsx(z,{className:"px-3 pb-3 border-bottom",onSubmit:w=>w.preventDefault(),children:e.jsxs(de,{children:[e.jsxs(te,{className:"d-sm-flex row-gap-2 justify-content-around",children:[e.jsx(H,{md:2,sm:6,children:e.jsx(Ne,{label:"View",controlId:"resource-view-options-visibility",children:e.jsxs(z.Select,{value:N,onChange:Z,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"selected",children:"Selected only"})]})})}),e.jsx(H,{md:2,sm:6,children:e.jsx(Ne,{label:"Group by",controlId:"resource-view-options-grouping",children:e.jsxs(z.Select,{value:S,onChange:re,children:[e.jsx("option",{value:"resource",children:"(Resource)"}),e.jsx("option",{value:"institution",children:"Institution"}),e.jsx("option",{value:"language",children:"Language"})]})})}),e.jsx(H,{md:2,sm:6,children:e.jsx(Ne,{label:"Sort by",controlId:"resource-view-options-sorting",children:e.jsxs(z.Select,{value:O,onChange:fe,disabled:S!=="resource"||B.trim()!=="",children:[e.jsx("option",{value:"title-up",children:"Title (up)"}),e.jsx("option",{value:"title-down",children:"Title (down)"}),e.jsx("option",{value:"institution-up",children:"Institution (up)"}),e.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),e.jsx(H,{md:3,sm:12,children:e.jsx(Ne,{label:"Resource filter query",controlId:"resource-view-options-filter",children:e.jsx(Ns,{value:B,onChange:w=>X(w)})})}),e.jsxs(H,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[e.jsx(ne,{onClick:Ae,children:"Select all"}),e.jsx(ne,{onClick:Se,disabled:N!=="all"||B.trim()==="",children:"Select visible"}),e.jsx(ne,{onClick:Ee,children:"Deselect all"})]})]}),F.size>1&&e.jsxs(z.Group,{as:te,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(z.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:l("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(H,{sm:"auto",children:e.jsx(tt,{type:"radio",name:"resource-info-languages",defaultValue:h,onChange:w=>p(w),children:Array.from(F.entries()).toSorted().map(([w,J])=>e.jsxs(Ve,{size:"sm",id:`resource-info-languages-${w}`,value:w,variant:"secondary",title:l("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:J,language:w,languageName:L.of(w)}),children:[L.of(w)," ",e.jsx("sup",{children:w})]},w))})})]})]})}),e.jsx("p",{className:"m-4 mb-0",children:l("search.resourcesModal.msgResourcesSelected",{count:P.selected,total:P.visible,available:P.available,context:P.available!==P.visible?"available":null})}),e.jsx(de,{className:"px-3 pt-3",children:We()})]}),e.jsx(ie.Footer,{children:e.jsx(ne,{variant:"primary",onClick:()=>G("confirm"),children:l("search.resourcesModal.buttonConfirm")})})]})}function jr(){const[s,n]=u.useState(!1);return[s,()=>{s!==!0&&n(!0)}]}function br(){const s=Jt(),{hash:n}=Nt(),t=u.useMemo(()=>new URLSearchParams(n.substring(1)),[n]),r=u.useCallback(i=>{const a=Yt(typeof i=="function"?i(new URLSearchParams(t)):i),c=a.entries().next().done?"":`#${a}`;n!==c&&s({hash:c})},[t,n,s]);return[t,r]}const yr=u.lazy(()=>me(()=>import("./fcs-sru-aggregator-ui-querybuilder.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function zt(s,n=""){const t=s.get("query");return t||n}function $t(s,n="cql"){const t=s.get("queryType");if(t){if(Pt.find(r=>r.id===t)!==void 0)return t;console.warn("Found unsupported queryType in search params",t)}return n}function wr({resources:s,languages:n,onSearch:t,onShowToast:r,availableResources:i=null,selectedResources:a=null,hasSearch:c=!1,disabled:l=!1}){const{t:d}=ae(),[h,p]=qe(),[L,x]=br(),[b,N]=u.useState(!1),[_,S]=u.useState(bs),[f,O]=u.useState(!1),[j,B]=u.useState(!1),[X,q]=u.useState(!1),[I,v]=jr(),[$,C]=u.useState(Le),[k,F]=u.useState(vt),[E,D]=u.useState($t(h,gr)),[g,U]=u.useState(i??[]),[P,o]=u.useState(a??[]),[y,G]=u.useState(ct[0]),[Z,re]=u.useState(zt(h,"")),[fe]=u.useState(null),[Ae,Ee]=u.useState(!1);u.useEffect(()=>{o(a??[])},[a]);const Se=u.useCallback(M=>{const Q=nr(M,E,k==="byGuess"?Le:$);return i&&i.length>0?Q.filter(je=>i.includes(je)):Q},[E,$,k,i]);u.useEffect(()=>{const M=Se(s);U(M),o(Q=>Q.filter(je=>M.includes(je)))},[s,Se]);const Re=u.useCallback(()=>{const M={language:$,languageFilter:k,queryType:E,query:Z,resourceIDs:P??[],numberOfResults:y};M.query!==""&&M.resourceIDs.length!==0&&t(M)},[$,k,y,t,Z,E,P]);u.useEffect(()=>{if(h&&(re(Q=>zt(h,Q)),D(Q=>$t(h,Q)),!h.get("x-aggregation-context"))){const Q=h.get("mode");Q&&(Q==="search"&&Re(),h.delete("mode"),p(h))}},[h,p,Re]),u.useEffect(()=>{h.get("query")!==Z&&(h.set("query",Z),p(h))},[Z,h,p]),u.useEffect(()=>{h.get("queryType")!==E&&(h.set("queryType",E),p(h))},[E,h,p]),u.useEffect(()=>{L.has("openQueryBuilder")&&(v(),q(!0),L.delete("openQueryBuilder"),x(L))},[L,x,v]);const Fe=rr(s,P??[]).length,Be=s.find(M=>M.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,_e=s.find(M=>M.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,We=qt.includes(E);function w(M){M&&D(M)}function J(M){let Q=Number.parseInt(M.target.value);Q<10&&(Q=10),Q>250&&(Q=250),ct.includes(Q)||console.warn("Invalid number of results?!",{valid:ct,value:Q}),G(Q)}function ee({language:M,filter:Q,action:je}){O(!1),je!=="abort"&&(C(M),F(Q))}function m({resourceIDs:M,action:Q}){N(!1),Q!=="abort"&&o(M)}function R({query:M,queryType:Q,action:je}){B(!1),je!=="abort"&&je!=="close"&&(!M||!Q||(D(Q),re(M)))}function T({query:M,validResources:Q,action:je}){q(!1),je!=="abort"&&je!=="close"&&(re(M),P.length!==Q.length&&r?.({title:d("search.toasts.searchInput.title"),body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:d("search.toasts.searchInput.msgResourcesChangedDueToQuery")}),e.jsx("p",{children:d("search.toasts.searchInput.msgResourcesAmountChanged",{before:P.length,after:Q.length})}),e.jsx("hr",{}),e.jsx(ne,{onClick:()=>o(P),children:d("search.toasts.searchInput.buttonRevertSelection")})]}),variant:"info",delay:7e3}),o(Q))}function se(M){re(M)}function le(M){M.preventDefault(),Re()}function Y(){const M=(P??[]).length,Q=s.length===M||g.length===M?"all":null;return d("search.searchInput.buttonSelectedResources",{count:M,context:Q})}return e.jsxs("search",{id:"fcs-query",children:[e.jsxs(z,{noValidate:!0,onSubmit:le,children:[e.jsxs(Xs,{size:c?void 0:"lg",hasValidation:!0,children:[e.jsx(ne,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":d("search.searchInput.buttonOpenQuerySuggestions"),onClick:()=>B(!0),children:e.jsx("i",{dangerouslySetInnerHTML:{__html:cs},"aria-hidden":"true"})}),e.jsx(z.Control,{placeholder:"Elephant","aria-label":d("search.searchInput.inputQueryAriaLabel"),"aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:l,"aria-disabled":l,value:Z,isInvalid:!!fe,...Ae?{as:Ls,queryType:E,onChange:se}:{onChange:M=>se(M.target.value)}}),We&&e.jsx(ne,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":d("search.searchInput.buttonOpenQueryBuilderAriaLabel"),className:"border-end-0 d-none d-md-block",onClick:()=>{v(),q(!0)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze},"aria-hidden":"true"})}),e.jsx(Ve,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:Ae,onChange:()=>Ee(M=>!M),variant:"outline-secondary","aria-label":d("search.searchInput.buttonEnhanceQueryAriaLabel",{context:Ae?"enabled":"disabled"}),className:"d-flex align-items-center border-end-0",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:gs},"aria-hidden":"true"})}),e.jsxs(ne,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:l||Z.trim().length===0,"aria-disabled":l,"aria-label":d("search.searchInput.buttonSearchAriaLabel"),children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ps},"aria-hidden":"true",className:"d-inline d-md-none"}),e.jsx("span",{className:"d-none d-md-inline",children:d("search.searchInput.buttonSearch")})]}),e.jsx(z.Control.Feedback,{type:"invalid",children:fe?.msg})]}),e.jsx("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:e.jsx(K,{i18nKey:"search.searchInput.filtersSummary",components:[e.jsxs(he,{className:"d-inline-block",onSelect:w,"aria-disabled":l,"aria-label":d("search.searchInput.dropdownQueryTypeAriaLabel"),children:[e.jsxs(he.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:l,"aria-disabled":l,style:dt[E]?{"--color":dt[E].color}:{},children:[d(`queryTypes.${E}.nameShort`,{ns:"common",defaultValue:dt[E]?.searchLabel??E.toUpperCase()})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})]}),e.jsx(he.Menu,{children:Pt.filter(M=>M.id==="cql"||M.id==="fcs"&&Be||M.id==="lex"&&_e).map(M=>e.jsx(he.Item,{as:"button",eventKey:M.id,onClick:Q=>Q.preventDefault(),style:{"--color":M.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:d(`queryTypes.${M.id}.nameLong`,{ns:"common",defaultValue:M.name})},M.id))})]}),e.jsxs(ne,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:l,"aria-disabled":l,onClick:()=>{S("resource"),N(!0)},children:[Y()," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})]}),e.jsxs(ne,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:l,"aria-disabled":l,onClick:()=>{S("institution"),N(!0)},children:[d("search.searchInput.buttonSelectedInstitutions",{count:Fe})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})]}),e.jsxs(ne,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>O(!0),disabled:l,"aria-disabled":l,children:[gt($,n??{},{defaultAnyLanguage:d("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:d("languageCodeToName.unknown",{ns:"common"})})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Ye},"aria-hidden":"true"})]}),e.jsx(z.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:J,value:y,"aria-label":d("search.searchInput.selectNumberOfSearchResultsAriaLabel"),disabled:l,"aria-disabled":l,children:ct.map(M=>e.jsx("option",{value:M,children:M},M))})]})})]}),e.jsx(Cs,{languages:n,resources:s,searchLanguage:$,show:f,onModalClose:ee}),e.jsx(fr,{resources:s,languages:n,availableResources:g,selectedResources:P??[],show:b,showGrouping:_,onModalClose:m}),e.jsx(xr,{queryTypes:[E],show:j,onModalClose:R}),qt.includes(E)&&I&&e.jsx(u.Suspense,{fallback:e.jsx(e.Fragment,{children:d("loading",{ns:"querybuilder",defaultValue:d("generic.loadingComponent",{ns:"common"})})}),children:e.jsx(yr,{query:Z,queryType:E,resources:s,selectedResources:P,show:X,onModalClose:T})})]})}function vr({searchId:s,resourceId:n,numberOfResults:t,pollDelay:r=1500}){const{t:i}=ae(),a=Te(),c=It(),[l,d]=u.useState(!1),{isPending:h,mutate:p,reset:L}=Zt({mutationFn:dn.bind(null,a,s,{resourceId:n,numberOfResults:t}),mutationKey:["search-result-load-more",s,n],onSuccess:async j=>{j!==void 0&&s!==j&&console.warn("SearchIDs should be the same?!",{searchId:s,searchIdNewButSame:j,resourceId:n}),await c.invalidateQueries({queryKey:["search-results",s,n]}),d(!0)}});r??=1500;const{data:x,isLoading:b,isFetching:N}=Ce({queryKey:["search-results",s,n],queryFn:hn.bind(null,a,s,n),enabled:l,refetchInterval(j){return j.state.data&&j.state.data.inProgress?r:!1}}),_=h||b||N,S=!!x&&!x.inProgress,f=_||l;l&&S&&(l&&d(!1),c.invalidateQueries({queryKey:["search-result-details",s,n]}));async function O(){L(),p()}return e.jsx(ne,{className:"more-results-button",disabled:f,onClick:O,children:f?e.jsx(ss,{animation:"border",className:"d-block"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:js}})," ",i("search.results.buttonLoadMore")]})})}function Sr(s,n=".."){const t=s.map(l=>l.split("/")),r=Math.max(...t.map(l=>l.length)),a=Array.from(Array(r).keys()).map(l=>new Set(t.map(d=>d.length>l?d[l]:!1)).size===1).reduce((l,d,h,p,L=n??"..")=>d?l&&l[l.length-1]!==L?l.concat([L]):l:l.concat([h]),[]);return s.map(l=>[l,l.split("/")]).map(([l,d])=>[l,a.map(h=>typeof h=="number"?d[h]:h).join("/").replace(/\/+$/,"")]).reduce((l,[d,h])=>l.set(d,h),new Map)}function Rr(s,n){const t=s.filter(i=>i.spans.every(a=>a.text&&a.text.length===(a.range?.[1]??0)-(a.range?.[0]??0))||i.spans.every(a=>a.text&&a.text.length===(a.range?.[1]??0)-(a.range?.[0]??0)+1));return n?t.filter(i=>{const a=n.get(i.id);return a?!!["text","word"].includes(a.layerType.toLowerCase()):!0}).toSorted((i,a)=>{const c=n.get(i.id),l=n.get(a.id);if(c===void 0||l===void 0){if(c===l)return 0;if(c===void 0)return 1;if(l===void 0)return-1}const d=c.layerType.toLowerCase(),h=l.layerType.toLowerCase();if(d==="word"||h==="word"){if(d===h)return 0;if(d==="word")return-1;if(h==="word")return 1}if(c.qualifier!==null&&c.qualifier!==void 0||l.qualifier!==null&&l.qualifier!==void 0){if(c.qualifier!==null&&c.qualifier!==void 0&&l.qualifier!==null&&l.qualifier!==void 0)return 0;if(c.qualifier!==null&&c.qualifier!==void 0)return 1;if(l.qualifier!==null&&l.qualifier!==void 0)return-1}return 0}):t}function Ts({data:s,resource:n}){const t=u.useRef(null),r=n?.availableLayers?.reduce((a,c)=>a.set(c.resultId,c),new Map);function i(a){const c=a.map(x=>x.id),l=Sr(c),d=Math.max(...a.map(x=>x.spans.length)),p=Rr(a,r)?.[0]?.id;a.sort((x,b)=>p===void 0?0:x.id===p?-1:b.id===p?1:0);const L=c.length>1;return e.jsxs(ce,{hover:!0,responsive:!0,className:"mb-0 results-plain",style:{width:"unset"},children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[r!==void 0&&L&&e.jsx("th",{scope:"col",children:"Layer Type"}),L&&e.jsx("th",{scope:"col",children:"Layer Identifier"}),Array(d).fill(null).map((x,b)=>e.jsx("th",{scope:"col",children:"Token"},b))]})}),e.jsx("tbody",{children:a.map(x=>e.jsxs("tr",{className:["text-nowrap"].concat([x.id===p&&a.length>1?"table-primary":null]).filter(Boolean).join(" "),children:[r!==void 0&&L&&e.jsx("td",{scope:"row",className:"text-uppercase",children:r.get(x.id)?.layerType}),L&&e.jsx("td",{scope:"row",title:x.id,className:"border-end",children:l.get(x.id)}),x.spans.map((b,N)=>e.jsx("td",{children:b.hit?e.jsx("mark",{children:e.jsx("strong",{children:b.text})},N):b.text},b.range?.join("-")??N))]},x.id))})]})}return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{responsive:!0,striped:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Annotation Layers"})]})}),e.jsx("tbody",{children:s.records.filter(a=>a.adv!==null).map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:c+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[a.ref&&e.jsx("a",{href:a.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})})," ",a.pid&&e.jsx(He,{placement:"auto-start",container:t,delay:{show:250,hide:400},overlay:e.jsx(ze,{id:`ttip-${a.pid}-${c}`,children:a.pid}),children:e.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:i(a.adv)})]},`${a.pid??a.ref??s.resource.id}-${c}`))})]}),e.jsx("div",{ref:t,className:"tooltip-mounting-point"})]})}function As({data:s}){const n=u.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Left Context"}),e.jsx("th",{scope:"col",children:"Hit"}),e.jsx("th",{scope:"col",children:"Right Context"})]})}),e.jsx("tbody",{children:s.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})})," ",t.pid&&e.jsx(He,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.left}),e.jsx("td",{children:t.hits.keyword&&e.jsx("mark",{children:e.jsx("strong",{children:t.hits.keyword})})}),e.jsx("td",{children:t.hits.right})]},`${t.pid??t.ref??s.resource.id}-${r}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function Es({data:s}){const n=u.useRef(null);return e.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[s.records.filter(t=>t.lex!==null).map((t,r)=>e.jsx(A,{className:"flex-grow-1 w-100",children:e.jsxs(A.Body,{children:[e.jsx(A.Title,{children:t.lex.fields.filter(i=>i.type==="lemma").map(i=>i.values).flat(1).map(i=>e.jsx("span",{children:i.value}))}),e.jsxs(Xe,{variant:"flush",children:[(t.lex.lang||t.lex.langUri)&&e.jsxs(Xe.Item,{children:[e.jsx("strong",{children:"lang"}),": ",t.lex.lang," ",t.lex.langUri]}),t.lex.fields.filter(i=>i.type!=="lemma").map(i=>e.jsxs(Xe.Item,{children:[e.jsx("strong",{children:i.type}),":",i.values.map((a,c)=>e.jsx("span",{className:"ms-2 lex-value",children:a.value},c))]},i.type))]}),e.jsx(A.Link,{children:t.ref&&e.jsxs("a",{href:t.ref,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," Original results ..."]})}),e.jsx(A.Link,{children:t.pid&&e.jsx(He,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${t.pid??t.ref??s.resource.id}-${r}`)),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function _s({data:s}){const n=u.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:s.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})})," ",t.pid&&e.jsx(He,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.fragments.map((i,a)=>i.hit&&!i.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:i.text})},a):i.hit&&i.hitKind?e.jsx("span",{className:`lex-hitkind-${i.hitKind}`,title:`Annotated as "${i.hitKind.split("-").slice(1).join("-")}"`,children:i.text},a):e.jsx("span",{children:i.text},a))})]},`${t.pid??t.ref??s.resource.id}-${r}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function ks({data:s}){const n=u.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:s.records.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[t.ref&&e.jsx("a",{href:t.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})})," ",t.pid&&e.jsx(He,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:e.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:t.hits.fragments.map((i,a)=>i.hit&&!i.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:i.text})},a):e.jsx("span",{children:i.text},a))})]},`${t.pid??t.ref??s.resource.id}-${r}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function Lr({show:s,searchId:n,resourceId:t,result:r,viewMode:i,showDiagnostics:a,onModalClose:c}){const l=Te(),{t:d}=ae(),h=be(g=>g.locale),{languages:p,resources:L,weblichtLanguages:x}=Et(),{numberOfResults:b,queryType:N,language:_,languageFilter:S}=Mt(),[f,O]=u.useState(h);u.useEffect(()=>{h&&O(h)},[h]);const j=new Intl.DisplayNames([h,"en"],{type:"language"}),[B,X]=u.useState(a);u.useEffect(()=>X(a),[a]);const[q,I]=u.useState(i);u.useEffect(()=>I(i),[i]);const v=nt(r.resource),$=r.exception||r.diagnostics?.filter(g=>g.uri!==Ie).length>0;function C(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.records.length,!0)}let k=null,F=!1;if(!x.includes(_)){if(_===Le)if(r.resource.languages&&r.resource.languages.length===1)k=r.resource.languages[0];else{const g=[...new Set(r.records.map(U=>U.lang).filter(U=>U!==null))];g.length===1&&(k=g[0])}k||(console.warn("Cannot use WebLicht: unsupported language",{language:_,languageFilter:S}),F=!0)}function E(g){I(g.target.value)}function D(){if(!r)return null;if(q==="annotation-layers"&&r.hasAdvResults){const g=Je(L,U=>U.id===r.id);return e.jsx(Ts,{data:r,resource:g})}return q==="kwic"&&(N!=="lex"||!r.isLexHits)?e.jsx(As,{data:r}):q==="lexical-entry"&&r.hasLexResults?e.jsx(Es,{data:r}):N==="lex"&&r.isLexHits?e.jsx(_s,{data:r}):e.jsx(ks,{data:r})}return e.jsxs(ie,{show:s,onHide:()=>c(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[e.jsx(ie.Header,{closeButton:!0,children:e.jsx(ie.Title,{children:V(r.resource.title,f)})}),e.jsxs(ie.Body,{className:"resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":d("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:st}})," ",d("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:V(r.resource.institution,f)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Tt}})," ",d("search.results.resourceInfo.labelDescription")]}),V(r.resource.description,f)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:V(r.resource.description,f)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:$e}})," ",d("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:r.resource.languages.map(p?g=>gt(g,p,{defaultAnyLanguage:d("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:d("languageCodeToName.unknown",{ns:"common"})}):g=>g).toSorted().join(", ")}),v&&v.length>1&&e.jsx(tt,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:f,onChange:g=>O(g),className:"mt-2 mb-3",children:v.toSorted().map(g=>e.jsxs(Ve,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${g}`,value:g,children:[j.of(g)," ",e.jsx("sup",{children:g})]},g))}),e.jsx("dt",{children:d("search.results.resourceInfo.labelPID")}),e.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&e.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})," ",d("search.results.resourceInfo.moreInformation")]}),e.jsx("hr",{}),e.jsxs(te,{className:"row-gap-2",children:[e.jsx(H,{lg:"auto",md:3,sm:6,children:e.jsx(Ne,{label:d("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(z.Select,{value:q,onChange:E,children:[e.jsx("option",{value:"plain",children:d("search.results.displayOptions.viewModeOptions.plain")}),(N!=="lex"||!r.isLexHits)&&e.jsx("option",{value:"kwic",children:d("search.results.displayOptions.viewModeOptions.kwic")}),N==="fcs"&&e.jsx("option",{value:"annotation-layers",children:d("search.results.displayOptions.viewModeOptions.annotation-layers")}),N==="lex"&&e.jsx("option",{value:"lexical-entry",children:d("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(H,{lg:3,md:3,sm:6,className:"align-content-center",children:e.jsx(z.Check,{disabled:!$,checked:B,onChange:()=>X(g=>!g),id:"results-modal-view-warnings-errors",label:d("search.results.displayOptions.optionShowWarningsErrors")})}),e.jsxs(H,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[e.jsxs(he,{children:[e.jsxs(he.Toggle,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ds}})," ",d("search.results.buttonDownload")]}),e.jsx(he.Menu,{children:mr.map(({id:g,label:U})=>e.jsx(he.Item,{href:gn(l,n,t,g,_,S),className:"matomo_download",children:e.jsx(K,{i18nKey:"search.results.msgButtonDownloadOption",values:{label:d(`downloadFormats.${g}.name`,{ns:"common",defaultValue:U})}})},g))})]}),e.jsxs(ne,{disabled:F,"aria-disabled":F,href:pn(l,n,t,k,_,S),className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:us}})," ",d("search.results.buttonSendToWeblicht")]})]})]}),e.jsx("hr",{}),e.jsx("p",{children:e.jsx(K,{i18nKey:"search.results.msgShowingXresults",values:{count:r.records.length,context:C()?"hasmore":null,total:r.numberOfRecords}})}),D()]}),B&&$&&e.jsxs(ie.Body,{className:"border-top",children:[r.exception&&e.jsxs(pe,{variant:"danger","aria-label":d("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(pe.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:d("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":d("search.results.diagnostics.msgAriaLabel"),children:r.exception.message})]}),r.exception.cause&&e.jsx("p",{className:"mb-0 small",children:d("search.results.diagnostics.msgCause",{cause:r.exception.cause})}),r.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:r.exception.klass}})})]}),r.diagnostics.filter(g=>g.uri!==Ie).map(g=>e.jsxs(pe,{variant:"warning",children:[e.jsx(pe.Heading,{style:{fontSize:"1rem"},children:g.message}),g.diagnostic&&e.jsx("p",{className:"mb-0 small",children:d("search.results.diagnostics.msgDiagnosticDetails",{details:g.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:g.uri}})})]},`${g.uri}-${g.message}-${g.diagnostic}`))]}),C()&&e.jsx(ie.Footer,{className:"justify-content-center border-top py-2",children:e.jsx(vr,{searchId:n,resourceId:t,numberOfResults:b})})]})}function Cr({searchId:s,resourceId:n,resultInfo:t,viewMode:r,showResourceDetails:i,showDiagnostics:a}){const c=Te(),{t:l}=ae(),d=be(g=>g.locale),{languages:h,resources:p}=Et(),{queryType:L}=Mt(),[x,b]=u.useState(d);u.useEffect(()=>{d&&b(d)},[d]);const N=new Intl.DisplayNames([d,"en"],{type:"language"}),_=u.useId(),[S,f]=u.useState(!0),[O,j]=u.useState(!1),B=t.inProgress,X=t.numberOfRecordsLoaded>0,q=t.exception||t.diagnostics?.filter(g=>g.uri!==Ie).length>0,{data:I,isLoading:v,isError:$}=Ce({queryKey:["search-result-details",s,n],queryFn:mn.bind(null,c,s,n),enabled:!B}),C=I?nt(I.resource):[];if(B||!X&&(a&&!q||!a)||!I)return null;function k(){j(!0)}function F(){j(!1)}function E(){return I?I.numberOfRecords===-1?I.records.length:I.numberOfRecords===I.records.length&&I.nextRecordPosition===-1?`${I.records.length} / ${I.numberOfRecords}?`:`${I.records.length} / ${I.numberOfRecords}`:null}function D(){if(!I)return null;if(r==="annotation-layers"&&I.hasAdvResults){const g=Je(p,U=>U.id===I.id);return e.jsx(Ts,{data:I,resource:g})}return r==="kwic"&&(L!=="lex"||!I.isLexHits)?e.jsx(As,{data:I}):r==="lexical-entry"&&I.hasLexResults?e.jsx(Es,{data:I}):L==="lex"&&I.isLexHits?e.jsx(_s,{data:I}):e.jsx(ks,{data:I})}return e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"my-1 resource-search-result",role:"group","aria-label":l("search.results.resultResourceAriaLabel",{title:I.resource.title}),children:[e.jsxs(A.Header,{className:"d-flex accordion",children:[e.jsxs("button",{type:"button",onClick:()=>f(g=>!g),"aria-controls":_,"aria-expanded":S,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${S?"":"collapsed"}`,children:[e.jsx(ve,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":l("search.results.resultCountAriaLabel"),children:E()}),e.jsx("span",{"aria-label":l("search.results.resultResourceTitleAriaLabel"),className:"user-select-text",children:V(I.resource.title,x)}),e.jsx("small",{className:"text-muted user-select-text","aria-label":l("search.results.resultResourceInstitutionAriaLabel"),children:V(I.resource.institution,x)})]}),e.jsx("div",{className:"d-inline-block ms-auto",children:e.jsxs(ne,{size:"sm",onClick:k,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ms}})," View"]})})]}),e.jsx(ts,{in:S,children:e.jsxs("div",{id:_,children:[i&&e.jsxs(A.Body,{className:"border-bottom resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":l("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:st}})," ",l("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:V(I.resource.institution,x)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Tt}})," ",l("search.results.resourceInfo.labelDescription")]}),V(I.resource.description,x)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:V(I.resource.description,x)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:$e}})," ",l("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:I.resource.languages.map(h?g=>gt(g,h,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})}):g=>g).toSorted().join(", ")})]}),C&&C.length>1&&e.jsx(tt,{type:"radio",name:`${I.resource.id}-result-info-languages`,defaultValue:x,onChange:g=>b(g),className:"mt-2",children:C.toSorted().map(g=>e.jsxs(Ve,{variant:"outline-secondary",size:"sm",id:`${I.resource.id}-result-info-languages-${g}`,value:g,children:[N.of(g)," ",e.jsx("sup",{children:g})]},g))})]}),X&&e.jsx(A.Body,{children:D()}),a&&q&&e.jsxs(A.Body,{className:X?"border-top":"",children:[I.exception&&e.jsxs(pe,{variant:"danger","aria-label":l("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(pe.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:l("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":l("search.results.diagnostics.msgAriaLabel"),children:I.exception.message})]}),I.exception.cause&&e.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgCause",{cause:I.exception.cause})}),I.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:I.exception.klass}})})]}),I.diagnostics.filter(g=>g.uri!==Ie).map(g=>e.jsxs(pe,{variant:"warning",children:[e.jsx(pe.Heading,{style:{fontSize:"1rem"},children:g.message}),g.diagnostic&&e.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgDiagnosticDetails",{details:g.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(K,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:g.uri}})})]},`${g.uri}-${g.message}-${g.diagnostic}`))]})]})})]}),e.jsx(Lr,{show:O,searchId:s,resourceId:n,result:I,viewMode:r,showDiagnostics:a,onModalClose:F})]})}const Nr="plain",Ir="lexical-entry",Tr="plain",Ar="default",Er={default:()=>()=>0,"title-up":s=>(n,t)=>{const r=oe.getState().locale,i=V(s.get(n.id)?.title??null,r)??"",a=V(s.get(t.id)?.title??null,r)??"";return i.localeCompare(a)},"title-down":s=>(n,t)=>{const r=oe.getState().locale,i=V(s.get(n.id)?.title??null,r)??"",a=V(s.get(t.id)?.title??null,r)??"";return-i.localeCompare(a)},"result-count-total-up":()=>(s,n)=>{const t=s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded,r=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded;return t-r},"result-count-total-down":()=>(s,n)=>{const t=s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded;return(n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded)-t}},Kt=1500;function _r({searchId:s,pollDelay:n=Kt}){const{t}=ae(),r=Te(),{resources:i}=Et(),{query:a,queryType:c,resourceIDs:l}=Mt(),[d,h]=u.useState(c==="lex"?Ir:c==="fcs"?Tr:Nr),[p,L]=u.useState(Ar),[x,b]=u.useState(""),[N,_]=u.useState(!1),[S,f]=u.useState(!1),O=u.useMemo(()=>{const o=new Map;return i?.forEach(y=>{o.set(y.id,y)}),Er[p](o)},[p,i]);n??=Kt;const{data:j}=Ce({queryKey:["search-results",s],queryFn:un.bind(null,r,s??""),enabled:!!s,refetchInterval(o){return o.state.data&&o.state.data.inProgress>0?n:!1}}),B=u.useMemo(()=>j?.results.toSorted(O)||[],[j,O]),X=c==="lex"&&j?.results.every(o=>o.numberOfRecords<=0||o.isLexHits===!0),q=l.length,I=j?.inProgress??q,v=u.useMemo(()=>j?.results.filter(o=>(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)>0).length??0,[j]),$=u.useMemo(()=>j?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)>0&&o.diagnostics.filter(y=>y.uri!==Ie).length>0).length??0,[j]),C=u.useMemo(()=>j?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)<=0&&o.diagnostics.filter(y=>y.uri!==Ie).length===0&&o.exception===null).length??0,[j]),k=u.useMemo(()=>j?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)<=0&&(o.diagnostics.filter(y=>y.uri!==Ie).length>0||o.exception!==null)).length??0,[j]),F=u.useMemo(()=>j?.results.filter(o=>!o.inProgress&&o.numberOfRecords<=0&&o.exception!==null).length??0,[j]),E=u.useMemo(()=>j?.results.filter(o=>!o.inProgress&&(o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded)<=0&&o.diagnostics.filter(y=>y.uri!==Ie).length>0&&o.exception===null).length??0,[j]),D=u.useMemo(()=>j?.results.map(o=>o.numberOfRecords!==-1?o.numberOfRecords:o.numberOfRecordsLoaded).reduce((o,y)=>o+y,0)??0,[j]),g=u.useMemo(()=>j?.results.map(o=>o.numberOfRecordsLoaded).reduce((o,y)=>o+y,0)??0,[j]);{const[o,y]=u.useState(!1);u.useEffect(()=>{j&&I===0&&(o||(y(!0),os(a,c,g)))},[j,I,a,c,s,o,g])}function U(o){h(o.target.value)}function P(o){L(o.target.value)}return e.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[e.jsx(He,{placement:"auto",overlay:e.jsxs(pt,{id:"search-progress-information-popover",children:[e.jsx(pt.Header,{children:t("search.results.progressPopover.title")}),e.jsxs(pt.Body,{style:{textIndent:"2rem hanging"},children:[e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesRequested",count:q})}),I>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesRequestedPending",count:I})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResults",count:C+k})}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsOK",count:C})}),E>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsWarnings",count:E})}),F>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsErrors",count:F})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithResults",count:v})}),$>0&&e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithResultsWarnings",count:$})}),e.jsx("hr",{className:"mt-2 mb-0"}),e.jsx("hr",{className:"mt-1 mb-1"}),e.jsx("div",{children:e.jsx(K,{i18nKey:"search.results.progressPopover.numResourcesWithResultsTotal",count:g,values:{available:D}})})]})]}),children:e.jsxs(at,{className:"mb-3",children:[e.jsx(at,{variant:"success",now:v,max:q,label:e.jsx("span",{children:t("search.results.progressBar.numWithResults",{count:v})}),"aria-label":t("search.results.progressBar.numWithResultsAriaLabel")}),e.jsx(at,{variant:"secondary",now:C+k,max:q,label:e.jsx("span",{children:t("search.results.progressBar.numWithoutResults",{count:C+k})}),"aria-label":t("search.results.progressBar.numWithoutResultsAriaLabel")}),e.jsx(at,{striped:!0,animated:!0,now:I,max:q,label:e.jsx("span",{children:t("search.results.progressBar.numResultsPending",{count:I})}),"aria-label":t("search.results.progressBar.numResultsPendingAriaLabel")})]})}),e.jsx(A,{className:"mb-2",role:"group","aria-label":t("search.results.displayOptions.cardAriaLabel"),children:e.jsx(A.Body,{children:e.jsxs(te,{className:"row-gap-2",children:[e.jsx(H,{lg:"auto",md:6,sm:6,children:e.jsx(Ne,{label:t("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(z.Select,{value:d,onChange:U,children:[e.jsx("option",{value:"plain",children:t("search.results.displayOptions.viewModeOptions.plain")}),(c!=="lex"||!X)&&e.jsx("option",{value:"kwic",children:t("search.results.displayOptions.viewModeOptions.kwic")}),c==="fcs"&&e.jsx("option",{value:"annotation-layers",children:t("search.results.displayOptions.viewModeOptions.annotation-layers")}),c==="lex"&&e.jsx("option",{value:"lexical-entry",children:t("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(H,{lg:"auto",md:6,sm:6,children:e.jsx(Ne,{label:t("search.results.displayOptions.sortingLabel"),controlId:"results-sorting",children:e.jsxs(z.Select,{value:p,onChange:P,children:[e.jsx("option",{value:"default",children:t("search.results.displayOptions.sortingOptions.default")}),e.jsx("option",{value:"title-up",children:t("search.results.displayOptions.sortingOptions.title-up")}),e.jsx("option",{value:"title-down",children:t("search.results.displayOptions.sortingOptions.title-down")}),e.jsx("option",{value:"result-count-total-up",children:t("search.results.displayOptions.sortingOptions.result-count-total-up")}),e.jsx("option",{value:"result-count-total-down",children:t("search.results.displayOptions.sortingOptions.result-count-total-down")})]})})}),e.jsx(H,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:e.jsx(Ne,{label:t("search.results.displayOptions.resultFilterQueryLabel"),controlId:"result-filter",children:e.jsx(Ns,{disabled:p!=="default"||!0,value:x,onChange:o=>b(o)})})}),e.jsxs(H,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[e.jsx(z.Check,{checked:N,onChange:()=>_(o=>!o),id:"results-view-resource-details",label:t("search.results.displayOptions.optionShowResultDetails")}),e.jsx(z.Check,{checked:S,onChange:()=>f(o=>!o),id:"results-view-warnings-errors",label:t("search.results.displayOptions.optionShowWarningsErrors")})]})]})})}),s&&j&&B.map(o=>e.jsx(Cr,{searchId:s,resourceId:o.id,resultInfo:o,viewMode:d,showResourceDetails:N,showDiagnostics:S},`${s}-${o.id}`))]})}const kr=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,Wt=""+new URL("assets/logo-fcs.png",import.meta.url).href;function Mr(){const s=Te(),{t:n}=ae(),[t,r]=qe(),[i,a]=u.useState([]),[c,l]=u.useState({}),[d,h]=u.useState([]),[p,L]=u.useState(null),[x,b]=u.useState(!1),[N,_]=u.useState(null),[S,f]=u.useState([]),O=W.getState().appTitleHead,j=W.getState().authEnabled,B=W.getState().isAuthenticated,X={consortia:t.get(ue)},{data:q,isLoading:I,isError:v}=Ce({queryKey:["init"],queryFn:an.bind(null,s,X)});u.useEffect(()=>{if(!q)return;const g=ht(q.resources);if(l(q.languages),h(q.weblichtLanguages),a(g),j){const U=sr(g,o=>o.availabilityRestriction==="NONE"),P=(U.get(!1)??[]).length;if(!B&&P>0){U.get(!1);const o=U.get(!0);L(o),f(y=>[...y,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(K,{i18nKey:"search.toasts.resourceSelection.msgAuthOnlyResourcesNotSelected",count:P}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:(U.get(!1)??[]).map(G=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:G},G))})]}),variant:"success"}])}else L(ye(g))}else L(ye(g))},[q,j,B,n]),u.useEffect(()=>{if(!i||i.length===0)return;const g=t.get("x-aggregation-context");if(g){try{const U=JSON.parse(g),{selected:P,unavailable:o}=tr(i,U);P.length>0&&(L(P),f(y=>[...y,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(K,{i18nKey:"search.toasts.resourceSelection.msgPreselectedResources",count:P.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:P.map(G=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:G}))})]}),variant:"success"}])),o.length>0&&f(y=>[...y,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[e.jsx(K,{i18nKey:"search.toasts.resourceSelection.msgUnableToSelectResources",count:o.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:o.map(G=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:G}))})]}),variant:"warning"}])}catch(U){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:g},U),U instanceof Error&&f(P=>[...P,{title:n("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[n("search.toasts.resourceSelection.msgErrorUnableToSelectResources",{error:U.name}),e.jsx("br",{}),e.jsx("small",{children:U.message})]}),variant:"error"}])}t.delete("x-aggregation-context"),r(t)}},[i,t,r,n]);const $=I||v,{mutate:C,data:k,isPending:F}=Zt({mutationKey:["search"],mutationFn:({query:g,queryType:U,language:P,numberOfResults:o,resourceIDs:y})=>cn(s,{query:g,queryType:U,language:P,numberOfResults:o.toString(),resourceIds:y})});function E(g){L(g.resourceIDs),_(g),b(!0),os(g.query,g.queryType),C(g)}function D(g){f(U=>[...U,g])}return e.jsxs(e.Fragment,{children:[e.jsx(et,{children:e.jsx("title",{children:O})}),e.jsxs(de,{id:"search",children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:e.jsx(Js,{position:"top-end",className:"mt-2",style:{zIndex:100},children:S.map((g,U)=>e.jsxs(xt,{bg:g.variant,onClose:()=>f(P=>P.filter(o=>o!==g)),delay:g.delay??5e3,autohide:!0,children:[e.jsx(xt.Header,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:g.title})}),e.jsx(xt.Body,{children:g.body})]},U))})}),!x&&e.jsx(te,{children:e.jsx(H,{className:"text-center",children:e.jsxs("picture",{children:[e.jsx("source",{srcSet:Wt,media:"(prefers-color-scheme: light)"}),e.jsx("source",{srcSet:kr,media:"(prefers-color-scheme: dark)"}),e.jsx("img",{src:Wt,className:"logo",alt:"FCS logo"})]})})}),e.jsx(te,{className:"mt-3",children:e.jsx(H,{children:e.jsx(wr,{resources:i,languages:c,availableResources:null,selectedResources:p,onSearch:E,onShowToast:D,hasSearch:x,disabled:$})})}),!x&&e.jsx(te,{className:"mt-3",children:e.jsxs(H,{children:[e.jsx("p",{children:e.jsx(K,{i18nKey:"search.intro.textGeneral"})}),e.jsx("p",{children:e.jsx(K,{i18nKey:"search.intro.textLearnMore",components:[e.jsxs("a",{href:n("search.intro.url"),children:["page ",e.jsx("em",{children:"Content Search"})," at CLARIN.eu"]})]})})]})}),x&&F&&e.jsx(te,{children:e.jsx(H,{className:"text-center my-5",children:e.jsx(ss,{animation:"border"})})}),N&&k&&e.jsx(Yn,{resources:i,languages:c,weblichtLanguages:d,children:e.jsx(Jn,{...N,children:e.jsx(_r,{searchId:k})})})]})]})}function Pr(){const s=Jt(),[n]=De();return u.useCallback((r,i,a)=>{const c=Fs(r,i);s({pathname:c,search:n},a)},[s,n])}function Or(){const s=u.useContext(Bs),n=Nt(),t=s.matches.map(i=>i.route),r=qs(t,n);return r!==null&&r.length>0?r[0]:null}function Ur(s){const n=u.useRef();return u.useEffect(()=>{n.current=s}),n.current}const Me="resource",Hr="institution",Dr="url";function Ms(s){const n=new URL(s).hostname,t=n.split(".");if(t.length<=1)return n;const r=t.at(-1);if(t.length===2)return r;const i=t.at(-2);return r.length===2&&i.length===2||r.length===3&&i.length===2?`${i}.${r}`:r}function Fr(s){const n=Ms(s),t=new URL(s),l=`${t.hostname.slice(0,-(n.length+1)).split(".").slice(-1)}.${n}`;return t.port?`${l}:${t.port}`:l}function Qt(s){const n=new URL(s),r=n.hostname.split(".").toReversed(),i=s.substring(s.indexOf("/",n.protocol.length+2+n.hostname.length));return[...r,n.port,i]}function ft(s,n){const t=Qt(s),r=Qt(n),i=Math.min(t.length,r.length);for(let a=0;a<i;a++){const c=t[a],l=r[a],d=c.localeCompare(l);if(d!==0)return d}return 0}const Gt=new Map([["BASIC_SEARCH",0],["ADVANCED_SEARCH",1],["LEX_SEARCH",2],["AUTHENTICATED_SEARCH",3]]);function Br(s,n){const t=Gt.get(s),r=Gt.get(n);return t===void 0?1:r===void 0?-1:t-r}function qr(){const s=Te(),n=It(),{t}=ae(),r=be(m=>m.locale),[,i]=De(),[a,c]=qe(),[l,d]=u.useState([]),[h,p]=u.useState([]),[L,x]=u.useState({}),[b,N]=u.useState(Hr),[_,S]=u.useState(Dr),[f,O]=u.useState(!1),j=a.get(ue)?.split(",")??[],B={consortia:a.get(ue)},{data:X,isPending:q,isError:I,error:v}=Ce({queryKey:["resources"],queryFn:jt.bind(null,s,B)}),{data:$,isPending:C,isError:k,error:F}=Ce({queryKey:["languages"],queryFn:on.bind(null,s,B)}),{data:E,isPending:D,isError:g,error:U}=Ce({queryKey:["resources-all"],queryFn:jt.bind(null,s,void 0)});u.useEffect(()=>{if(!X)return;const m=ht(X);d(m)},[X]),u.useEffect(()=>{$&&x($)},[$]);{u.useEffect(()=>{E&&p(ht(E))},[E]);const m=a.get(ue),R=Ur(m);u.useEffect(()=>{const T=a.get(ue);R!==T&&n.invalidateQueries()},[R,n,a])}const P=St(l),o=P.reduce((m,R)=>{const T=R.endpoint.url;return m.has(T)||m.set(T,[]),m.get(T).push(R),m},new Map),y=Array.from(o.keys()).reduce((m,R)=>{const T=Fr(R);return m.has(T)||m.set(T,[]),m.get(T).push(R),m},new Map),G=Array.from(o.keys()).reduce((m,R)=>{const T=Ms(R);return m.has(T)||m.set(T,[]),m.get(T).push(R),m},new Map),Z=P.reduce((m,R)=>{const T=R.endpoint.url;m.has(T)||m.set(T,new Set);const se=m.get(T);return R.endpoint.searchCapabilities.forEach(le=>se.add(le)),m},new Map),re=P.reduce((m,R)=>{const T=V(R.institution,r)??R.endpointInstitution.name;return m.has(T)||m.set(T,[]),m.get(T).push(R),m},new Map),fe=P.reduce((m,R)=>{const T=R.endpointInstitution.name;return m.has(T)||m.set(T,[]),m.get(T).push(R),m},new Map),Ae=P.reduce((m,R)=>{const T=R.searchCapabilitiesResolved;for(const se of T)m.has(se)||m.set(se,[]),m.get(se).push(R);return m},new Map),Ee=P.reduce((m,R)=>{const T=R.availabilityRestriction;return m.has(T)||m.set(T,[]),m.get(T).push(R),m},new Map),Se=St(h).reduce((m,R)=>{const T=R.endpointInstitution.consortium??null;m.has(T)||m.set(T,{resources:[],endpoints:new Set});const se=m.get(T);return se.resources.push(R),se.endpoints.add(R.endpoint.url),m},new Map),Re=l&&l.length>0,Fe=L&&Object.getOwnPropertyNames(L).length>0,Be=Re&&Fe,_e=Array.from(Ee.keys()).filter(m=>m!=="NONE").length>0;function We(m){const R=a.get(ue)?.split(",").filter(Boolean)??[],T=R.includes(m)?R.filter(se=>se!==m):R.concat([m]);T.length===0?a.delete(ue):a.set(ue,T.join(",")),c(a)}function w(m){return Array.from(m.map(R=>Z.get(R)).filter(R=>R!==void 0).reduce((R,T)=>(T.forEach(se=>R.add(se)),R),new Set)).toSorted(Br).map(R=>R.endsWith("_SEARCH")?R.substring(0,R.indexOf("_SEARCH")):R)}function J(){return e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thInstitutionName")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortia")})]})}),e.jsx("tbody",{children:Array.from((b==="hoster"?fe:re).entries()).toSorted().map(([m,R])=>{const T=Array.from(R.map(Y=>Y.endpoint.url).reduce((Y,M)=>Y.add(M),new Set)),se=w(T),le=Array.from(R.map(Y=>Y.endpointInstitution.consortium).filter(Y=>Y!==void 0).reduce((Y,M)=>Y.add(M),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:R.length}),e.jsx("td",{children:se.join(", ")}),e.jsx("td",{children:le.join(", ")})]},m)})})]})}function ee(){return _==="tld"?e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thEndpointDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountURLsForDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortia")})]})}),e.jsx("tbody",{children:Array.from(G.entries()).toSorted(([m],[R])=>ft(`http://${m}`,`http://${R}`)).map(([m,R])=>{const T=R.map(Y=>o.get(Y)).filter(Y=>Y!==void 0).flat(),se=w(R),le=Array.from(T.map(Y=>Y.endpointInstitution.consortium).filter(Y=>Y!==void 0).reduce((Y,M)=>Y.add(M),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:R.length}),e.jsx("td",{children:T.length}),e.jsx("td",{children:se.join(", ")}),e.jsx("td",{children:le.join(", ")})]},m)})})]}):_==="domain"?e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thEndpointDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountURLsForDomain")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortia")})]})}),e.jsx("tbody",{children:Array.from(y.entries()).toSorted(([m],[R])=>ft(`http://${m}`,`http://${R}`)).map(([m,R])=>{const T=R.map(Y=>o.get(Y)).filter(Y=>Y!==void 0).flat(),se=w(R),le=Array.from(T.map(Y=>Y.endpointInstitution.consortium).filter(Y=>Y!==void 0).reduce((Y,M)=>Y.add(M),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:R.length}),e.jsx("td",{children:T.length}),e.jsx("td",{children:se.join(", ")}),e.jsx("td",{children:le.join(", ")})]},m)})})]}):e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thEndpointUrl")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortium")})]})}),e.jsx("tbody",{children:Array.from(o.entries()).toSorted(([m],[R])=>ft(m,R)).map(([m,R])=>{const T=w([m]),se=Array.from(R.map(le=>le.endpointInstitution.consortium).filter(le=>le!==void 0).reduce((le,Y)=>le.add(Y),new Set));return e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:R.length}),e.jsx("td",{children:T.join(", ")}),e.jsx("td",{children:se.join(", ")})]},m)})})]})}return e.jsxs(de,{className:"d-grid gap-2 mt-3",children:[(q||I)&&e.jsx(te,{children:e.jsxs(H,{children:[q?t("statistics.loading",{context:"what",what:"resources"}):null,e.jsx("br",{}),I?v.message:null]})}),(C||k)&&e.jsx(te,{children:e.jsxs(H,{children:[C?t("statistics.loading",{context:"what",what:"languages"}):null,e.jsx("br",{}),k?F.message:null]})}),e.jsx(e.Fragment,{children:(D||g)&&e.jsx(te,{children:e.jsxs(H,{children:[D?t("statistics.loading",{context:"what",what:"resources-all"}):null,e.jsx("br",{}),g?U.message:null]})})}),e.jsxs(A,{className:"p-3",children:[e.jsx("h3",{className:"h4 pb-1 mb-3 border-bottom",children:t("statistics.fcs.title")}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"overview",children:t("statistics.fcs.titleOverall")}),e.jsxs(ce,{hover:!0,responsive:!0,children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thStatsKey")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thStatsValue")})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelResourceCount")}),e.jsx("td",{children:P.length})]}),e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelEndpointCount")}),e.jsx("td",{children:o.size})]}),e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelInstitutionCount")}),e.jsx("td",{children:fe.size})]}),Se.size>1&&e.jsxs("tr",{children:[e.jsx("td",{scope:"row",children:t("statistics.fcs.tdLabelConsortiaCount")}),e.jsx("td",{children:Se.size})]})]})]}),Se.size>1&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"consortia",children:t("statistics.fcs.titleConsortia")}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderConsortia")}),e.jsx(A.Body,{children:e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thConsortium")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountEndpoints")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapabilities")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thActions")})]})}),e.jsx("tbody",{children:Array.from(Se.entries()).map(([m,{resources:R,endpoints:T}])=>{const se=Array.from(T),le=w(se);return e.jsxs("tr",{className:m&&j.includes(m)?"table-primary":void 0,children:[e.jsx("td",{children:m??t("statistics.fcs.tdNoConsortium")}),e.jsx("td",{children:T.size}),e.jsx("td",{children:R.length}),e.jsx("td",{children:le.join(", ")}),e.jsx("td",{className:m===null?"":"py-0 align-middle",children:m===null?"–":e.jsx(ne,{size:"sm",onClick:()=>We(m),children:t("statistics.fcs.btnToggleConsortium",{context:j.includes(m)?"remove":"add"})})})]},m)})})]})})]})]}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"institutions",children:t("statistics.fcs.titleInstitutions")}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderInstitutionStats")}),e.jsx(A.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.fcs.tdLabelInstitutionCount")}),e.jsx("dd",{children:re.size}),e.jsx("dt",{children:t("statistics.fcs.tdLabelInstitutionHosterCount")}),e.jsx("dd",{children:fe.size})]})})]}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderInstitutions")}),e.jsxs(A.Body,{children:[e.jsx(z,{onSubmit:m=>m.preventDefault(),children:e.jsxs(H,{className:"filter-checkboxes",lg:12,md:12,children:[e.jsx(z.Text,{className:"me-2",children:t("statistics.fcs.labelForResourceInstitutionVariants")}),["institution","hoster"].map(m=>e.jsx(z.Check,{type:"radio",name:"resourceInstitutionVariant",value:m,id:`resourceInstitutionVariant-${m}`,checked:b===m,onChange:()=>N(m),label:t(`statistics.fcs.resourceInstitutionVariant${m}`)},m))]})}),J()]})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",id:"endpoints",children:t("statistics.fcs.titleEndpoints")}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderEndpointStats")}),e.jsx(A.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.fcs.tdLabelEndpointCount")}),e.jsx("dd",{children:o.size}),e.jsx("dt",{children:t("statistics.fcs.tdLabelEndpointDomainCount")}),e.jsx("dd",{children:y.size})]})})]}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderEndpoints")}),e.jsxs(A.Body,{children:[e.jsx(z,{onSubmit:m=>m.preventDefault(),children:e.jsxs(H,{className:"filter-checkboxes",lg:12,md:12,children:[e.jsx(z.Text,{className:"me-2",children:t("statistics.fcs.labelForResourceInstitutionVariants")}),["url","domain","tld"].map(m=>e.jsx(z.Check,{type:"radio",name:"endpointURLVariant",value:m,id:`endpointURLVariant-${m}`,checked:_===m,onChange:()=>S(m),label:t(`statistics.fcs.endpointURLVariant${m}`)},m))]})}),ee()]})]}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",id:"resources",children:t("statistics.fcs.titleResources")}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderResourceStats")}),e.jsx(A.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.fcs.tdLabelResourceCount")}),e.jsx("dd",{children:P.length}),e.jsx("dt",{children:t("statistics.fcs.tdLabelRootResourceCount")}),e.jsx("dd",{children:l.length}),e.jsx("dt",{children:t("statistics.fcs.tdLabelResourceWithAvailabilityRestrictionCount")}),e.jsx("dd",{children:Array.from(Ee.entries()).filter(([m])=>m!=="NONE").map(([,m])=>m).flat().length})]})}),Be&&e.jsx(A.Footer,{className:"d-flex gap-2",children:e.jsx(ne,{variant:"primary",onClick:()=>O(!0),children:t("statistics.fcs.btnOpenResourceLanguageSelectionModal")})})]}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderSearchCapabilities")}),e.jsx(A.Body,{children:e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thSearchCapability")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thCountResources")})]})}),e.jsx("tbody",{children:Array.from(Ae.entries()).map(([m,R])=>e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsx("td",{children:R.length})]},m))})]})})]}),_e&&e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.fcs.cardHeaderResourcesWithAvailabilityRestrictions")}),e.jsx(A.Body,{children:e.jsxs(ce,{hover:!0,responsive:!0,className:"mt-2",children:[e.jsx("caption",{children:t("statistics.fcs.tblAvailabilityRestrictionCaption")}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.fcs.thAvailabilityRestriction")}),e.jsx("th",{scope:"col",children:t("statistics.fcs.thResourceTitle")})]})}),e.jsx("tbody",{children:Array.from(Ee.entries()).filter(([m])=>m!=="NONE").map(([m,R])=>R.map(T=>e.jsxs("tr",{children:[e.jsx("td",{children:m}),e.jsxs("td",{children:[V(T.title,r)," ",e.jsx(Pe,{to:{pathname:"/stats/resources",search:i({[Me]:T.id})},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Oe},className:"align-baseline ms-2"})})]})]},T.id)))})]})})]})]}),e.jsx(Cs,{languages:L,resources:l,showResourceCounts:!0,showLanguageFilterOptions:!1,show:f,onModalClose:()=>O(!1)})]})}function Vr({validatorUrl:s}){const n=Te(),{t}=ae(),r=be(o=>o.locale),[i,a]=u.useState(r),c=new Intl.DisplayNames([r,"en"],{type:"language"}),[,l]=De(),[d,h]=qe(),[p,L]=u.useState([]),[x,b]=u.useState(""),[N,_]=u.useState(d.get(Me)),S=Je(p,o=>o.id===N);if(S===void 0){const o=Je(p,y=>y.handle===N);if(o!==void 0){const y=o.id;y!==N&&(_(y),d.set(Me,y),h(d))}}const f=N?S:void 0,O={consortia:d.get(ue)},{data:j,isPending:B,isError:X,error:q}=Ce({queryKey:["resources"],queryFn:jt.bind(null,n,O)});u.useEffect(()=>{if(!j)return;const o=ht(j);L(o)},[j]),u.useEffect(()=>{const o=d.get(Me);o&&o!==N&&_(o)},[d,N]);const v=p.map(o=>nt(o)).flat().reduce((o,y)=>o.set(y,(o.get(y)??0)+1),new Map),$=p.toSorted(vs["title-up"]),{resources:C,matches:k}=Is(x,$,i,["title","institution"]);function F(o){if(!o)return;const y=o;_(y),d.set(Me,y),h(d)}function E(o,y,G=0){const Z=y?.get(o.id)??new Map,re=e.jsx(he.Item,{eventKey:o.id,style:{paddingInlineStart:`${1+G*1}em`},children:e.jsx(xe.Highlight,{text:V(o.title,i)??"",ranges:Z.get("title")??null})},o.id);return o.subResources&&o.subResources.length>0?e.jsxs(u.Fragment,{children:[re,o.subResources.map(fe=>E(fe,k,G+1))]},o.id):re}function D(o,y,G="–"){if(y===null)return null;const Z=or(y,r);return e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t(`statistics.resources.cardHeader${o[0].toUpperCase()}${o.slice(1)}`)}),typeof y=="string"?e.jsx(A.Body,{children:y||G}):e.jsx(Xe,{className:"list-group-flush",children:Object.entries(y).map(([re,fe])=>e.jsxs(Xe.Item,{children:[e.jsxs(ve,{bg:Z===re?"primary":"secondary",className:"me-2",children:[c.of(re)," ",e.jsx("sup",{children:re})]})," ",fe||G]},re))})]})}function g(o){if(!p||!o)return null;const y=o.rootResourceId===null?o:Je(p,Z=>Z.id===o.rootResourceId);if(!y)return null;function G(Z){return e.jsxs("li",{children:[Z.id===o.id?e.jsx("strong",{children:Z.handle}):e.jsxs(e.Fragment,{children:[Z.handle,e.jsx(Pe,{to:{search:l({[Me]:Z.id})},onClick:re=>{re.preventDefault(),F(Z.id)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Oe},className:"align-baseline ms-2 me-1"})})]})," ","– ",V(Z.title,r),Z.subResources.length>0&&e.jsx("ul",{children:Z.subResources.map(re=>G(re))})]},Z.id)}return e.jsx("ul",{children:G(y)})}const U=f&&(f.availableDataViews?.find(o=>o.mimeType==="application/x-clarin-fcs-lex+xml")||f.availableLexFields&&f.availableLexFields.length>0),P=f&&(f.availableDataViews?.find(o=>o.mimeType==="application/x-clarin-fcs-adv+xml")||f.availableLayers&&f.availableLayers.length>0);return e.jsxs(de,{className:"d-grid gap-2 mt-3",children:[(B||X)&&e.jsx(te,{children:e.jsxs(H,{children:[B?t("statistics.loading"):null,e.jsx("br",{}),X?q.message:null]})}),e.jsx(z,{onSubmit:o=>o.preventDefault(),children:e.jsxs(he,{onSelect:F,children:[e.jsxs(he.Toggle,{className:"resource-selector",variant:"outline-dark",children:[t("statistics.resources.dropdownLabel",{count:p.length})," "]}),e.jsxs(he.Menu,{children:[e.jsxs(he.ItemText,{children:[e.jsx(z.Control,{value:x,onChange:o=>b(o.target.value)}),v.size>1&&e.jsxs(z.Group,{as:te,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(z.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:t("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(H,{sm:"auto",children:e.jsx(tt,{type:"radio",name:"resource-info-languages",defaultValue:i,onChange:o=>a(o),children:Array.from(v.entries()).toSorted().map(([o,y])=>e.jsxs(Ve,{size:"sm",id:`resource-info-languages-${o}`,value:o,variant:"secondary",title:t("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:y,language:o,languageName:c.of(o)}),children:[c.of(o)," ",e.jsx("sup",{children:o})]},o))})})]})]}),e.jsx(he.Divider,{}),C.map(o=>E(o,k))]})]})}),f&&e.jsxs(A,{className:"p-3 mt-3",children:[e.jsx("h3",{className:"h4 pb-1 mb-3 border-bottom",children:V(f.title,r)}),e.jsx("h4",{className:"h5 pb-1 mb-3 border-bottom",children:t("statistics.resources.titleBasicMetadata")}),D("title",f.title),D("description",f.description),D("institution",f.institution),f.landingPage&&e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.resources.cardHeaderLandingPage")}),e.jsx(A.Body,{children:e.jsx("a",{href:f.landingPage,className:"matomo_link",target:"_blank",children:f.landingPage})})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",children:t("statistics.resources.titleTechnicalMetadata")}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.resources.cardHeaderResource")}),e.jsx(A.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.resourcePid")}),e.jsx("dd",{children:f.handle}),e.jsx("dt",{children:t("statistics.labels.resourceHierarchy")}),e.jsx("dd",{children:g(f)}),e.jsx("dt",{children:t("statistics.labels.searchCapabilitiesOfResource")}),e.jsx("dd",{children:f.searchCapabilitiesResolved.join(", ")}),e.jsx("dt",{children:t("statistics.labels.availabilityRestriction")}),e.jsx("dd",{children:f.availabilityRestriction})]})})]}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.resources.cardHeaderEndpoint")}),e.jsx(A.Body,{children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.endpointUrl")}),e.jsxs("dd",{children:[f.endpoint.url," ",s&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${s}?url=${encodeURIComponent(f.endpoint.url)}`,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Oe},className:"align-baseline ms-2"})})]})]}),e.jsx("dt",{children:t("statistics.labels.fcsVersion")}),e.jsx("dd",{children:f.endpoint.protocol}),e.jsx("dt",{children:t("statistics.labels.searchCapabilitiesOfEndpoint")}),e.jsx("dd",{children:f.endpoint.searchCapabilities.join(", ")}),e.jsx("dt",{children:t("statistics.labels.endpointInstitution")}),e.jsxs("dd",{children:[f.endpointInstitution.name,f.endpointInstitution.link&&e.jsxs(e.Fragment,{children:[" – ",e.jsxs("a",{href:f.endpointInstitution.link,className:"matomo_link",target:"_blank",children:[t("statistics.labels.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})]})]})]})]})})]}),e.jsx("h4",{className:"h5 pb-1 mt-4 mb-3 border-bottom",children:t("statistics.resources.titleSeachInformation")}),e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.resources.cardHeaderDataViews")}),e.jsx(A.Body,{children:f.availableDataViews&&e.jsxs(ce,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewIdentifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewMimeType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thDataViewDeliveryPolicy")})]})}),e.jsx("tbody",{children:f.availableDataViews.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.identifier}),e.jsx("td",{children:o.mimeType}),e.jsx("td",{children:o.deliveryPolicy})]},o.identifier))})]})})]}),P&&e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.resources.cardHeaderAdvancedDataView")}),e.jsx(A.Body,{children:f.availableLayers&&e.jsxs(ce,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thLayerType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thQualifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thResultId")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thIdentifier")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thEncoding")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thAltValueInfo")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thAltValueInfoURI")})]})}),e.jsx("tbody",{children:f.availableLayers.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.layerType}),e.jsx("td",{children:o.qualifier}),e.jsx("td",{children:o.resultId}),e.jsx("td",{children:o.identifier}),e.jsx("td",{children:o.encoding}),e.jsx("td",{children:o.altValueInfo}),e.jsx("td",{children:o.altValueInfoURI})]},o.identifier))})]})})]}),U&&e.jsxs(A,{className:"my-2",children:[e.jsx(A.Header,{children:t("statistics.resources.cardHeaderLexDataView")}),e.jsx(A.Body,{children:f.availableLexFields&&e.jsxs(ce,{hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:t("statistics.resources.thLexFieldType")}),e.jsx("th",{scope:"col",children:t("statistics.resources.thLexIdentifier")})]})}),e.jsx("tbody",{children:f.availableLexFields.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.type}),e.jsx("td",{children:o.id})]},o.id))})]})})]})]})]})}function zr({url:s,statistics:n,validatorUrl:t,isScan:r}){const{t:i,i18n:a}=ae(),[,c]=De(),l=new Intl.NumberFormat(a.language,{style:"unit",unit:"second",unitDisplay:"short"});function d(h,p){const L=e.jsx(xe.Highlight,{text:h.title,ranges:n.matchResources?.[p]??null}),x=e.jsx(Pe,{to:{pathname:"/stats/resources",search:c({[Me]:h.handle})},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Oe},className:"align-baseline ms-2"})});return h.valid&&h.notes.length===0?e.jsxs(e.Fragment,{children:[L," ",x]}):e.jsx(He,{placement:"auto-start",delay:{show:250,hide:400},overlay:e.jsxs(ze,{id:`resource-info-warning-${h.handle}`,children:[!h.valid&&i("statistics.errors.notAvailableInAggregator"),!h.valid&&h.notes.length>=1&&e.jsx("hr",{className:"mt-2 mb-1"}),h.notes.length===1?h.notes[0]:h.notes.length>=1?e.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:h.notes.map((b,N)=>e.jsx("li",{children:b},N))}):null]}),children:e.jsxs("span",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:hs},className:"align-baseline me-2"}),h.valid?L:e.jsx("s",{children:L})," ",x]})})}return e.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[e.jsxs("h4",{className:"h5",id:`${es(s)}-${r?"scan":"search"}`,children:[e.jsx(xe.Highlight,{text:s,ranges:n.matchEndpoint}),t&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${t}?url=${encodeURIComponent(s)}`,children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Oe},className:"align-baseline ms-2"})})]})]}),e.jsxs("dl",{className:"ps-sm-4",children:[e.jsx("dt",{children:i("statistics.labels.fcsVersion")}),e.jsx("dd",{children:n.version}),e.jsx("dt",{children:i("statistics.labels.searchCapabilities")}),e.jsx("dd",{children:n.searchCapabilities.join(", ")}),e.jsx("dt",{children:i("statistics.labels.maxConcurrentScanRequests")}),e.jsx("dd",{children:n.maxConcurrentRequests}),e.jsx("dt",{children:i("statistics.labels.requestStatistics")}),e.jsx("dd",{className:"mb-0",children:i("statistics.labels.numberOfRequests",{count:n.numberOfRequests})}),n.avgQueueTime!==0&&e.jsx("dd",{className:"mb-0",children:i("statistics.labels.queueTime",{avg:l.format(n.avgQueueTime),max:l.format(n.maxQueueTime)})}),e.jsx("dd",{children:i("statistics.labels.executionTime",{avg:l.format(n.avgExecutionTime),max:l.format(n.maxExecutionTime)})}),n.rootResources?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:i("statistics.labels.resources")}),e.jsx("dd",{children:i("statistics.labels.numberOfRootResources",{count:n.rootResources.length})}),e.jsx("dd",{children:e.jsx("ul",{children:n.rootResources.map((h,p)=>typeof h=="string"?e.jsx("li",{children:e.jsx(xe.Highlight,{text:h,ranges:n.matchResources?.[p]??null})},h):e.jsx("li",{children:d(h,p)},h.handle))})})]}),e.jsxs(e.Fragment,{children:[Object.entries(n.diagnostics||{}).map(([h,p])=>e.jsxs(pe,{variant:"warning",style:{fontSize:"0.85rem"},children:[e.jsxs(pe.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(ve,{bg:"warning",children:[p.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.diagnostic")})," ",p.diagnostic.message,p.diagnostic.diagnostic&&e.jsxs(e.Fragment,{children:[" - ",e.jsx("small",{children:p.diagnostic.diagnostic})]})]}),e.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",e.jsx("a",{href:p.context,children:p.context})]})]},h)),Object.entries(n.errors||{}).map(([h,p])=>e.jsxs(pe,{variant:"danger",style:{fontSize:"0.85rem"},children:[e.jsxs(pe.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(ve,{bg:"danger",children:[p.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.exception")})," ",p.exception.message]}),e.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",e.jsx("a",{href:p.context,children:p.context})]}),p.exception.cause&&e.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.causedBy")," ",p.exception.cause]})]},h))]})]})]},s)}function $r({data:s,validatorUrl:n}){const{t,i18n:r}=ae(),[i,a]=u.useState(""),[c,l]=u.useState(["institution","endpoint","resources"]),[d,h]=u.useState(!1),p=`-${s.isScan?"scan":"search"}`,L=u.useMemo(()=>Object.entries(s.institutions).toSorted().map(([S,f])=>Object.entries(f).toSorted().map(([O,j])=>({institutionName:S,endpointUrl:O,endpointInfo:{...j,rootResources:j.rootResources.toSorted()}}))).flat(1).filter(d?S=>Object.keys(S.endpointInfo.diagnostics).length>0||Object.keys(S.endpointInfo.errors).length>0:()=>!0),[s,d]),x=L.filter(S=>Object.keys(S.endpointInfo.diagnostics).length>0||Object.keys(S.endpointInfo.errors).length>0),N=xe.useFuzzySearchList({list:L,queryText:i,getText:S=>{const f=[];return c.length===0?f.push(S.institutionName,S.endpointUrl,...S.endpointInfo.rootResources.map(O=>typeof O=="string"?O:O.title)):(c.includes("institution")&&f.push(S.institutionName),c.includes("endpoint")&&f.push(S.endpointUrl),c.includes("resources")&&f.push(...S.endpointInfo.rootResources.map(O=>typeof O=="string"?O:O.title))),f},mapResultItem:({item:S,score:f,matches:O})=>({item:S,matches:O,score:f})}).reduce((S,f)=>{const{institutionName:O,endpointUrl:j,endpointInfo:B}=f.item;return Object.getOwnPropertyNames(S).includes(O)||(S[O]={match:c.length===0||c.includes("institution")?f.matches[0]:null,endpoints:{}}),S[O].endpoints[j]={...B,matchEndpoint:c.length===0||c.includes("endpoint")?f.matches[c.length===0||c.includes("institution")?1:0]:null,matchResources:c.length===0||c.includes("resources")?f.matches.slice(0+(c.length===0||c.includes("institution")?1:0)+(c.length===0||c.includes("endpoint")?1:0)):[]},S},{});function _(S){c.includes(S)?l(c.filter(f=>f!==S)):l([...c,S])}return e.jsxs(de,{className:"d-grid gap-2 mt-3",children:[e.jsx(pe,{variant:"info",className:"mb-0",children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:t("statistics.labels.startDate")}),e.jsx("dd",{className:"mb-0",children:new Date(s.date).toLocaleString(r.language)}),e.jsx("dt",{children:t("statistics.labels.timeout")}),e.jsx("dd",{className:"mb-0",children:new Intl.NumberFormat(r.language,{style:"unit",unit:"second",unitDisplay:"short"}).format(s.timeout)})]})}),e.jsx(z,{onSubmit:S=>S.preventDefault(),children:e.jsxs(te,{className:"gy-2",children:[e.jsx(H,{lg:6,md:12,children:e.jsx(z.Control,{placeholder:t("statistics.filter.inputPlaceholder"),value:i,onChange:S=>a(S.target.value)})}),e.jsxs(H,{className:"filter-checkboxes",lg:6,md:12,children:[e.jsx(z.Text,{className:"me-2",children:t("statistics.filter.labelForCheckboxes")}),e.jsx(z.Check,{type:"checkbox",checked:c.includes("institution"),onChange:()=>_("institution"),id:`filter-institution-name${p}`,label:t("statistics.filter.checkboxInstitution")}),e.jsx(z.Check,{type:"checkbox",checked:c.includes("endpoint"),onChange:()=>_("endpoint"),id:`filter-endpoint-url${p}`,label:t("statistics.filter.checkboxEndpoint")}),e.jsx(z.Check,{type:"checkbox",checked:c.includes("resources"),onChange:()=>_("resources"),id:`filter-resource-names${p}`,label:t("statistics.filter.checkboxResources")})]})]})}),e.jsx(te,{children:e.jsx(H,{children:e.jsx(z.Check,{type:"checkbox",checked:d,onChange:()=>h(!d),id:`filter-show-issues-only${p}`,label:t("statistics.filter.checkboxShowWithIssues",{count:x.length})})})}),Object.entries(N).map(([S,{match:f,endpoints:O}])=>e.jsxs(A,{className:"p-2",children:[e.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${es(S)}${p}`,children:e.jsx(xe.Highlight,{text:S,ranges:f})}),Object.entries(O).toSorted().map(([j,B])=>e.jsx(zr,{url:j,statistics:B,validatorUrl:n,isScan:s.isScan},j))]},S))]})}const Kr=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],Wr=Object.fromEntries(Kr.map(s=>[s.id,s])),Qr=["resources","fcs"];function Gr(){const s=Te(),n=It(),[t]=qe(),{t:r}=ae(),{categoryId:i}=Vs(),a=Or(),c=Pr(),l={consortia:t.get(ue)},{isPending:d,isError:h,data:p,error:L}=Ce({queryKey:["statistics"],queryFn:ln.bind(null,s,l)}),[x,b]=u.useState(W.getState().validatorURL);W.subscribe(j=>b(j.validatorURL));const N=W.getState().appTitleHead,_=[...p!==void 0?Object.keys(p).toSorted():[],...Qr],S=i!=null&&_.includes(i)?i:_.length>0?_[0]:void 0;function f(){n.invalidateQueries({queryKey:["statistics"]}),n.invalidateQueries({queryKey:["resources"]}),n.invalidateQueries({queryKey:["languages"]}),n.invalidateQueries({queryKey:["resources-all"]}),n.invalidateQueries({queryKey:["consortia"]})}function O(j){a?.params.categoryId,a&&a.params.categoryId!==j&&a.route.path&&c(a.route.path,{categoryId:j})}return e.jsxs(e.Fragment,{children:[e.jsx(et,{children:e.jsxs("title",{children:[N," – Statistics"]})}),e.jsxs(de,{id:"statistics",className:"my-4",children:[e.jsx("h1",{className:"h1",children:r("statistics.title")}),(d||h)&&e.jsx(te,{children:e.jsxs(H,{children:[d?r("statistics.loading"):null,e.jsx("br",{}),h?L.message:null]})}),p&&e.jsxs(Qe.Container,{activeKey:i&&_.includes(i)?i:S,onSelect:O,children:[e.jsxs(ge,{className:"nav-tabs",as:"ul",children:[Object.keys(p).map(j=>e.jsx(ge.Item,{as:"li",role:"presentation",children:e.jsx(ge.Link,{as:"button",eventKey:j,children:r(`statistics.tabs.${j}`,{defaultValue:Wr[j]?.label??j})})},j)),e.jsx(ge.Item,{as:"li",role:"presentation",children:e.jsx(ge.Link,{as:"button",eventKey:"resources",children:r("statistics.tabs.resources")})},"resources"),e.jsx(ge.Item,{as:"li",role:"presentation",children:e.jsx(ge.Link,{as:"button",eventKey:"fcs",children:r("statistics.tabs.fcs")})},"fcs"),e.jsx(ge.Item,{as:"li",role:"presentation",className:"ms-auto",children:e.jsxs(ge.Link,{as:"button",onClick:f,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:ls}})," ",r("statistics.tabs.btnRefresh")]})})]}),e.jsxs(Qe.Content,{children:[Object.entries(p).map(([j,B])=>e.jsx(Qe.Pane,{eventKey:j,children:e.jsx($r,{data:B,validatorUrl:x})},j)),e.jsx(Qe.Pane,{eventKey:"resources",children:e.jsx(Vr,{validatorUrl:x})},"resources"),e.jsx(Qe.Pane,{eventKey:"fcs",children:e.jsx(qr,{})},"fcs")]})]})]})]})}function Yr(){const s=W.getState().appTitleHead;Ln();const n=be(t=>t.locale);u.useEffect(()=>{we.language!==n&&we.changeLanguage(n)},[n]);{const t=Nt(),[r,i]=u.useState(t.pathname);u.useEffect(()=>{const a=t.pathname;a!==r&&(i(a+t.search),as(a,document.title,r))},[t,r])}return e.jsxs(e.Fragment,{children:[e.jsx(et,{children:e.jsx("title",{children:s})}),e.jsx(vn,{}),e.jsx("main",{children:e.jsxs(zs,{children:[e.jsx(rt,{index:!0,element:e.jsx(Mr,{})}),e.jsx(rt,{path:"/about",element:e.jsx(zn,{})}),e.jsx(rt,{path:"/help",element:e.jsx(Gn,{})}),e.jsx(rt,{path:"/stats/:categoryId?",element:e.jsx(Gr,{})})]})}),e.jsx(jn,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const Xr=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function Jr(){window.MyAggregator.DEPLOY_PATH!==void 0&&W.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&W.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&W.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&W.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&W.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&W.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&W.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_ENABLED!==void 0&&W.getState().setAuthEnabled(window.MyAggregator.AUTH_ENABLED),window.MyAggregator.AUTH_USERNAME!==void 0&&W.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(s,n){return s[n]},set(s,n,t){if(Xr.includes(n))return console.error(`Configuration ${n} can only be set on initialization!`),!1;if(n==="VALIDATOR_URL")return t===null||typeof t=="string"?(W.getState().setValidatorURL(t),!0):!1;if(n==="SHOW_SEARCH_RESULT_LINK")return typeof t=="boolean"?(W.getState().setShowSearchResultLink(t),!0):!1;{if(n==="AUTH_USERNAME")return t===null||typeof t=="string"?(W.getState().setAuthUsername(t),!0):!1;if(n==="AUTH_ENABLED")return typeof t=="boolean"?(W.getState().setAuthEnabled(t),!0):!1}return s[n]=t,!0}}),Object.assign(window.MyAggregator,{getAppStore:()=>W})}function Zr(){const s=oe.getState(),n=[navigator.language,...navigator.languages];let t=!1;for(const r of n){if(r===s.locale){t=!0;break}if(s.locales.includes(r)){s.setLocale(r),t=!0;break}}t||console.warn("User locale",n,"was not found in available languages",s.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>oe})}Jr();Zr();W.getInitialState(),W.getState();oe.getInitialState(),oe.getState();const ei=W.getState().deployPath,ti=W.getState().apiURL,si=oe.getState().locale;we.changeLanguage(si);const ni=new $s({defaultOptions:{queries:{}}}),ri=Ks.create({baseURL:ti,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const s=W.getState().matomoTrackingParams;Fn(s)||console.warn("Unable to setup tracking ...")}const ii="root",ai=document.getElementById(ii),oi=rn.createRoot(ai);oi.render(e.jsx(u.StrictMode,{children:e.jsx(Xn,{axios:ri,children:e.jsx(Ws,{client:ni,children:e.jsx(Qs,{children:e.jsx(Gs,{basename:ei,children:e.jsx(Yr,{})})})})})}));export{Ls as C,$n as b,St as f,gs as h,Kn as p,Wn as r,Ss as u,Qn as x};

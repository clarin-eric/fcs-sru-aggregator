const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-query-builder-0.0.0.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-query-builder-0.0.0.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{r as g,u as tt,j as s,L as Je,c as ps,a as Zs,N as Ft,H as Me,R as en,b as tn,d as ms,e as xs,f as $e,g as sn,h as nn,k as rn,l as ys,m as an,s as js,n as on,o as ln,p as ze,Q as cn,q as un,t as dn,v as hn,B as fn}from"./vendor/react-ext.js";import{b as gn,g as pn}from"./vendor/react.js";/* empty css                            */import{C as ne,R as Y,a as F,N as Oe,b as fe,c as Dt,M as W,F as z,B as Q,T as st,d as Fe,e as se,f as bs,g as me,I as mn,D as xe,S as Ss,h as Tt,O as Re,i as Se,j as De,L as ut,A as re,P as Be,k as dt,l as xn,m as ht,n as ft}from"./vendor/bootstrap.js";import{_ as ws,a as vs,b as yn,c as jn}from"./locales/en/default.js";import{g as bn}from"./vendor/prism.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var qe={},Ht;function Sn(){if(Ht)return qe;Ht=1;var n=gn();return qe.createRoot=n.createRoot,qe.hydrateRoot=n.hydrateRoot,qe}var wn=Sn(),gt,Vt;function vn(){return Vt||(Vt=1,gt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),gt}var Ln=vn();const Rn=pn(Ln);var Cn=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Ut(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Rn[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(Cn),a=null;(a=i.exec(n))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),e.attrs[l[0]]=l[1],i.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var Nn=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Tn=/^\s*$/,On=Object.create(null);function Ls(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(Ls,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var En={parse:function(n,e){e||(e={}),e.components||(e.components=On);var t,r=[],i=[],a=-1,o=!1;if(n.indexOf("<")!==0){var l=n.indexOf("<");r.push({type:"text",content:l===-1?n:n.substring(0,l)})}return n.replace(Nn,function(c,u){if(o){if(c!=="</"+t.name+">")return;o=!1}var d,f=c.charAt(1)!=="/",p=c.startsWith("<!--"),m=u+c.length,h=n.charAt(m);if(p){var j=Ut(c);return a<0?(r.push(j),r):((d=i[a]).children.push(j),r)}if(f&&(a++,(t=Ut(c)).type==="tag"&&e.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!h||h==="<"||t.children.push({type:"text",content:n.slice(m,n.indexOf("<",m))}),a===0&&r.push(t),(d=i[a-1])&&d.children.push(t),i[a]=t),(!f||t.voidElement)&&(a>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(a--,t=a===-1?r:i[a]),!o&&h!=="<"&&h)){d=a===-1?r:i[a].children;var w=n.indexOf("<",m),L=n.slice(m,w===-1?void 0:w);Tn.test(L)&&(L=" "),(w>-1&&a+d.length>=0||L!==" ")&&d.push({type:"text",content:L})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+Ls("",t)},"")}};const We=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);ae(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},zt={},Pe=(n,e,t,r)=>{ae(t)&&zt[t]||(ae(t)&&(zt[t]=new Date),We(n,e,t,r))},Rs=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},jt=(n,e,t)=>{n.loadNamespaces(e,Rs(n,t))},Bt=(n,e,t,r)=>{if(ae(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return jt(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,Rs(n,r))},kn=(n,e,t={})=>!e.languages||!e.languages.length?(Pe(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n?.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),ae=n=>typeof n=="string",ye=n=>typeof n=="object"&&n!==null,An=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Pn={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},In=n=>Pn[n],_n=n=>n.replace(An,In);let bt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:_n};const Mn=(n={})=>{bt={...bt,...n}},Cs=()=>bt;let Ns;const $n=n=>{Ns=n},Ot=()=>Ns,pt=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},mt=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?ve(e):e},Fn=n=>Array.isArray(n)&&n.every(g.isValidElement),ve=n=>Array.isArray(n)?n:[n],Dn=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},Ts=(n,e,t,r)=>{if(!n)return"";let i="";const a=ve(n),o=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((l,c)=>{if(ae(l)){i+=`${l}`;return}if(g.isValidElement(l)){const{props:u,type:d}=l,f=Object.keys(u).length,p=o.indexOf(d)>-1,m=u.children;if(!m&&p&&!f){i+=`<${d}/>`;return}if(!m&&(!p||f)||u.i18nIsDynamicList){i+=`<${c}></${c}>`;return}if(p&&f===1&&ae(m)){i+=`<${d}>${m}</${d}>`;return}const h=Ts(m,e,t,r);i+=`<${c}>${h}</${c}>`;return}if(l===null){We(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(ye(l)){const{format:u,...d}=l,f=Object.keys(d);if(f.length===1){const p=u?`${f[0]}, ${u}`:f[0];i+=`{{${p}}}`;return}We(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:l});return}We(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:l})}),i},Hn=(n,e,t,r,i,a,o)=>{if(t==="")return[];const l=i.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(l.map(L=>`<${L}`).join("|")).test(t);if(!n&&!e&&!c&&!o)return[t];const u=e??{},d=L=>{ve(L).forEach(T=>{ae(T)||(pt(T)?d(mt(T)):ye(T)&&!g.isValidElement(T)&&Object.assign(u,T))})};d(n);const f=En.parse(`<0>${t}</0>`),p={...u,...a},m=(L,x,T)=>{const b=mt(L),C=j(b,x.children,T);return Fn(b)&&C.length===0||L.props?.i18nIsDynamicList?b:C},h=(L,x,T,b,C)=>{L.dummy?(L.children=x,T.push(g.cloneElement(L,{key:b},C?void 0:x))):T.push(...g.Children.map([L],E=>{const v={...E.props};return delete v.i18nIsDynamicList,g.createElement(E.type,{...v,key:b,ref:E.props.ref??E.ref},C?null:x)}))},j=(L,x,T)=>{const b=ve(L);return ve(x).reduce((E,v,H)=>{const _=v.children?.[0]?.content&&r.services.interpolator.interpolate(v.children[0].content,p,r.language);if(v.type==="tag"){let R=b[parseInt(v.name,10)];!R&&e&&(R=e[v.name]),T.length===1&&!R&&(R=T[0][v.name]),R||(R={});const P=Object.keys(v.attrs).length!==0?Dn({props:v.attrs},R):R,N=g.isValidElement(P),S=N&&pt(v,!0)&&!v.voidElement,k=c&&ye(P)&&P.dummy&&!N,D=ye(e)&&Object.hasOwnProperty.call(e,v.name);if(ae(P)){const M=r.services.interpolator.interpolate(P,p,r.language);E.push(M)}else if(pt(P)||S){const M=m(P,v,T);h(P,M,E,H)}else if(k){const M=j(b,v.children,T);h(P,M,E,H)}else if(Number.isNaN(parseFloat(v.name)))if(D){const M=m(P,v,T);h(P,M,E,H,v.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(v.name)>-1)if(v.voidElement)E.push(g.createElement(v.name,{key:`${v.name}-${H}`}));else{const M=j(b,v.children,T);E.push(g.createElement(v.name,{key:`${v.name}-${H}`},M))}else if(v.voidElement)E.push(`<${v.name} />`);else{const M=j(b,v.children,T);E.push(`<${v.name}>${M}</${v.name}>`)}else if(ye(P)&&!N){const M=v.children[0]?_:null;M&&E.push(M)}else h(P,_,E,H,v.children.length!==1||!_)}else if(v.type==="text"){const R=i.transWrapTextNodes,P=o?i.unescape(r.services.interpolator.interpolate(v.content,p,r.language)):r.services.interpolator.interpolate(v.content,p,r.language);R?E.push(g.createElement(R,{key:`${v.name}-${H}`},P)):E.push(P)}return E},[])},w=j([{dummy:!0,children:n||[]}],f,ve(n||[]));return mt(w[0])},Os=(n,e,t)=>{const r=n.key||e,i=g.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function a(){return g.createElement(g.Fragment,null,i)}return g.createElement(a,{key:r})},Vn=(n,e)=>n.map((t,r)=>Os(t,r,e)),Un=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:Os(n[r],r,e)})}),t},zn=(n,e,t,r)=>n?Array.isArray(n)?Vn(n,e):ye(n)?Un(n,e):(Pe(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,Bn=n=>!ye(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function qn({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:c,ns:u,i18n:d,t:f,shouldUnescape:p,...m}){const h=d||Ot();if(!h)return Pe(h,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const j=f||h.t.bind(h)||(k=>k),w={...Cs(),...h.options?.react};let L=u||j.ns||h.options?.defaultNS;L=ae(L)?[L]:L||["translation"];const x=Ts(n,w,h,r),T=l||x||w.transEmptyNodeValue||r,{hashTransKey:b}=w,C=r||(b?b(x||T):x||T);h.options?.interpolation?.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...h.options.interpolation.defaultVariables}:{...h.options.interpolation.defaultVariables});const E=o||e!==void 0&&!h.options?.interpolation?.alwaysFormat||!n?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},v={...a,context:i||a.context,count:e,...o,...E,defaultValue:T,ns:L},H=C?j(C,v):T,_=zn(c,H,h,r);let R=_||n,P=null;Bn(_)&&(P=_,R=n);const N=Hn(R,P,H,h,w,v,p),S=t??w.defaultTransParent;return S?g.createElement(S,m,N):N}const Kn={type:"3rdParty",init(n){Mn(n.options.react),$n(n)}},Es=g.createContext();class Qn{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function ks({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:c,ns:u,i18n:d,t:f,shouldUnescape:p,...m}){const{i18n:h,defaultNS:j}=g.useContext(Es)||{},w=d||h||Ot(),L=f||w?.t.bind(w);return qn({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a,values:o,defaults:l,components:c,ns:u||L?.ns||j||w?.options?.defaultNS,i18n:w,t:f,shouldUnescape:p,...m})}const Gn=(n,e)=>{const t=g.useRef();return g.useEffect(()=>{t.current=n},[n,e]),t.current},As=(n,e,t,r)=>n.getFixedT(e,t,r),Wn=(n,e,t,r)=>g.useCallback(As(n,e,t,r),[n,e,t,r]),nt=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=g.useContext(Es)||{},a=t||r||Ot();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Qn),!a){Pe(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const b=(E,v)=>ae(v)?v:ye(v)&&ae(v.defaultValue)?v.defaultValue:Array.isArray(E)?E[E.length-1]:E,C=[b,{},!1];return C.t=b,C.i18n={},C.ready=!1,C}a.options.react?.wait&&Pe(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Cs(),...a.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let u=i||a.options?.defaultNS;u=ae(u)?[u]:u||["translation"],a.reportNamespaces.addUsedNamespaces?.(u);const d=(a.isInitialized||a.initializedStoreOnce)&&u.every(b=>kn(b,a,o)),f=Wn(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),p=()=>f,m=()=>As(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),[h,j]=g.useState(p);let w=u.join();e.lng&&(w=`${e.lng}${w}`);const L=Gn(w),x=g.useRef(!0);g.useEffect(()=>{const{bindI18n:b,bindI18nStore:C}=o;x.current=!0,!d&&!l&&(e.lng?Bt(a,e.lng,u,()=>{x.current&&j(m)}):jt(a,u,()=>{x.current&&j(m)})),d&&L&&L!==w&&x.current&&j(m);const E=()=>{x.current&&j(m)};return b&&a?.on(b,E),C&&a?.store.on(C,E),()=>{x.current=!1,a&&b?.split(" ").forEach(v=>a.off(v,E)),C&&a&&C.split(" ").forEach(v=>a.store.off(v,E))}},[a,w]),g.useEffect(()=>{x.current&&d&&j(p)},[a,c,d]);const T=[h,a,d];if(T.t=h,T.i18n=a,T.ready=d,d||!d&&!l)return T;throw new Promise(b=>{e.lng?Bt(a,e.lng,u,()=>b()):jt(a,u,()=>b())})},He="x-consortia";async function Yn(n,e){const t=new URLSearchParams;e?.consortia!==void 0&&e?.consortia!==null&&t.set(He,e.consortia);const r="init"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function Jn(n,e){const t=new URLSearchParams;e?.consortia!==void 0&&e?.consortia!==null&&t.set(He,e.consortia);const r="statistics"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function Xn(n,e){return(await n.post("search",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function Zn(n,e,t){return(await n.post(`search/${e}`,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function er(n,e){if(!e)throw new Error('Invalid "searchID" parameter!');return(await n.get(`search/${e}/metaonly`)).data}async function tr(n,e,t){if(!e)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await n.get(`search/${e}/metaonly?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.id===t);if(i.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${e}, resourceId: ${t})`);return i[0]}async function sr(n,e,t){if(!e)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await n.get(`search/${e}?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.resource.id===t);if(i.length===0)throw new Error(`Results for resource not found! (searchId: ${e}, resourceId: ${t})`);return i[0]}function nr(n,e,t,r,i,a){const o=new URLSearchParams({resourceId:t,format:r});(a==="byGuess"||a==="byMetaAndGuess")&&o.set("filterLanguage",i);const l=`search/${e}/download?${o.toString()}`;return n.getUri({url:l})}function rr(n,e,t,r,i,a){const o=new URLSearchParams({resourceId:t});r?o.set("filterLanguage",r):(a==="byGuess"||a==="byMetaAndGuess")&&o.set("filterLanguage",i);const l=`search/${e}/toWeblicht?${o.toString()}`;return n.getUri({url:l})}const ir=[He];function rt(){const[n]=tt(),e=new URLSearchParams(Array.from(n.entries()).filter(([t])=>ir.includes(t)));if(!e.entries().next().done)return`?${e}`}function ar(){const{t:n}=nt(),e="urls.terms-use-and-disclaimer",t=n(e,{ns:"common"}),r=t!==e,i="urls.contact",a=n(i,{ns:"common"}),o=a!==i,l="footer.service-info.text",u=n(l)!==l,d=rt();return s.jsx("footer",{className:"text-muted",children:s.jsx(ne,{children:s.jsxs(Y,{children:[s.jsxs(F,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[s.jsxs("div",{children:[s.jsx(Je,{to:{pathname:"/about",search:d},className:"hidden-xs",children:n("footer.links.about")}),s.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","0.0.0"]})]}),s.jsx(Je,{to:{pathname:"/stats",search:d},children:n("footer.links.statistics")})]}),s.jsx(F,{className:"text-center",children:u&&s.jsxs(ks,{i18nKey:l,children:[s.jsxs("span",{className:"footer-fineprint",children:["Service provided by ",s.jsx("a",{href:n("footer.service-info.url"),children:"CLARIN"})]}),s.jsxs("span",{children:[s.jsx("br",{}),"Hosted by CLARIN ERIC"]})]})}),s.jsxs(F,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&s.jsx("a",{href:t,children:n("footer.links.terms-use-and-disclaimer")}),o&&s.jsx("a",{href:a,children:n("footer.links.contact")})]})]})})})}const q=ps(n=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authUsername:null,setDeployPath:e=>n(t=>({deployPath:typeof e=="function"?e(t.deployPath):e})),setApiURL:e=>n(t=>({apiURL:typeof e=="function"?e(t.apiURL):e})),setValidatorURL:e=>n(t=>({validatorURL:typeof e=="function"?e(t.validatorURL):e})),setShowSearchResultLink:e=>n(t=>({showSearchResultLink:typeof e=="function"?e(t.showSearchResultLink):e})),setAppTitle:e=>n(t=>({appTitle:typeof e=="function"?e(t.appTitle):e})),setAppTitleHead:e=>n(t=>({appTitleHead:typeof e=="function"?e(t.appTitleHead):e})),setMatomoTrackingParams:e=>n(t=>({matomoTrackingParams:typeof e=="function"?e(t.matomoTrackingParams):e})),setAuthUsername:e=>n(t=>({authUsername:typeof e=="function"?e(t.authUsername):e}))}));var or=["en","de"];const X=ps(n=>({locale:"en",locales:or??["en"],setLocale:e=>n(t=>({locale:typeof e=="function"?e(t.locale):e})),setLocales:e=>n(t=>({locales:typeof e=="function"?e(t.locales):e}))})),be=n=>{const e=Zs(X,n);return Object.assign(e,X),e},lr=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,qt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,Ve=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function cr(){const{t:n}=nt(),e=be(p=>p.locale),t=be(p=>p.locales),r=be(p=>p.setLocale),i=q.getState().authUsername,a=i!==null&&i!=="anonymous",o=q.getState().deployPath??"",l=o+(o.endsWith("/")?"":"/")+"login",c=rt();function u(p){p!==null&&r(p)}function d(){return a?s.jsxs(Oe.Text,{className:"ms-auto",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:qt}})," Signed in as"," ",s.jsx("span",{className:"fw-bold",children:i})]}):s.jsxs(fe.Link,{href:`${l}${c??""}`,className:"ms-auto",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:qt}})," ",n("header.login.login")]})}function f(){if(!t||t.length===1)return null;const p=s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})," ",e.toUpperCase()]});return s.jsx(Dt,{title:p,align:"end",className:"ms-2",onSelect:u,children:t.map(m=>s.jsx(Dt.Item,{disabled:m===e,"aria-disabled":m===e,eventKey:m,children:m.toUpperCase()},m))})}return s.jsx("header",{children:s.jsx(Oe,{expand:"md",className:"bg-body-tertiary",children:s.jsxs(ne,{children:[s.jsxs(Oe.Brand,{as:Je,to:{pathname:"/",search:c},children:[s.jsx("img",{src:lr,width:"30",height:"30",className:"d-inline-block align-top",alt:`${n("header.title")} logo`})," ",n("header.title")]}),s.jsx(Oe.Toggle,{"aria-controls":"header-navbar-nav"}),s.jsx(Oe.Collapse,{id:"header-navbar-nav",children:s.jsxs(fe,{className:"w-100 d-flex",children:[s.jsx(fe.Link,{as:Ft,to:{pathname:"/",search:c},children:n("header.menu.home")}),s.jsx(fe.Link,{as:Ft,to:{pathname:"/help",search:c},children:n("header.menu.help")}),d(),f()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function ur(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function dr(n){n==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",n)}function hr(){g.useEffect(()=>{function n(){dr(ur())}return n(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",n)},[])}const fr="modulepreload",gr=function(n,e){return new URL(n,e).href},Kt={},ue=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=u(t.map(d=>{if(d=gr(d,r),d in Kt)return;Kt[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(!!r)for(let j=o.length-1;j>=0;j--){const w=o[j];if(w.href===d&&(!f||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${p}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":fr,f||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((j,w)=>{h.addEventListener("load",j),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},pr=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},$=n=>typeof n=="string",Ee=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},Qt=n=>n==null?"":""+n,mr=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},xr=/###/g,Gt=n=>n&&n.indexOf("###")>-1?n.replace(xr,"."):n,Wt=n=>!n||$(n),Ae=(n,e,t)=>{const r=$(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Wt(n))return{};const a=Gt(r[i]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++i}return Wt(n)?{}:{obj:n,k:Gt(r[i])}},Yt=(n,e,t)=>{const{obj:r,k:i}=Ae(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let a=e[e.length-1],o=e.slice(0,e.length-1),l=Ae(n,o,Object);for(;l.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),l=Ae(n,o,Object),l?.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=t},yr=(n,e,t,r)=>{const{obj:i,k:a}=Ae(n,e,Object);i[a]=i[a]||[],i[a].push(t)},Xe=(n,e)=>{const{obj:t,k:r}=Ae(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},jr=(n,e,t)=>{const r=Xe(n,t);return r!==void 0?r:Xe(e,t)},Ps=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?$(n[r])||n[r]instanceof String||$(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):Ps(n[r],e[r],t):n[r]=e[r]);return n},we=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var br={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Sr=n=>$(n)?n.replace(/[&<>"'\/]/g,e=>br[e]):n;class wr{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const vr=[" ",",","?","!",";"],Lr=new wr(20),Rr=(n,e,t)=>{e=e||"",t=t||"";const r=vr.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(r.length===0)return!0;const i=Lr.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(n);if(!a){const o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(a=!0)}return a},St=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,l="";for(let c=a;c<r.length;++c)if(c!==a&&(l+=t),l+=r[c],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;a+=c-a+1;break}i=o}return i},Ie=n=>n?.replace("_","-"),Cr={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Ze{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Cr,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:($(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Ze(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ze(this.logger,e)}}var he=new Ze;class it{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...t])})}}class Jt extends it{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],r&&(Array.isArray(r)?l.push(...r):$(r)&&a?l.push(...r.split(a)):l.push(r)));const c=Xe(this.data,l);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=l[0],t=l[1],r=l.slice(2).join(".")),c||!o||!$(r)?c:St(this.data?.[e]?.[t],r,a)}addResource(e,t,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[e,t];r&&(l=l.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(l=e.split("."),i=t,t=l[1]),this.addNamespaces(t),Yt(this.data,l,i),a.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const a in r)($(r[a])||Array.isArray(r[a]))&&this.addResource(e,t,a,r[a],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,a,o={silent:!1,skipCopy:!1}){let l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=t,t=l[1]),this.addNamespaces(t);let c=Xe(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Ps(c,r,a):c={...c,...r},Yt(this.data,l,c),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var Is={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(a=>{e=this.processors[a]?.process(e,t,r,i)??e}),e}};const Xt={},Zt=n=>!$(n)&&typeof n!="boolean"&&typeof n!="number";class et extends it{constructor(e,t={}){super(),mr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=he.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Rr(e,r,i);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:$(a)?[a]:a};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(i)}return{key:e,namespaces:$(a)?[a]:a}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],i),u=c[c.length-1];let d=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const f=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return p?a?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${d}${l}`:a?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:l;const m=this.resolve(e,i);let h=m?.res;const j=m?.usedKey||l,w=m?.exactUsedKey||l,L=["[object Number]","[object Function]","[object RegExp]"],x=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,b=i.count!==void 0&&!$(i.count),C=et.hasDefaultValue(i),E=b?this.pluralResolver.getSuffix(f,i.count,i):"",v=i.ordinal&&b?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",H=b&&!i.ordinal&&i.count===0,_=H&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${E}`]||i[`defaultValue${v}`]||i.defaultValue;let R=h;T&&!h&&C&&(R=_);const P=Zt(R),N=Object.prototype.toString.apply(R);if(T&&R&&P&&L.indexOf(N)<0&&!($(x)&&Array.isArray(R))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,R,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(m.res=S,m.usedParams=this.getUsedParamsDetails(i),m):S}if(o){const S=Array.isArray(R),k=S?[]:{},D=S?w:j;for(const M in R)if(Object.prototype.hasOwnProperty.call(R,M)){const y=`${D}${o}${M}`;C&&!h?k[M]=this.translate(y,{...i,defaultValue:Zt(_)?_[M]:void 0,joinArrays:!1,ns:c}):k[M]=this.translate(y,{...i,joinArrays:!1,ns:c}),k[M]===y&&(k[M]=R[M])}h=k}}else if(T&&$(x)&&Array.isArray(h))h=h.join(x),h&&(h=this.extendTranslation(h,e,i,r));else{let S=!1,k=!1;!this.isValidLookup(h)&&C&&(S=!0,h=_),this.isValidLookup(h)||(k=!0,h=l);const M=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:h,y=C&&_!==h&&this.options.updateMissing;if(k||S||y){if(this.logger.log(y?"updateKey":"missingKey",f,u,l,y?_:h),o){const Z=this.resolve(l,{...i,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const V=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&V&&V[0])for(let Z=0;Z<V.length;Z++)A.push(V[Z]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(i.lng||this.language):A.push(i.lng||this.language);const J=(Z,te,ie)=>{const ge=C&&ie!==h?ie:M;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,u,te,ge,y,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Z,u,te,ge,y,i),this.emit("missingKey",Z,u,te,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?A.forEach(Z=>{const te=this.pluralResolver.getSuffixes(Z,i);H&&i[`defaultValue${this.options.pluralSeparator}zero`]&&te.indexOf(`${this.options.pluralSeparator}zero`)<0&&te.push(`${this.options.pluralSeparator}zero`),te.forEach(ie=>{J([Z],l+ie,i[`defaultValue${ie}`]||_)})}):J(A,l,_))}h=this.extendTranslation(h,e,i,m,r),k&&h===l&&this.options.appendNamespaceToMissingKey&&(h=`${u}${d}${l}`),(k||S)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,S?h:void 0,i))}return a?(m.res=h,m.usedParams=this.getUsedParamsDetails(i),m):h}extendTranslation(e,t,r,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=$(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let d=r.replace&&!$(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||i.usedLng,r),c){const f=e.match(this.interpolator.nestingRegexp),p=f&&f.length;u<p&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...f)=>a?.[0]===f[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):this.translate(...f,t),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=$(o)?[o]:o;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=Is.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,a,o,l;return $(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,t),d=u.key;i=d;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=t.count!==void 0&&!$(t.count),m=p&&!t.ordinal&&t.count===0,h=t.context!==void 0&&($(t.context)||typeof t.context=="number")&&t.context!=="",j=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(w=>{this.isValidLookup(r)||(l=w,!Xt[`${j[0]}-${w}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(Xt[`${j[0]}-${w}`]=!0,this.logger.warn(`key "${i}" for languages "${j.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(L=>{if(this.isValidLookup(r))return;o=L;const x=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(x,d,L,w,t);else{let b;p&&(b=this.pluralResolver.getSuffix(L,t.count,t));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(d+b),t.ordinal&&b.indexOf(E)===0&&x.push(d+b.replace(E,this.options.pluralSeparator)),m&&x.push(d+C)),h){const v=`${d}${this.options.contextSeparator}${t.context}`;x.push(v),p&&(x.push(v+b),t.ordinal&&b.indexOf(E)===0&&x.push(v+b.replace(E,this.options.pluralSeparator)),m&&x.push(v+C))}}let T;for(;T=x.pop();)this.isValidLookup(r)||(a=T,r=this.getResource(L,w,T,t))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!$(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of t)delete i[a]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class es{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=he.create("languageUtils")}getScriptPartFromCode(e){if(e=Ie(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Ie(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if($(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),$(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return $(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):$(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const ts={zero:0,one:1,two:2,few:3,many:4,other:5},ss={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Nr{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=he.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=Ie(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ss;if(!e.match(/-|_/))return ss;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[a]=o,o}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>ts[i]-ts[a]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const ns=(n,e,t,r=".",i=!0)=>{let a=jr(n,e,t);return!a&&i&&$(t)&&(a=St(n,t,r),a===void 0&&(a=St(e,t,r))),a},xt=n=>n.replace(/\$/g,"$$$$");class Tr{constructor(e={}){this.logger=he.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:m,nestingSuffix:h,nestingSuffixEscaped:j,nestingOptionsSeparator:w,maxReplaces:L,alwaysFormat:x}=e.interpolation;this.escape=t!==void 0?t:Sr,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?we(a):o||"{{",this.suffix=l?we(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?we(p):m||we("$t("),this.nestingSuffix=h?we(h):j||we(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=L||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let a,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const L=ns(t,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...t,interpolationkey:m}):L}const h=m.split(this.formatSeparator),j=h.shift().trim(),w=h.join(this.formatSeparator).trim();return this.format(ns(t,c,j,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...i,...t,interpolationkey:j})};this.resetRegExp();const d=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>xt(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?xt(this.escape(m)):xt(m)}].forEach(m=>{for(l=0;a=m.regex.exec(e);){const h=a[1].trim();if(o=u(h),o===void 0)if(typeof d=="function"){const w=d(e,a,i);o=$(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,h))o="";else if(f){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${h} for interpolating ${e}`),o="";else!$(o)&&!this.useRawValueToEscape&&(o=Qt(o));const j=m.safeValue(o);if(e=e.replace(a[0],j),f?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,a,o;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const f=c.split(new RegExp(`${d}[ ]*{`));let p=`{${f[1]}`;c=f[0],p=this.interpolate(p,o);const m=p.match(/'/g),h=p.match(/"/g);((m?.length??0)%2===0&&!h||h.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,j),`${c}${d}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!$(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(u!==-1&&(c=i[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),i[1]=i[1].slice(0,u)),a=t(l.call(this,i[1].trim(),o),o),a&&i[0]===e&&!$(a))return a;$(a)||(a=Qt(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),c.length&&(a=c.reduce((d,f)=>this.format(d,f,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const Or=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();t[d]||(t[d]=u),u==="false"&&(t[d]=!1),u==="true"&&(t[d]=!0),isNaN(u)||(t[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},rs=n=>{const e={};return(t,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let l=e[o];return l||(l=n(Ie(r),i),e[o]=l),l(t)}},Er=n=>(e,t,r)=>n(Ie(t),r)(e);class kr{constructor(e={}){this.logger=he.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?rs:Er;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return l=>o.format(l)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return l=>o.format(l)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return l=>o.format(l)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return l=>o.format(l,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return l=>o.format(l)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=rs(t)}format(e,t,r,i={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,c)=>{const{formatName:u,formatOptions:d}=Or(c);if(this.formats[u]){let f=l;try{const p=i?.formatParams?.[i.interpolationkey]||{},m=p.locale||p.lng||i.locale||i.lng||r;f=this.formats[u](l,m,{...d,...i,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const Ar=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Pr extends it{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=he.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const a={},o={},l={},c={};return e.forEach(u=>{let d=!0;t.forEach(f=>{const p=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,d=!1,o[p]===void 0&&(o[p]=!0),a[p]===void 0&&(a[p]=!0),c[f]===void 0&&(c[f]=!0)))}),d||(l[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const i=e.split("|"),a=i[0],o=i[1];t&&this.emit("failedLoading",a,o,t),!t&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{yr(c.loaded,[a],o),Ar(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(f=>{l[u][f]===void 0&&(l[u][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,a*2,o)},a);return}o(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,t,l)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();$(e)&&(e=this.languageUtils.toResolveHierarchy(e)),$(t)&&(t=[t]);const a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${t}loading namespace ${a} for language ${i} failed`,o),!o&&l&&this.logger.log(`${t}loaded namespace ${a} for language ${i}`,l),this.loaded(e,o,l)})}saveMissing(e,t,r,i,a,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,t,r,i,c):d=u(e,t,r,i),d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}else u(e,t,r,i,l,c)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const is=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),$(n[1])&&(e.defaultValue=n[1]),$(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),as=n=>($(n.ns)&&(n.ns=[n.ns]),$(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),$(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Ke=()=>{},Ir=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class _e extends it{constructor(e={},t){if(super(),this.options=as(e),this.services={},this.logger=he,this.modules={external:[]},Ir(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&($(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=is();this.options={...r,...this.options,...as(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?he.init(i(this.modules.logger),this.options):he.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=kr;const d=new es(this.options);this.store=new Jt(this.options.resources,this.options);const f=this.services;f.logger=he,f.resourceStore=this.store,f.languageUtils=d,f.pluralResolver=new Nr(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=i(u),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Tr(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Pr(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(m,...h)=>{this.emit(m,...h)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new et(this.services,this.options),this.translator.on("*",(m,...h)=>{this.emit(m,...h)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Ke),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=Ee(),c=()=>{const u=(d,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),t(d,f)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,t=Ke){let r=t;const i=$(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,t,r){const i=Ee();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Ke),this.services.backendConnector.reload(e,t,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Is.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Ee();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),t&&t(l,(...u)=>this.t(...u))},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=$(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes($(l)?[l]:l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,d=>{a(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,t,r){const i=(a,o,...l)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([a,o].concat(l)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(a)?d=a.map(f=>`${c.keyPrefix}${u}${f}`):d=c.keyPrefix?`${c.keyPrefix}${u}${a}`:a,this.t(d,c)};return $(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const l=t.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,t){const r=Ee();return this.options.ns?($(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Ee();$(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new es(is());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new _e(e,t)}cloneInstance(e={},t=Ke){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new _e(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,f)=>(d[f]={...c[u][f]},d),c[u]),c),{});a.store=new Jt(l,i),a.services.resourceStore=a.store}return a.translator=new et(a.services,i),a.translator.on("*",(l,...c)=>{a.emit(l,...c)}),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const G=_e.createInstance();G.createInstance=_e.createInstance;G.createInstance;G.dir;G.init;G.loadResources;G.reloadResources;G.use;G.changeLanguage;G.getFixedT;G.t;G.exists;G.setDefaultNamespace;G.hasLoadedNamespace;G.loadNamespaces;G.loadLanguages;var _r=function(e){return{type:"backend",init:function(r,i,a){},read:function(r,i,a){if(typeof e=="function"){if(e.length<3){try{var o=e(r,i);o&&typeof o.then=="function"?o.then(function(l){return a(null,l&&l.default||l)}).catch(a):a(null,o)}catch(l){a(l)}return}e(r,i,a);return}a(null,e&&e[r]&&e[r][i])}}};const Mr={en:{app:vs,common:ws}},wt="clarin",os=X.getInitialState().locale,$r=X.getInitialState().locales;function Fr(n,e){if(!n)return e;const t=typeof n=="string"?[n]:n;return[...t.map(i=>`${wt}.${i}`),...t]}const vt=["app","common"],Dr=Fr(vt);function yt(n){return typeof n=="string"||!Array.isArray(n)?[String(n)]:n}function Hr(n,e,t,r){if(t?.postProcessTryPrefixedNamespacesFirst!==void 0)return n;const i=yt(e),a=yt(t.ns||r.options.defaultNS||[]),o=r.resolve(i,t),c=(o?.res!==void 0?[...yt(t.ns||[]),o.usedNS]:a).map(d=>d.startsWith(wt)?d:`${wt}.${d}`),u=r.translate(i,{...t,ns:c,postProcessTryPrefixedNamespacesFirst:!0});return i.includes(u)?n:u}G.use(Kn).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:Hr}).use(_r((n,e)=>pr(Object.assign({"../locales/de/app.json":()=>ue(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>ue(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/textplus.app.json":()=>ue(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.d),[],import.meta.url),"../locales/en/clarin.app.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/clarin.common.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/common.json":()=>ue(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/querybuilder.json":()=>ue(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/textplus.app.json":()=>ue(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>ue(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${n}/${e}.json`,4))).init({lng:os,fallbackLng:os,supportedLngs:$r,ns:Dr,defaultNS:vt,fallbackNS:vt,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Mr,partialBundledLanguages:!0,react:{nsMode:"fallback"}});G.addResourceBundle("en","clarin.app",yn);G.addResourceBundle("en","clarin.common",jn);G.addResourceBundle("en","app",vs);G.addResourceBundle("en","common",ws);Object.assign(window,{i18n:G});function Vr(){const n=q.getState().appTitleHead,e=rt();return s.jsxs(s.Fragment,{children:[s.jsx(Me,{children:s.jsxs("title",{children:[n," – About"]})}),s.jsxs(ne,{children:[s.jsx("h1",{className:"h1",children:"About the Federated Content Search (FCS) Aggregator"}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:"People"}),s.jsx("p",{children:"The Aggregator was developed by:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Emanuel Dima"}),s.jsx("li",{children:"Erik Körner"}),s.jsx("li",{children:"Leif-Jöran Olsson"}),s.jsx("li",{children:"Yana Panchenko"}),s.jsx("li",{children:"Oliver Schonefeld"}),s.jsx("li",{children:"Dieter Van Uytvanck"})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:"Statistics"}),s.jsxs("p",{children:["View ",s.jsx(Je,{to:{pathname:"/stats",search:e},children:"endpoint statistics"})," to see details about scanned resources, performed searches, warnings and errors."]})]}),s.jsx("div",{children:s.jsx("h2",{className:"h2",children:"Privacy Policy"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:"Source Code"}),s.jsxs("p",{children:["The Aggregator source code and documentation are published on"," ",s.jsx("a",{href:"https://github.com/clarin-eric/fcs-sru-aggregator",children:"GitHub"})," and are made available under the"," ",s.jsx("a",{href:"https://github.com/clarin-eric/fcs-sru-aggregator/blob/master/LICENSE",children:"GPL 3.0 license"}),"."]}),s.jsx("p",{children:"The full license can be found in the source code repository and in the packaged sources and binaries."})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:"Technology Used"}),s.jsx("p",{children:"The Aggregator uses the following software components:"}),s.jsx("ul",{children:s.jsxs("li",{children:[s.jsx("a",{href:"https://www.dropwizard.io/",children:"Dropwizard"})," (",s.jsx("a",{href:"https://github.com/dropwizard/dropwizard/blob/release/4.0.x/LICENSE",children:"Apache License 2.0"}),")"]})})]}),s.jsx("div",{children:s.jsx("h2",{className:"h2",children:"Funding"})})]})]})}function Ur(){const{t:n}=nt(),e=q.getState().appTitleHead;return s.jsxs(s.Fragment,{children:[s.jsx(Me,{children:s.jsxs("title",{children:[e," – Help"]})}),s.jsxs(ne,{children:[s.jsx("h1",{className:"h1",children:"Help"}),s.jsx("h2",{className:"h2",children:"Performing a Federated Content Search in resources"}),s.jsx("p",{}),s.jsx("h2",{className:"h2",children:"Adjusting search criteria"}),s.jsx("p",{}),s.jsx("h2",{children:"More help"}),s.jsxs("p",{children:["More detailed information on using FCS Aggregator is available at the"," ",s.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),". If you still cannot find an answer to your question, or if want to send a feedback, you can write to the"," ",s.jsx("a",{title:"contact",href:n("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"}),"."]})]})]})}const Et=g.createContext({resources:[],languages:{},weblichtLanguages:[]});Et.displayName="AggregatorDataContext";function zr({resources:n,languages:e,weblichtLanguages:t,children:r}){const i={resources:n,languages:e,weblichtLanguages:t};return s.jsx(Et.Provider,{value:i,children:r})}function kt(){return g.useContext(Et)}const At=g.createContext(void 0);At.displayName="AxiosContext";function Ce(){const n=g.useContext(At);if(!n)throw new Error('No "axios" instance set, use AxiosProvider to set one');return n}function Br({axios:n,children:e}){return s.jsx(At.Provider,{value:n,children:e})}const Pt=g.createContext(void 0);Pt.displayName="SearchParamsContext";function It(){const n=g.useContext(Pt);if(!n)throw new Error('No "params" data set, use SearchParamsProvider to set one');return n}function qr({language:n,languageFilter:e,queryType:t,query:r,resourceIDs:i,numberOfResults:a,children:o}){const l={language:n,languageFilter:e,queryType:t,query:r,resourceIDs:i,numberOfResults:a};return s.jsx(Pt.Provider,{value:l,children:o})}function Kr(n,e=0){let t=3735928559^e,r=1103547991^e;for(let i=0,a;i<n.length;i++)a=n.charCodeAt(i),t=Math.imul(t^a,2654435761),r=Math.imul(r^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}window._paq=window._paq||[];function Qr({siteId:n,trackerUrl:e,enableLinkTracking:t=!0,domains:r=[],userId:i=void 0}){window._paq.push(["setTrackerUrl",e]),window._paq.push(["setSiteId",n]),i&&window._paq.push(["setUserId",i]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),t&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function Gr({srcUrl:n}){const e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.defer=!0,e.src=n,t&&t.parentNode&&t.parentNode.insertBefore(e,t)}function Wr(n){if(!n)return!1;let e=null;if(typeof n=="string")try{e=JSON.parse(n)}catch(u){return console.error("Error trying to parse tracking params!",u),!1}else typeof n=="object"&&(e=n);const t=e.siteId,r=e.trackerUrl,i=e.srcUrl,a=e.domains,o=e.userId?.toString();if(i===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(t===void 0||!Number.isInteger(t))return console.warn('No "siteId" configuration set for tracking!'),!1;const l={siteId:t,trackerUrl:r,domains:a};o&&(l.userId=Kr(o).toString());const c={srcUrl:i};return Qr(l),_s(document.location.href||window.location.href,document.title),Gr(c),!0}function _s(n,e,t){window._paq.push(["setDocumentTitle",e??document.title]),window._paq.push(["setCustomUrl",n]),t!==void 0&&window._paq.push(["setReferrerUrl",t]),window._paq.push(["trackPageView"])}function Ms(n,e=!1,t=!1){window._paq.push(["trackSiteSearch",n,e,t])}const Lt="byMeta",Yr="all",$s="resource",Jr="title-up",de="mul";function Ue(n,e=void 0){return n===de?"Any Language":e?.[n]||"Unknown Language"}function Xr(n){const e=X.getState().locale,t=a=>({...a,subResources:a.subResources.map(t)}),r=n.map(t),i=function(a,o){const l=U(a.institution,e)??"",c=U(o.institution,e)??"",u=l.localeCompare(c);if(u!==0)return u;const d=U(a.title,e)??"",f=U(o.title,e)??"";return d.toLowerCase().localeCompare(f.toLowerCase())};return Le(r,a=>{a.subResources.sort(i)}),r.sort(i),r}function Zr(n,e){const t=[],r=[],i=[];return Object.entries(e).forEach(([a,o])=>{o.forEach(l=>{let c=!1;Le(n,u=>{u.handle===l&&(c=!0,i.push(u))}),c||(console.warn("Handle not found in resources",l),r.push(l))})}),Le(i,a=>{t.push(a.id)}),{selected:t,unavailable:r}}function Le(n,e){const t=(r,i)=>{e(r,i)===!1||r.subResources.forEach(t)};n.forEach(t)}function pe(n){const e=[];return Le(n,t=>{e.push(t.id)}),e}function ei(n,e,t){const r=[],i=a=>Fs(a,i)||oi(a,e,t);return Le(n,a=>{i(a)&&r.push(a.id)}),r}function ti(n,e){const t=X.getState().locale,r=new Set;return Le(n,i=>{if(e.includes(i.id)){const a=U(i.institution,t)??"";r.add(a)}return!0}),Array.from(r)}const si=["en","eng","de","deu"];function ni(n){if(n===null)return null;if(typeof n=="string")return n;for(const t of si)if(Object.hasOwn(n,t))return n[t];const e=Object.getOwnPropertyNames(n);return e.length>0?n[e[0]]:null}function ri(n,e){return n===null?null:typeof n=="string"?n:e&&Object.hasOwn(n,e)?n[e]:null}function U(n,e){e===void 0&&(e=X.getState().locale);const t=ri(n,e);return t!==null?t:ni(n)}function at(n,e="en"){const t=typeof n.title=="string"||n.title===null?[e]:Object.getOwnPropertyNames(n.title),r=typeof n.description=="string"||n.description===null?[e]:Object.getOwnPropertyNames(n.description),i=typeof n.institution=="string"||n.institution===null?[e]:Object.getOwnPropertyNames(n.institution),a=[...t,...r,...i];return Array.from(new Set(a))}function ii(n,e){return!(e==="fcs"&&!n.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||e==="lex"&&!n.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function ai(n,e){return!!(e===de||n.languages&&n.languages.length===1&&n.languages[0]===e||n.languages&&n.languages.indexOf(e)>=0)}function Fs(n,e){if(!n.subResources||n.subResources.length===0)return!1;let t=!1;const r=i=>{if(e?.(i)===!0){t=!0;return}i.subResources.forEach(r)};return n.subResources.forEach(r),t}function oi(n,e,t){return!(!ii(n,e)||!ai(n,t))}const li={"title-up":(n,e)=>{const t=X.getState().locale,r=U(n.title,t)??"",i=U(e.title,t)??"";return r.localeCompare(i)},"title-down":(n,e)=>{const t=X.getState().locale,r=U(n.title,t)??"",i=U(e.title,t)??"";return-r.localeCompare(i)},"institution-up":(n,e)=>{const t=X.getState().locale,r=U(n.institution,t)??"",i=U(e.institution,t)??"",a=U(n.title,t)??"",o=U(e.title,t)??"",l=r.localeCompare(i);return l!==0?l:a.localeCompare(o)},"institution-down":(n,e)=>{const t=X.getState().locale,r=U(n.institution,t)??"",i=U(e.institution,t)??"",a=U(n.title,t)??"",o=U(e.title,t)??"",l=-r.localeCompare(i);return l!==0?l:a.localeCompare(o)}};function Ds(n,e){const[t,r]=g.useState(n);return g.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}function Rt(n,e,t=0,r=e){if(e===n&&e===r&&e.nodeType===Node.ELEMENT_NODE&&t===1)return e.nodeType,e.textContent?.length,e.textContent?.length||0;if(e===n||n===null)return t;const i=e.parentNode;if(i===null)return t;let a=0;const o=i.childNodes;for(let l=0;l<o.length;l++){const c=o[l];if(c===e)break;c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?a+=c.textContent?.length||0:console.warn("unknown node type",{container:n,node:e,offset:t,parent:i,i:l,child:c})}return Rt(n,i,a+t,r)}function Hs(n,e){const t=n.textContent?.length||0;if(t<e)return null;let r=0;const i=n.childNodes;for(let a=0;a<i.length;a++){const o=i[a];let l=0;if(o.nodeType===Node.TEXT_NODE||o.nodeType===Node.ELEMENT_NODE?l=o.textContent?.length||0:console.warn("unknown node type, skip",{container:n,offset:e,child:o}),!(l===0&&i.length!==1)&&(r+=l,r>=e)){const c=e-(r-l);return o.nodeType===Node.ELEMENT_NODE?Hs(o,c):{node:o,offset:c}}}return i.length,null}function Ct(n,e){if(!e)return null;const t=Rt(n,e.startContainer,e.startOffset);if(e.startContainer.nodeType===Node.TEXT_NODE&&e.endContainer===e.startContainer)return[t,t+(e.endOffset-e.startOffset)];const r=Rt(n,e.endContainer,e.endOffset);return[t,r]}function ci(n,e){if(!(document.activeElement===n))return null;const r=window.getSelection();if(!r)return null;const i=document.createRange(),a=Hs(n,e);if(a)try{i.setStart(a.node,a.offset),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}catch(o){console.error("Error trying to set cursor!",o,{container:n,offset:e,startRange:a})}}function ls(n){if(!(document.activeElement===n))return null;const t=window.getSelection();if(!t||t.rangeCount===0)return null;const r=t.getRangeAt(0),i=Ct(n,r);return i?i[0]:null}function ui(n){return n==="cql"?"fcs-cql":n==="fcs"?"fcs-fcsql":n==="lex"?"fcs-lexcql":"plain"}function Nt(n,e){const t=ui(e),r="match-braces rainbow-braces";let i=n;try{i=bn.highlight(n,t)}catch(o){console.warn("Error trying to highlight value",{value:n,error:o,language:t})}return`<pre><code class="language-${t} ${r}">${i}</code></pre>`}function ke(n){return n?(n=n.replace(/[\n\t]/g," "),n=n.replace(/&nbsp;|\u202F|\u00A0/g," "),n):""}const Vs=en.forwardRef(({value:n,onChange:e,onCursorChange:t,disabled:r,placeholder:i,queryType:a,delay:o=200,...l},c)=>{const u=g.useRef(null),d=g.useRef(null);g.useImperativeHandle(c,()=>d.current);const[f,p]=g.useState(ke(n)),[m,h]=g.useState(null),j=Ds(f,o),[w,L]=g.useState(j);g.useEffect(()=>{const R=Nt(j,a);if(L(R),d.current){const P=ls(d.current);h(P)}},[j,a]),g.useEffect(()=>{const R=ke(n);if(j!==R&&(p(R),L(Nt(R)),d.current)){const P=ls(d.current);h(P)}},[n,j]),g.useLayoutEffect(()=>{d.current&&m!==null&&ci(d.current,m)});function x(R){const P=R.target.innerText;u.current&&(u.current.value=P),p(P),e?.(P)}function T(R){R.stopPropagation(),R.preventDefault();const N=(R.clipboardData||window.clipboardData).getData("text");v(N)}function b(R){R.key==="Enter"?(R.stopPropagation(),R.preventDefault(),u.current&&u.current.form?.requestSubmit()):R.key==="Backspace"?(R.stopPropagation(),R.preventDefault(),H()):R.key==="Delete"?(R.stopPropagation(),R.preventDefault(),_()):R.ctrlKey&&R.key==="a"||h(null)}function C(R=!1){if(!d.current||!t)return;const P=d.current;if(!(document.activeElement===P))return;const S=window.getSelection();if(!S||S.rangeCount===0)return;const k=[];for(let y=0;y<S.rangeCount;y++){const A=S.getRangeAt(y),V=Ct(P,A);V&&k.push(V)}if(k.length===0)return;const[D,M]=k.pop();R?D===M&&(h(D),t?.(D)):t?.(D,D!==M?M:void 0)}function E(R){if(!d.current)return null;const P=d.current;if(!(document.activeElement===P))return null;const S=window.getSelection();if(!S||S.rangeCount===0)return null;const k=[];for(let A=0;A<S.rangeCount;A++){const V=S.getRangeAt(A),J=Ct(P,V);J&&k.push(J)}if(k.length===0)return null;k.sort();const D=k.map(([A,V])=>V-A).reduce((A,V)=>A+V,0),M=P.innerText,y=k.toReversed().reduce((A,[V,J])=>A.slice(0,V)+A.slice(J),M);if(R==="backspace"){if(D===0){const A=k.filter(([V,J])=>V===J).map(([,V])=>V).pop();if(A===0)return null;if(A!==void 0)return{value:y.slice(0,A-1)+y.slice(A),offset:A-1}}else{const A=k.map(([,V])=>V).pop();if(A!==void 0)return{value:y,offset:A-D}}return console.warn('invalid "backspace" process, abort',{container:P,selectionIndices:k,oldValue:M,newValueSpansRemoved:y,numDeleted:D}),null}else if(R==="delete"){if(D===0){const A=k.filter(([V,J])=>V===J).map(([,V])=>V).pop();if(A!==void 0)return{value:y.slice(0,A)+y.slice(A+1),offset:A}}else{const A=k.map(([,V])=>V).pop();if(A!==void 0)return{value:y,offset:A-D}}return console.warn('invalid "delete" process, abort',{container:P,selectionIndices:k,oldValue:M,newValueSpansRemoved:y,numDeleted:D}),null}else if(R==="paste"){if(D===0){const A=k.filter(([V,J])=>V===J).map(([V])=>V).shift();if(A!==void 0)return{value:y,offset:A}}else{const A=k.map(([V])=>V).shift();if(A!==void 0)return{value:y,offset:A}}return console.warn('invalid "paste" process, abort',{container:P,selectionIndices:k,oldValue:M,newValueSpansRemoved:y,numDeleted:D}),null}}function v(R){const P=E("paste");if(!P)return;const N=ke(R),{value:S,offset:k}=P,D=S.slice(0,k)+N+S.slice(k),M=k+R.length;p(D),h(M),u.current&&(u.current.value=D),e?.(D),t?.(M)}function H(){const R=E("backspace");if(!R)return;const{value:P,offset:N}=R,S=ke(P);p(S),h(N),u.current&&(u.current.value=S),e?.(S),t?.(N)}function _(){const R=E("delete");if(!R)return;const{value:P,offset:N}=R,S=ke(P);p(S),h(N),u.current&&(u.current.value=S),e?.(S),t?.(N)}return s.jsxs(s.Fragment,{children:[s.jsx("div",{role:"input",disabled:r,placeholder:i,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...l,onInput:x,onPaste:T,onKeyDown:b,onKeyUp:()=>C(),onClick:()=>C(!0),tabIndex:r?-1:l.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:w},ref:d}),i&&n===""&&s.jsx("span",{className:"input-placeholder-simulacrum",children:i}),s.jsx("input",{type:"hidden",ref:u})]})});Vs.displayName="ContentEditable";var oe=tn();function di({show:n,languages:e,resources:t,searchLanguage:r,searchLanguageFilter:i,onModalClose:a}){const[o,l]=g.useState(r||de),[c,u]=g.useState(i||Lt),[d,f]=g.useState(""),[p,m]=g.useState(!1),h=g.useMemo(()=>{const C=new Map;return t&&(t.forEach(E=>E.languages.forEach(v=>C.set(v,(C.get(v)??0)+1))),C.set(de,t.length)),C},[t]),j=oe.useFuzzySearchList({list:Object.entries(e??{}).toSorted(),queryText:d,getText:C=>[C[0],C[1]],mapResultItem:({item:C,score:E,matches:v})=>({item:C,matches:v,score:E})});if(!e)return null;const w=Math.floor((j.length+2)/3);function L(C){a({language:o,filter:c,action:C})}function x(){l(r||de),u(i||Lt)}function T(){m(C=>!C)}function b(C,E,v,H){const _=o===C;let R="d-block py-0 my-1 border-0";return _&&(R+=" fw-semibold selected"),v===void 0&&(v=[null,null]),s.jsxs(Q,{size:"sm",className:R,style:{color:`var(${_?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>l(C),"data-filter-score":H,children:[_&&s.jsx("span",{className:"selected-marker me-1",children:"✓"}),s.jsx(oe.Highlight,{ranges:v[1],text:E})," ",s.jsx("sup",{children:s.jsx(oe.Highlight,{ranges:v[0],text:C})}),p&&h.has(C)&&s.jsxs(s.Fragment,{children:[" (",h.get(C),")"]})]},C)}return s.jsxs(W,{show:n,onHide:()=>L("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:"Languages"})}),s.jsxs(W.Body,{className:"px-0",children:[s.jsxs(ne,{className:"px-4 pb-3 border-bottom",children:[s.jsxs(Y,{children:[s.jsx(F,{sm:!0}),s.jsx(F,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:b(de,Ue(de))}),s.jsxs(F,{sm:!0,children:[s.jsx(z.Control,{size:"sm",placeholder:"Filter languages ...",name:"languages-filter",value:d,onChange:C=>f(C.target.value)}),t&&s.jsx(z.Check,{name:"languages-show-count",id:"languages-show-count",checked:p,onChange:T,type:"checkbox",label:"Show number of resources per language",className:"mt-1"})]})]}),s.jsxs(Y,{children:[s.jsx(F,{sm:!0,children:j.slice(0,w).map(({item:[C,E],matches:v,score:H})=>b(C,E,v,H))}),s.jsx(F,{sm:!0,children:j.slice(w,2*w).map(({item:[C,E],matches:v,score:H})=>b(C,E,v,H))}),s.jsx(F,{sm:!0,children:j.slice(2*w).map(({item:[C,E],matches:v,score:H})=>b(C,E,v,H))})]})]}),s.jsx(z,{children:s.jsxs(ne,{className:"px-4 pt-3",children:[s.jsx(z.Check,{type:"radio",name:"filterOpts",value:"byMeta",id:"filterOpts-byMeta",checked:c==="byMeta",onChange:()=>u("byMeta"),label:"Use the resources' specified language to filter results"}),s.jsx(z.Check,{type:"radio",name:"filterOpts",value:"byGuess",id:"filterOpts-byGuess",checked:c==="byGuess",onChange:()=>u("byGuess"),label:"Filter results by using a language detector"}),s.jsx(z.Check,{type:"radio",name:"filterOpts",value:"byMetaAndGuess",id:"filterOpts-byMetaAndGuess",checked:c==="byMetaAndGuess",onChange:()=>u("byMetaAndGuess"),label:"First use the resources' specified language then also use a language detector"})]})})]}),s.jsxs(W.Footer,{children:[s.jsx(Q,{variant:"secondary",onClick:x,children:"Revert Selection"}),s.jsx(Q,{variant:"secondary",onClick:()=>L("abort"),children:"Abort"}),s.jsx(Q,{variant:"primary",onClick:()=>L("confirm"),children:"Confirm and Close"})]})]})}const _t=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],Ye=Object.fromEntries(["cql","fcs","lex"].map(n=>[n,_t.find(e=>e.id===n)])),cs=["fcs","lex"],hi=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],fi="cql",Qe=[10,20,50,100,200,250],je="info:srw/diagnostic/1/61",gi=[{queryType:"cql",query:"Elephant",description:"Query with single term"},{queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb'},{queryType:"lex",query:"apple",description:"Search for plain string"}];function pi({show:n,queryTypes:e,onModalClose:t}){const r=e&&e.length>0?e:["cql","fcs","lex"],i=gi.filter(c=>r.includes(c.queryType));if(i.length===0)return a("abort"),null;function a(c){t({query:void 0,queryType:void 0,action:c})}function o(c,u){t({query:c,queryType:u,action:"confirm"})}function l(c,u,d,f){return s.jsxs(Y,{children:[s.jsx(F,{md:"auto",className:"d-none d-md-block",children:f&&`${f}.`}),s.jsxs(F,{className:"d-flex flex-column",children:[d!==void 0&&s.jsx("div",{children:d}),s.jsx("div",{dangerouslySetInnerHTML:{__html:Nt(c,u)}})]}),s.jsx(F,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:s.jsx(Q,{size:"sm",onClick:()=>o(c,u),children:"Use Query"})})]},c)}return s.jsxs(W,{id:"search-query-suggestions-modal",show:n,onHide:()=>a("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:"Search Query Suggestions"})}),s.jsx(W.Body,{className:"px-0",children:s.jsx(ne,{fluid:!0,children:r.map(c=>{const u=i.filter(d=>d.queryType===c);return u.length===0?null:s.jsxs(g.Fragment,{children:[s.jsx(Y,{children:s.jsx(F,{children:s.jsx("h4",{className:"border-bottom pb-2",children:Ye[c]?.name??c.toUpperCase()})})}),u.map((d,f)=>l(d.query,d.queryType,d.description,f+1))]},c)})})}),s.jsx(W.Footer,{children:s.jsx(Q,{variant:"primary",onClick:()=>a("close"),children:"Close"})})]})}function Us({disabled:n,value:e,onChange:t,delay:r=300}){const[i,a]=g.useState(e??""),o=Ds(i,r);return g.useEffect(()=>{t(o)},[t,o]),s.jsx(z.Control,{type:"search",placeholder:"Search for ...",value:i,onChange:l=>a(l.target.value),disabled:n})}const ot=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,zs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`;function Mt({resource:n,selectedResourceIDs:e,highlighting:t,shouldBeShown:r,localeForInfos:i,onSelectClick:a,languageCodeToName:o}){const[l,c]=g.useState(!1),[u,d]=g.useState(!1);t===void 0&&(t=[null,null,null]);const f=e.includes(n.id),p=at(n),m=be(T=>T.locale),[h,j]=g.useState(m);if(g.useEffect(()=>{m&&j(m)},[m]),g.useEffect(()=>{i&&j(i)},[i]),typeof r=="function"&&!r(n))return null;if(r===!1)return null;function w(){l&&document.getSelection()?.type==="Range"||c(T=>!T)}function L(){a(n,!f)}function x(){d(T=>!T)}return s.jsxs(s.Fragment,{children:[s.jsxs(Y,{className:`p-2 m-1 ${l&&"border-bottom"}`,children:[s.jsx(F,{md:"auto",sm:1,onClick:L,children:s.jsx(z.Check,{id:`resource-selection-${n.id}`,"aria-label":`Checkbox for resource: ${n.title}`,children:s.jsx(z.Check.Input,{checked:f,onChange:()=>{}})})}),s.jsxs(F,{md:8,sm:11,className:`mb-sm-2 ${l?"":"text-truncate"}`,onClick:w,children:[s.jsxs("h4",{className:`h5 ${l?"":"text-truncate"}`,children:[s.jsx(oe.Highlight,{text:U(n.title,h)??"",ranges:t[0]})," ",n.landingPage&&s.jsx("small",{children:s.jsxs("a",{href:n.landingPage,className:"matomo_link",target:"_blank",children:["More information ",s.jsx("i",{dangerouslySetInnerHTML:{__html:zs}})]})})]}),s.jsx("p",{className:`mb-0 ${l?"":"text-truncate"}`,children:U(n.description,h)&&s.jsx(oe.Highlight,{text:U(n.description,h)??"",ranges:t[2]})})]}),s.jsxs(F,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${l?"":" text-truncate"}`,onClick:w,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ot}})," ",s.jsx(oe.Highlight,{text:U(n.institution,h)??"",ranges:t[1]}),s.jsx("br",{}),s.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})," ",n.languages.map(o).sort().join(", "),l&&p.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx(st,{type:"radio",name:`resources-${n.id}-info-languages`,defaultValue:h,onChange:T=>j(T),onClick:T=>T.stopPropagation(),className:"mt-2",children:p.toSorted().map(T=>s.jsx(Fe,{variant:"outline-secondary",size:"sm",id:`resources-${n.id}-info-languages-${T}`,value:T,type:"radio",children:T},T))})]})]}),n.subResources.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-100"}),s.jsx(F,{md:"auto",sm:1,style:{width:"2.8rem"}}),s.jsx(F,{md:{span:8,offset:0},sm:{span:11,offset:1},children:s.jsxs(Q,{variant:"link",size:"sm",className:"ps-0",onClick:x,children:[u?"Collapse":"Expand"," (",n.subResources.length," ","subresources)"]})})]})]}),u&&s.jsx(se,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:n.subResources.map(T=>s.jsx(Mt,{resource:T,selectedResourceIDs:e,shouldBeShown:r,onSelectClick:a,languageCodeToName:o},T.id))})]})}function us({title:n,resources:e,selectedResourceIDs:t,expanded:r,shouldBeShown:i,localeForInfos:a,onSelectClick:o,onExpandToggleClick:l,onSelectAllClick:c,onDeselectAllClick:u,languageCodeToName:d}){const[f,p]=g.useState(r);g.useEffect(()=>{p(r)},[r]);function m(){p(j=>!j),l(!f)}function h(){const j=pe(e).length,w=e.length,L=pe(e).filter(x=>t.includes(x)).length;return s.jsxs(s.Fragment,{children:[w," ",j!==w&&s.jsxs(s.Fragment,{children:["(+ ",j-w," nested)"]})," ","Resource",j!==1?"s":"",L!==j&&s.jsxs(s.Fragment,{children:[", ",L," Resource",L!==1?"s":""," selected"]})]})}return s.jsxs(ne,{className:"border-bottom pb-2 mb-4 px-0",children:[s.jsxs(Y,{className:"px-3",children:[s.jsx(F,{md:9,sm:12,children:s.jsx("h3",{children:n})}),s.jsxs(F,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:[s.jsxs(Q,{size:"sm",variant:"secondary",onClick:m,"aria-expanded":f,children:[f?"Hide":"Show"," Resources"]}),s.jsx(Q,{size:"sm",onClick:()=>c(e),children:"Select All"}),s.jsx(Q,{size:"sm",onClick:()=>u(e),children:"Deselect All"})]})]}),s.jsx(Y,{className:"px-3",children:s.jsx(F,{children:h()})}),s.jsx(bs,{in:f,children:s.jsx(ne,{children:e.map(j=>s.jsx(Mt,{resource:j,selectedResourceIDs:t,shouldBeShown:i,onSelectClick:o,languageCodeToName:d,localeForInfos:a},j.id))})})]})}function mi({show:n,showGrouping:e,resources:t,languages:r,availableResources:i,selectedResources:a,onModalClose:o}){const l=be(O=>O.locale),[c,u]=g.useState(l);g.useEffect(()=>{l&&u(l)},[l]);const[d,f]=g.useState(a||i),[p,m]=g.useState(Yr),[h,j]=g.useState($s),[w,L]=g.useState(Jr),[x,T]=g.useState(""),[b,C]=g.useState({}),[E,v]=g.useState({});g.useEffect(()=>{e&&j(e)},[n,e]),g.useEffect(()=>f(a),[a]);const H=t.filter(O=>i.includes(O.id)).toSorted(li[w]),R=H.map(O=>at(O)).flat().reduce((O,K)=>O.set(K,(O.get(K)??0)+1),new Map),P=oe.useFuzzySearchList({list:H,queryText:h==="resource"?x:"",getText:O=>[U(O.title,c),U(O.institution,c),U(O.description,c)],mapResultItem:({item:O,score:K,matches:ee})=>({item:O,matches:ee,score:K})});if(g.useMemo(()=>{const O={},K={};t.forEach(ee=>{const le=U(ee.institution,c)??"";Object.getOwnPropertyNames(O).includes(le)||(O[le]={expanded:!0,resources:[]}),O[le].resources.push(ee),ee.languages.forEach(Te=>{Object.getOwnPropertyNames(K).includes(Te)||(K[Te]={expanded:!0,resources:[]}),K[Te].resources.push(ee)})}),C(O),v(K)},[t,c]),!t)return null;const N={total:pe(t).length,totalRoot:t.length,available:i.length,selected:d.length,visible:pe(P.map(O=>O.item)).length,visibleRoot:P.length};function S(O){return Ue(O,r)}function k(O,K){const ee=d.filter(le=>!O.includes(le));f(K?[...ee,...O]:ee)}function D(O){o({resourceIDs:d,action:O})}function M(O){m(O.target.value)}function y(O){j(O.target.value)}function A(O){L(O.target.value)}function V(){f(i)}function J(){f([])}function Z(){f(P.map(O=>O.item.id))}function te(O,K){k(pe([O]),K)}function ie(O){k(pe(O),!0)}function ge(O){k(pe(O),!1)}function Ne(O){return!(!i.includes(O.id)||p==="selected"&&!d.includes(O.id)&&!Fs(O,K=>d.includes(K.id)))}function ct(){return h==="institution"?Object.entries(b).toSorted().map(([O,{expanded:K,resources:ee}])=>s.jsx(us,{title:s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ot}})," ",O]}),resources:ee,selectedResourceIDs:d,expanded:K,shouldBeShown:Ne,onSelectAllClick:ie,onExpandToggleClick:le=>{C({...b,[O]:{...b[O],expanded:le}})},onDeselectAllClick:ge,onSelectClick:te,languageCodeToName:S,localeForInfos:c},O)):h==="language"?Object.entries(E).toSorted().map(([O,{expanded:K,resources:ee}])=>s.jsx(us,{title:s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}})," ",S(O)," [",O,"]"]}),resources:ee,selectedResourceIDs:d,expanded:K,shouldBeShown:Ne,onSelectAllClick:ie,onExpandToggleClick:le=>E[O].expanded=le,onDeselectAllClick:ge,onSelectClick:te,languageCodeToName:S,localeForInfos:c},O)):P.map(({item:O,matches:K})=>s.jsx(Mt,{resource:O,selectedResourceIDs:d,highlighting:K,shouldBeShown:Ne,onSelectClick:te,languageCodeToName:S,localeForInfos:c},O.id))}return s.jsxs(W,{id:"resource-selection-modal",show:n,onHide:()=>D("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:"Resources"})}),s.jsxs(W.Body,{className:"px-0",children:[s.jsx(z,{className:"px-3 pb-3 border-bottom",onSubmit:O=>O.preventDefault(),children:s.jsxs(ne,{children:[s.jsxs(Y,{className:"d-sm-flex row-gap-2 justify-content-around",children:[s.jsx(F,{md:2,sm:6,children:s.jsx(me,{label:"View",controlId:"resource-view-options-visibility",children:s.jsxs(z.Select,{value:p,onChange:M,children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"selected",children:"Selected only"})]})})}),s.jsx(F,{md:2,sm:6,children:s.jsx(me,{label:"Group by",controlId:"resource-view-options-grouping",children:s.jsxs(z.Select,{value:h,onChange:y,children:[s.jsx("option",{value:"resource",children:"(Resource)"}),s.jsx("option",{value:"institution",children:"Institution"}),s.jsx("option",{value:"language",children:"Language"})]})})}),s.jsx(F,{md:2,sm:6,children:s.jsx(me,{label:"Sort by",controlId:"resource-view-options-sorting",children:s.jsxs(z.Select,{value:w,onChange:A,disabled:h!=="resource"||x.trim()!=="",children:[s.jsx("option",{value:"title-up",children:"Title (up)"}),s.jsx("option",{value:"title-down",children:"Title (down)"}),s.jsx("option",{value:"institution-up",children:"Institution (up)"}),s.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),s.jsx(F,{md:3,sm:12,children:s.jsx(me,{label:"Resource filter query",controlId:"resource-view-options-filter",children:s.jsx(Us,{disabled:h!=="resource",value:x,onChange:O=>T(O)})})}),s.jsxs(F,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[s.jsx(Q,{onClick:V,children:"Select all"}),s.jsx(Q,{onClick:Z,disabled:p!=="all"||x.trim()==="",children:"Select visible"}),s.jsx(Q,{onClick:J,children:"Deselect all"})]})]}),R.size>0&&s.jsxs(z.Group,{as:Y,controlId:"resource-info-language",className:"mt-2",children:[s.jsx(z.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:"Change language of resource information:"}),s.jsx(F,{sm:"auto",children:s.jsx(st,{type:"radio",name:"resource-info-languages",defaultValue:c,onChange:O=>u(O),children:Array.from(R.entries()).toSorted().map(([O,K])=>s.jsx(Fe,{size:"sm",id:`resource-info-languages-${O}`,value:O,variant:"secondary",title:`Found ${K} resources with information fields in ${O} language`,children:O},O))})})]})]})}),s.jsxs("p",{className:"m-4 mb-0",children:[N.selected," / ",N.visible," ",N.available!==N.visible&&s.jsxs(s.Fragment,{children:["(",N.available,")"]})," ","resources selected."]}),s.jsx(ne,{className:"px-3 pt-3",children:ct()})]}),s.jsx(W.Footer,{children:s.jsx(Q,{variant:"primary",onClick:()=>D("confirm"),children:"Confirm and Close"})})]})}function xi(){const[n,e]=g.useState(!1);return[n,()=>{n!==!0&&e(!0)}]}const yi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,Ge=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,ji=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,bi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`,Si=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,wi=g.lazy(()=>ue(()=>import("./fcs-sru-aggregator-ui-query-builder-0.0.0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function ds(n,e=""){const t=n.get("query");return t||e}function hs(n,e="cql"){const t=n.get("queryType");if(t){if(_t.find(r=>r.id===t)!==void 0)return t;console.warn("Found unsupported queryType in search params",t)}return e}function vi({resources:n,languages:e,onSearch:t,availableResources:r=null,selectedResources:i=null,hasSearch:a=!1,disabled:o=!1}){const[l,c]=tt(),[u,d]=g.useState(!1),[f,p]=g.useState($s),[m,h]=g.useState(!1),[j,w]=g.useState(!1),[L,x]=g.useState(!1),[T,b]=xi(),[C,E]=g.useState(de),[v,H]=g.useState(Lt),[_,R]=g.useState(hs(l,fi)),[P,N]=g.useState(r??[]),[S,k]=g.useState(i??[]),[D,M]=g.useState(Qe[0]),[y,A]=g.useState(ds(l,"")),[V]=g.useState(null),[J,Z]=g.useState(!1);g.useEffect(()=>{k(i??[])},[i]);const te=g.useCallback(I=>{const B=ei(I,_,v==="byGuess"?de:C);return r&&r.length>0?B.filter(ce=>r.includes(ce)):B},[_,C,v,r]);g.useEffect(()=>{const I=te(n);N(I),k(B=>B.filter(ce=>I.includes(ce)))},[n,te]);const ie=g.useCallback(()=>{const I={language:C,languageFilter:v,queryType:_,query:y,resourceIDs:S??[],numberOfResults:D};I.query!==""&&I.resourceIDs.length!==0&&t(I)},[C,v,D,t,y,_,S]);g.useEffect(()=>{if(l&&(A(B=>ds(l,B)),R(B=>hs(l,B)),!l.get("x-aggregation-context"))){const B=l.get("mode");B&&(B==="search"&&ie(),c(ce=>(ce.delete("mode"),ce)))}},[l,c,ie]),g.useEffect(()=>c(I=>(I.set("query",y),I)),[y,c]),g.useEffect(()=>c(I=>(I.set("queryType",_),I)),[_,c]);const ge=ti(n,S??[]).length,Ne=n.find(I=>I.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,ct=n.find(I=>I.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,O=cs.includes(_);function K(I){I&&R(I)}function ee(I){let B=Number.parseInt(I.target.value);B<10&&(B=10),B>250&&(B=250),Qe.includes(B)||console.warn("Invalid number of results?!",{valid:Qe,value:B}),M(B)}function le({language:I,filter:B,action:ce}){h(!1),ce!=="abort"&&(E(I),H(B))}function Te({resourceIDs:I,action:B}){d(!1),B!=="abort"&&k(I)}function Ws({query:I,queryType:B,action:ce}){w(!1),ce!=="abort"&&ce!=="close"&&(!I||!B||(R(B),A(I)))}function Ys({query:I,action:B}){x(!1),B!=="abort"&&B!=="close"&&A(I)}function $t(I){A(I)}function Js(I){I.preventDefault(),ie()}function Xs(){const I=(S??[]).length;return I===1?"1 selected resource":n.length===I||P.length===I?`All available resources (${I})`:`${I} selected resources`}return s.jsxs("search",{id:"fcs-query",children:[s.jsxs(z,{noValidate:!0,onSubmit:Js,children:[s.jsxs(mn,{size:a?void 0:"lg",hasValidation:!0,children:[s.jsx(Q,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":"Open modal with suggestions for search queries",onClick:()=>w(!0),children:s.jsx("i",{dangerouslySetInnerHTML:{__html:yi},"aria-hidden":"true"})}),s.jsx(z.Control,{placeholder:"Elephant","aria-label":"search query input","aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:o,"aria-disabled":o,value:y,isInvalid:!!V,...J?{as:Vs,queryType:_,onChange:$t}:{onChange:I=>$t(I.target.value)}}),O&&s.jsx(Q,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":"Open modal to use the visual query builder to construct a search query",className:"border-end-0 d-none d-md-block",onClick:()=>{b(),x(!0)},children:s.jsx("i",{dangerouslySetInnerHTML:{__html:bi},"aria-hidden":"true"})}),s.jsx(Fe,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:J,onChange:()=>Z(I=>!I),variant:"outline-secondary","aria-label":"Enable enhanced visual input support with syntax highlighting",className:"d-flex align-items-center border-end-0",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:ji},"aria-hidden":"true"})}),s.jsxs(Q,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:o||y.trim().length===0,"aria-disabled":o,"aria-label":"Start the search",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Si},"aria-hidden":"true",className:"d-inline d-md-none"}),s.jsx("span",{className:"d-none d-md-inline",children:"Search"})]}),s.jsx(z.Control.Feedback,{type:"invalid",children:V?.msg})]}),s.jsxs("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:["Perform a"," ",s.jsxs(xe,{className:"d-inline-block",onSelect:K,"aria-disabled":o,"aria-label":"Search query type",children:[s.jsxs(xe.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:o,"aria-disabled":o,style:Ye[_]?{"--color":Ye[_].color}:{},children:[Ye[_]?.searchLabel||"???"," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})]}),s.jsx(xe.Menu,{children:_t.filter(I=>I.id==="cql"||I.id==="fcs"&&Ne||I.id==="lex"&&ct).map(I=>s.jsx(xe.Item,{as:"button",eventKey:I.id,onClick:B=>B.preventDefault(),style:{"--color":I.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:I.name},I.id))})]})," ","in"," ",s.jsxs(Q,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{p("resource"),d(!0)},children:[Xs()," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})]})," ","from"," ",s.jsxs(Q,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{p("institution"),d(!0)},children:[ge," Institution",ge!==1?"s":""," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})]})," ","in"," ",s.jsxs(Q,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>h(!0),disabled:o,"aria-disabled":o,children:[Ue(C,e??{})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})]})," ","with up to"," ",s.jsx(z.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:ee,value:D,"aria-label":"Number of search results per endpoint",disabled:o,"aria-disabled":o,children:Qe.map(I=>s.jsx("option",{value:I,children:I},I))})," ","results per endpoint."]})]}),s.jsx(di,{languages:e,resources:n,searchLanguage:C,show:m,onModalClose:le}),s.jsx(mi,{resources:n,languages:e,availableResources:P,selectedResources:S??[],show:u,showGrouping:f,onModalClose:Te}),s.jsx(pi,{queryTypes:[_],show:j,onModalClose:Ws}),cs.includes(_)&&T&&s.jsx(g.Suspense,{fallback:s.jsx(s.Fragment,{children:"Trying to load Query Builder extension ..."}),children:s.jsx(wi,{query:y,queryType:_,resources:n,selectedResources:S,show:L,onModalClose:Ys})})]})}const Li=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`;function Ri({searchId:n,resourceId:e,numberOfResults:t,pollDelay:r=1500}){const i=Ce(),a=ms(),[o,l]=g.useState(!1),{isPending:c,mutate:u,reset:d}=xs({mutationFn:Zn.bind(null,i,n,{resourceId:e,numberOfResults:t}),mutationKey:["search-result-load-more",n,e],onSuccess:async x=>{x!==void 0&&n!==x&&console.warn("SearchIDs should be the same?!",{searchId:n,searchIdNewButSame:x,resourceId:e}),await a.invalidateQueries({queryKey:["search-results",n,e]}),l(!0)}});r??=1500;const{data:f,isLoading:p,isFetching:m}=$e({queryKey:["search-results",n,e],queryFn:tr.bind(null,i,n,e),enabled:o,refetchInterval(x){return x.state.data&&x.state.data.inProgress?r:!1}}),h=c||p||m,j=!!f&&!f.inProgress,w=h||o;o&&j&&(o&&l(!1),a.invalidateQueries({queryKey:["search-result-details",n,e]}));async function L(){d(),u()}return s.jsx(Q,{className:"more-results-button",disabled:w,onClick:L,children:w?s.jsx(Ss,{animation:"border",className:"d-block"}):s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Li}})," Load more results"]})})}const lt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`;function Bs({data:n}){const e=g.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs(Tt,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Left Context"}),s.jsx("th",{scope:"col",children:"Hit"}),s.jsx("th",{scope:"col",children:"Right Context"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:lt}})})," ",t.pid&&s.jsx(Re,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(De,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Se,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.left}),s.jsx("td",{children:t.keyword&&s.jsx("mark",{children:s.jsx("strong",{children:t.keyword})})}),s.jsx("td",{children:t.right})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function qs({data:n}){const e=g.useRef(null);return s.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[n.lexEntries.map((t,r)=>s.jsx(se,{className:"flex-grow-1",children:s.jsxs(se.Body,{children:[s.jsx(se.Title,{children:t.fields.filter(i=>i.type==="lemma").map(i=>i.values).flat(1).map(i=>s.jsx("span",{children:i.value}))}),s.jsxs(ut,{variant:"flush",children:[(t.lang||t.langUri)&&s.jsxs(ut.Item,{children:[s.jsx("strong",{children:"lang"}),": ",t.lang," ",t.langUri]}),t.fields.filter(i=>i.type!=="lemma").map(i=>s.jsxs(ut.Item,{children:[s.jsx("strong",{children:i.type}),":",i.values.map((a,o)=>s.jsx("span",{className:"ms-2 lex-value",children:a.value},o))]},i.type))]}),s.jsx(se.Link,{children:t.reference&&s.jsxs("a",{href:t.reference,className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:lt}})," Original results ..."]})}),s.jsx(se.Link,{children:t.pid&&s.jsx(Re,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(De,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Se,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${t.pid??t.reference??n.resource.id}-${r}`)),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Ks({data:n}){const e=g.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs(Tt,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Result with Hit"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:lt}})})," ",t.pid&&s.jsx(Re,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(De,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Se,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.fragments.map((i,a)=>i.hit&&!i.hitKind?s.jsx("mark",{children:s.jsx("strong",{children:i.text})},a):i.hit&&i.hitKind?s.jsx("span",{className:`lex-hitkind-${i.hitKind}`,title:`Annotated as "${i.hitKind.split("-").slice(1).join("-")}"`,children:i.text},a):s.jsx("span",{children:i.text},a))})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Qs({data:n}){const e=g.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs(Tt,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Result with Hit"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:lt}})})," ",t.pid&&s.jsx(Re,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(De,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Se,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.fragments.map((i,a)=>i.hit&&!i.hitKind?s.jsx("mark",{children:s.jsx("strong",{children:i.text})},a):s.jsx("span",{children:i.text},a))})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}const Ci=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,Ni=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,Gs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`;function Ti({show:n,searchId:e,resourceId:t,result:r,viewMode:i,showDiagnostics:a,onModalClose:o}){const l=Ce(),c=be(S=>S.locale),{languages:u,weblichtLanguages:d}=kt(),{numberOfResults:f,queryType:p,language:m,languageFilter:h}=It(),[j,w]=g.useState(c);g.useEffect(()=>{c&&w(c)},[c]);const[L,x]=g.useState(a);g.useEffect(()=>x(a),[a]);const[T,b]=g.useState(i);g.useEffect(()=>b(i),[i]);const C=at(r.resource),E=r.exception||r.diagnostics?.filter(S=>S.uri!==je).length>0;function v(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.kwics.length,!0)}let H=null,_=!1;if(!d.includes(m)){if(m===de)if(r.resource.languages&&r.resource.languages.length===1)H=r.resource.languages[0];else{const S=[...new Set(r.kwics.map(k=>k.language).filter(k=>k!==null))];S.length===1&&(H=S[0])}H||(console.warn("Cannot use WebLicht: unsupported language",{language:m,languageFilter:h}),_=!0)}function R(S){b(S.target.value)}function P(){return r?T==="kwic"&&(p!=="lex"||!r.isLexHits)?s.jsx(Bs,{data:r}):T==="lexical-entry"?s.jsx(qs,{data:r}):p==="lex"&&r.isLexHits?s.jsx(Ks,{data:r}):s.jsx(Qs,{data:r}):null}function N(){return s.jsxs(s.Fragment,{children:["Showing ",s.jsx("strong",{children:r.kwics.length}),v()?s.jsxs(s.Fragment,{children:[" / ",s.jsx("strong",{children:r.numberOfRecords})]}):""," ","results."]})}return s.jsxs(W,{show:n,onHide:()=>o(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:U(r.resource.title,j)})}),s.jsxs(W.Body,{className:"resource-info",children:[s.jsxs("dl",{className:"mb-0","aria-label":"Resource information",children:[s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ot}}),s.jsx("span",{children:" Institution"})]}),s.jsx("dd",{className:"mb-0",children:U(r.resource.institution,j)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Gs}}),s.jsx("span",{children:" Description"})]}),U(r.resource.description,j)&&s.jsxs(s.Fragment,{children:[s.jsx("dd",{className:"mb-0",children:U(r.resource.description,j)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}}),s.jsx("span",{children:" Languages"})]})]}),s.jsx("dd",{className:"mb-0",children:r.resource.languages.map(u?S=>Ue(S,u):S=>S).toSorted().join(", ")}),C&&C.length>1&&s.jsx(st,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:j,onChange:S=>w(S),className:"mt-2 mb-3",children:C.toSorted().map(S=>s.jsx(Fe,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${S}`,value:S,children:S},S))}),s.jsx("dt",{children:"Persistent Identifier"}),s.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&s.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:zs}})," More Information ..."]}),s.jsx("hr",{}),s.jsxs(Y,{className:"row-gap-2",children:[s.jsx(F,{lg:"auto",md:3,sm:6,children:s.jsx(me,{label:"View mode",controlId:"results-view-mode",children:s.jsxs(z.Select,{value:T,onChange:R,children:[s.jsx("option",{value:"plain",children:"Plain"}),(p!=="lex"||!r.isLexHits)&&s.jsx("option",{value:"kwic",children:"Keyword in Context"}),p==="fcs"&&s.jsx("option",{value:"annotation-layers",children:"Annotation Layers"}),p==="lex"&&s.jsx("option",{value:"lexical-entry",children:"Dictionary"})]})})}),s.jsx(F,{lg:3,md:3,sm:6,className:"align-content-center",children:s.jsx(z.Check,{disabled:!E,checked:L,onChange:()=>x(S=>!S),id:"results-modal-view-warnings-errors",label:"Show warning and error messages"})}),s.jsxs(F,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[s.jsxs(xe,{children:[s.jsxs(xe.Toggle,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ci}})," Download"]}),s.jsx(xe.Menu,{children:hi.map(({id:S,label:k})=>s.jsxs(xe.Item,{href:nr(l,e,t,S,m,h),className:"matomo_download",children:["As ",s.jsx("strong",{children:k})," file"]},S))})]}),s.jsxs(Q,{disabled:_,"aria-disabled":_,href:rr(l,e,t,H,m,h),className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ni}})," Send to Weblicht"]})]})]}),s.jsx("hr",{}),s.jsx("p",{children:N()}),P()]}),L&&E&&s.jsxs(W.Body,{className:"border-top",children:[r.exception&&s.jsxs(re,{variant:"danger","aria-label":"Error information",children:[s.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[s.jsx("span",{className:"text-uppercase",children:"Exception:"})," ",s.jsx("span",{"aria-label":"Error message",children:r.exception.message})]}),r.exception.cause&&s.jsxs("p",{className:"mb-0 small",children:["Cause: ",r.exception.cause]}),r.exception.klass&&s.jsxs("p",{className:"mb-0 small",children:["Caused by: ",s.jsx("code",{children:r.exception.klass})]})]}),r.diagnostics.filter(S=>S.uri!==je).map(S=>s.jsxs(re,{variant:"warning",children:[s.jsx(re.Heading,{style:{fontSize:"1rem"},children:S.message}),S.diagnostic&&s.jsxs("p",{className:"mb-0 small",children:["Details: ",S.diagnostic]}),s.jsxs("p",{className:"mb-0 small",children:["Diagnostic type: ",s.jsx("code",{children:S.uri})]})]},`${S.uri}-${S.message}-${S.diagnostic}`))]}),v()&&s.jsx(W.Footer,{className:"justify-content-center border-top py-2",children:s.jsx(Ri,{searchId:e,resourceId:t,numberOfResults:f})})]})}const Oi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`;function Ei({searchId:n,resourceId:e,resultInfo:t,viewMode:r,showResourceDetails:i,showDiagnostics:a}){const o=Ce(),l=be(N=>N.locale),{languages:c}=kt(),{queryType:u}=It(),[d,f]=g.useState(l);g.useEffect(()=>{l&&f(l)},[l]);const p=g.useId(),[m,h]=g.useState(!0),[j,w]=g.useState(!1),L=t.inProgress,x=t.numberOfRecordsLoaded>0,T=t.exception||t.diagnostics?.filter(N=>N.uri!==je).length>0,{data:b,isLoading:C,isError:E}=$e({queryKey:["search-result-details",n,e],queryFn:sr.bind(null,o,n,e),enabled:!L}),v=b?at(b.resource):[];if(L||!x&&(a&&!T||!a)||!b)return null;function H(){w(!0)}function _(){w(!1)}function R(){return b?b.numberOfRecords===-1?b.kwics.length:b.numberOfRecords===b.kwics.length&&b.nextRecordPosition===-1?`${b.kwics.length} / ${b.numberOfRecords}?`:`${b.kwics.length} / ${b.numberOfRecords}`:null}function P(){return b?r==="kwic"&&(u!=="lex"||!b.isLexHits)?s.jsx(Bs,{data:b}):r==="lexical-entry"?s.jsx(qs,{data:b}):u==="lex"&&b.isLexHits?s.jsx(Ks,{data:b}):s.jsx(Qs,{data:b}):null}return s.jsxs(s.Fragment,{children:[s.jsxs(se,{className:"my-1 resource-search-result",role:"group","aria-label":`Results and details for resource ${b.resource.title}`,children:[s.jsxs(se.Header,{className:"d-flex accordion",children:[s.jsxs("button",{type:"button",onClick:()=>h(N=>!N),"aria-controls":p,"aria-expanded":m,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${m?"":"collapsed"}`,children:[s.jsx(Se,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":"Number of results (total amount, or currently loaded amount with total available)",children:R()}),s.jsx("span",{"aria-label":"Resource title",className:"user-select-text",children:U(b.resource.title,d)}),s.jsx("small",{className:"text-muted user-select-text","aria-label":"Institution name",children:U(b.resource.institution,d)})]}),s.jsx("div",{className:"d-inline-block ms-auto",children:s.jsxs(Q,{size:"sm",onClick:H,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Oi}})," View"]})})]}),s.jsx(bs,{in:m,children:s.jsxs("div",{id:p,children:[i&&s.jsxs(se.Body,{className:"border-bottom resource-info",children:[s.jsxs("dl",{className:"mb-0","aria-label":"Resource information",children:[s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ot}}),s.jsx("span",{children:" Institution"})]}),s.jsx("dd",{className:"mb-0",children:U(b.resource.institution,d)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Gs}}),s.jsx("span",{children:" Description"})]}),U(b.resource.description,d)&&s.jsxs(s.Fragment,{children:[s.jsx("dd",{className:"mb-0",children:U(b.resource.description,d)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ve}}),s.jsx("span",{children:" Languages"})]})]}),s.jsx("dd",{className:"mb-0",children:b.resource.languages.map(c?N=>Ue(N,c):N=>N).toSorted().join(", ")})]}),v&&v.length>1&&s.jsx(st,{type:"radio",name:`${b.resource.id}-result-info-languages`,defaultValue:d,onChange:N=>f(N),className:"mt-2",children:v.toSorted().map(N=>s.jsx(Fe,{variant:"outline-secondary",size:"sm",id:`${b.resource.id}-result-info-languages-${N}`,value:N,children:N},N))})]}),x&&s.jsx(se.Body,{children:P()}),a&&T&&s.jsxs(se.Body,{className:x?"border-top":"",children:[b.exception&&s.jsxs(re,{variant:"danger","aria-label":"Error information",children:[s.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[s.jsx("span",{className:"text-uppercase",children:"Exception:"})," ",s.jsx("span",{"aria-label":"Error message",children:b.exception.message})]}),b.exception.cause&&s.jsxs("p",{className:"mb-0 small",children:["Cause: ",b.exception.cause]}),b.exception.klass&&s.jsxs("p",{className:"mb-0 small",children:["Caused by: ",s.jsx("code",{children:b.exception.klass})]})]}),b.diagnostics.filter(N=>N.uri!==je).map(N=>s.jsxs(re,{variant:"warning",children:[s.jsx(re.Heading,{style:{fontSize:"1rem"},children:N.message}),N.diagnostic&&s.jsxs("p",{className:"mb-0 small",children:["Details: ",N.diagnostic]}),s.jsxs("p",{className:"mb-0 small",children:["Diagnostic type: ",s.jsx("code",{children:N.uri})]})]},`${N.uri}-${N.message}-${N.diagnostic}`))]})]})})]}),s.jsx(Ti,{show:j,searchId:n,resourceId:e,result:b,viewMode:r,showDiagnostics:a,onModalClose:_})]})}const ki="plain",Ai="lexical-entry",Pi="default",Ii={default:()=>()=>0,"title-up":n=>(e,t)=>{const r=X.getState().locale,i=U(n.get(e.id)?.title??null,r)??"",a=U(n.get(t.id)?.title??null,r)??"";return i.localeCompare(a)},"title-down":n=>(e,t)=>{const r=X.getState().locale,i=U(n.get(e.id)?.title??null,r)??"",a=U(n.get(t.id)?.title??null,r)??"";return-i.localeCompare(a)},"result-count-total-up":()=>(n,e)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded,r=e.numberOfRecords!==-1?e.numberOfRecords:e.numberOfRecordsLoaded;return t-r},"result-count-total-down":()=>(n,e)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded;return(e.numberOfRecords!==-1?e.numberOfRecords:e.numberOfRecordsLoaded)-t}},fs=1500;function _i({searchId:n,pollDelay:e=fs}){const t=Ce(),{resources:r}=kt(),{query:i,queryType:a,resourceIDs:o}=It(),[l,c]=g.useState(a==="lex"?Ai:ki),[u,d]=g.useState(Pi),[f,p]=g.useState(""),[m,h]=g.useState(!1),[j,w]=g.useState(!1),L=g.useMemo(()=>{const y=new Map;return r?.forEach(A=>{y.set(A.id,A)}),Ii[u](y)},[u,r]);e??=fs;const{data:x}=$e({queryKey:["search-results",n],queryFn:er.bind(null,t,n??""),enabled:!!n,refetchInterval(y){return y.state.data&&y.state.data.inProgress>0?e:!1}}),T=g.useMemo(()=>x?.results.toSorted(L)||[],[x,L]),b=a==="lex"&&x?.results.every(y=>y.numberOfRecords<=0||y.isLexHits===!0),C=o.length,E=x?.inProgress??C,v=g.useMemo(()=>x?.results.filter(y=>(y.numberOfRecords!==-1?y.numberOfRecords:y.numberOfRecordsLoaded)>0).length??0,[x]),H=g.useMemo(()=>x?.results.filter(y=>!y.inProgress&&(y.numberOfRecords!==-1?y.numberOfRecords:y.numberOfRecordsLoaded)>0&&y.diagnostics.filter(A=>A.uri!==je).length>0).length??0,[x]),_=g.useMemo(()=>x?.results.filter(y=>!y.inProgress&&(y.numberOfRecords!==-1?y.numberOfRecords:y.numberOfRecordsLoaded)<=0&&y.diagnostics.filter(A=>A.uri!==je).length===0&&y.exception===null).length??0,[x]),R=g.useMemo(()=>x?.results.filter(y=>!y.inProgress&&(y.numberOfRecords!==-1?y.numberOfRecords:y.numberOfRecordsLoaded)<=0&&(y.diagnostics.filter(A=>A.uri!==je).length>0||y.exception!==null)).length??0,[x]),P=g.useMemo(()=>x?.results.filter(y=>!y.inProgress&&y.numberOfRecords<=0&&y.exception!==null).length??0,[x]),N=g.useMemo(()=>x?.results.filter(y=>!y.inProgress&&(y.numberOfRecords!==-1?y.numberOfRecords:y.numberOfRecordsLoaded)<=0&&y.diagnostics.filter(A=>A.uri!==je).length>0&&y.exception===null).length??0,[x]),S=g.useMemo(()=>x?.results.map(y=>y.numberOfRecords!==-1?y.numberOfRecords:y.numberOfRecordsLoaded).reduce((y,A)=>y+A,0)??0,[x]),k=g.useMemo(()=>x?.results.map(y=>y.numberOfRecordsLoaded).reduce((y,A)=>y+A,0)??0,[x]);{const[y,A]=g.useState(!1);g.useEffect(()=>{x&&E===0&&(y||(A(!0),Ms(i,a,k)))},[x,E,i,a,n,y,k])}function D(y){c(y.target.value)}function M(y){d(y.target.value)}return s.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[s.jsx(Re,{placement:"auto",overlay:s.jsxs(dt,{id:"search-progress-information-popover",children:[s.jsx(dt.Header,{children:"Search Progress Information"}),s.jsxs(dt.Body,{style:{textIndent:"2rem hanging"},children:[s.jsxs("div",{children:[s.jsx("code",{children:C.toString().padStart(4," ")})," resources requested"]}),E>0&&s.jsxs("div",{children:[s.jsx("code",{children:E.toString().padStart(4," ")})," ↳ resources pending"]}),s.jsx("hr",{className:"mt-2 mb-1"}),s.jsxs("div",{children:[s.jsx("code",{children:(_+R).toString().padStart(4," ")})," ","resources without results"]}),s.jsxs("div",{children:[s.jsx("code",{children:_.toString().padStart(4," ")})," ↳ OK, without issues"]}),N>0&&s.jsxs("div",{children:[s.jsx("code",{children:N.toString().padStart(4," ")})," ↳ with warnings"]}),P>0&&s.jsxs("div",{children:[s.jsx("code",{children:P.toString().padStart(4," ")})," ↳ due to fatal errors"]}),s.jsx("hr",{className:"mt-2 mb-1"}),s.jsxs("div",{children:[s.jsx("code",{children:v.toString().padStart(4," ")})," resources with results"]}),H>0&&s.jsxs("div",{children:[s.jsx("code",{children:H.toString().padStart(4," ")})," ↳ with warnings"]}),s.jsx("hr",{className:"mt-2 mb-0"}),s.jsx("hr",{className:"mt-1 mb-1"}),s.jsxs("div",{children:[s.jsxs("code",{children:[" ",k," ","/"," ",S]})," ","total hits"]})]})]}),children:s.jsxs(Be,{className:"mb-3",children:[s.jsx(Be,{variant:"success",now:v,max:C,label:s.jsxs("span",{children:[v," resources with results"]}),"aria-label":"Resources with results"}),s.jsx(Be,{variant:"secondary",now:_+R,max:C,label:s.jsxs("span",{children:[_+R," resources without results"]}),"aria-label":"Resources without results (might be due to issues)"}),s.jsx(Be,{striped:!0,animated:!0,now:E,max:C,label:s.jsxs("span",{children:["Search through ",E," Resources"]}),"aria-label":"Resources with pending results"})]})}),s.jsx(se,{className:"mb-2",role:"group","aria-label":"Result display and filter options",children:s.jsx(se.Body,{children:s.jsxs(Y,{className:"row-gap-2",children:[s.jsx(F,{lg:"auto",md:6,sm:6,children:s.jsx(me,{label:"View mode",controlId:"results-view-mode",children:s.jsxs(z.Select,{value:l,onChange:D,children:[s.jsx("option",{value:"plain",children:"Plain"}),(a!=="lex"||!b)&&s.jsx("option",{value:"kwic",children:"Keyword in Context"}),a==="fcs"&&s.jsx("option",{value:"annotation-layers",children:"Annotation Layers"}),a==="lex"&&s.jsx("option",{value:"lexical-entry",children:"Dictionary"})]})})}),s.jsx(F,{lg:"auto",md:6,sm:6,children:s.jsx(me,{label:"Sorting",controlId:"results-sorting",children:s.jsxs(z.Select,{value:u,onChange:M,children:[s.jsx("option",{value:"default",children:"(default)"}),s.jsx("option",{value:"title-up",children:"Title (up)"}),s.jsx("option",{value:"title-down",children:"Title (down)"}),s.jsx("option",{value:"result-count-total-up",children:"Total result count (up)"}),s.jsx("option",{value:"result-count-total-down",children:"Total result count (down)"})]})})}),s.jsx(F,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:s.jsx(me,{label:"Result filter query",controlId:"result-filter",children:s.jsx(Us,{disabled:u!=="default"||!0,value:f,onChange:y=>p(y)})})}),s.jsxs(F,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[s.jsx(z.Check,{checked:m,onChange:()=>h(y=>!y),id:"results-view-resource-details",label:"Show result details"}),s.jsx(z.Check,{checked:j,onChange:()=>w(y=>!y),id:"results-view-warnings-errors",label:"Show warning and error messages"})]})]})})}),n&&x&&T.map(y=>s.jsx(Ei,{searchId:n,resourceId:y.id,resultInfo:y,viewMode:l,showResourceDetails:m,showDiagnostics:j},`${n}-${y.id}`))]})}const Mi=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,gs=""+new URL("assets/logo-fcs.png",import.meta.url).href;function $i(){const n=Ce(),{t:e}=nt(),[t,r]=tt(),[i,a]=g.useState([]),[o,l]=g.useState({}),[c,u]=g.useState([]),[d,f]=g.useState(null),[p,m]=g.useState(!1),[h,j]=g.useState(null),[w,L]=g.useState([]),x=q.getState().appTitleHead,T={consortia:t.get(He)},{data:b,isLoading:C,isError:E}=$e({queryKey:["init"],queryFn:Yn.bind(null,n,T)});g.useEffect(()=>{if(!b)return;const N=Xr(b.resources);l(b.languages),u(b.weblichtLanguages),a(N),f(pe(N))},[b]),g.useEffect(()=>{if(!i||i.length===0)return;const N=t.get("x-aggregation-context");if(N){try{const S=JSON.parse(N),{selected:k,unavailable:D}=Zr(i,S);k.length>0&&(f(k),L(M=>[...M,{title:"Resource Selection",body:s.jsxs(s.Fragment,{children:["Preselected ",s.jsx("strong",{children:k.length})," resources:",s.jsx("br",{}),s.jsx("ul",{className:"ps-3",children:k.map(y=>s.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:y}))})]}),variant:"success"}])),D.length>0&&L(M=>[...M,{title:"Resource Selection",body:s.jsxs(s.Fragment,{children:["Unable to select ",s.jsx("strong",{children:D.length})," resources:",s.jsx("br",{}),s.jsx("ul",{className:"ps-3",children:D.map(y=>s.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:y}))})]}),variant:"warning"}])}catch(S){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:N},S),S instanceof Error&&L(k=>[...k,{title:"Resource Selection",body:s.jsxs(s.Fragment,{children:["Unable to preselect resources: ",S.name,s.jsx("br",{}),s.jsx("small",{children:S.message})]}),variant:"error"}])}r(S=>(S.delete("x-aggregation-context"),S))}},[i,t,r]);const v=C||E,{mutate:H,data:_,isPending:R}=xs({mutationKey:["search"],mutationFn:({query:N,queryType:S,language:k,numberOfResults:D,resourceIDs:M})=>Xn(n,{query:N,queryType:S,language:k,numberOfResults:D.toString(),resourceIds:M})});function P(N){f(N.resourceIDs),j(N),m(!0),Ms(N.query,N.queryType),H(N)}return s.jsxs(s.Fragment,{children:[s.jsx(Me,{children:s.jsx("title",{children:x})}),s.jsxs(ne,{id:"search",children:[s.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:s.jsx(xn,{position:"top-end",className:"mt-2",style:{zIndex:100},children:w.map((N,S)=>s.jsxs(ht,{bg:N.variant,onClose:()=>L(k=>k.filter(D=>D!==N)),delay:5e3,autohide:!0,children:[s.jsx(ht.Header,{closeButton:!0,children:s.jsx("strong",{className:"me-auto",children:N.title})}),s.jsx(ht.Body,{children:N.body})]},S))})}),!p&&s.jsx(Y,{children:s.jsx(F,{className:"text-center",children:s.jsxs("picture",{children:[s.jsx("source",{srcSet:gs,media:"(prefers-color-scheme: light)"}),s.jsx("source",{srcSet:Mi,media:"(prefers-color-scheme: dark)"}),s.jsx("img",{src:gs,className:"logo",alt:"FCS logo"})]})})}),s.jsx(Y,{className:"mt-3",children:s.jsx(F,{children:s.jsx(vi,{resources:i,languages:o,availableResources:null,selectedResources:d,onSearch:P,hasSearch:p,disabled:v})})}),!p&&s.jsx(Y,{className:"mt-3",children:s.jsx(F,{children:s.jsxs(ks,{i18nKey:"search.intro.text",children:[s.jsxs("p",{children:["The Federated Content Search (FCS) is a search engine by CLARIN that enables researchers to search for specific patterns across collections of data. The search engine connects to the local data collections that are available in the centres. The data itself stays at the centre where it is hosted – which is why the underlying technique is called ",s.jsx("em",{children:"federated content search"}),"."]}),s.jsxs("p",{children:["To learn more about the FCS, please visit the"," ",s.jsxs("a",{href:e("search.intro.url"),children:["page ",s.jsx("em",{children:"Content Search"})," at CLARIN.eu"]}),"."]})]})})}),p&&R&&s.jsx(Y,{children:s.jsx(F,{className:"text-center my-5",children:s.jsx(Ss,{animation:"border"})})}),h&&_&&s.jsx(zr,{resources:i,languages:o,weblichtLanguages:c,children:s.jsx(qr,{...h,children:s.jsx(_i,{searchId:_})})})]})]})}function Fi(){const n=sn(),e=rt();return g.useCallback((r,i,a)=>{const o=nn(r,i);n({pathname:o,search:e},a)},[n,e])}function Di(){const n=g.useContext(rn),e=ys(),t=n.matches.map(i=>i.route),r=an(t,e);return r!==null&&r.length>0?r[0]:null}const Hi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,Vi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`;function Ui({url:n,statistics:e,validatorUrl:t,isScan:r}){function i(a,o){const l=s.jsx(oe.Highlight,{text:a.title,ranges:e.matchResources?.[o]??null});return a.valid&&a.notes.length===0?l:s.jsx(Re,{placement:"auto-start",delay:{show:250,hide:400},overlay:s.jsxs(De,{id:`resource-info-warning-${a.handle}`,children:[!a.valid&&"This resource is not available in the Aggregator!",!a.valid&&a.notes.length>=1&&s.jsx("hr",{className:"mt-2 mb-1"}),a.notes.length===1?a.notes[0]:a.notes.length>=1?s.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:a.notes.map((c,u)=>s.jsx("li",{children:c},u))}):null]}),children:s.jsxs("span",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Hi},className:"align-baseline me-2"}),a.valid?l:s.jsx("s",{children:l})]})})}return s.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[s.jsxs("h4",{className:"h5",id:`${js(n)}-${r?"scan":"search"}`,children:[s.jsx(oe.Highlight,{text:n,ranges:e.matchEndpoint}),t&&s.jsxs(s.Fragment,{children:[" ",s.jsx("a",{href:`${t}?url=${encodeURIComponent(n)}`,children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Vi},className:"align-baseline ms-2"})})]})]}),s.jsxs("dl",{className:"ps-sm-4",children:[s.jsx("dt",{children:"FCS Version"}),s.jsx("dd",{children:e.version}),s.jsx("dt",{children:"Search capabilities"}),s.jsx("dd",{children:e.searchCapabilities.join(", ")}),s.jsx("dt",{children:"Max concurrent scan requests"}),s.jsx("dd",{children:e.maxConcurrentRequests}),s.jsx("dt",{children:"Request statistics"}),s.jsxs("dd",{className:"mb-0",children:[e.numberOfRequests," request(s)"]}),e.avgQueueTime!==0&&s.jsxs("dd",{className:"mb-0",children:["Queue time (in seconds): average: ",e.avgQueueTime,", max:"," ",e.maxQueueTime]}),s.jsxs("dd",{children:["Execution time (in seconds): average: ",e.avgExecutionTime,", max:"," ",e.maxExecutionTime]}),e.rootResources?.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:"Resources"}),s.jsxs("dd",{children:[e.rootResources.length," root resources"]}),s.jsx("dd",{children:s.jsx("ul",{children:e.rootResources.map((a,o)=>typeof a=="string"?s.jsx("li",{children:s.jsx(oe.Highlight,{text:a,ranges:e.matchResources?.[o]??null})},a):s.jsx("li",{children:i(a,o)},a.handle))})})]}),s.jsxs(s.Fragment,{children:[Object.entries(e.diagnostics||{}).map(([a,o])=>s.jsxs(re,{variant:"warning",style:{fontSize:"0.85rem"},children:[s.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[s.jsxs(Se,{bg:"warning",children:[o.counter,"x"]})," ",s.jsx("span",{className:"text-uppercase",children:"Diagnostic:"})," ",o.diagnostic.message,o.diagnostic.diagnostic&&s.jsxs(s.Fragment,{children:[" - ",s.jsx("small",{children:o.diagnostic.diagnostic})]})]}),s.jsxs("p",{className:"mb-0",children:["Context: ",s.jsx("a",{href:o.context,children:o.context})]})]},a)),Object.entries(e.errors||{}).map(([a,o])=>s.jsxs(re,{variant:"danger",style:{fontSize:"0.85rem"},children:[s.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[s.jsxs(Se,{bg:"danger",children:[o.counter,"x"]})," ",s.jsx("span",{className:"text-uppercase",children:"Exception:"})," ",o.exception.message]}),s.jsxs("p",{className:"mb-0",children:["Context: ",s.jsx("a",{href:o.context,children:o.context})]}),o.exception.cause&&s.jsxs("p",{className:"mb-0",children:["Caused by: ",o.exception.cause]})]},a))]})]})]},n)}function zi({data:n,validatorUrl:e}){const[t,r]=g.useState(""),[i,a]=g.useState(["institution","endpoint","resources"]),[o,l]=g.useState(!1),c=`-${n.isScan?"scan":"search"}`,u=g.useMemo(()=>Object.entries(n.institutions).toSorted().map(([h,j])=>Object.entries(j).toSorted().map(([w,L])=>({institutionName:h,endpointUrl:w,endpointInfo:{...L,rootResources:L.rootResources.toSorted()}}))).flat(1).filter(o?h=>Object.keys(h.endpointInfo.diagnostics).length>0||Object.keys(h.endpointInfo.errors).length>0:()=>!0),[n,o]),d=u.filter(h=>Object.keys(h.endpointInfo.diagnostics).length>0||Object.keys(h.endpointInfo.errors).length>0),p=oe.useFuzzySearchList({list:u,queryText:t,getText:h=>{const j=[];return i.length===0?j.push(h.institutionName,h.endpointUrl,...h.endpointInfo.rootResources.map(w=>typeof w=="string"?w:w.title)):(i.includes("institution")&&j.push(h.institutionName),i.includes("endpoint")&&j.push(h.endpointUrl),i.includes("resources")&&j.push(...h.endpointInfo.rootResources.map(w=>typeof w=="string"?w:w.title))),j},mapResultItem:({item:h,score:j,matches:w})=>({item:h,matches:w,score:j})}).reduce((h,j)=>{const{institutionName:w,endpointUrl:L,endpointInfo:x}=j.item;return Object.getOwnPropertyNames(h).includes(w)||(h[w]={match:i.length===0||i.includes("institution")?j.matches[0]:null,endpoints:{}}),h[w].endpoints[L]={...x,matchEndpoint:i.length===0||i.includes("endpoint")?j.matches[i.length===0||i.includes("institution")?1:0]:null,matchResources:i.length===0||i.includes("resources")?j.matches.slice(0+(i.length===0||i.includes("institution")?1:0)+(i.length===0||i.includes("endpoint")?1:0)):[]},h},{});function m(h){i.includes(h)?a(i.filter(j=>j!==h)):a([...i,h])}return s.jsxs(ne,{className:"d-grid gap-2 mt-3",children:[s.jsx(re,{variant:"info",className:"mb-0",children:s.jsxs("dl",{className:"mb-0",children:[s.jsx("dt",{children:"Start date"}),s.jsx("dd",{className:"mb-0",children:new Date(n.date).toLocaleString()}),s.jsx("dt",{children:"Timeout (in seconds)"}),s.jsx("dd",{className:"mb-0",children:n.timeout})]})}),s.jsx(z,{onSubmit:h=>h.preventDefault(),children:s.jsxs(Y,{className:"gy-2",children:[s.jsx(F,{lg:6,md:12,children:s.jsx(z.Control,{placeholder:"Type to filter statistics ...",value:t,onChange:h=>r(h.target.value)})}),s.jsxs(F,{className:"filter-checkboxes",lg:6,md:12,children:[s.jsx(z.Text,{className:"me-2",children:"Apply filter to:"}),s.jsx(z.Check,{type:"checkbox",checked:i.includes("institution"),onChange:()=>m("institution"),id:`filter-institution-name${c}`,label:"Institution"}),s.jsx(z.Check,{type:"checkbox",checked:i.includes("endpoint"),onChange:()=>m("endpoint"),id:`filter-endpoint-url${c}`,label:"Endpoint"}),s.jsx(z.Check,{type:"checkbox",checked:i.includes("resources"),onChange:()=>m("resources"),id:`filter-resource-names${c}`,label:"Resources"})]})]})}),s.jsx(Y,{children:s.jsx(F,{children:s.jsx(z.Check,{type:"checkbox",checked:o,onChange:()=>l(!o),id:`filter-show-issues-only${c}`,label:`Only show endpoints with issues (errors or warnings, currently affects ${d.length} endpoint${d.length!==1?"s":""})`})})}),Object.entries(p).map(([h,{match:j,endpoints:w}])=>s.jsxs(se,{className:"p-2",children:[s.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${js(h)}${c}`,children:s.jsx(oe.Highlight,{text:h,ranges:j})}),Object.entries(w).toSorted().map(([L,x])=>s.jsx(Ui,{url:L,statistics:x,validatorUrl:e,isScan:n.isScan},L))]},h))]})}const Bi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,qi=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],Ki=Object.fromEntries(qi.map(n=>[n.id,n]));function Qi(){const n=Ce(),e=ms(),[t]=tt(),{categoryId:r}=on(),i=Di(),a=Fi(),o={consortia:t.get(He)},{isPending:l,isError:c,data:u,error:d}=$e({queryKey:["statistics"],queryFn:Jn.bind(null,n,o)}),[f,p]=g.useState(q.getState().validatorURL);q.subscribe(x=>p(x.validatorURL));const m=q.getState().appTitleHead,h=u!==void 0?Object.keys(u).toSorted():[],j=r!=null&&h.includes(r)?r:h.length>0?h[0]:void 0;function w(){e.invalidateQueries({queryKey:["statistics"]})}function L(x){i?.params.categoryId,i&&i.params.categoryId!==x&&i.route.path&&a(i.route.path,{categoryId:x})}return s.jsxs(s.Fragment,{children:[s.jsx(Me,{children:s.jsxs("title",{children:[m," – Statistics"]})}),s.jsxs(ne,{id:"statistics",className:"my-3",children:[s.jsx("h1",{className:"h1",children:"Statistics"}),(l||c)&&s.jsx(Y,{children:s.jsxs(F,{children:[l?"Loading ...":null,s.jsx("br",{}),c?d.message:null]})}),u&&s.jsxs(ft.Container,{defaultActiveKey:j,onSelect:L,children:[s.jsxs(fe,{className:"nav-tabs",as:"ul",children:[Object.keys(u).map(x=>s.jsx(fe.Item,{as:"li",role:"presentation",children:s.jsx(fe.Link,{as:"button",eventKey:x,children:Ki[x]?.label??x})},x)),s.jsx(fe.Item,{as:"li",role:"presentation",className:"ms-auto",children:s.jsxs(fe.Link,{as:"button",onClick:w,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Bi}})," Refresh"]})})]}),s.jsx(ft.Content,{children:Object.entries(u).map(([x,T])=>s.jsx(ft.Pane,{eventKey:x,children:s.jsx(zi,{data:T,validatorUrl:f})},x))})]})]})]})}function Gi(){const n=q.getState().appTitleHead;hr();const e=be(t=>t.locale);g.useEffect(()=>{G.changeLanguage(e)},[e]);{const t=ys(),[r,i]=g.useState(t.pathname);g.useEffect(()=>{const a=t.pathname;a!==r&&(i(a+t.search),_s(a,document.title,r))},[t,r])}return s.jsxs(s.Fragment,{children:[s.jsx(Me,{children:s.jsx("title",{children:n})}),s.jsx(cr,{}),s.jsx("main",{children:s.jsxs(ln,{children:[s.jsx(ze,{index:!0,element:s.jsx($i,{})}),s.jsx(ze,{path:"/about",element:s.jsx(Vr,{})}),s.jsx(ze,{path:"/help",element:s.jsx(Ur,{})}),s.jsx(ze,{path:"/stats/:categoryId?",element:s.jsx(Qi,{})})]})}),s.jsx(ar,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const Wi=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function Yi(){window.MyAggregator.DEPLOY_PATH!==void 0&&q.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&q.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&q.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&q.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&q.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&q.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&q.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_USERNAME!==void 0&&q.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(n,e){return n[e]},set(n,e,t){return Wi.includes(e)?(console.error(`Configuration ${e} can only be set on initialization!`),!1):e==="VALIDATOR_URL"?t===null||typeof t=="string"?(q.getState().setValidatorURL(t),!0):!1:e==="SHOW_SEARCH_RESULT_LINK"?typeof t=="boolean"?(q.getState().setShowSearchResultLink(t),!0):!1:e==="AUTH_USERNAME"?t===null||typeof t=="string"?(q.getState().setAuthUsername(t),!0):!1:(n[e]=t,!0)}}),Object.assign(window.MyAggregator,{getAppStore:()=>q})}function Ji(){const n=X.getState(),e=[navigator.language,...navigator.languages];let t=!1;for(const r of e){if(r===n.locale){t=!0;break}if(n.locales.includes(r)){n.setLocale(r),t=!0;break}}t||console.warn("User locale",e,"was not found in available languages",n.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>X})}Yi();Ji();q.getInitialState(),q.getState();X.getInitialState(),X.getState();const Xi=q.getState().deployPath,Zi=q.getState().apiURL,ea=X.getState().locale;G.changeLanguage(ea);const ta=new cn({defaultOptions:{queries:{}}}),sa=un.create({baseURL:Zi,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const n=q.getState().matomoTrackingParams;Wr(n)||console.warn("Unable to setup tracking ...")}const na="root",ra=document.getElementById(na),ia=wn.createRoot(ra);ia.render(s.jsx(g.StrictMode,{children:s.jsx(Br,{axios:sa,children:s.jsx(dn,{client:ta,children:s.jsx(hn,{children:s.jsx(fn,{basename:Xi,children:s.jsx(Gi,{})})})})})}));export{Vs as C,ji as h,G as i,Ds as u};
//# sourceMappingURL=fcs-sru-aggregator-ui-0.0.0.js.map

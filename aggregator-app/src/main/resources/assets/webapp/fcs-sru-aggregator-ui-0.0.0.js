const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-query-builder-0.0.0.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-query-builder-0.0.0.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{r as f,u as ot,j as s,L as nt,c as ys,b as tn,N as zt,H as Ue,R as sn,d as nn,e as js,f as Ss,g as He,h as rn,k as an,l as on,m as ws,n as ln,s as vs,o as cn,p as un,q as Ge,Q as dn,t as hn,v as fn,w as gn,B as pn}from"./vendor/react-ext.js";import{b as mn,g as xn}from"./vendor/react.js";/* empty css                            */import{C as re,R as J,a as H,N as Ae,b as ge,c as Bt,M as W,F as B,B as Q,T as lt,d as Ve,e as ne,f as Ls,g as be,I as bn,D as ye,S as Cs,h as Pt,O as Te,i as ve,j as ze,L as mt,A as ie,P as We,k as xt,l as yn,m as bt,n as yt}from"./vendor/bootstrap.js";import{_ as Ns,a as Rs,b as jn,c as Sn}from"./locales/en/default.js";import{g as wn}from"./vendor/prism.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Je={},qt;function vn(){if(qt)return Je;qt=1;var n=mn();return Je.createRoot=n.createRoot,Je.hydrateRoot=n.hydrateRoot,Je}var Ln=vn(),jt,Kt;function Cn(){return Kt||(Kt=1,jt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),jt}var Nn=Cn();const Rn=xn(Nn);var En=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Qt(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Rn[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(En),a=null;(a=i.exec(n))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),e.attrs[l[0]]=l[1],i.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var Tn=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,In=/^\s*$/,On=Object.create(null);function Es(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(Es,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var kn={parse:function(n,e){e||(e={}),e.components||(e.components=On);var t,r=[],i=[],a=-1,o=!1;if(n.indexOf("<")!==0){var l=n.indexOf("<");r.push({type:"text",content:l===-1?n:n.substring(0,l)})}return n.replace(Tn,function(c,u){if(o){if(c!=="</"+t.name+">")return;o=!1}var d,h=c.charAt(1)!=="/",p=c.startsWith("<!--"),b=u+c.length,g=n.charAt(b);if(p){var C=Qt(c);return a<0?(r.push(C),r):((d=i[a]).children.push(C),r)}if(h&&(a++,(t=Qt(c)).type==="tag"&&e.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!g||g==="<"||t.children.push({type:"text",content:n.slice(b,n.indexOf("<",b))}),a===0&&r.push(t),(d=i[a-1])&&d.children.push(t),i[a]=t),(!h||t.voidElement)&&(a>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(a--,t=a===-1?r:i[a]),!o&&g!=="<"&&g)){d=a===-1?r:i[a].children;var m=n.indexOf("<",b),S=n.slice(b,m===-1?void 0:m);In.test(S)&&(S=" "),(m>-1&&a+d.length>=0||S!==" ")&&d.push({type:"text",content:S})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+Es("",t)},"")}};const tt=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);ae(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},Gt={},$e=(n,e,t,r)=>{ae(t)&&Gt[t]||(ae(t)&&(Gt[t]=new Date),tt(n,e,t,r))},Ts=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Lt=(n,e,t)=>{n.loadNamespaces(e,Ts(n,t))},Wt=(n,e,t,r)=>{if(ae(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Lt(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,Ts(n,r))},An=(n,e,t={})=>!e.languages||!e.languages.length?($e(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n?.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),ae=n=>typeof n=="string",je=n=>typeof n=="object"&&n!==null,Pn=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,_n={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Mn=n=>_n[n],$n=n=>n.replace(Pn,Mn);let Ct={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:$n};const Fn=(n={})=>{Ct={...Ct,...n}},Is=()=>Ct;let Os;const Dn=n=>{Os=n},_t=()=>Os,St=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},wt=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?Re(e):e},Un=n=>Array.isArray(n)&&n.every(f.isValidElement),Re=n=>Array.isArray(n)?n:[n],Hn=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},ks=(n,e,t,r)=>{if(!n)return"";let i="";const a=Re(n),o=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((l,c)=>{if(ae(l)){i+=`${l}`;return}if(f.isValidElement(l)){const{props:u,type:d}=l,h=Object.keys(u).length,p=o.indexOf(d)>-1,b=u.children;if(!b&&p&&!h){i+=`<${d}/>`;return}if(!b&&(!p||h)||u.i18nIsDynamicList){i+=`<${c}></${c}>`;return}if(p&&h===1&&ae(b)){i+=`<${d}>${b}</${d}>`;return}const g=ks(b,e,t,r);i+=`<${c}>${g}</${c}>`;return}if(l===null){tt(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(je(l)){const{format:u,...d}=l,h=Object.keys(d);if(h.length===1){const p=u?`${h[0]}, ${u}`:h[0];i+=`{{${p}}}`;return}tt(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:l});return}tt(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:l})}),i},Vn=(n,e,t,r,i,a,o)=>{if(t==="")return[];const l=i.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(l.map(S=>`<${S}`).join("|")).test(t);if(!n&&!e&&!c&&!o)return[t];const u=e??{},d=S=>{Re(S).forEach(N=>{ae(N)||(St(N)?d(wt(N)):je(N)&&!f.isValidElement(N)&&Object.assign(u,N))})};d(n);const h=kn.parse(`<0>${t}</0>`),p={...u,...a},b=(S,x,N)=>{const I=wt(S),y=C(I,x.children,N);return Un(I)&&y.length===0||S.props?.i18nIsDynamicList?I:y},g=(S,x,N,I,y)=>{S.dummy?(S.children=x,N.push(f.cloneElement(S,{key:I},y?void 0:x))):N.push(...f.Children.map([S],w=>{const E={...w.props};return delete E.i18nIsDynamicList,f.createElement(w.type,{...E,key:I,ref:w.props.ref??w.ref},y?null:x)}))},C=(S,x,N)=>{const I=Re(S);return Re(x).reduce((w,E,M)=>{const D=E.children?.[0]?.content&&r.services.interpolator.interpolate(E.children[0].content,p,r.language);if(E.type==="tag"){let L=I[parseInt(E.name,10)];!L&&e&&(L=e[E.name]),N.length===1&&!L&&(L=N[0][E.name]),L||(L={});const k=Object.keys(E.attrs).length!==0?Hn({props:E.attrs},L):L,_=f.isValidElement(k),R=_&&St(E,!0)&&!E.voidElement,v=c&&je(k)&&k.dummy&&!_,$=je(e)&&Object.hasOwnProperty.call(e,E.name);if(ae(k)){const P=r.services.interpolator.interpolate(k,p,r.language);w.push(P)}else if(St(k)||R){const P=b(k,E,N);g(k,P,w,M)}else if(v){const P=C(I,E.children,N);g(k,P,w,M)}else if(Number.isNaN(parseFloat(E.name)))if($){const P=b(k,E,N);g(k,P,w,M,E.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(E.name)>-1)if(E.voidElement)w.push(f.createElement(E.name,{key:`${E.name}-${M}`}));else{const P=C(I,E.children,N);w.push(f.createElement(E.name,{key:`${E.name}-${M}`},P))}else if(E.voidElement)w.push(`<${E.name} />`);else{const P=C(I,E.children,N);w.push(`<${E.name}>${P}</${E.name}>`)}else if(je(k)&&!_){const P=E.children[0]?D:null;P&&w.push(P)}else g(k,D,w,M,E.children.length!==1||!D)}else if(E.type==="text"){const L=i.transWrapTextNodes,k=o?i.unescape(r.services.interpolator.interpolate(E.content,p,r.language)):r.services.interpolator.interpolate(E.content,p,r.language);L?w.push(f.createElement(L,{key:`${E.name}-${M}`},k)):w.push(k)}return w},[])},m=C([{dummy:!0,children:n||[]}],h,Re(n||[]));return wt(m[0])},As=(n,e,t)=>{const r=n.key||e,i=f.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function a(){return f.createElement(f.Fragment,null,i)}return f.createElement(a,{key:r})},zn=(n,e)=>n.map((t,r)=>As(t,r,e)),Bn=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:As(n[r],r,e)})}),t},qn=(n,e,t,r)=>n?Array.isArray(n)?zn(n,e):je(n)?Bn(n,e):($e(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,Kn=n=>!je(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function Qn({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:c,ns:u,i18n:d,t:h,shouldUnescape:p,...b}){const g=d||_t();if(!g)return $e(g,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const C=h||g.t.bind(g)||(v=>v),m={...Is(),...g.options?.react};let S=u||C.ns||g.options?.defaultNS;S=ae(S)?[S]:S||["translation"];const x=ks(n,m,g,r),N=l||x||m.transEmptyNodeValue||r,{hashTransKey:I}=m,y=r||(I?I(x||N):x||N);g.options?.interpolation?.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...g.options.interpolation.defaultVariables}:{...g.options.interpolation.defaultVariables});const w=o||e!==void 0&&!g.options?.interpolation?.alwaysFormat||!n?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},E={...a,context:i||a.context,count:e,...o,...w,defaultValue:N,ns:S},M=y?C(y,E):N,D=qn(c,M,g,r);let L=D||n,k=null;Kn(D)&&(k=D,L=n);const _=Vn(L,k,M,g,m,E,p),R=t??m.defaultTransParent;return R?f.createElement(R,b,_):_}const Gn={type:"3rdParty",init(n){Fn(n.options.react),Dn(n)}},Ps=f.createContext();class Wn{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function ee({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:c,ns:u,i18n:d,t:h,shouldUnescape:p,...b}){const{i18n:g,defaultNS:C}=f.useContext(Ps)||{},m=d||g||_t(),S=h||m?.t.bind(m);return Qn({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a,values:o,defaults:l,components:c,ns:u||S?.ns||C||m?.options?.defaultNS,i18n:m,t:h,shouldUnescape:p,...b})}const Jn=(n,e)=>{const t=f.useRef();return f.useEffect(()=>{t.current=n},[n,e]),t.current},_s=(n,e,t,r)=>n.getFixedT(e,t,r),Yn=(n,e,t,r)=>f.useCallback(_s(n,e,t,r),[n,e,t,r]),se=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=f.useContext(Ps)||{},a=t||r||_t();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Wn),!a){$e(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const I=(w,E)=>ae(E)?E:je(E)&&ae(E.defaultValue)?E.defaultValue:Array.isArray(w)?w[w.length-1]:w,y=[I,{},!1];return y.t=I,y.i18n={},y.ready=!1,y}a.options.react?.wait&&$e(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Is(),...a.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let u=i||a.options?.defaultNS;u=ae(u)?[u]:u||["translation"],a.reportNamespaces.addUsedNamespaces?.(u);const d=(a.isInitialized||a.initializedStoreOnce)&&u.every(I=>An(I,a,o)),h=Yn(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),p=()=>h,b=()=>_s(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),[g,C]=f.useState(p);let m=u.join();e.lng&&(m=`${e.lng}${m}`);const S=Jn(m),x=f.useRef(!0);f.useEffect(()=>{const{bindI18n:I,bindI18nStore:y}=o;x.current=!0,!d&&!l&&(e.lng?Wt(a,e.lng,u,()=>{x.current&&C(b)}):Lt(a,u,()=>{x.current&&C(b)})),d&&S&&S!==m&&x.current&&C(b);const w=()=>{x.current&&C(b)};return I&&a?.on(I,w),y&&a?.store.on(y,w),()=>{x.current=!1,a&&I?.split(" ").forEach(E=>a.off(E,w)),y&&a&&y.split(" ").forEach(E=>a.store.off(E,w))}},[a,m]),f.useEffect(()=>{x.current&&d&&C(p)},[a,c,d]);const N=[g,a,d];if(N.t=g,N.i18n=a,N.ready=d,d||!d&&!l)return N;throw new Promise(I=>{e.lng?Wt(a,e.lng,u,()=>I()):Lt(a,u,()=>I())})},Be="x-consortia";async function Xn(n,e){const t=new URLSearchParams;e?.consortia!==void 0&&e?.consortia!==null&&t.set(Be,e.consortia);const r="init"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function Zn(n,e){const t=new URLSearchParams;e?.consortia!==void 0&&e?.consortia!==null&&t.set(Be,e.consortia);const r="statistics"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function er(n,e){return(await n.post("search",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function tr(n,e,t){return(await n.post(`search/${e}`,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function sr(n,e){if(!e)throw new Error('Invalid "searchID" parameter!');return(await n.get(`search/${e}/metaonly`)).data}async function nr(n,e,t){if(!e)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await n.get(`search/${e}/metaonly?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.id===t);if(i.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${e}, resourceId: ${t})`);return i[0]}async function rr(n,e,t){if(!e)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await n.get(`search/${e}?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.resource.id===t);if(i.length===0)throw new Error(`Results for resource not found! (searchId: ${e}, resourceId: ${t})`);return i[0]}function ir(n,e,t,r,i,a){const o=new URLSearchParams({resourceId:t,format:r});(a==="byGuess"||a==="byMetaAndGuess")&&o.set("filterLanguage",i);const l=`search/${e}/download?${o.toString()}`;return n.getUri({url:l})}function ar(n,e,t,r,i,a){const o=new URLSearchParams({resourceId:t});r?o.set("filterLanguage",r):(a==="byGuess"||a==="byMetaAndGuess")&&o.set("filterLanguage",i);const l=`search/${e}/toWeblicht?${o.toString()}`;return n.getUri({url:l})}const or=[Be];function ct(){const[n]=ot(),e=new URLSearchParams(Array.from(n.entries()).filter(([t])=>or.includes(t)));if(!e.entries().next().done)return`?${e}`}function lr(){const{t:n}=se(),e="urls.termsUseAndDisclaimer",t=n(e,{ns:"common"}),r=t!==e,i="urls.contact",a=n(i,{ns:"common"}),o=a!==i,l="footer.serviceInfo.text",u=n(l)!==l,d=ct();return s.jsx("footer",{className:"text-muted",children:s.jsx(re,{children:s.jsxs(J,{children:[s.jsxs(H,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[s.jsxs("div",{children:[s.jsx(nt,{to:{pathname:"/about",search:d},className:"hidden-xs",children:n("footer.links.about")}),s.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","0.0.0"]})]}),s.jsx(nt,{to:{pathname:"/stats",search:d},children:n("footer.links.statistics")})]}),s.jsx(H,{className:"text-center",children:u&&s.jsxs(ee,{i18nKey:l,children:[s.jsxs("span",{className:"footer-fineprint",children:["Service provided by ",s.jsx("a",{href:n("footer.serviceInfo.url"),children:"CLARIN"})]}),s.jsxs("span",{children:[s.jsx("br",{}),"Hosted by CLARIN ERIC"]})]})}),s.jsxs(H,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&s.jsx("a",{href:t,children:n("footer.links.termsUseAndDisclaimer")}),o&&s.jsx("a",{href:a,children:n("footer.links.contact")})]})]})})})}const K=ys(n=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authUsername:null,setDeployPath:e=>n(t=>({deployPath:typeof e=="function"?e(t.deployPath):e})),setApiURL:e=>n(t=>({apiURL:typeof e=="function"?e(t.apiURL):e})),setValidatorURL:e=>n(t=>({validatorURL:typeof e=="function"?e(t.validatorURL):e})),setShowSearchResultLink:e=>n(t=>({showSearchResultLink:typeof e=="function"?e(t.showSearchResultLink):e})),setAppTitle:e=>n(t=>({appTitle:typeof e=="function"?e(t.appTitle):e})),setAppTitleHead:e=>n(t=>({appTitleHead:typeof e=="function"?e(t.appTitleHead):e})),setMatomoTrackingParams:e=>n(t=>({matomoTrackingParams:typeof e=="function"?e(t.matomoTrackingParams):e})),setAuthUsername:e=>n(t=>({authUsername:typeof e=="function"?e(t.authUsername):e}))}));var cr=["en","de"];const Z=ys(n=>({locale:"en",locales:cr??["en"],setLocale:e=>n(t=>({locale:typeof e=="function"?e(t.locale):e})),setLocales:e=>n(t=>({locales:typeof e=="function"?e(t.locales):e}))})),we=n=>{const e=tn(Z,n);return Object.assign(e,Z),e},ur=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,Jt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,qe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function dr(){const{t:n}=se(),e=we(p=>p.locale),t=we(p=>p.locales),r=we(p=>p.setLocale),i=K.getState().authUsername,a=i!==null&&i!=="anonymous",o=K.getState().deployPath??"",l=o+(o.endsWith("/")?"":"/")+"login",c=ct();function u(p){p!==null&&r(p)}function d(){return a?s.jsxs(Ae.Text,{className:"ms-auto",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Jt}})," Signed in as"," ",s.jsx("span",{className:"fw-bold",children:i})]}):s.jsxs(ge.Link,{href:`${l}${c??""}`,className:"ms-auto",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Jt}})," ",n("header.login.login")]})}function h(){if(!t||t.length===1)return null;const p=new Intl.DisplayNames([e,"en"],{type:"language"}),b=s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",e.toUpperCase()," "]});return s.jsx(Bt,{title:b,align:"end",className:"ms-2",onSelect:u,children:t.map(g=>{const C=new Intl.DisplayNames([g,"en"],{type:"language"});return s.jsxs(Bt.Item,{disabled:g===e,"aria-disabled":g===e,eventKey:g,title:`Switch to locale '${g}' for language '${C.of(g)}'`+(g!==e?` (${p.of(g)})`:""),children:[g.toUpperCase()," – ",C.of(g)]},g)})})}return s.jsx("header",{children:s.jsx(Ae,{expand:"md",className:"bg-body-tertiary",children:s.jsxs(re,{children:[s.jsxs(Ae.Brand,{as:nt,to:{pathname:"/",search:c},children:[s.jsx("img",{src:ur,width:"30",height:"30",className:"d-inline-block align-top",alt:`${n("header.title")} logo`})," ",n("header.title")]}),s.jsx(Ae.Toggle,{"aria-controls":"header-navbar-nav"}),s.jsx(Ae.Collapse,{id:"header-navbar-nav",children:s.jsxs(ge,{className:"w-100 d-flex",children:[s.jsx(ge.Link,{as:zt,to:{pathname:"/",search:c},children:n("header.menu.home")}),s.jsx(ge.Link,{as:zt,to:{pathname:"/help",search:c},children:n("header.menu.help")}),d(),h()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function hr(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function fr(n){n==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",n)}function gr(){f.useEffect(()=>{function n(){fr(hr())}return n(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",n)},[])}const pr="modulepreload",mr=function(n,e){return new URL(n,e).href},Yt={},de=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=u(t.map(d=>{if(d=mr(d,r),d in Yt)return;Yt[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!r)for(let C=o.length-1;C>=0;C--){const m=o[C];if(m.href===d&&(!h||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":pr,h||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),h)return new Promise((C,m)=>{g.addEventListener("load",C),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},xr=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},F=n=>typeof n=="string",Pe=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},Xt=n=>n==null?"":""+n,br=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},yr=/###/g,Zt=n=>n&&n.indexOf("###")>-1?n.replace(yr,"."):n,es=n=>!n||F(n),Me=(n,e,t)=>{const r=F(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(es(n))return{};const a=Zt(r[i]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++i}return es(n)?{}:{obj:n,k:Zt(r[i])}},ts=(n,e,t)=>{const{obj:r,k:i}=Me(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let a=e[e.length-1],o=e.slice(0,e.length-1),l=Me(n,o,Object);for(;l.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),l=Me(n,o,Object),l?.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=t},jr=(n,e,t,r)=>{const{obj:i,k:a}=Me(n,e,Object);i[a]=i[a]||[],i[a].push(t)},rt=(n,e)=>{const{obj:t,k:r}=Me(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},Sr=(n,e,t)=>{const r=rt(n,t);return r!==void 0?r:rt(e,t)},Ms=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?F(n[r])||n[r]instanceof String||F(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):Ms(n[r],e[r],t):n[r]=e[r]);return n},Ne=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const vr=n=>F(n)?n.replace(/[&<>"'\/]/g,e=>wr[e]):n;class Lr{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Cr=[" ",",","?","!",";"],Nr=new Lr(20),Rr=(n,e,t)=>{e=e||"",t=t||"";const r=Cr.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(r.length===0)return!0;const i=Nr.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(n);if(!a){const o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(a=!0)}return a},Nt=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,l="";for(let c=a;c<r.length;++c)if(c!==a&&(l+=t),l+=r[c],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;a+=c-a+1;break}i=o}return i},Fe=n=>n?.replace("_","-"),Er={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class it{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Er,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(F(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new it(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new it(this.logger,e)}}var fe=new it;class ut{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...t])})}}class ss extends ut{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],r&&(Array.isArray(r)?l.push(...r):F(r)&&a?l.push(...r.split(a)):l.push(r)));const c=rt(this.data,l);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=l[0],t=l[1],r=l.slice(2).join(".")),c||!o||!F(r)?c:Nt(this.data?.[e]?.[t],r,a)}addResource(e,t,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[e,t];r&&(l=l.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(l=e.split("."),i=t,t=l[1]),this.addNamespaces(t),ts(this.data,l,i),a.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const a in r)(F(r[a])||Array.isArray(r[a]))&&this.addResource(e,t,a,r[a],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,a,o={silent:!1,skipCopy:!1}){let l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=t,t=l[1]),this.addNamespaces(t);let c=rt(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Ms(c,r,a):c={...c,...r},ts(this.data,l,c),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var $s={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(a=>{e=this.processors[a]?.process(e,t,r,i)??e}),e}};const ns={},rs=n=>!F(n)&&typeof n!="boolean"&&typeof n!="number";class at extends ut{constructor(e,t={}){super(),br(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fe.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Rr(e,r,i);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:F(a)?[a]:a};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(i)}return{key:e,namespaces:F(a)?[a]:a}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],i),u=c[c.length-1];let d=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return p?a?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${d}${l}`:a?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:l;const b=this.resolve(e,i);let g=b?.res;const C=b?.usedKey||l,m=b?.exactUsedKey||l,S=["[object Number]","[object Function]","[object RegExp]"],x=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,I=i.count!==void 0&&!F(i.count),y=at.hasDefaultValue(i),w=I?this.pluralResolver.getSuffix(h,i.count,i):"",E=i.ordinal&&I?this.pluralResolver.getSuffix(h,i.count,{ordinal:!1}):"",M=I&&!i.ordinal&&i.count===0,D=M&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${w}`]||i[`defaultValue${E}`]||i.defaultValue;let L=g;N&&!g&&y&&(L=D);const k=rs(L),_=Object.prototype.toString.apply(L);if(N&&L&&k&&S.indexOf(_)<0&&!(F(x)&&Array.isArray(L))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,L,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(b.res=R,b.usedParams=this.getUsedParamsDetails(i),b):R}if(o){const R=Array.isArray(L),v=R?[]:{},$=R?m:C;for(const P in L)if(Object.prototype.hasOwnProperty.call(L,P)){const j=`${$}${o}${P}`;y&&!g?v[P]=this.translate(j,{...i,defaultValue:rs(D)?D[P]:void 0,joinArrays:!1,ns:c}):v[P]=this.translate(j,{...i,joinArrays:!1,ns:c}),v[P]===j&&(v[P]=L[P])}g=v}}else if(N&&F(x)&&Array.isArray(g))g=g.join(x),g&&(g=this.extendTranslation(g,e,i,r));else{let R=!1,v=!1;!this.isValidLookup(g)&&y&&(R=!0,g=D),this.isValidLookup(g)||(v=!0,g=l);const P=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&v?void 0:g,j=y&&D!==g&&this.options.updateMissing;if(v||R||j){if(this.logger.log(j?"updateKey":"missingKey",h,u,l,j?D:g),o){const X=this.resolve(l,{...i,keySeparator:!1});X&&X.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let O=[];const U=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&U&&U[0])for(let X=0;X<U.length;X++)O.push(U[X]);else this.options.saveMissingTo==="all"?O=this.languageUtils.toResolveHierarchy(i.lng||this.language):O.push(i.lng||this.language);const Y=(X,le,he)=>{const me=y&&he!==g?he:P;this.options.missingKeyHandler?this.options.missingKeyHandler(X,u,le,me,j,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(X,u,le,me,j,i),this.emit("missingKey",X,u,le,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?O.forEach(X=>{const le=this.pluralResolver.getSuffixes(X,i);M&&i[`defaultValue${this.options.pluralSeparator}zero`]&&le.indexOf(`${this.options.pluralSeparator}zero`)<0&&le.push(`${this.options.pluralSeparator}zero`),le.forEach(he=>{Y([X],l+he,i[`defaultValue${he}`]||D)})}):Y(O,l,D))}g=this.extendTranslation(g,e,i,b,r),v&&g===l&&this.options.appendNamespaceToMissingKey&&(g=`${u}${d}${l}`),(v||R)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,R?g:void 0,i))}return a?(b.res=g,b.usedParams=this.getUsedParamsDetails(i),b):g}extendTranslation(e,t,r,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=F(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let d=r.replace&&!F(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||i.usedLng,r),c){const h=e.match(this.interpolator.nestingRegexp),p=h&&h.length;u<p&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>a?.[0]===h[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${t[0]}`),null):this.translate(...h,t),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=F(o)?[o]:o;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=$s.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,a,o,l;return F(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,t),d=u.key;i=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=t.count!==void 0&&!F(t.count),b=p&&!t.ordinal&&t.count===0,g=t.context!==void 0&&(F(t.context)||typeof t.context=="number")&&t.context!=="",C=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(m=>{this.isValidLookup(r)||(l=m,!ns[`${C[0]}-${m}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(ns[`${C[0]}-${m}`]=!0,this.logger.warn(`key "${i}" for languages "${C.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(S=>{if(this.isValidLookup(r))return;o=S;const x=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(x,d,S,m,t);else{let I;p&&(I=this.pluralResolver.getSuffix(S,t.count,t));const y=`${this.options.pluralSeparator}zero`,w=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(x.push(d+I),t.ordinal&&I.indexOf(w)===0&&x.push(d+I.replace(w,this.options.pluralSeparator)),b&&x.push(d+y)),g){const E=`${d}${this.options.contextSeparator}${t.context}`;x.push(E),p&&(x.push(E+I),t.ordinal&&I.indexOf(w)===0&&x.push(E+I.replace(w,this.options.pluralSeparator)),b&&x.push(E+y))}}let N;for(;N=x.pop();)this.isValidLookup(r)||(a=N,r=this.getResource(S,m,N,t))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!F(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of t)delete i[a]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class is{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fe.create("languageUtils")}getScriptPartFromCode(e){if(e=Fe(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Fe(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(F(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),F(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return F(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):F(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const as={zero:0,one:1,two:2,few:3,many:4,other:5},os={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Tr{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=fe.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=Fe(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),os;if(!e.match(/-|_/))return os;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[a]=o,o}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>as[i]-as[a]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const ls=(n,e,t,r=".",i=!0)=>{let a=Sr(n,e,t);return!a&&i&&F(t)&&(a=Nt(n,t,r),a===void 0&&(a=Nt(e,t,r))),a},vt=n=>n.replace(/\$/g,"$$$$");class Ir{constructor(e={}){this.logger=fe.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:b,nestingSuffix:g,nestingSuffixEscaped:C,nestingOptionsSeparator:m,maxReplaces:S,alwaysFormat:x}=e.interpolation;this.escape=t!==void 0?t:vr,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Ne(a):o||"{{",this.suffix=l?Ne(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Ne(p):b||Ne("$t("),this.nestingSuffix=g?Ne(g):C||Ne(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=S||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let a,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=b=>{if(b.indexOf(this.formatSeparator)<0){const S=ls(t,c,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...i,...t,interpolationkey:b}):S}const g=b.split(this.formatSeparator),C=g.shift().trim(),m=g.join(this.formatSeparator).trim();return this.format(ls(t,c,C,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...i,...t,interpolationkey:C})};this.resetRegExp();const d=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>vt(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?vt(this.escape(b)):vt(b)}].forEach(b=>{for(l=0;a=b.regex.exec(e);){const g=a[1].trim();if(o=u(g),o===void 0)if(typeof d=="function"){const m=d(e,a,i);o=F(m)?m:""}else if(i&&Object.prototype.hasOwnProperty.call(i,g))o="";else if(h){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else!F(o)&&!this.useRawValueToEscape&&(o=Xt(o));const C=b.safeValue(o);if(e=e.replace(a[0],C),h?(b.regex.lastIndex+=o.length,b.regex.lastIndex-=a[0].length):b.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,a,o;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let p=`{${h[1]}`;c=h[0],p=this.interpolate(p,o);const b=p.match(/'/g),g=p.match(/"/g);((b?.length??0)%2===0&&!g||g.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),u&&(o={...u,...o})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,C),`${c}${d}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!F(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(u!==-1&&(c=i[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),i[1]=i[1].slice(0,u)),a=t(l.call(this,i[1].trim(),o),o),a&&i[0]===e&&!F(a))return a;F(a)||(a=Xt(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),c.length&&(a=c.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const Or=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();t[d]||(t[d]=u),u==="false"&&(t[d]=!1),u==="true"&&(t[d]=!0),isNaN(u)||(t[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},cs=n=>{const e={};return(t,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let l=e[o];return l||(l=n(Fe(r),i),e[o]=l),l(t)}},kr=n=>(e,t,r)=>n(Fe(t),r)(e);class Ar{constructor(e={}){this.logger=fe.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?cs:kr;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return l=>o.format(l)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return l=>o.format(l)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return l=>o.format(l)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return l=>o.format(l,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return l=>o.format(l)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=cs(t)}format(e,t,r,i={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,c)=>{const{formatName:u,formatOptions:d}=Or(c);if(this.formats[u]){let h=l;try{const p=i?.formatParams?.[i.interpolationkey]||{},b=p.locale||p.lng||i.locale||i.lng||r;h=this.formats[u](l,b,{...d,...i,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const Pr=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class _r extends ut{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=fe.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const a={},o={},l={},c={};return e.forEach(u=>{let d=!0;t.forEach(h=>{const p=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,d=!1,o[p]===void 0&&(o[p]=!0),a[p]===void 0&&(a[p]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const i=e.split("|"),a=i[0],o=i[1];t&&this.emit("failedLoading",a,o,t),!t&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{jr(c.loaded,[a],o),Pr(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,a*2,o)},a);return}o(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,t,l)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();F(e)&&(e=this.languageUtils.toResolveHierarchy(e)),F(t)&&(t=[t]);const a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${t}loading namespace ${a} for language ${i} failed`,o),!o&&l&&this.logger.log(`${t}loaded namespace ${a} for language ${i}`,l),this.loaded(e,o,l)})}saveMissing(e,t,r,i,a,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,t,r,i,c):d=u(e,t,r,i),d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}else u(e,t,r,i,l,c)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const us=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),F(n[1])&&(e.defaultValue=n[1]),F(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ds=n=>(F(n.ns)&&(n.ns=[n.ns]),F(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),F(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Ye=()=>{},Mr=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class De extends ut{constructor(e={},t){if(super(),this.options=ds(e),this.services={},this.logger=fe,this.modules={external:[]},Mr(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(F(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=us();this.options={...r,...this.options,...ds(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?fe.init(i(this.modules.logger),this.options):fe.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Ar;const d=new is(this.options);this.store=new ss(this.options.resources,this.options);const h=this.services;h.logger=fe,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new Tr(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=i(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Ir(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new _r(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(b,...g)=>{this.emit(b,...g)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new at(this.services,this.options),this.translator.on("*",(b,...g)=>{this.emit(b,...g)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Ye),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=Pe(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),t(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,t=Ye){let r=t;const i=F(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,t,r){const i=Pe();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Ye),this.services.backendConnector.reload(e,t,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&$s.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Pe();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),t&&t(l,(...u)=>this.t(...u))},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=F(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(F(l)?[l]:l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,d=>{a(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,t,r){const i=(a,o,...l)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([a,o].concat(l)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(a)?d=a.map(h=>`${c.keyPrefix}${u}${h}`):d=c.keyPrefix?`${c.keyPrefix}${u}${a}`:a,this.t(d,c)};return F(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const l=t.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,t){const r=Pe();return this.options.ns?(F(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Pe();F(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new is(us());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new De(e,t)}cloneInstance(e={},t=Ye){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new De(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});a.store=new ss(l,i),a.services.resourceStore=a.store}return a.translator=new at(a.services,i),a.translator.on("*",(l,...c)=>{a.emit(l,...c)}),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const G=De.createInstance();G.createInstance=De.createInstance;G.createInstance;G.dir;G.init;G.loadResources;G.reloadResources;G.use;G.changeLanguage;G.getFixedT;G.t;G.exists;G.setDefaultNamespace;G.hasLoadedNamespace;G.loadNamespaces;G.loadLanguages;var $r=function(e){return{type:"backend",init:function(r,i,a){},read:function(r,i,a){if(typeof e=="function"){if(e.length<3){try{var o=e(r,i);o&&typeof o.then=="function"?o.then(function(l){return a(null,l&&l.default||l)}).catch(a):a(null,o)}catch(l){a(l)}return}e(r,i,a);return}a(null,e&&e[r]&&e[r][i])}}};const Fr={en:{app:Rs,common:Ns}},Rt="clarin",Dr=Z.getInitialState().locale,Ur=Z.getInitialState().locales;function Hr(n,e){if(!n)return e;const t=typeof n=="string"?[n]:n;return[...t.map(i=>`${Rt}.${i}`),...t]}const Et=["app","common"],Vr=Hr(Et);function Xe(n){return typeof n=="string"||!Array.isArray(n)?[String(n)]:n}function zr(n,e,t,r){if(t?.postProcessTryPrefixedNamespacesFirst!==void 0)return n;const i=Xe(e),a=Xe(t.ns||r.options.defaultNS||[]),o=r.resolve(i,t),c=(o?.res!==void 0?[...Xe(t.ns||[]),o.usedNS]:[...Xe(t.ns||[]),...a]).map(d=>d.startsWith(Rt)?d:`${Rt}.${d}`),u=r.translate(i,{...t,ns:c,postProcessTryPrefixedNamespacesFirst:!0});return i.includes(u)?n:u}G.use(Gn).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:zr}).use($r((n,e)=>xr(Object.assign({"../locales/de/app.json":()=>de(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>de(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/textplus.app.json":()=>de(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>de(()=>import("./locales/en/default.js").then(r=>r.d),[],import.meta.url),"../locales/en/clarin.app.json":()=>de(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/clarin.common.json":()=>de(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/common.json":()=>de(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/querybuilder.json":()=>de(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/textplus.app.json":()=>de(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>de(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${n}/${e}.json`,4))).init({lng:Dr,fallbackLng:"en",supportedLngs:Ur,ns:Vr,defaultNS:Et,fallbackNS:Et,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Fr,partialBundledLanguages:!0,react:{nsMode:"fallback",transKeepBasicHtmlNodesFor:["br","strong","i","p","em","kbd"]}});G.addResourceBundle("en","clarin.app",jn);G.addResourceBundle("en","clarin.common",Sn);G.addResourceBundle("en","app",Rs);G.addResourceBundle("en","common",Ns);Object.assign(window,{i18n:G});const Br=["Emanuel Dima","Erik Körner","Leif-Jöran Olsson","Yana Panchenko","Oliver Schonefeld","Dieter Van Uytvanck"],qr=[{id:"dropwizard",name:"Dropwizard",url:"https://www.dropwizard.io/",license:"Apache License 2.0",licenseUrl:"https://github.com/dropwizard/dropwizard/blob/release/3.0.x/LICENSE",usage:"web server"},{id:"de.mpg.mpgaai:mpgaai-shhaa",name:"MPG-AAI - simple http header authn/z",url:"https://github.com/clarin-eric/mpgaai",license:"Apache License 2.0",licenseUrl:"http://www.apache.org/licenses/LICENSE-2.0.txt",usage:"AAI / Shibboleth support"},{id:"io.swagger.core.v3",name:"Swagger Core",url:"https://github.com/swagger-api/swagger-core",license:"Apache License 2.0",licenseUrl:"https://github.com/swagger-api/swagger-core/blob/master/LICENSE",usage:"REST API documentation"},{id:"org.glassfish.jersey",name:"Eclipse Jersey",url:"https://eclipse-ee4j.github.io/jersey/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/eclipse-ee4j/jersey/blob/2.x/LICENSE.md",usage:"RESTful web services"},{id:"org.slf4j",name:"Simple Logging Facade for Java (SLF4J)",url:"https://www.slf4j.org/",license:"MIT License",licenseUrl:"https://www.slf4j.org/license.html",usage:"logging"},{id:"org.junit",name:"JUnit 5",url:"https://junit.org/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/junit-team/junit-framework/blob/main/LICENSE.md",usage:"testing"},{id:"optimaize/language-detector",name:"Optimaize Language Detector",url:"https://github.com/optimaize/language-detector",license:"Apache License 2.0",licenseUrl:"https://github.com/optimaize/language-detector/blob/master/LICENSE",usage:"language detection of results"},{id:"org.apache.commons:commons-text",name:"Apache Commons Text",url:"https://commons.apache.org/proper/commons-text/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/commons-text/blob/master/LICENSE.txt",usage:"export format"},{id:"com.sun.xml.bind",name:"JAXB Reference Implementation",url:"https://eclipse-ee4j.github.io/jaxb-ri/",license:"Common Development and Distribution License (CCDL) 1.1",licenseUrl:"https://github.com/javaee/jaxb-v2/blob/2.3.0.1/jaxb-ri/License.txt",usage:"XML support",hide:!0},{id:"eu.clarin.weblicht:wlfxb",name:"Weblicht wlfxb",url:"https://weblicht.sfs.uni-tuebingen.de",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://github.com/weblicht/wlfxb/blob/master/LICENSE.txt",usage:"export format"},{id:"org.apache.poi:poi-ooxml",name:"Apache POI",url:"https://poi.apache.org/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/poi/blob/trunk/legal/LICENSE",usage:"export format"},{id:"org.jopendocument:jOpenDocument",name:"jOpenDocument",url:"https://www.jopendocument.org/",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://www.jopendocument.org/support.html",usage:"export format"},{id:"eu.clarin.sru:sru-client",name:"CLARIN SRU/CQL Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-sru-client/blob/main/LICENSE.txt",usage:"SRU / CQL client framework",hide:!0},{id:"eu.clarin.sru.fcs:fcs-simple-client",name:"CLARIN-FCS Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-simple-client/blob/main/LICENSE.txt",usage:"FCS client framework",hide:!0}],Kr=[{id:"react",name:"React",url:"https://react.dev/",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE"},{id:"react-dom",name:"ReactDOM",url:"https://react.dev/reference/react-dom",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE",hide:!0},{id:"react-router",name:"React Router",url:"https://reactrouter.com/",license:"MIT License",licenseUrl:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",usage:"single page application routing"},{id:"react-bootstrap",name:"React Bootstrap",url:"https://react-bootstrap.netlify.app/",license:"MIT License",licenseUrl:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE",usage:"react bindings for bootstrap"},{id:"bootstrap",name:"Bootstrap",url:"https://getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/bootstrap/blob/main/LICENSE",usage:"UI framework"},{id:"bootstrap-icons",name:"Bootstrap Icons",url:"https://icons.getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/icons/blob/main/LICENSE"},{id:"@tanstack/react-query",name:"TanStack Query",url:"https://tanstack.com/query",license:"MIT License",licenseUrl:"https://github.com/TanStack/query/blob/main/LICENSE",usage:"data loading via REST APIs"},{id:"axios",name:"Axios",url:"https://axios-http.com/",license:"MIT License",licenseUrl:"https://github.com/axios/axios/blob/v1.x/LICENSE",usage:"cross-browser support for REST API requests"},{id:"antlr4ng",name:"Next Generation TypeScript runtime for ANTLR4",url:"https://github.com/mike-lischke/antlr4ng",license:'The "BSD license"',licenseUrl:"https://github.com/mike-lischke/antlr4ng/blob/main/LICENSE.txt",usage:"query parser"},{id:"i18next",name:"i18next",url:"https://www.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next/blob/master/LICENSE",usage:"translations"},{id:"react-i18next",name:"react-i18next",url:"https://react.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/react-i18next/blob/master/LICENSE",usage:"translations",hide:!0},{id:"i18next-resources-to-backend",name:"i18next-resources-to-backend",url:"https://github.com/i18next/i18next-resources-to-backend",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next-resources-to-backend/blob/main/licence",usage:"translation resource loading",hide:!0},{id:"zustand",name:"Zustand",url:"https://zustand-demo.pmnd.rs/",license:"MIT License",licenseUrl:"https://github.com/pmndrs/zustand/blob/main/LICENSE",usage:"state management"},{id:"@nozbe/microfuzz",name:"microfuzz",url:"https://github.com/Nozbe/microfuzz",license:"MIT License",licenseUrl:"https://github.com/Nozbe/microfuzz/blob/main/LICENSE",usage:"fuzzy search"},{id:"react-helmet-async",name:"React Helmet (async fork)",url:"https://github.com/staylor/react-helmet-async",license:"Apache License 2.0",licenseUrl:"https://github.com/staylor/react-helmet-async/blob/main/LICENSE",usage:"HTML head modifications"},{id:"react-slugify",name:"react-slugify",url:"https://github.com/martpie/react-slugify",license:"MIT License",licenseUrl:"https://github.com/martpie/react-slugify/blob/master/LICENSE",usage:"jump id fragment generation"}];function Qr(){const{t:n}=se(),e="urls.termsUseAndDisclaimer",t=n(e,{ns:"common"}),r=t!==e,i=K.getState().matomoTrackingEnabled,a=K.getState().appTitleHead,o=ct();function l(c){return s.jsx("ul",{children:c.filter(u=>u.hide!==!0).map(u=>s.jsxs("li",{children:[u.url?s.jsx("a",{href:u.url,children:u.name}):s.jsx("span",{children:u.name}),u.license&&s.jsxs(s.Fragment,{children:[" ","(",u.licenseUrl?s.jsx("a",{href:u.licenseUrl,children:u.license}):s.jsx("span",{children:u.license}),")"]})]},u.id))})}return s.jsxs(s.Fragment,{children:[s.jsx(Ue,{children:s.jsxs("title",{children:[a," – About"]})}),s.jsxs(re,{className:"py-4",children:[s.jsx("h1",{className:"h1 mb-4",children:n("about.title")}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.people.title")}),s.jsx("p",{children:n("about.people.developedBy")}),s.jsx("ul",{children:Br.map(c=>s.jsx("li",{children:c},c))})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.statistics.title")}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"about.statistics.text",components:[s.jsx(nt,{to:{pathname:"/stats",search:o},children:"endpoint statistics"})]})})]}),(r||i)&&s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.privacyPolicy.title")}),r&&s.jsx("p",{children:s.jsx(ee,{i18nKey:"about.privacyPolicy.termsInfo",components:[s.jsx("a",{href:t,children:"clarin.eu"})]})}),i&&s.jsx("p",{children:s.jsx(ee,{i18nKey:"about.privacyPolicy.matomoInfo",components:[s.jsx("a",{href:"https://matomo.org/",children:"Matomo"})]})})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.sourceCode.title")}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"about.sourceCode.sourceInfo.text",components:[s.jsx("a",{href:n("about.sourceCode.sourceInfo.repoUrl"),children:"GitHub"}),s.jsx("a",{href:n("about.sourceCode.sourceInfo.licenseUrl"),children:"GPL 3.0 license"})]})}),s.jsx("p",{children:n("about.sourceCode.licenseInfo")})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.technology.title")}),s.jsx("p",{children:n("about.technology.backendUses")}),l(qr),s.jsx("p",{children:n("about.technology.frontendUses")}),l(Kr),s.jsx("p",{children:s.jsx(ee,{i18nKey:"about.technology.iconLicenseInfo",components:[s.jsx("a",{href:"http://www.freepik.com/",children:"Freepik"}),s.jsx("a",{href:"www.flaticon.com",children:"www.flaticon.com"}),s.jsx("a",{href:"http://creativecommons.org/licenses/by/3.0/",children:"CC BY 3.0"})]})})]})]})]})}const Fs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`,Tt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`;function Gr(){const{t:n}=se(),e=K.getState().appTitleHead;return s.jsxs(s.Fragment,{children:[s.jsx(Ue,{children:s.jsxs("title",{children:[e," – Help"]})}),s.jsxs(re,{className:"my-4",children:[s.jsx("h1",{className:"h1",children:n("help.title")}),s.jsx("h2",{className:"h2",id:"performing-a-fcs-search-in-resources",children:n("help.performSearch.title")}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.performSearch.textBasicSearch"})}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.performSearch.textAdvancedSearch",components:{iconMagicWand:s.jsx("i",{dangerouslySetInnerHTML:{__html:Tt},"aria-hidden":"true"})}})}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.performSearch.textLexicalSearch",components:{iconMagicWand:s.jsx("i",{dangerouslySetInnerHTML:{__html:Tt},"aria-hidden":"true"})}})}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.performSearch.textSearchProgress"})}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.performSearch.textViewResource",components:{iconEye:s.jsx("i",{dangerouslySetInnerHTML:{__html:Fs},"aria-hidden":"true"})}})}),s.jsx("h2",{className:"h2",id:"adjusting-search-criteria",children:n("help.adjustSearchCriteria.title")}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.adjustSearchCriteria.text"})}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.adjustSearchCriteria.textOtherSearchTypes"})}),s.jsx("h2",{className:"h2",id:"more-help",children:n("help.moreHelp.title")}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"help.moreHelp.text",components:[s.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),s.jsx("a",{title:"contact",href:n("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"})]})})]})]})}const Mt=f.createContext({resources:[],languages:{},weblichtLanguages:[]});Mt.displayName="AggregatorDataContext";function Wr({resources:n,languages:e,weblichtLanguages:t,children:r}){const i={resources:n,languages:e,weblichtLanguages:t};return s.jsx(Mt.Provider,{value:i,children:r})}function $t(){return f.useContext(Mt)}const Ft=f.createContext(void 0);Ft.displayName="AxiosContext";function Ie(){const n=f.useContext(Ft);if(!n)throw new Error('No "axios" instance set, use AxiosProvider to set one');return n}function Jr({axios:n,children:e}){return s.jsx(Ft.Provider,{value:n,children:e})}const Dt=f.createContext(void 0);Dt.displayName="SearchParamsContext";function Ut(){const n=f.useContext(Dt);if(!n)throw new Error('No "params" data set, use SearchParamsProvider to set one');return n}function Yr({language:n,languageFilter:e,queryType:t,query:r,resourceIDs:i,numberOfResults:a,children:o}){const l={language:n,languageFilter:e,queryType:t,query:r,resourceIDs:i,numberOfResults:a};return s.jsx(Dt.Provider,{value:l,children:o})}function Xr(n,e=0){let t=3735928559^e,r=1103547991^e;for(let i=0,a;i<n.length;i++)a=n.charCodeAt(i),t=Math.imul(t^a,2654435761),r=Math.imul(r^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}window._paq=window._paq||[];function Zr({siteId:n,trackerUrl:e,enableLinkTracking:t=!0,domains:r=[],userId:i=void 0}){window._paq.push(["setTrackerUrl",e]),window._paq.push(["setSiteId",n]),i&&window._paq.push(["setUserId",i]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),t&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function ei({srcUrl:n}){const e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.defer=!0,e.src=n,t&&t.parentNode&&t.parentNode.insertBefore(e,t)}function ti(n){if(!n)return!1;let e=null;if(typeof n=="string")try{e=JSON.parse(n)}catch(u){return console.error("Error trying to parse tracking params!",u),!1}else typeof n=="object"&&(e=n);const t=e.siteId,r=e.trackerUrl,i=e.srcUrl,a=e.domains,o=e.userId?.toString();if(i===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(t===void 0||!Number.isInteger(t))return console.warn('No "siteId" configuration set for tracking!'),!1;const l={siteId:t,trackerUrl:r,domains:a};o&&(l.userId=Xr(o).toString());const c={srcUrl:i};return Zr(l),Ds(document.location.href||window.location.href,document.title),ei(c),!0}function Ds(n,e,t){window._paq.push(["setDocumentTitle",e??document.title]),window._paq.push(["setCustomUrl",n]),t!==void 0&&window._paq.push(["setReferrerUrl",t]),window._paq.push(["trackPageView"])}function Us(n,e=!1,t=!1){window._paq.push(["trackSiteSearch",n,e,t])}const It="byMeta",si="all",Hs="resource",ni="title-up",pe="mul";function dt(n,e=void 0,t={}){return n===pe?t?.defaultAnyLanguage??"Any Language":e?.[n]||(t?.defaultUnknownLanguage??"Unknown Language")}function ri(n){const e=Z.getState().locale,t=a=>({...a,subResources:a.subResources.map(t)}),r=n.map(t),i=function(a,o){const l=V(a.institution,e)??"",c=V(o.institution,e)??"",u=l.localeCompare(c);if(u!==0)return u;const d=V(a.title,e)??"",h=V(o.title,e)??"";return d.toLowerCase().localeCompare(h.toLowerCase())};return Ee(r,a=>{a.subResources.sort(i)}),r.sort(i),r}function ii(n,e){const t=[],r=[],i=[];return Object.entries(e).forEach(([a,o])=>{o.forEach(l=>{let c=!1;Ee(n,u=>{u.handle===l&&(c=!0,i.push(u))}),c||(console.warn("Handle not found in resources",l),r.push(l))})}),Ee(i,a=>{t.push(a.id)}),{selected:t,unavailable:r}}function Ee(n,e){const t=(r,i)=>{e(r,i)===!1||r.subResources.forEach(t)};n.forEach(t)}function xe(n){const e=[];return Ee(n,t=>{e.push(t.id)}),e}function ai(n,e,t){const r=[],i=a=>Vs(a,i)||fi(a,e,t);return Ee(n,a=>{i(a)&&r.push(a.id)}),r}function oi(n,e){const t=Z.getState().locale,r=new Set;return Ee(n,i=>{if(e.includes(i.id)){const a=V(i.institution,t)??"";r.add(a)}return!0}),Array.from(r)}const li=["en","eng","de","deu"];function ci(n){if(n===null)return null;if(typeof n=="string")return n;for(const t of li)if(Object.hasOwn(n,t))return n[t];const e=Object.getOwnPropertyNames(n);return e.length>0?n[e[0]]:null}function ui(n,e){return n===null?null:typeof n=="string"?n:e&&Object.hasOwn(n,e)?n[e]:null}function V(n,e){e===void 0&&(e=Z.getState().locale);const t=ui(n,e);return t!==null?t:ci(n)}function ht(n,e="en"){const t=typeof n.title=="string"||n.title===null?[e]:Object.getOwnPropertyNames(n.title),r=typeof n.description=="string"||n.description===null?[e]:Object.getOwnPropertyNames(n.description),i=typeof n.institution=="string"||n.institution===null?[e]:Object.getOwnPropertyNames(n.institution),a=[...t,...r,...i];return Array.from(new Set(a))}function di(n,e){return!(e==="fcs"&&!n.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||e==="lex"&&!n.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function hi(n,e){return!!(e===pe||n.languages&&n.languages.length===1&&n.languages[0]===e||n.languages&&n.languages.indexOf(e)>=0)}function Vs(n,e){if(!n.subResources||n.subResources.length===0)return!1;let t=!1;const r=i=>{if(e?.(i)===!0){t=!0;return}i.subResources.forEach(r)};return n.subResources.forEach(r),t}function fi(n,e,t){return!(!di(n,e)||!hi(n,t))}const gi={"title-up":(n,e)=>{const t=Z.getState().locale,r=V(n.title,t)??"",i=V(e.title,t)??"";return r.localeCompare(i)},"title-down":(n,e)=>{const t=Z.getState().locale,r=V(n.title,t)??"",i=V(e.title,t)??"";return-r.localeCompare(i)},"institution-up":(n,e)=>{const t=Z.getState().locale,r=V(n.institution,t)??"",i=V(e.institution,t)??"",a=V(n.title,t)??"",o=V(e.title,t)??"",l=r.localeCompare(i);return l!==0?l:a.localeCompare(o)},"institution-down":(n,e)=>{const t=Z.getState().locale,r=V(n.institution,t)??"",i=V(e.institution,t)??"",a=V(n.title,t)??"",o=V(e.title,t)??"",l=-r.localeCompare(i);return l!==0?l:a.localeCompare(o)}};function zs(n,e){const[t,r]=f.useState(n);return f.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}function Ot(n,e,t=0,r=e){if(e===n&&e===r&&e.nodeType===Node.ELEMENT_NODE&&t===1)return e.nodeType,e.textContent?.length,e.textContent?.length||0;if(e===n||n===null)return t;const i=e.parentNode;if(i===null)return t;let a=0;const o=i.childNodes;for(let l=0;l<o.length;l++){const c=o[l];if(c===e)break;c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?a+=c.textContent?.length||0:console.warn("unknown node type",{container:n,node:e,offset:t,parent:i,i:l,child:c})}return Ot(n,i,a+t,r)}function Bs(n,e){const t=n.textContent?.length||0;if(t<e)return null;let r=0;const i=n.childNodes;for(let a=0;a<i.length;a++){const o=i[a];let l=0;if(o.nodeType===Node.TEXT_NODE||o.nodeType===Node.ELEMENT_NODE?l=o.textContent?.length||0:console.warn("unknown node type, skip",{container:n,offset:e,child:o}),!(l===0&&i.length!==1)&&(r+=l,r>=e)){const c=e-(r-l);return o.nodeType===Node.ELEMENT_NODE?Bs(o,c):{node:o,offset:c}}}return i.length,null}function kt(n,e){if(!e)return null;const t=Ot(n,e.startContainer,e.startOffset);if(e.startContainer.nodeType===Node.TEXT_NODE&&e.endContainer===e.startContainer)return[t,t+(e.endOffset-e.startOffset)];const r=Ot(n,e.endContainer,e.endOffset);return[t,r]}function pi(n,e){if(!(document.activeElement===n))return null;const r=window.getSelection();if(!r)return null;const i=document.createRange(),a=Bs(n,e);if(a)try{i.setStart(a.node,a.offset),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}catch(o){console.error("Error trying to set cursor!",o,{container:n,offset:e,startRange:a})}}function hs(n){if(!(document.activeElement===n))return null;const t=window.getSelection();if(!t||t.rangeCount===0)return null;const r=t.getRangeAt(0),i=kt(n,r);return i?i[0]:null}function mi(n){return n==="cql"?"fcs-cql":n==="fcs"?"fcs-fcsql":n==="lex"?"fcs-lexcql":"plain"}function At(n,e){const t=mi(e),r="match-braces rainbow-braces";let i=n;try{i=wn.highlight(n,t)}catch(o){console.warn("Error trying to highlight value",{value:n,error:o,language:t})}return`<pre><code class="language-${t} ${r}">${i}</code></pre>`}function _e(n){return n?(n=n.replace(/[\n\t]/g," "),n=n.replace(/&nbsp;|\u202F|\u00A0/g," "),n):""}const qs=sn.forwardRef(({value:n,onChange:e,onCursorChange:t,disabled:r,placeholder:i,queryType:a,delay:o=200,...l},c)=>{const u=f.useRef(null),d=f.useRef(null);f.useImperativeHandle(c,()=>d.current);const[h,p]=f.useState(_e(n)),[b,g]=f.useState(null),C=zs(h,o),[m,S]=f.useState(C);f.useEffect(()=>{const L=At(C,a);if(S(L),d.current){const k=hs(d.current);g(k)}},[C,a]),f.useEffect(()=>{const L=_e(n);if(C!==L&&(p(L),S(At(L)),d.current)){const k=hs(d.current);g(k)}},[n,C]),f.useLayoutEffect(()=>{d.current&&b!==null&&pi(d.current,b)});function x(L){const k=L.target.innerText;u.current&&(u.current.value=k),p(k),e?.(k)}function N(L){L.stopPropagation(),L.preventDefault();const _=(L.clipboardData||window.clipboardData).getData("text");E(_)}function I(L){L.key==="Enter"?(L.stopPropagation(),L.preventDefault(),u.current&&u.current.form?.requestSubmit()):L.key==="Backspace"?(L.stopPropagation(),L.preventDefault(),M()):L.key==="Delete"?(L.stopPropagation(),L.preventDefault(),D()):L.ctrlKey&&L.key==="a"||g(null)}function y(L=!1){if(!d.current||!t)return;const k=d.current;if(!(document.activeElement===k))return;const R=window.getSelection();if(!R||R.rangeCount===0)return;const v=[];for(let j=0;j<R.rangeCount;j++){const O=R.getRangeAt(j),U=kt(k,O);U&&v.push(U)}if(v.length===0)return;const[$,P]=v.pop();L?$===P&&(g($),t?.($)):t?.($,$!==P?P:void 0)}function w(L){if(!d.current)return null;const k=d.current;if(!(document.activeElement===k))return null;const R=window.getSelection();if(!R||R.rangeCount===0)return null;const v=[];for(let O=0;O<R.rangeCount;O++){const U=R.getRangeAt(O),Y=kt(k,U);Y&&v.push(Y)}if(v.length===0)return null;v.sort();const $=v.map(([O,U])=>U-O).reduce((O,U)=>O+U,0),P=k.innerText,j=v.toReversed().reduce((O,[U,Y])=>O.slice(0,U)+O.slice(Y),P);if(L==="backspace"){if($===0){const O=v.filter(([U,Y])=>U===Y).map(([,U])=>U).pop();if(O===0)return null;if(O!==void 0)return{value:j.slice(0,O-1)+j.slice(O),offset:O-1}}else{const O=v.map(([,U])=>U).pop();if(O!==void 0)return{value:j,offset:O-$}}return console.warn('invalid "backspace" process, abort',{container:k,selectionIndices:v,oldValue:P,newValueSpansRemoved:j,numDeleted:$}),null}else if(L==="delete"){if($===0){const O=v.filter(([U,Y])=>U===Y).map(([,U])=>U).pop();if(O!==void 0)return{value:j.slice(0,O)+j.slice(O+1),offset:O}}else{const O=v.map(([,U])=>U).pop();if(O!==void 0)return{value:j,offset:O-$}}return console.warn('invalid "delete" process, abort',{container:k,selectionIndices:v,oldValue:P,newValueSpansRemoved:j,numDeleted:$}),null}else if(L==="paste"){if($===0){const O=v.filter(([U,Y])=>U===Y).map(([U])=>U).shift();if(O!==void 0)return{value:j,offset:O}}else{const O=v.map(([U])=>U).shift();if(O!==void 0)return{value:j,offset:O}}return console.warn('invalid "paste" process, abort',{container:k,selectionIndices:v,oldValue:P,newValueSpansRemoved:j,numDeleted:$}),null}}function E(L){const k=w("paste");if(!k)return;const _=_e(L),{value:R,offset:v}=k,$=R.slice(0,v)+_+R.slice(v),P=v+L.length;p($),g(P),u.current&&(u.current.value=$),e?.($),t?.(P)}function M(){const L=w("backspace");if(!L)return;const{value:k,offset:_}=L,R=_e(k);p(R),g(_),u.current&&(u.current.value=R),e?.(R),t?.(_)}function D(){const L=w("delete");if(!L)return;const{value:k,offset:_}=L,R=_e(k);p(R),g(_),u.current&&(u.current.value=R),e?.(R),t?.(_)}return s.jsxs(s.Fragment,{children:[s.jsx("div",{role:"input",disabled:r,placeholder:i,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...l,onInput:x,onPaste:N,onKeyDown:I,onKeyUp:()=>y(),onClick:()=>y(!0),tabIndex:r?-1:l.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:m},ref:d}),i&&n===""&&s.jsx("span",{className:"input-placeholder-simulacrum",children:i}),s.jsx("input",{type:"hidden",ref:u})]})});qs.displayName="ContentEditable";var oe=nn();function xi({show:n,languages:e,resources:t,searchLanguage:r,searchLanguageFilter:i,onModalClose:a}){const{t:o}=se(),[l,c]=f.useState(r||pe),[u,d]=f.useState(i||It),[h,p]=f.useState(""),[b,g]=f.useState(!1),C=f.useMemo(()=>{const w=new Map;return t&&(t.forEach(E=>E.languages.forEach(M=>w.set(M,(w.get(M)??0)+1))),w.set(pe,t.length)),w},[t]),m=oe.useFuzzySearchList({list:Object.entries(e??{}).toSorted(),queryText:h,getText:w=>[w[0],w[1]],mapResultItem:({item:w,score:E,matches:M})=>({item:w,matches:M,score:E})});if(!e)return null;const S=Math.floor((m.length+2)/3);function x(w){a({language:l,filter:u,action:w})}function N(){c(r||pe),d(i||It)}function I(){g(w=>!w)}function y(w,E,M,D){const L=l===w;let k="d-block py-0 my-1 border-0";return L&&(k+=" fw-semibold selected"),M===void 0&&(M=[null,null]),s.jsxs(Q,{size:"sm",className:k,style:{color:`var(${L?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>c(w),"data-filter-score":D,children:[L&&s.jsx("span",{className:"selected-marker me-1",children:"✓"}),s.jsx(oe.Highlight,{ranges:M[1],text:E})," ",s.jsx("sup",{children:s.jsx(oe.Highlight,{ranges:M[0],text:w})}),b&&C.has(w)&&s.jsxs(s.Fragment,{children:[" (",C.get(w),")"]})]},w)}return s.jsxs(W,{show:n,onHide:()=>x("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:o("search.languagesModal.title")})}),s.jsxs(W.Body,{className:"px-0",children:[s.jsxs(re,{className:"px-4 pb-3 border-bottom",children:[s.jsxs(J,{children:[s.jsx(H,{sm:!0}),s.jsx(H,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:y(pe,o("languageCodeToName.any",{ns:"common"}))}),s.jsxs(H,{sm:!0,children:[s.jsx(B.Control,{size:"sm",placeholder:o("search.languagesModal.filterInputPlaceholder"),name:"languages-filter",value:h,onChange:w=>p(w.target.value)}),t&&s.jsx(B.Check,{name:"languages-show-count",id:"languages-show-count",checked:b,onChange:I,type:"checkbox",label:o("search.languagesModal.checkboxShowNumberOfResources"),className:"mt-1"})]})]}),s.jsxs(J,{children:[s.jsx(H,{sm:!0,children:m.slice(0,S).map(({item:[w,E],matches:M,score:D})=>y(w,E,M,D))}),s.jsx(H,{sm:!0,children:m.slice(S,2*S).map(({item:[w,E],matches:M,score:D})=>y(w,E,M,D))}),s.jsx(H,{sm:!0,children:m.slice(2*S).map(({item:[w,E],matches:M,score:D})=>y(w,E,M,D))})]})]}),s.jsx(B,{children:s.jsx(re,{className:"px-4 pt-3",children:["byMeta","byGuess","byMetaAndGuess"].map(w=>s.jsx(B.Check,{type:"radio",name:"filterOpts",value:w,id:`filterOpts-${w}`,checked:u===w,onChange:()=>d(w),label:o(`search.languagesModal.optionLanguage${w}`)},w))})})]}),s.jsxs(W.Footer,{children:[s.jsx(Q,{variant:"secondary",onClick:N,children:o("search.languagesModal.buttonReset")}),s.jsx(Q,{variant:"secondary",onClick:()=>x("abort"),children:o("search.languagesModal.buttonAbort")}),s.jsx(Q,{variant:"primary",onClick:()=>x("confirm"),children:o("search.languagesModal.buttonConfirm")})]})]})}const Ht=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],st=Object.fromEntries(["cql","fcs","lex"].map(n=>[n,Ht.find(e=>e.id===n)])),fs=["fcs","lex"],bi=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],yi="cql",Ze=[10,20,50,100,200,250],Se="info:srw/diagnostic/1/61",ji=[{queryType:"cql",query:"Elephant",description:"Query with single term"},{queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb'},{queryType:"lex",query:"apple",description:"Search for plain string"}];function Si({show:n,queryTypes:e,onModalClose:t}){const r=e&&e.length>0?e:["cql","fcs","lex"],i=ji.filter(c=>r.includes(c.queryType));if(i.length===0)return a("abort"),null;function a(c){t({query:void 0,queryType:void 0,action:c})}function o(c,u){t({query:c,queryType:u,action:"confirm"})}function l(c,u,d,h){return s.jsxs(J,{children:[s.jsx(H,{md:"auto",className:"d-none d-md-block",children:h&&`${h}.`}),s.jsxs(H,{className:"d-flex flex-column",children:[d!==void 0&&s.jsx("div",{children:d}),s.jsx("div",{dangerouslySetInnerHTML:{__html:At(c,u)}})]}),s.jsx(H,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:s.jsx(Q,{size:"sm",onClick:()=>o(c,u),children:"Use Query"})})]},c)}return s.jsxs(W,{id:"search-query-suggestions-modal",show:n,onHide:()=>a("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:"Search Query Suggestions"})}),s.jsx(W.Body,{className:"px-0",children:s.jsx(re,{fluid:!0,children:r.map(c=>{const u=i.filter(d=>d.queryType===c);return u.length===0?null:s.jsxs(f.Fragment,{children:[s.jsx(J,{children:s.jsx(H,{children:s.jsx("h4",{className:"border-bottom pb-2",children:st[c]?.name??c.toUpperCase()})})}),u.map((d,h)=>l(d.query,d.queryType,d.description,h+1))]},c)})})}),s.jsx(W.Footer,{children:s.jsx(Q,{variant:"primary",onClick:()=>a("close"),children:"Close"})})]})}function Ks({disabled:n,value:e,onChange:t,delay:r=300}){const[i,a]=f.useState(e??""),o=zs(i,r);return f.useEffect(()=>{t(o)},[t,o]),s.jsx(B.Control,{type:"search",placeholder:"Search for ...",value:i,onChange:l=>a(l.target.value),disabled:n})}const ft=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,Qs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`;function Vt({resource:n,selectedResourceIDs:e,highlighting:t,shouldBeShown:r,localeForInfos:i,onSelectClick:a,languageCodeToName:o}){const{t:l}=se(),[c,u]=f.useState(!1),[d,h]=f.useState(!1);t===void 0&&(t=[null,null,null]);const p=e.includes(n.id),b=ht(n),g=we(y=>y.locale),[C,m]=f.useState(g);if(f.useEffect(()=>{g&&m(g)},[g]),f.useEffect(()=>{i&&m(i)},[i]),typeof r=="function"&&!r(n))return null;if(r===!1)return null;const S=typeof r=="function"?n.subResources.some(y=>r(y)):!0;function x(){c&&document.getSelection()?.type==="Range"||u(y=>!y)}function N(){a(n,!p)}function I(){h(y=>!y)}return s.jsxs(s.Fragment,{children:[s.jsxs(J,{className:`p-2 m-1 ${c&&"border-bottom"}`,children:[s.jsx(H,{md:"auto",sm:1,onClick:N,children:s.jsx(B.Check,{id:`resource-selection-${n.id}`,"aria-label":`Checkbox for resource: ${n.title}`,children:s.jsx(B.Check.Input,{checked:p,onChange:()=>{}})})}),s.jsxs(H,{md:8,sm:11,className:`mb-sm-2 ${c?"":"text-truncate"}`,onClick:x,children:[s.jsxs("h4",{className:`h5 ${c?"":"text-truncate"}`,children:[s.jsx(oe.Highlight,{text:V(n.title,C)??"",ranges:t[0]})," ",n.landingPage&&s.jsx("small",{children:s.jsxs("a",{href:n.landingPage,className:"matomo_link",target:"_blank",children:[l("search.resourcesModal.resource.moreInformation")," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:Qs}})]})})]}),s.jsx("p",{className:`mb-0 ${c?"":"text-truncate"}`,children:V(n.description,C)&&s.jsx(oe.Highlight,{text:V(n.description,C)??"",ranges:t[2]})})]}),s.jsxs(H,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${c?"":" text-truncate"}`,onClick:x,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ft}})," ",s.jsx(oe.Highlight,{text:V(n.institution,C)??"",ranges:t[1]}),s.jsx("br",{}),s.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",n.languages.map(o).sort().join(", "),c&&b.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx(lt,{type:"radio",name:`resources-${n.id}-info-languages`,defaultValue:C,onChange:y=>m(y),onClick:y=>y.stopPropagation(),className:"mt-2",children:b.toSorted().map(y=>s.jsx(Ve,{variant:"outline-secondary",size:"sm",id:`resources-${n.id}-info-languages-${y}`,value:y,type:"radio",children:y},y))})]})]}),S&&n.subResources.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-100"}),s.jsx(H,{md:"auto",sm:1,style:{width:"2.8rem"}}),s.jsx(H,{md:{span:8,offset:0},sm:{span:11,offset:1},children:s.jsx(Q,{variant:"link",size:"sm",className:"ps-0",onClick:I,children:l("search.resourcesModal.resource.toggleExpand",{context:d?"collapse":"expand",count:n.subResources.length})})})]})]}),S&&d&&s.jsx(ne,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:n.subResources.map(y=>s.jsx(Vt,{resource:y,selectedResourceIDs:e,shouldBeShown:r,onSelectClick:a,languageCodeToName:o},y.id))})]})}function gs({title:n,resources:e,selectedResourceIDs:t,isResourceRoot:r,expanded:i,shouldBeShown:a,localeForInfos:o,onSelectClick:l,onExpandToggleClick:c,onSelectAllClick:u,onDeselectAllClick:d,languageCodeToName:h}){const{t:p}=se(),[b,g]=f.useState(i);f.useEffect(()=>{g(i)},[i]);function C(){g(S=>!S),c(!b)}function m(){const S=e.filter(r??(()=>!0)),x=xe(S).length,N=S.length,I=xe(S).filter(y=>t.includes(y)).length;return p("search.resourcesModal.grouped.msgResources",{count:N,nested:x-N,context:x-N?"nested":null})+(I!==x?p("search.resourcesModal.grouped.msgResourcesSelected",{count:I}):"")}return s.jsxs(re,{className:"border-bottom pb-2 mb-4 px-0",children:[s.jsxs(J,{className:"px-3",children:[s.jsx(H,{md:9,sm:12,children:s.jsx("h3",{children:n})}),s.jsxs(H,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:[s.jsx(Q,{size:"sm",variant:"secondary",onClick:C,"aria-expanded":b,children:p("search.resourcesModal.grouped.buttonExpand",{context:b?"hide":"show"})}),s.jsx(Q,{size:"sm",onClick:()=>u(e),children:p("search.resourcesModal.grouped.buttonSelectAll")}),s.jsx(Q,{size:"sm",onClick:()=>d(e),children:p("search.resourcesModal.grouped.buttonDeselectAll")})]})]}),s.jsx(J,{className:"px-3",children:s.jsx(H,{children:m()})}),s.jsx(Ls,{in:b,children:s.jsx(re,{children:e.filter(r??(()=>!0)).map(S=>s.jsx(Vt,{resource:S,selectedResourceIDs:t,shouldBeShown:a,onSelectClick:l,languageCodeToName:h,localeForInfos:o},S.id))})})]})}function wi({show:n,showGrouping:e,resources:t,languages:r,availableResources:i,selectedResources:a,onModalClose:o}){const{t:l}=se(),c=we(T=>T.locale),[u,d]=f.useState(c);f.useEffect(()=>{c&&d(c)},[c]);const h=new Intl.DisplayNames([c,"en"],{type:"language"}),[p,b]=f.useState(a||i),[g,C]=f.useState(si),[m,S]=f.useState(Hs),[x,N]=f.useState(ni),[I,y]=f.useState(""),[w,E]=f.useState({}),[M,D]=f.useState({});f.useEffect(()=>{e&&S(e)},[n,e]),f.useEffect(()=>b(a),[a]);const L=t.map(T=>T.subResources.map(q=>q.id)).flat(),k=t.filter(T=>i.includes(T.id)).toSorted(gi[x]),R=k.map(T=>ht(T)).flat().reduce((T,q)=>T.set(q,(T.get(q)??0)+1),new Map),v=oe.useFuzzySearchList({list:k,queryText:m==="resource"?I:"",getText:T=>[V(T.title,u),V(T.institution,u),V(T.description,u)],mapResultItem:({item:T,score:q,matches:te})=>({item:T,matches:te,score:q})});if(f.useMemo(()=>{const T={},q={};t.forEach(te=>{const ce=V(te.institution,u)??"";Object.getOwnPropertyNames(T).includes(ce)||(T[ce]={expanded:!0,resources:[]}),T[ce].resources.push(te),te.languages.forEach(Ce=>{Object.getOwnPropertyNames(q).includes(Ce)||(q[Ce]={expanded:!0,resources:[]}),q[Ce].resources.push(te)})}),E(T),D(q)},[t,u]),!t)return null;const $={total:xe(t).length,totalRoot:t.length,available:i.length,selected:p.length,visible:xe(v.map(T=>T.item)).length,visibleRoot:v.length};function P(T){return dt(T,r,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})}function j(T,q){const te=p.filter(ce=>!T.includes(ce));b(q?[...te,...T]:te)}function O(T){o({resourceIDs:p,action:T})}function U(T){C(T.target.value)}function Y(T){S(T.target.value)}function X(T){N(T.target.value)}function le(){b(i)}function he(){b([])}function me(){b(v.map(T=>T.item.id))}function Oe(T,q){j(xe([T]),q)}function Ke(T){j(xe(T),!0)}function Qe(T){j(xe(T),!1)}function Le(T){return!L.includes(T.id)}function ke(T){return!(!i.includes(T.id)||g==="selected"&&!p.includes(T.id)&&!Vs(T,q=>p.includes(q.id)))}function pt(){return m==="institution"?Object.entries(w).toSorted().map(([T,{expanded:q,resources:te}])=>s.jsx(gs,{title:s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ft}})," ",T]}),resources:te,selectedResourceIDs:p,isResourceRoot:Le,expanded:q,shouldBeShown:ke,onSelectAllClick:Ke,onExpandToggleClick:ce=>{E({...w,[T]:{...w[T],expanded:ce}})},onDeselectAllClick:Qe,onSelectClick:Oe,languageCodeToName:P,localeForInfos:u},T)):m==="language"?Object.entries(M).toSorted().map(([T,{expanded:q,resources:te}])=>s.jsx(gs,{title:s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:qe}})," ",P(T)," [",T,"]"]}),resources:te,selectedResourceIDs:p,isResourceRoot:Le,expanded:q,shouldBeShown:ke,onSelectAllClick:Ke,onExpandToggleClick:ce=>M[T].expanded=ce,onDeselectAllClick:Qe,onSelectClick:Oe,languageCodeToName:P,localeForInfos:u},T)):v.filter(({item:T})=>I===""?Le!==void 0&&Le(T):!0).map(({item:T,matches:q})=>s.jsx(Vt,{resource:T,selectedResourceIDs:p,highlighting:q,shouldBeShown:ke,onSelectClick:Oe,languageCodeToName:P,localeForInfos:u},T.id))}return s.jsxs(W,{id:"resource-selection-modal",show:n,onHide:()=>O("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:l("search.resourcesModal.title")})}),s.jsxs(W.Body,{className:"px-0",children:[s.jsx(B,{className:"px-3 pb-3 border-bottom",onSubmit:T=>T.preventDefault(),children:s.jsxs(re,{children:[s.jsxs(J,{className:"d-sm-flex row-gap-2 justify-content-around",children:[s.jsx(H,{md:2,sm:6,children:s.jsx(be,{label:"View",controlId:"resource-view-options-visibility",children:s.jsxs(B.Select,{value:g,onChange:U,children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"selected",children:"Selected only"})]})})}),s.jsx(H,{md:2,sm:6,children:s.jsx(be,{label:"Group by",controlId:"resource-view-options-grouping",children:s.jsxs(B.Select,{value:m,onChange:Y,children:[s.jsx("option",{value:"resource",children:"(Resource)"}),s.jsx("option",{value:"institution",children:"Institution"}),s.jsx("option",{value:"language",children:"Language"})]})})}),s.jsx(H,{md:2,sm:6,children:s.jsx(be,{label:"Sort by",controlId:"resource-view-options-sorting",children:s.jsxs(B.Select,{value:x,onChange:X,disabled:m!=="resource"||I.trim()!=="",children:[s.jsx("option",{value:"title-up",children:"Title (up)"}),s.jsx("option",{value:"title-down",children:"Title (down)"}),s.jsx("option",{value:"institution-up",children:"Institution (up)"}),s.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),s.jsx(H,{md:3,sm:12,children:s.jsx(be,{label:"Resource filter query",controlId:"resource-view-options-filter",children:s.jsx(Ks,{disabled:m!=="resource",value:I,onChange:T=>y(T)})})}),s.jsxs(H,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[s.jsx(Q,{onClick:le,children:"Select all"}),s.jsx(Q,{onClick:me,disabled:g!=="all"||I.trim()==="",children:"Select visible"}),s.jsx(Q,{onClick:he,children:"Deselect all"})]})]}),R.size>1&&s.jsxs(B.Group,{as:J,controlId:"resource-info-language",className:"mt-2",children:[s.jsx(B.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:l("search.resourcesModal.labelChangeResourceInfoLanguage")}),s.jsx(H,{sm:"auto",children:s.jsx(lt,{type:"radio",name:"resource-info-languages",defaultValue:u,onChange:T=>d(T),children:Array.from(R.entries()).toSorted().map(([T,q])=>s.jsxs(Ve,{size:"sm",id:`resource-info-languages-${T}`,value:T,variant:"secondary",title:l("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:q,language:T,languageName:h.of(T)}),children:[h.of(T)," ",s.jsx("sup",{children:T})]},T))})})]})]})}),s.jsx("p",{className:"m-4 mb-0",children:l("search.resourcesModal.msgResourcesSelected",{count:$.selected,total:$.visible,available:$.available,context:$.available!==$.visible?"available":null})}),s.jsx(re,{className:"px-3 pt-3",children:pt()})]}),s.jsx(W.Footer,{children:s.jsx(Q,{variant:"primary",onClick:()=>O("confirm"),children:l("search.resourcesModal.buttonConfirm")})})]})}function vi(){const[n,e]=f.useState(!1);return[n,()=>{n!==!0&&e(!0)}]}const Li=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,et=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,Ci=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,Ni=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,Ri=f.lazy(()=>de(()=>import("./fcs-sru-aggregator-ui-query-builder-0.0.0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function ps(n,e=""){const t=n.get("query");return t||e}function ms(n,e="cql"){const t=n.get("queryType");if(t){if(Ht.find(r=>r.id===t)!==void 0)return t;console.warn("Found unsupported queryType in search params",t)}return e}function Ei({resources:n,languages:e,onSearch:t,availableResources:r=null,selectedResources:i=null,hasSearch:a=!1,disabled:o=!1}){const{t:l}=se(),[c,u]=ot(),[d,h]=f.useState(!1),[p,b]=f.useState(Hs),[g,C]=f.useState(!1),[m,S]=f.useState(!1),[x,N]=f.useState(!1),[I,y]=vi(),[w,E]=f.useState(pe),[M,D]=f.useState(It),[L,k]=f.useState(ms(c,yi)),[_,R]=f.useState(r??[]),[v,$]=f.useState(i??[]),[P,j]=f.useState(Ze[0]),[O,U]=f.useState(ps(c,"")),[Y]=f.useState(null),[X,le]=f.useState(!1);f.useEffect(()=>{$(i??[])},[i]);const he=f.useCallback(A=>{const z=ai(A,L,M==="byGuess"?pe:w);return r&&r.length>0?z.filter(ue=>r.includes(ue)):z},[L,w,M,r]);f.useEffect(()=>{const A=he(n);R(A),$(z=>z.filter(ue=>A.includes(ue)))},[n,he]);const me=f.useCallback(()=>{const A={language:w,languageFilter:M,queryType:L,query:O,resourceIDs:v??[],numberOfResults:P};A.query!==""&&A.resourceIDs.length!==0&&t(A)},[w,M,P,t,O,L,v]);f.useEffect(()=>{if(c&&(U(z=>ps(c,z)),k(z=>ms(c,z)),!c.get("x-aggregation-context"))){const z=c.get("mode");z&&(z==="search"&&me(),u(ue=>(ue.delete("mode"),ue)))}},[c,u,me]),f.useEffect(()=>u(A=>(A.set("query",O),A)),[O,u]),f.useEffect(()=>u(A=>(A.set("queryType",L),A)),[L,u]);const Oe=oi(n,v??[]).length,Ke=n.find(A=>A.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,Qe=n.find(A=>A.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,Le=fs.includes(L);function ke(A){A&&k(A)}function pt(A){let z=Number.parseInt(A.target.value);z<10&&(z=10),z>250&&(z=250),Ze.includes(z)||console.warn("Invalid number of results?!",{valid:Ze,value:z}),j(z)}function T({language:A,filter:z,action:ue}){C(!1),ue!=="abort"&&(E(A),D(z))}function q({resourceIDs:A,action:z}){h(!1),z!=="abort"&&$(A)}function te({query:A,queryType:z,action:ue}){S(!1),ue!=="abort"&&ue!=="close"&&(!A||!z||(k(z),U(A)))}function ce({query:A,action:z}){N(!1),z!=="abort"&&z!=="close"&&U(A)}function Ce(A){U(A)}function Zs(A){A.preventDefault(),me()}function en(){const A=(v??[]).length,z=n.length===A||_.length===A?"all":null;return l("search.searchInput.buttonSelectedResources",{count:A,context:z})}return s.jsxs("search",{id:"fcs-query",children:[s.jsxs(B,{noValidate:!0,onSubmit:Zs,children:[s.jsxs(bn,{size:a?void 0:"lg",hasValidation:!0,children:[s.jsx(Q,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":l("search.searchInput.buttonOpenQuerySuggestions"),onClick:()=>S(!0),children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Li},"aria-hidden":"true"})}),s.jsx(B.Control,{placeholder:"Elephant","aria-label":l("search.searchInput.inputQueryAriaLabel"),"aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:o,"aria-disabled":o,value:O,isInvalid:!!Y,...X?{as:qs,queryType:L,onChange:Ce}:{onChange:A=>Ce(A.target.value)}}),Le&&s.jsx(Q,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":l("search.searchInput.buttonOpenQueryBuilderAriaLabel"),className:"border-end-0 d-none d-md-block",onClick:()=>{y(),N(!0)},children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Tt},"aria-hidden":"true"})}),s.jsx(Ve,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:X,onChange:()=>le(A=>!A),variant:"outline-secondary","aria-label":l("search.searchInput.buttonEnhanceQueryAriaLabel"),className:"d-flex align-items-center border-end-0",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Ci},"aria-hidden":"true"})}),s.jsxs(Q,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:o||O.trim().length===0,"aria-disabled":o,"aria-label":l("search.searchInput.buttonSearchAriaLabel"),children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ni},"aria-hidden":"true",className:"d-inline d-md-none"}),s.jsx("span",{className:"d-none d-md-inline",children:l("search.searchInput.buttonSearch")})]}),s.jsx(B.Control.Feedback,{type:"invalid",children:Y?.msg})]}),s.jsx("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:s.jsx(ee,{i18nKey:"search.searchInput.filtersSummary",components:[s.jsxs(ye,{className:"d-inline-block",onSelect:ke,"aria-disabled":o,"aria-label":l("search.searchInput.dropdownQueryTypeAriaLabel"),children:[s.jsxs(ye.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:o,"aria-disabled":o,style:st[L]?{"--color":st[L].color}:{},children:[l(`queryTypes.${L}.nameShort`,{ns:"common",defaultValue:st[L]?.searchLabel||"???"})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})]}),s.jsx(ye.Menu,{children:Ht.filter(A=>A.id==="cql"||A.id==="fcs"&&Ke||A.id==="lex"&&Qe).map(A=>s.jsx(ye.Item,{as:"button",eventKey:A.id,onClick:z=>z.preventDefault(),style:{"--color":A.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:l(`queryTypes.${A.id}.nameLong`,{ns:"common",defaultValue:A.name})},A.id))})]}),s.jsxs(Q,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{b("resource"),h(!0)},children:[en()," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})]}),s.jsxs(Q,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{b("institution"),h(!0)},children:[l("search.searchInput.buttonSelectedInstitutions",{count:Oe})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})]}),s.jsxs(Q,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>C(!0),disabled:o,"aria-disabled":o,children:[dt(w,e??{},{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:et},"aria-hidden":"true"})]}),s.jsx(B.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:pt,value:P,"aria-label":l("search.searchInput.selectNumberOfSearchResultsAriaLabel"),disabled:o,"aria-disabled":o,children:Ze.map(A=>s.jsx("option",{value:A,children:A},A))})]})})]}),s.jsx(xi,{languages:e,resources:n,searchLanguage:w,show:g,onModalClose:T}),s.jsx(wi,{resources:n,languages:e,availableResources:_,selectedResources:v??[],show:d,showGrouping:p,onModalClose:q}),s.jsx(Si,{queryTypes:[L],show:m,onModalClose:te}),fs.includes(L)&&I&&s.jsx(f.Suspense,{fallback:s.jsx(s.Fragment,{children:l("loading",{ns:"querybuilder"})}),children:s.jsx(Ri,{query:O,queryType:L,resources:n,selectedResources:v,show:x,onModalClose:ce})})]})}const Ti=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`;function Ii({searchId:n,resourceId:e,numberOfResults:t,pollDelay:r=1500}){const i=Ie(),a=js(),[o,l]=f.useState(!1),{isPending:c,mutate:u,reset:d}=Ss({mutationFn:tr.bind(null,i,n,{resourceId:e,numberOfResults:t}),mutationKey:["search-result-load-more",n,e],onSuccess:async x=>{x!==void 0&&n!==x&&console.warn("SearchIDs should be the same?!",{searchId:n,searchIdNewButSame:x,resourceId:e}),await a.invalidateQueries({queryKey:["search-results",n,e]}),l(!0)}});r??=1500;const{data:h,isLoading:p,isFetching:b}=He({queryKey:["search-results",n,e],queryFn:nr.bind(null,i,n,e),enabled:o,refetchInterval(x){return x.state.data&&x.state.data.inProgress?r:!1}}),g=c||p||b,C=!!h&&!h.inProgress,m=g||o;o&&C&&(o&&l(!1),a.invalidateQueries({queryKey:["search-result-details",n,e]}));async function S(){d(),u()}return s.jsx(Q,{className:"more-results-button",disabled:m,onClick:S,children:m?s.jsx(Cs,{animation:"border",className:"d-block"}):s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ti}})," Load more results"]})})}const gt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`;function Gs({data:n}){const e=f.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs(Pt,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Left Context"}),s.jsx("th",{scope:"col",children:"Hit"}),s.jsx("th",{scope:"col",children:"Right Context"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:gt}})})," ",t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.left}),s.jsx("td",{children:t.keyword&&s.jsx("mark",{children:s.jsx("strong",{children:t.keyword})})}),s.jsx("td",{children:t.right})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Ws({data:n}){const e=f.useRef(null);return s.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[n.lexEntries.map((t,r)=>s.jsx(ne,{className:"flex-grow-1",children:s.jsxs(ne.Body,{children:[s.jsx(ne.Title,{children:t.fields.filter(i=>i.type==="lemma").map(i=>i.values).flat(1).map(i=>s.jsx("span",{children:i.value}))}),s.jsxs(mt,{variant:"flush",children:[(t.lang||t.langUri)&&s.jsxs(mt.Item,{children:[s.jsx("strong",{children:"lang"}),": ",t.lang," ",t.langUri]}),t.fields.filter(i=>i.type!=="lemma").map(i=>s.jsxs(mt.Item,{children:[s.jsx("strong",{children:i.type}),":",i.values.map((a,o)=>s.jsx("span",{className:"ms-2 lex-value",children:a.value},o))]},i.type))]}),s.jsx(ne.Link,{children:t.reference&&s.jsxs("a",{href:t.reference,className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:gt}})," Original results ..."]})}),s.jsx(ne.Link,{children:t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${t.pid??t.reference??n.resource.id}-${r}`)),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Js({data:n}){const e=f.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs(Pt,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Result with Hit"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:gt}})})," ",t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.fragments.map((i,a)=>i.hit&&!i.hitKind?s.jsx("mark",{children:s.jsx("strong",{children:i.text})},a):i.hit&&i.hitKind?s.jsx("span",{className:`lex-hitkind-${i.hitKind}`,title:`Annotated as "${i.hitKind.split("-").slice(1).join("-")}"`,children:i.text},a):s.jsx("span",{children:i.text},a))})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Ys({data:n}){const e=f.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs(Pt,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Result with Hit"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:gt}})})," ",t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(ze,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(ve,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.fragments.map((i,a)=>i.hit&&!i.hitKind?s.jsx("mark",{children:s.jsx("strong",{children:i.text})},a):s.jsx("span",{children:i.text},a))})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}const Oi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,ki=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,Xs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`;function Ai({show:n,searchId:e,resourceId:t,result:r,viewMode:i,showDiagnostics:a,onModalClose:o}){const l=Ie(),{t:c}=se(),u=we(v=>v.locale),{languages:d,weblichtLanguages:h}=$t(),{numberOfResults:p,queryType:b,language:g,languageFilter:C}=Ut(),[m,S]=f.useState(u);f.useEffect(()=>{u&&S(u)},[u]);const[x,N]=f.useState(a);f.useEffect(()=>N(a),[a]);const[I,y]=f.useState(i);f.useEffect(()=>y(i),[i]);const w=ht(r.resource),E=r.exception||r.diagnostics?.filter(v=>v.uri!==Se).length>0;function M(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.kwics.length,!0)}let D=null,L=!1;if(!h.includes(g)){if(g===pe)if(r.resource.languages&&r.resource.languages.length===1)D=r.resource.languages[0];else{const v=[...new Set(r.kwics.map($=>$.language).filter($=>$!==null))];v.length===1&&(D=v[0])}D||(console.warn("Cannot use WebLicht: unsupported language",{language:g,languageFilter:C}),L=!0)}function k(v){y(v.target.value)}function _(){return r?I==="kwic"&&(b!=="lex"||!r.isLexHits)?s.jsx(Gs,{data:r}):I==="lexical-entry"?s.jsx(Ws,{data:r}):b==="lex"&&r.isLexHits?s.jsx(Js,{data:r}):s.jsx(Ys,{data:r}):null}function R(){return s.jsxs(s.Fragment,{children:["Showing ",s.jsx("strong",{children:r.kwics.length}),M()?s.jsxs(s.Fragment,{children:[" / ",s.jsx("strong",{children:r.numberOfRecords})]}):""," ","results."]})}return s.jsxs(W,{show:n,onHide:()=>o(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[s.jsx(W.Header,{closeButton:!0,children:s.jsx(W.Title,{children:V(r.resource.title,m)})}),s.jsxs(W.Body,{className:"resource-info",children:[s.jsxs("dl",{className:"mb-0","aria-label":"Resource information",children:[s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ft}}),s.jsx("span",{children:" Institution"})]}),s.jsx("dd",{className:"mb-0",children:V(r.resource.institution,m)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Xs}}),s.jsx("span",{children:" Description"})]}),V(r.resource.description,m)&&s.jsxs(s.Fragment,{children:[s.jsx("dd",{className:"mb-0",children:V(r.resource.description,m)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:qe}}),s.jsx("span",{children:" Languages"})]})]}),s.jsx("dd",{className:"mb-0",children:r.resource.languages.map(d?v=>dt(v,d,{defaultAnyLanguage:c("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:c("languageCodeToName.unknown",{ns:"common"})}):v=>v).toSorted().join(", ")}),w&&w.length>1&&s.jsx(lt,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:m,onChange:v=>S(v),className:"mt-2 mb-3",children:w.toSorted().map(v=>s.jsx(Ve,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${v}`,value:v,children:v},v))}),s.jsx("dt",{children:"Persistent Identifier"}),s.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&s.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Qs}})," More Information ..."]}),s.jsx("hr",{}),s.jsxs(J,{className:"row-gap-2",children:[s.jsx(H,{lg:"auto",md:3,sm:6,children:s.jsx(be,{label:"View mode",controlId:"results-view-mode",children:s.jsxs(B.Select,{value:I,onChange:k,children:[s.jsx("option",{value:"plain",children:"Plain"}),(b!=="lex"||!r.isLexHits)&&s.jsx("option",{value:"kwic",children:"Keyword in Context"}),b==="fcs"&&s.jsx("option",{value:"annotation-layers",children:"Annotation Layers"}),b==="lex"&&s.jsx("option",{value:"lexical-entry",children:"Dictionary"})]})})}),s.jsx(H,{lg:3,md:3,sm:6,className:"align-content-center",children:s.jsx(B.Check,{disabled:!E,checked:x,onChange:()=>N(v=>!v),id:"results-modal-view-warnings-errors",label:"Show warning and error messages"})}),s.jsxs(H,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[s.jsxs(ye,{children:[s.jsxs(ye.Toggle,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Oi}})," Download"]}),s.jsx(ye.Menu,{children:bi.map(({id:v,label:$})=>s.jsxs(ye.Item,{href:ir(l,e,t,v,g,C),className:"matomo_download",children:["As ",s.jsx("strong",{children:$})," file"]},v))})]}),s.jsxs(Q,{disabled:L,"aria-disabled":L,href:ar(l,e,t,D,g,C),className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ki}})," Send to Weblicht"]})]})]}),s.jsx("hr",{}),s.jsx("p",{children:R()}),_()]}),x&&E&&s.jsxs(W.Body,{className:"border-top",children:[r.exception&&s.jsxs(ie,{variant:"danger","aria-label":"Error information",children:[s.jsxs(ie.Heading,{style:{fontSize:"1rem"},children:[s.jsx("span",{className:"text-uppercase",children:"Exception:"})," ",s.jsx("span",{"aria-label":"Error message",children:r.exception.message})]}),r.exception.cause&&s.jsxs("p",{className:"mb-0 small",children:["Cause: ",r.exception.cause]}),r.exception.klass&&s.jsxs("p",{className:"mb-0 small",children:["Caused by: ",s.jsx("code",{children:r.exception.klass})]})]}),r.diagnostics.filter(v=>v.uri!==Se).map(v=>s.jsxs(ie,{variant:"warning",children:[s.jsx(ie.Heading,{style:{fontSize:"1rem"},children:v.message}),v.diagnostic&&s.jsxs("p",{className:"mb-0 small",children:["Details: ",v.diagnostic]}),s.jsxs("p",{className:"mb-0 small",children:["Diagnostic type: ",s.jsx("code",{children:v.uri})]})]},`${v.uri}-${v.message}-${v.diagnostic}`))]}),M()&&s.jsx(W.Footer,{className:"justify-content-center border-top py-2",children:s.jsx(Ii,{searchId:e,resourceId:t,numberOfResults:p})})]})}function Pi({searchId:n,resourceId:e,resultInfo:t,viewMode:r,showResourceDetails:i,showDiagnostics:a}){const o=Ie(),{t:l}=se(),c=we(R=>R.locale),{languages:u}=$t(),{queryType:d}=Ut(),[h,p]=f.useState(c);f.useEffect(()=>{c&&p(c)},[c]);const b=f.useId(),[g,C]=f.useState(!0),[m,S]=f.useState(!1),x=t.inProgress,N=t.numberOfRecordsLoaded>0,I=t.exception||t.diagnostics?.filter(R=>R.uri!==Se).length>0,{data:y,isLoading:w,isError:E}=He({queryKey:["search-result-details",n,e],queryFn:rr.bind(null,o,n,e),enabled:!x}),M=y?ht(y.resource):[];if(x||!N&&(a&&!I||!a)||!y)return null;function D(){S(!0)}function L(){S(!1)}function k(){return y?y.numberOfRecords===-1?y.kwics.length:y.numberOfRecords===y.kwics.length&&y.nextRecordPosition===-1?`${y.kwics.length} / ${y.numberOfRecords}?`:`${y.kwics.length} / ${y.numberOfRecords}`:null}function _(){return y?r==="kwic"&&(d!=="lex"||!y.isLexHits)?s.jsx(Gs,{data:y}):r==="lexical-entry"?s.jsx(Ws,{data:y}):d==="lex"&&y.isLexHits?s.jsx(Js,{data:y}):s.jsx(Ys,{data:y}):null}return s.jsxs(s.Fragment,{children:[s.jsxs(ne,{className:"my-1 resource-search-result",role:"group","aria-label":`Results and details for resource ${y.resource.title}`,children:[s.jsxs(ne.Header,{className:"d-flex accordion",children:[s.jsxs("button",{type:"button",onClick:()=>C(R=>!R),"aria-controls":b,"aria-expanded":g,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${g?"":"collapsed"}`,children:[s.jsx(ve,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":"Number of results (total amount, or currently loaded amount with total available)",children:k()}),s.jsx("span",{"aria-label":"Resource title",className:"user-select-text",children:V(y.resource.title,h)}),s.jsx("small",{className:"text-muted user-select-text","aria-label":"Institution name",children:V(y.resource.institution,h)})]}),s.jsx("div",{className:"d-inline-block ms-auto",children:s.jsxs(Q,{size:"sm",onClick:D,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Fs}})," View"]})})]}),s.jsx(Ls,{in:g,children:s.jsxs("div",{id:b,children:[i&&s.jsxs(ne.Body,{className:"border-bottom resource-info",children:[s.jsxs("dl",{className:"mb-0","aria-label":"Resource information",children:[s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ft}}),s.jsx("span",{children:" Institution"})]}),s.jsx("dd",{className:"mb-0",children:V(y.resource.institution,h)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Xs}}),s.jsx("span",{children:" Description"})]}),V(y.resource.description,h)&&s.jsxs(s.Fragment,{children:[s.jsx("dd",{className:"mb-0",children:V(y.resource.description,h)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:qe}}),s.jsx("span",{children:" Languages"})]})]}),s.jsx("dd",{className:"mb-0",children:y.resource.languages.map(u?R=>dt(R,u,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})}):R=>R).toSorted().join(", ")})]}),M&&M.length>1&&s.jsx(lt,{type:"radio",name:`${y.resource.id}-result-info-languages`,defaultValue:h,onChange:R=>p(R),className:"mt-2",children:M.toSorted().map(R=>s.jsx(Ve,{variant:"outline-secondary",size:"sm",id:`${y.resource.id}-result-info-languages-${R}`,value:R,children:R},R))})]}),N&&s.jsx(ne.Body,{children:_()}),a&&I&&s.jsxs(ne.Body,{className:N?"border-top":"",children:[y.exception&&s.jsxs(ie,{variant:"danger","aria-label":"Error information",children:[s.jsxs(ie.Heading,{style:{fontSize:"1rem"},children:[s.jsx("span",{className:"text-uppercase",children:"Exception:"})," ",s.jsx("span",{"aria-label":"Error message",children:y.exception.message})]}),y.exception.cause&&s.jsxs("p",{className:"mb-0 small",children:["Cause: ",y.exception.cause]}),y.exception.klass&&s.jsxs("p",{className:"mb-0 small",children:["Caused by: ",s.jsx("code",{children:y.exception.klass})]})]}),y.diagnostics.filter(R=>R.uri!==Se).map(R=>s.jsxs(ie,{variant:"warning",children:[s.jsx(ie.Heading,{style:{fontSize:"1rem"},children:R.message}),R.diagnostic&&s.jsxs("p",{className:"mb-0 small",children:["Details: ",R.diagnostic]}),s.jsxs("p",{className:"mb-0 small",children:["Diagnostic type: ",s.jsx("code",{children:R.uri})]})]},`${R.uri}-${R.message}-${R.diagnostic}`))]})]})})]}),s.jsx(Ai,{show:m,searchId:n,resourceId:e,result:y,viewMode:r,showDiagnostics:a,onModalClose:L})]})}const _i="plain",Mi="lexical-entry",$i="default",Fi={default:()=>()=>0,"title-up":n=>(e,t)=>{const r=Z.getState().locale,i=V(n.get(e.id)?.title??null,r)??"",a=V(n.get(t.id)?.title??null,r)??"";return i.localeCompare(a)},"title-down":n=>(e,t)=>{const r=Z.getState().locale,i=V(n.get(e.id)?.title??null,r)??"",a=V(n.get(t.id)?.title??null,r)??"";return-i.localeCompare(a)},"result-count-total-up":()=>(n,e)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded,r=e.numberOfRecords!==-1?e.numberOfRecords:e.numberOfRecordsLoaded;return t-r},"result-count-total-down":()=>(n,e)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded;return(e.numberOfRecords!==-1?e.numberOfRecords:e.numberOfRecordsLoaded)-t}},xs=1500;function Di({searchId:n,pollDelay:e=xs}){const t=Ie(),{resources:r}=$t(),{query:i,queryType:a,resourceIDs:o}=Ut(),[l,c]=f.useState(a==="lex"?Mi:_i),[u,d]=f.useState($i),[h,p]=f.useState(""),[b,g]=f.useState(!1),[C,m]=f.useState(!1),S=f.useMemo(()=>{const j=new Map;return r?.forEach(O=>{j.set(O.id,O)}),Fi[u](j)},[u,r]);e??=xs;const{data:x}=He({queryKey:["search-results",n],queryFn:sr.bind(null,t,n??""),enabled:!!n,refetchInterval(j){return j.state.data&&j.state.data.inProgress>0?e:!1}}),N=f.useMemo(()=>x?.results.toSorted(S)||[],[x,S]),I=a==="lex"&&x?.results.every(j=>j.numberOfRecords<=0||j.isLexHits===!0),y=o.length,w=x?.inProgress??y,E=f.useMemo(()=>x?.results.filter(j=>(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)>0).length??0,[x]),M=f.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)>0&&j.diagnostics.filter(O=>O.uri!==Se).length>0).length??0,[x]),D=f.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)<=0&&j.diagnostics.filter(O=>O.uri!==Se).length===0&&j.exception===null).length??0,[x]),L=f.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)<=0&&(j.diagnostics.filter(O=>O.uri!==Se).length>0||j.exception!==null)).length??0,[x]),k=f.useMemo(()=>x?.results.filter(j=>!j.inProgress&&j.numberOfRecords<=0&&j.exception!==null).length??0,[x]),_=f.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)<=0&&j.diagnostics.filter(O=>O.uri!==Se).length>0&&j.exception===null).length??0,[x]),R=f.useMemo(()=>x?.results.map(j=>j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded).reduce((j,O)=>j+O,0)??0,[x]),v=f.useMemo(()=>x?.results.map(j=>j.numberOfRecordsLoaded).reduce((j,O)=>j+O,0)??0,[x]);{const[j,O]=f.useState(!1);f.useEffect(()=>{x&&w===0&&(j||(O(!0),Us(i,a,v)))},[x,w,i,a,n,j,v])}function $(j){c(j.target.value)}function P(j){d(j.target.value)}return s.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[s.jsx(Te,{placement:"auto",overlay:s.jsxs(xt,{id:"search-progress-information-popover",children:[s.jsx(xt.Header,{children:"Search Progress Information"}),s.jsxs(xt.Body,{style:{textIndent:"2rem hanging"},children:[s.jsxs("div",{children:[s.jsx("code",{children:y.toString().padStart(4," ")})," resources requested"]}),w>0&&s.jsxs("div",{children:[s.jsx("code",{children:w.toString().padStart(4," ")})," ↳ resources pending"]}),s.jsx("hr",{className:"mt-2 mb-1"}),s.jsxs("div",{children:[s.jsx("code",{children:(D+L).toString().padStart(4," ")})," ","resources without results"]}),s.jsxs("div",{children:[s.jsx("code",{children:D.toString().padStart(4," ")})," ↳ OK, without issues"]}),_>0&&s.jsxs("div",{children:[s.jsx("code",{children:_.toString().padStart(4," ")})," ↳ with warnings"]}),k>0&&s.jsxs("div",{children:[s.jsx("code",{children:k.toString().padStart(4," ")})," ↳ due to fatal errors"]}),s.jsx("hr",{className:"mt-2 mb-1"}),s.jsxs("div",{children:[s.jsx("code",{children:E.toString().padStart(4," ")})," resources with results"]}),M>0&&s.jsxs("div",{children:[s.jsx("code",{children:M.toString().padStart(4," ")})," ↳ with warnings"]}),s.jsx("hr",{className:"mt-2 mb-0"}),s.jsx("hr",{className:"mt-1 mb-1"}),s.jsxs("div",{children:[s.jsxs("code",{children:[" ",v," ","/"," ",R]})," ","total hits"]})]})]}),children:s.jsxs(We,{className:"mb-3",children:[s.jsx(We,{variant:"success",now:E,max:y,label:s.jsxs("span",{children:[E," resources with results"]}),"aria-label":"Resources with results"}),s.jsx(We,{variant:"secondary",now:D+L,max:y,label:s.jsxs("span",{children:[D+L," resources without results"]}),"aria-label":"Resources without results (might be due to issues)"}),s.jsx(We,{striped:!0,animated:!0,now:w,max:y,label:s.jsxs("span",{children:["Search through ",w," Resources"]}),"aria-label":"Resources with pending results"})]})}),s.jsx(ne,{className:"mb-2",role:"group","aria-label":"Result display and filter options",children:s.jsx(ne.Body,{children:s.jsxs(J,{className:"row-gap-2",children:[s.jsx(H,{lg:"auto",md:6,sm:6,children:s.jsx(be,{label:"View mode",controlId:"results-view-mode",children:s.jsxs(B.Select,{value:l,onChange:$,children:[s.jsx("option",{value:"plain",children:"Plain"}),(a!=="lex"||!I)&&s.jsx("option",{value:"kwic",children:"Keyword in Context"}),a==="fcs"&&s.jsx("option",{value:"annotation-layers",children:"Annotation Layers"}),a==="lex"&&s.jsx("option",{value:"lexical-entry",children:"Dictionary"})]})})}),s.jsx(H,{lg:"auto",md:6,sm:6,children:s.jsx(be,{label:"Sorting",controlId:"results-sorting",children:s.jsxs(B.Select,{value:u,onChange:P,children:[s.jsx("option",{value:"default",children:"(default)"}),s.jsx("option",{value:"title-up",children:"Title (up)"}),s.jsx("option",{value:"title-down",children:"Title (down)"}),s.jsx("option",{value:"result-count-total-up",children:"Total result count (up)"}),s.jsx("option",{value:"result-count-total-down",children:"Total result count (down)"})]})})}),s.jsx(H,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:s.jsx(be,{label:"Result filter query",controlId:"result-filter",children:s.jsx(Ks,{disabled:u!=="default"||!0,value:h,onChange:j=>p(j)})})}),s.jsxs(H,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[s.jsx(B.Check,{checked:b,onChange:()=>g(j=>!j),id:"results-view-resource-details",label:"Show result details"}),s.jsx(B.Check,{checked:C,onChange:()=>m(j=>!j),id:"results-view-warnings-errors",label:"Show warning and error messages"})]})]})})}),n&&x&&N.map(j=>s.jsx(Pi,{searchId:n,resourceId:j.id,resultInfo:j,viewMode:l,showResourceDetails:b,showDiagnostics:C},`${n}-${j.id}`))]})}const Ui=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,bs=""+new URL("assets/logo-fcs.png",import.meta.url).href;function Hi(){const n=Ie(),{t:e}=se(),[t,r]=ot(),[i,a]=f.useState([]),[o,l]=f.useState({}),[c,u]=f.useState([]),[d,h]=f.useState(null),[p,b]=f.useState(!1),[g,C]=f.useState(null),[m,S]=f.useState([]),x=K.getState().appTitleHead,N={consortia:t.get(Be)},{data:I,isLoading:y,isError:w}=He({queryKey:["init"],queryFn:Xn.bind(null,n,N)});f.useEffect(()=>{if(!I)return;const _=ri(I.resources);l(I.languages),u(I.weblichtLanguages),a(_),h(xe(_))},[I]),f.useEffect(()=>{if(!i||i.length===0)return;const _=t.get("x-aggregation-context");if(_){try{const R=JSON.parse(_),{selected:v,unavailable:$}=ii(i,R);v.length>0&&(h(v),S(P=>[...P,{title:"Resource Selection",body:s.jsxs(s.Fragment,{children:["Preselected ",s.jsx("strong",{children:v.length})," resources:",s.jsx("br",{}),s.jsx("ul",{className:"ps-3",children:v.map(j=>s.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:j}))})]}),variant:"success"}])),$.length>0&&S(P=>[...P,{title:"Resource Selection",body:s.jsxs(s.Fragment,{children:["Unable to select ",s.jsx("strong",{children:$.length})," resources:",s.jsx("br",{}),s.jsx("ul",{className:"ps-3",children:$.map(j=>s.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:j}))})]}),variant:"warning"}])}catch(R){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:_},R),R instanceof Error&&S(v=>[...v,{title:"Resource Selection",body:s.jsxs(s.Fragment,{children:["Unable to preselect resources: ",R.name,s.jsx("br",{}),s.jsx("small",{children:R.message})]}),variant:"error"}])}r(R=>(R.delete("x-aggregation-context"),R))}},[i,t,r]);const E=y||w,{mutate:M,data:D,isPending:L}=Ss({mutationKey:["search"],mutationFn:({query:_,queryType:R,language:v,numberOfResults:$,resourceIDs:P})=>er(n,{query:_,queryType:R,language:v,numberOfResults:$.toString(),resourceIds:P})});function k(_){h(_.resourceIDs),C(_),b(!0),Us(_.query,_.queryType),M(_)}return s.jsxs(s.Fragment,{children:[s.jsx(Ue,{children:s.jsx("title",{children:x})}),s.jsxs(re,{id:"search",children:[s.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:s.jsx(yn,{position:"top-end",className:"mt-2",style:{zIndex:100},children:m.map((_,R)=>s.jsxs(bt,{bg:_.variant,onClose:()=>S(v=>v.filter($=>$!==_)),delay:5e3,autohide:!0,children:[s.jsx(bt.Header,{closeButton:!0,children:s.jsx("strong",{className:"me-auto",children:_.title})}),s.jsx(bt.Body,{children:_.body})]},R))})}),!p&&s.jsx(J,{children:s.jsx(H,{className:"text-center",children:s.jsxs("picture",{children:[s.jsx("source",{srcSet:bs,media:"(prefers-color-scheme: light)"}),s.jsx("source",{srcSet:Ui,media:"(prefers-color-scheme: dark)"}),s.jsx("img",{src:bs,className:"logo",alt:"FCS logo"})]})})}),s.jsx(J,{className:"mt-3",children:s.jsx(H,{children:s.jsx(Ei,{resources:i,languages:o,availableResources:null,selectedResources:d,onSearch:k,hasSearch:p,disabled:E})})}),!p&&s.jsx(J,{className:"mt-3",children:s.jsxs(H,{children:[s.jsx("p",{children:s.jsx(ee,{i18nKey:"search.intro.textGeneral"})}),s.jsx("p",{children:s.jsx(ee,{i18nKey:"search.intro.textLearnMore",components:[s.jsxs("a",{href:e("search.intro.url"),children:["page ",s.jsx("em",{children:"Content Search"})," at CLARIN.eu"]})]})})]})}),p&&L&&s.jsx(J,{children:s.jsx(H,{className:"text-center my-5",children:s.jsx(Cs,{animation:"border"})})}),g&&D&&s.jsx(Wr,{resources:i,languages:o,weblichtLanguages:c,children:s.jsx(Yr,{...g,children:s.jsx(Di,{searchId:D})})})]})]})}function Vi(){const n=rn(),e=ct();return f.useCallback((r,i,a)=>{const o=an(r,i);n({pathname:o,search:e},a)},[n,e])}function zi(){const n=f.useContext(on),e=ws(),t=n.matches.map(i=>i.route),r=ln(t,e);return r!==null&&r.length>0?r[0]:null}const Bi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,qi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`;function Ki({url:n,statistics:e,validatorUrl:t,isScan:r}){const{t:i,i18n:a}=se(),o=new Intl.NumberFormat(a.language,{style:"unit",unit:"second",unitDisplay:"short"});function l(c,u){const d=s.jsx(oe.Highlight,{text:c.title,ranges:e.matchResources?.[u]??null});return c.valid&&c.notes.length===0?d:s.jsx(Te,{placement:"auto-start",delay:{show:250,hide:400},overlay:s.jsxs(ze,{id:`resource-info-warning-${c.handle}`,children:[!c.valid&&i("statistics.errors.notAvailableInAggregator"),!c.valid&&c.notes.length>=1&&s.jsx("hr",{className:"mt-2 mb-1"}),c.notes.length===1?c.notes[0]:c.notes.length>=1?s.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:c.notes.map((h,p)=>s.jsx("li",{children:h},p))}):null]}),children:s.jsxs("span",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Bi},className:"align-baseline me-2"}),c.valid?d:s.jsx("s",{children:d})]})})}return s.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[s.jsxs("h4",{className:"h5",id:`${vs(n)}-${r?"scan":"search"}`,children:[s.jsx(oe.Highlight,{text:n,ranges:e.matchEndpoint}),t&&s.jsxs(s.Fragment,{children:[" ",s.jsx("a",{href:`${t}?url=${encodeURIComponent(n)}`,children:s.jsx("i",{dangerouslySetInnerHTML:{__html:qi},className:"align-baseline ms-2"})})]})]}),s.jsxs("dl",{className:"ps-sm-4",children:[s.jsx("dt",{children:i("statistics.labels.fcsVersion")}),s.jsx("dd",{children:e.version}),s.jsx("dt",{children:i("statistics.labels.searchCapabilities")}),s.jsx("dd",{children:e.searchCapabilities.join(", ")}),s.jsx("dt",{children:i("statistics.labels.maxConcurrentScanRequests")}),s.jsx("dd",{children:e.maxConcurrentRequests}),s.jsx("dt",{children:i("statistics.labels.requestStatistics")}),s.jsx("dd",{className:"mb-0",children:i("statistics.labels.numberOfRequests",{count:e.numberOfRequests})}),e.avgQueueTime!==0&&s.jsx("dd",{className:"mb-0",children:i("statistics.labels.queueTime",{avg:o.format(e.avgQueueTime),max:o.format(e.maxQueueTime)})}),s.jsx("dd",{children:i("statistics.labels.executionTime",{avg:o.format(e.avgExecutionTime),max:o.format(e.maxExecutionTime)})}),e.rootResources?.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:i("statistics.labels.resources")}),s.jsx("dd",{children:i("statistics.labels.numberOfRootResources",{count:e.rootResources.length})}),s.jsx("dd",{children:s.jsx("ul",{children:e.rootResources.map((c,u)=>typeof c=="string"?s.jsx("li",{children:s.jsx(oe.Highlight,{text:c,ranges:e.matchResources?.[u]??null})},c):s.jsx("li",{children:l(c,u)},c.handle))})})]}),s.jsxs(s.Fragment,{children:[Object.entries(e.diagnostics||{}).map(([c,u])=>s.jsxs(ie,{variant:"warning",style:{fontSize:"0.85rem"},children:[s.jsxs(ie.Heading,{style:{fontSize:"1rem"},children:[s.jsxs(ve,{bg:"warning",children:[u.counter,"x"]})," ",s.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.diagnostic")})," ",u.diagnostic.message,u.diagnostic.diagnostic&&s.jsxs(s.Fragment,{children:[" - ",s.jsx("small",{children:u.diagnostic.diagnostic})]})]}),s.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",s.jsx("a",{href:u.context,children:u.context})]})]},c)),Object.entries(e.errors||{}).map(([c,u])=>s.jsxs(ie,{variant:"danger",style:{fontSize:"0.85rem"},children:[s.jsxs(ie.Heading,{style:{fontSize:"1rem"},children:[s.jsxs(ve,{bg:"danger",children:[u.counter,"x"]})," ",s.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.exception")})," ",u.exception.message]}),s.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",s.jsx("a",{href:u.context,children:u.context})]}),u.exception.cause&&s.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.causedBy")," ",u.exception.cause]})]},c))]})]})]},n)}function Qi({data:n,validatorUrl:e}){const{t,i18n:r}=se(),[i,a]=f.useState(""),[o,l]=f.useState(["institution","endpoint","resources"]),[c,u]=f.useState(!1),d=`-${n.isScan?"scan":"search"}`,h=f.useMemo(()=>Object.entries(n.institutions).toSorted().map(([m,S])=>Object.entries(S).toSorted().map(([x,N])=>({institutionName:m,endpointUrl:x,endpointInfo:{...N,rootResources:N.rootResources.toSorted()}}))).flat(1).filter(c?m=>Object.keys(m.endpointInfo.diagnostics).length>0||Object.keys(m.endpointInfo.errors).length>0:()=>!0),[n,c]),p=h.filter(m=>Object.keys(m.endpointInfo.diagnostics).length>0||Object.keys(m.endpointInfo.errors).length>0),g=oe.useFuzzySearchList({list:h,queryText:i,getText:m=>{const S=[];return o.length===0?S.push(m.institutionName,m.endpointUrl,...m.endpointInfo.rootResources.map(x=>typeof x=="string"?x:x.title)):(o.includes("institution")&&S.push(m.institutionName),o.includes("endpoint")&&S.push(m.endpointUrl),o.includes("resources")&&S.push(...m.endpointInfo.rootResources.map(x=>typeof x=="string"?x:x.title))),S},mapResultItem:({item:m,score:S,matches:x})=>({item:m,matches:x,score:S})}).reduce((m,S)=>{const{institutionName:x,endpointUrl:N,endpointInfo:I}=S.item;return Object.getOwnPropertyNames(m).includes(x)||(m[x]={match:o.length===0||o.includes("institution")?S.matches[0]:null,endpoints:{}}),m[x].endpoints[N]={...I,matchEndpoint:o.length===0||o.includes("endpoint")?S.matches[o.length===0||o.includes("institution")?1:0]:null,matchResources:o.length===0||o.includes("resources")?S.matches.slice(0+(o.length===0||o.includes("institution")?1:0)+(o.length===0||o.includes("endpoint")?1:0)):[]},m},{});function C(m){o.includes(m)?l(o.filter(S=>S!==m)):l([...o,m])}return s.jsxs(re,{className:"d-grid gap-2 mt-3",children:[s.jsx(ie,{variant:"info",className:"mb-0",children:s.jsxs("dl",{className:"mb-0",children:[s.jsx("dt",{children:t("statistics.labels.startDate")}),s.jsx("dd",{className:"mb-0",children:new Date(n.date).toLocaleString(r.language)}),s.jsx("dt",{children:t("statistics.labels.timeout")}),s.jsx("dd",{className:"mb-0",children:new Intl.NumberFormat(r.language,{style:"unit",unit:"second",unitDisplay:"short"}).format(n.timeout)})]})}),s.jsx(B,{onSubmit:m=>m.preventDefault(),children:s.jsxs(J,{className:"gy-2",children:[s.jsx(H,{lg:6,md:12,children:s.jsx(B.Control,{placeholder:t("statistics.filter.inputPlaceholder"),value:i,onChange:m=>a(m.target.value)})}),s.jsxs(H,{className:"filter-checkboxes",lg:6,md:12,children:[s.jsx(B.Text,{className:"me-2",children:t("statistics.filter.labelForCheckboxes")}),s.jsx(B.Check,{type:"checkbox",checked:o.includes("institution"),onChange:()=>C("institution"),id:`filter-institution-name${d}`,label:t("statistics.filter.checkboxInstitution")}),s.jsx(B.Check,{type:"checkbox",checked:o.includes("endpoint"),onChange:()=>C("endpoint"),id:`filter-endpoint-url${d}`,label:t("statistics.filter.checkboxEndpoint")}),s.jsx(B.Check,{type:"checkbox",checked:o.includes("resources"),onChange:()=>C("resources"),id:`filter-resource-names${d}`,label:t("statistics.filter.checkboxResources")})]})]})}),s.jsx(J,{children:s.jsx(H,{children:s.jsx(B.Check,{type:"checkbox",checked:c,onChange:()=>u(!c),id:`filter-show-issues-only${d}`,label:t("statistics.filter.checkboxShowWithIssues",{count:p.length})})})}),Object.entries(g).map(([m,{match:S,endpoints:x}])=>s.jsxs(ne,{className:"p-2",children:[s.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${vs(m)}${d}`,children:s.jsx(oe.Highlight,{text:m,ranges:S})}),Object.entries(x).toSorted().map(([N,I])=>s.jsx(Ki,{url:N,statistics:I,validatorUrl:e,isScan:n.isScan},N))]},m))]})}const Gi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,Wi=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],Ji=Object.fromEntries(Wi.map(n=>[n.id,n]));function Yi(){const n=Ie(),e=js(),[t]=ot(),{t:r}=se(),{categoryId:i}=cn(),a=zi(),o=Vi(),l={consortia:t.get(Be)},{isPending:c,isError:u,data:d,error:h}=He({queryKey:["statistics"],queryFn:Zn.bind(null,n,l)}),[p,b]=f.useState(K.getState().validatorURL);K.subscribe(N=>b(N.validatorURL));const g=K.getState().appTitleHead,C=d!==void 0?Object.keys(d).toSorted():[],m=i!=null&&C.includes(i)?i:C.length>0?C[0]:void 0;function S(){e.invalidateQueries({queryKey:["statistics"]})}function x(N){a?.params.categoryId,a&&a.params.categoryId!==N&&a.route.path&&o(a.route.path,{categoryId:N})}return s.jsxs(s.Fragment,{children:[s.jsx(Ue,{children:s.jsxs("title",{children:[g," – Statistics"]})}),s.jsxs(re,{id:"statistics",className:"my-4",children:[s.jsx("h1",{className:"h1",children:r("statistics.title")}),(c||u)&&s.jsx(J,{children:s.jsxs(H,{children:[c?r("statistics.loading"):null,s.jsx("br",{}),u?h.message:null]})}),d&&s.jsxs(yt.Container,{defaultActiveKey:m,onSelect:x,children:[s.jsxs(ge,{className:"nav-tabs",as:"ul",children:[Object.keys(d).map(N=>s.jsx(ge.Item,{as:"li",role:"presentation",children:s.jsx(ge.Link,{as:"button",eventKey:N,children:r(`statistics.tabs.${N}`,{defaultValue:Ji[N]?.label??N})})},N)),s.jsx(ge.Item,{as:"li",role:"presentation",className:"ms-auto",children:s.jsxs(ge.Link,{as:"button",onClick:S,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Gi}})," ",r("statistics.tabs.btnRefresh")]})})]}),s.jsx(yt.Content,{children:Object.entries(d).map(([N,I])=>s.jsx(yt.Pane,{eventKey:N,children:s.jsx(Qi,{data:I,validatorUrl:p})},N))})]})]})]})}function Xi(){const n=K.getState().appTitleHead;gr();const e=we(t=>t.locale);f.useEffect(()=>{G.changeLanguage(e)},[e]);{const t=ws(),[r,i]=f.useState(t.pathname);f.useEffect(()=>{const a=t.pathname;a!==r&&(i(a+t.search),Ds(a,document.title,r))},[t,r])}return s.jsxs(s.Fragment,{children:[s.jsx(Ue,{children:s.jsx("title",{children:n})}),s.jsx(dr,{}),s.jsx("main",{children:s.jsxs(un,{children:[s.jsx(Ge,{index:!0,element:s.jsx(Hi,{})}),s.jsx(Ge,{path:"/about",element:s.jsx(Qr,{})}),s.jsx(Ge,{path:"/help",element:s.jsx(Gr,{})}),s.jsx(Ge,{path:"/stats/:categoryId?",element:s.jsx(Yi,{})})]})}),s.jsx(lr,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const Zi=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function ea(){window.MyAggregator.DEPLOY_PATH!==void 0&&K.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&K.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&K.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&K.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&K.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&K.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&K.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_USERNAME!==void 0&&K.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(n,e){return n[e]},set(n,e,t){return Zi.includes(e)?(console.error(`Configuration ${e} can only be set on initialization!`),!1):e==="VALIDATOR_URL"?t===null||typeof t=="string"?(K.getState().setValidatorURL(t),!0):!1:e==="SHOW_SEARCH_RESULT_LINK"?typeof t=="boolean"?(K.getState().setShowSearchResultLink(t),!0):!1:e==="AUTH_USERNAME"?t===null||typeof t=="string"?(K.getState().setAuthUsername(t),!0):!1:(n[e]=t,!0)}}),Object.assign(window.MyAggregator,{getAppStore:()=>K})}function ta(){const n=Z.getState(),e=[navigator.language,...navigator.languages];let t=!1;for(const r of e){if(r===n.locale){t=!0;break}if(n.locales.includes(r)){n.setLocale(r),t=!0;break}}t||console.warn("User locale",e,"was not found in available languages",n.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>Z})}ea();ta();K.getInitialState(),K.getState();Z.getInitialState(),Z.getState();const sa=K.getState().deployPath,na=K.getState().apiURL,ra=Z.getState().locale;G.changeLanguage(ra);const ia=new dn({defaultOptions:{queries:{}}}),aa=hn.create({baseURL:na,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const n=K.getState().matomoTrackingParams;ti(n)||console.warn("Unable to setup tracking ...")}const oa="root",la=document.getElementById(oa),ca=Ln.createRoot(la);ca.render(s.jsx(f.StrictMode,{children:s.jsx(Jr,{axios:aa,children:s.jsx(fn,{client:ia,children:s.jsx(gn,{children:s.jsx(pn,{basename:sa,children:s.jsx(Xi,{})})})})})}));export{qs as C,Ci as h,G as i,zs as u};
//# sourceMappingURL=fcs-sru-aggregator-ui-0.0.0.js.map

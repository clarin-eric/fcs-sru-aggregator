const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-query-builder-0.0.0.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-query-builder-0.0.0.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{u as Ge,b as Z,j as e,L as Qe,T as z,c as Mt,d as ls,N as St,r as d,e as he,f as cs,g as us,H as _e,R as ds,h as hs,k as Pt,l as mt,m as ms,n as Ot,o as Ut,p as Ee,q as gs,s as ps,t as fs,v as Ht,w as xs,x as js,y as Fe,Q as bs,z as ys,A as ws,B as Ss,C as vs}from"./vendor/react-ext.js";import{b as Ls}from"./vendor/react.js";/* empty css                            */import{C as se,R as X,a as k,N as Ne,b as ue,c as vt,M as Y,F as q,B as W,T as We,d as Ae,e as te,f as Dt,g as ge,I as Rs,D as pe,S as Ft,h as Ie,O as ye,i as je,j as ve,L as st,A as re,P as ze,k as nt,l as Cs,m as rt,n as at}from"./vendor/bootstrap.js";import{_ as zt,a as qt,b as Ns,c as Ts,d as Is}from"./locales/en/default.js";import{g as _s}from"./vendor/prism.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var qe={},Lt;function Es(){if(Lt)return qe;Lt=1;var t=Ls();return qe.createRoot=t.createRoot,qe.hydrateRoot=t.hydrateRoot,qe}var As=Es();const ke="x-consortia";async function ks(t,s){const n=new URLSearchParams;s?.consortia!==void 0&&s?.consortia!==null&&n.set(ke,s.consortia);const r="init"+(n.entries().next().done?"":`?${n}`);return(await t.get(r)).data}async function Ms(t,s){const n=new URLSearchParams;s?.consortia!==void 0&&s?.consortia!==null&&n.set(ke,s.consortia);const r="statistics"+(n.entries().next().done?"":`?${n}`);return(await t.get(r)).data}async function Ps(t,s){return(await t.post("search",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function Os(t,s,n){return(await t.post(`search/${s}`,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function Us(t,s){if(!s)throw new Error('Invalid "searchID" parameter!');return(await t.get(`search/${s}/metaonly`)).data}async function Hs(t,s,n){if(!s)throw new Error('Invalid "searchID" parameter!');if(!n)throw new Error('Invalid "resourceID" parameter!');const a=(await t.get(`search/${s}/metaonly?resourceId=${encodeURIComponent(n)}`)).data.results.filter(o=>o.id===n);if(a.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${s}, resourceId: ${n})`);return a[0]}async function Ds(t,s,n){if(!s)throw new Error('Invalid "searchID" parameter!');if(!n)throw new Error('Invalid "resourceID" parameter!');const a=(await t.get(`search/${s}?resourceId=${encodeURIComponent(n)}`)).data.results.filter(o=>o.resource.id===n);if(a.length===0)throw new Error(`Results for resource not found! (searchId: ${s}, resourceId: ${n})`);return a[0].records===void 0&&console.warn("Using legacy FCS SRU Aggregator API with Search Results not in '.records'!",{searchID:s},a),a[0]}function Fs(t,s,n,r,a,o){const i=new URLSearchParams({resourceId:n,format:r});(o==="byGuess"||o==="byMetaAndGuess")&&i.set("filterLanguage",a);const l=`search/${s}/download?${i.toString()}`;return t.getUri({url:l})}function zs(t,s,n,r,a,o){const i=new URLSearchParams({resourceId:n});r?i.set("filterLanguage",r):(o==="byGuess"||o==="byMetaAndGuess")&&i.set("filterLanguage",a);const l=`search/${s}/toWeblicht?${i.toString()}`;return t.getUri({url:l})}const qs=[ke];function Ye(){const[t]=Ge(),s=new URLSearchParams(Array.from(t.entries()).filter(([n])=>qs.includes(n)));if(!s.entries().next().done)return`?${s}`}function Bs(){const{t}=Z(),s="urls.termsUseAndDisclaimer",n=t(s,{ns:"common"}),r=n!==s,a="urls.contact",o=t(a,{ns:"common"}),i=o!==a,l="footer.serviceInfo.text",u=t(l)!==l,g=Ye();return e.jsx("footer",{className:"text-muted",children:e.jsx(se,{children:e.jsxs(X,{children:[e.jsxs(k,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[e.jsxs("div",{children:[e.jsx(Qe,{to:{pathname:"/about",search:g},className:"hidden-xs",children:t("footer.links.about")}),e.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","0.0.0"]})]}),e.jsx(Qe,{to:{pathname:"/stats",search:g},children:t("footer.links.statistics")})]}),e.jsx(k,{className:"text-center",children:u&&e.jsxs(z,{i18nKey:l,children:[e.jsxs("span",{className:"footer-fineprint",children:["Service provided by ",e.jsx("a",{href:t("footer.serviceInfo.url"),children:"CLARIN"})]}),e.jsxs("span",{children:[e.jsx("br",{}),"Hosted by CLARIN ERIC"]})]})}),e.jsxs(k,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&e.jsx("a",{href:n,children:t("footer.links.termsUseAndDisclaimer")}),i&&e.jsx("a",{href:o,children:t("footer.links.contact")})]})]})})})}const Q=Mt(t=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authUsername:null,setDeployPath:s=>t(n=>({deployPath:typeof s=="function"?s(n.deployPath):s})),setApiURL:s=>t(n=>({apiURL:typeof s=="function"?s(n.apiURL):s})),setValidatorURL:s=>t(n=>({validatorURL:typeof s=="function"?s(n.validatorURL):s})),setShowSearchResultLink:s=>t(n=>({showSearchResultLink:typeof s=="function"?s(n.showSearchResultLink):s})),setAppTitle:s=>t(n=>({appTitle:typeof s=="function"?s(n.appTitle):s})),setAppTitleHead:s=>t(n=>({appTitleHead:typeof s=="function"?s(n.appTitleHead):s})),setMatomoTrackingParams:s=>t(n=>({matomoTrackingParams:typeof s=="function"?s(n.matomoTrackingParams):s})),setAuthUsername:s=>t(n=>({authUsername:typeof s=="function"?s(n.authUsername):s}))}));var Vs=["en","de"];const J=Mt(t=>({locale:"en",locales:Vs??["en"],setLocale:s=>t(n=>({locale:typeof s=="function"?s(n.locale):s})),setLocales:s=>t(n=>({locales:typeof s=="function"?s(n.locales):s}))})),xe=t=>{const s=ls(J,t);return Object.assign(s,J),s},$s=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,Rt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,Me=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function Ks(){const{t}=Z(),s=xe(x=>x.locale),n=xe(x=>x.locales),r=xe(x=>x.setLocale),a=Q.getState().authUsername,o=a!==null&&a!=="anonymous",i=Q.getState().deployPath??"",l=i+(i.endsWith("/")?"":"/")+"login",c=Ye();function u(x){x!==null&&r(x)}function g(){return o?e.jsxs(Ne.Text,{className:"ms-auto",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Rt}})," Signed in as"," ",e.jsx("span",{className:"fw-bold",children:a})]}):e.jsxs(ue.Link,{href:`${l}${c??""}`,className:"ms-auto",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Rt}})," ",t("header.login.login")]})}function p(){if(!n||n.length===1)return null;const x=new Intl.DisplayNames([s,"en"],{type:"language"}),_=e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Me}})," ",s.toUpperCase()," "]});return e.jsx(vt,{title:_,align:"end",className:"ms-2",onSelect:u,children:n.map(v=>{const T=new Intl.DisplayNames([v,"en"],{type:"language"});return e.jsxs(vt.Item,{disabled:v===s,"aria-disabled":v===s,eventKey:v,title:t("header.localeOptionTitle",{code:v,name:T.of(v),context:v!==s?"translated":null,translated:x.of(v)}),children:[v.toUpperCase()," – ",T.of(v)]},v)})})}return e.jsx("header",{children:e.jsx(Ne,{expand:"md",className:"bg-body-tertiary",children:e.jsxs(se,{children:[e.jsxs(Ne.Brand,{as:Qe,to:{pathname:"/",search:c},children:[e.jsx("img",{src:$s,width:"30",height:"30",className:"d-inline-block align-top",alt:`${t("header.title")} logo`})," ",t("header.title")]}),e.jsx(Ne.Toggle,{"aria-controls":"header-navbar-nav"}),e.jsx(Ne.Collapse,{id:"header-navbar-nav",children:e.jsxs(ue,{className:"w-100 d-flex",children:[e.jsx(ue.Link,{as:St,to:{pathname:"/",search:c},children:t("header.menu.home")}),e.jsx(ue.Link,{as:St,to:{pathname:"/help",search:c},children:t("header.menu.help")}),g(),p()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function Qs(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Gs(t){t==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",t)}function Ws(){d.useEffect(()=>{function t(){Gs(Qs())}return t(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",t)},[])}const Ys="modulepreload",Xs=function(t,s){return new URL(t,s).href},Ct={},ne=function(s,n,r){let a=Promise.resolve();if(n&&n.length>0){let u=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const i=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=u(n.map(g=>{if(g=Xs(g,r),g in Ct)return;Ct[g]=!0;const p=g.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(!!r)for(let T=i.length-1;T>=0;T--){const b=i[T];if(b.href===g&&(!p||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${x}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":Ys,p||(v.as="script"),v.crossOrigin="",v.href=g,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((T,b)=>{v.addEventListener("load",T),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return s().catch(o)})},Js=(t,s,n)=>{const r=t[s];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((a,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},Zs={en:{app:qt,common:zt}},ot="clarin",en=J.getInitialState().locale,tn=J.getInitialState().locales;function sn(t,s){if(!t)return s;const n=typeof t=="string"?[t]:t;return[...n.map(a=>`${ot}.${a}`),...n]}const it=["app","common"],nn=sn(it);function Be(t){return typeof t=="string"||!Array.isArray(t)?[String(t)]:t}function rn(t,s,n,r){if(n?.postProcessTryPrefixedNamespacesFirst!==void 0)return t;const a=Be(s),o=Be(n.ns||r.options.defaultNS||[]),i=r.resolve(a,n),c=(i?.res!==void 0?[...Be(n.ns||[]),i.usedNS]:[...Be(n.ns||[]),...o]).map(g=>g.startsWith(ot)?g:`${ot}.${g}`),u=r.translate(a,{...n,ns:c,postProcessTryPrefixedNamespacesFirst:!0});return a.includes(u)?t:u}he.use(cs).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:rn}).use(us((t,s)=>Js(Object.assign({"../locales/de/app.json":()=>ne(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>ne(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/common.json":()=>ne(()=>import("./locales/de/default.js").then(r=>r.b),[],import.meta.url),"../locales/de/textplus.app.json":()=>ne(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>ne(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/clarin.app.json":()=>ne(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/clarin.common.json":()=>ne(()=>import("./locales/en/default.js").then(r=>r.h),[],import.meta.url),"../locales/en/common.json":()=>ne(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/querybuilder.json":()=>ne(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/querysuggestions.json":()=>ne(()=>import("./locales/en/default.js").then(r=>r.q),[],import.meta.url),"../locales/en/textplus.app.json":()=>ne(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>ne(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${t}/${s}.json`,4))).init({lng:en,fallbackLng:"en",supportedLngs:tn,ns:nn,defaultNS:it,fallbackNS:it,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Zs,partialBundledLanguages:!0,react:{nsMode:"fallback",transKeepBasicHtmlNodesFor:["br","strong","i","p","em","kbd","code"]}});he.addResourceBundle("en","clarin.app",Ns);he.addResourceBundle("en","clarin.common",Ts);he.addResourceBundle("en","app",qt);he.addResourceBundle("en","querysuggestions",Is);he.addResourceBundle("en","common",zt);Object.assign(window,{i18n:he});const an=["Emanuel Dima","Erik Körner","Leif-Jöran Olsson","Yana Panchenko","Oliver Schonefeld","Dieter Van Uytvanck"],on=[{id:"dropwizard",name:"Dropwizard",url:"https://www.dropwizard.io/",license:"Apache License 2.0",licenseUrl:"https://github.com/dropwizard/dropwizard/blob/release/3.0.x/LICENSE",usage:"web server"},{id:"de.mpg.mpgaai:mpgaai-shhaa",name:"MPG-AAI - simple http header authn/z",url:"https://github.com/clarin-eric/mpgaai",license:"Apache License 2.0",licenseUrl:"http://www.apache.org/licenses/LICENSE-2.0.txt",usage:"AAI / Shibboleth support"},{id:"io.swagger.core.v3",name:"Swagger Core",url:"https://github.com/swagger-api/swagger-core",license:"Apache License 2.0",licenseUrl:"https://github.com/swagger-api/swagger-core/blob/master/LICENSE",usage:"REST API documentation"},{id:"org.glassfish.jersey",name:"Eclipse Jersey",url:"https://eclipse-ee4j.github.io/jersey/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/eclipse-ee4j/jersey/blob/2.x/LICENSE.md",usage:"RESTful web services"},{id:"org.slf4j",name:"Simple Logging Facade for Java (SLF4J)",url:"https://www.slf4j.org/",license:"MIT License",licenseUrl:"https://www.slf4j.org/license.html",usage:"logging"},{id:"org.junit",name:"JUnit 5",url:"https://junit.org/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/junit-team/junit-framework/blob/main/LICENSE.md",usage:"testing"},{id:"optimaize/language-detector",name:"Optimaize Language Detector",url:"https://github.com/optimaize/language-detector",license:"Apache License 2.0",licenseUrl:"https://github.com/optimaize/language-detector/blob/master/LICENSE",usage:"language detection of results"},{id:"org.apache.commons:commons-text",name:"Apache Commons Text",url:"https://commons.apache.org/proper/commons-text/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/commons-text/blob/master/LICENSE.txt",usage:"export format"},{id:"com.sun.xml.bind",name:"JAXB Reference Implementation",url:"https://eclipse-ee4j.github.io/jaxb-ri/",license:"Common Development and Distribution License (CCDL) 1.1",licenseUrl:"https://github.com/javaee/jaxb-v2/blob/2.3.0.1/jaxb-ri/License.txt",usage:"XML support",hide:!0},{id:"eu.clarin.weblicht:wlfxb",name:"Weblicht wlfxb",url:"https://weblicht.sfs.uni-tuebingen.de",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://github.com/weblicht/wlfxb/blob/master/LICENSE.txt",usage:"export format"},{id:"org.apache.poi:poi-ooxml",name:"Apache POI",url:"https://poi.apache.org/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/poi/blob/trunk/legal/LICENSE",usage:"export format"},{id:"org.jopendocument:jOpenDocument",name:"jOpenDocument",url:"https://www.jopendocument.org/",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://www.jopendocument.org/support.html",usage:"export format"},{id:"eu.clarin.sru:sru-client",name:"CLARIN SRU/CQL Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-sru-client/blob/main/LICENSE.txt",usage:"SRU / CQL client framework",hide:!0},{id:"eu.clarin.sru.fcs:fcs-simple-client",name:"CLARIN-FCS Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-simple-client/blob/main/LICENSE.txt",usage:"FCS client framework",hide:!0}],ln=[{id:"react",name:"React",url:"https://react.dev/",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE"},{id:"react-dom",name:"ReactDOM",url:"https://react.dev/reference/react-dom",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE",hide:!0},{id:"react-router",name:"React Router",url:"https://reactrouter.com/",license:"MIT License",licenseUrl:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",usage:"single page application routing"},{id:"react-bootstrap",name:"React Bootstrap",url:"https://react-bootstrap.netlify.app/",license:"MIT License",licenseUrl:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE",usage:"react bindings for bootstrap"},{id:"bootstrap",name:"Bootstrap",url:"https://getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/bootstrap/blob/main/LICENSE",usage:"UI framework"},{id:"bootstrap-icons",name:"Bootstrap Icons",url:"https://icons.getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/icons/blob/main/LICENSE"},{id:"@tanstack/react-query",name:"TanStack Query",url:"https://tanstack.com/query",license:"MIT License",licenseUrl:"https://github.com/TanStack/query/blob/main/LICENSE",usage:"data loading via REST APIs"},{id:"axios",name:"Axios",url:"https://axios-http.com/",license:"MIT License",licenseUrl:"https://github.com/axios/axios/blob/v1.x/LICENSE",usage:"cross-browser support for REST API requests"},{id:"antlr4ng",name:"Next Generation TypeScript runtime for ANTLR4",url:"https://github.com/mike-lischke/antlr4ng",license:'The "BSD license"',licenseUrl:"https://github.com/mike-lischke/antlr4ng/blob/main/LICENSE.txt",usage:"query parser"},{id:"i18next",name:"i18next",url:"https://www.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next/blob/master/LICENSE",usage:"translations"},{id:"react-i18next",name:"react-i18next",url:"https://react.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/react-i18next/blob/master/LICENSE",usage:"translations",hide:!0},{id:"i18next-resources-to-backend",name:"i18next-resources-to-backend",url:"https://github.com/i18next/i18next-resources-to-backend",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next-resources-to-backend/blob/main/licence",usage:"translation resource loading",hide:!0},{id:"zustand",name:"Zustand",url:"https://zustand-demo.pmnd.rs/",license:"MIT License",licenseUrl:"https://github.com/pmndrs/zustand/blob/main/LICENSE",usage:"state management"},{id:"@nozbe/microfuzz",name:"microfuzz",url:"https://github.com/Nozbe/microfuzz",license:"MIT License",licenseUrl:"https://github.com/Nozbe/microfuzz/blob/main/LICENSE",usage:"fuzzy search"},{id:"react-helmet-async",name:"React Helmet (async fork)",url:"https://github.com/staylor/react-helmet-async",license:"Apache License 2.0",licenseUrl:"https://github.com/staylor/react-helmet-async/blob/main/LICENSE",usage:"HTML head modifications"},{id:"react-slugify",name:"react-slugify",url:"https://github.com/martpie/react-slugify",license:"MIT License",licenseUrl:"https://github.com/martpie/react-slugify/blob/master/LICENSE",usage:"jump id fragment generation"}];function cn(){const{t}=Z(),s="urls.termsUseAndDisclaimer",n=t(s,{ns:"common"}),r=n!==s,a=Q.getState().matomoTrackingEnabled,o=Q.getState().appTitleHead,i=Ye();function l(c){return e.jsx("ul",{children:c.filter(u=>u.hide!==!0).map(u=>e.jsxs("li",{children:[u.url?e.jsx("a",{href:u.url,children:u.name}):e.jsx("span",{children:u.name}),u.license&&e.jsxs(e.Fragment,{children:[" ","(",u.licenseUrl?e.jsx("a",{href:u.licenseUrl,children:u.license}):e.jsx("span",{children:u.license}),")"]})]},u.id))})}return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsxs("title",{children:[o," – About"]})}),e.jsxs(se,{className:"py-4",children:[e.jsx("h1",{className:"h1 mb-4",children:t("about.title")}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:t("about.people.title")}),e.jsx("p",{children:t("about.people.developedBy")}),e.jsx("ul",{children:an.map(c=>e.jsx("li",{children:c},c))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:t("about.statistics.title")}),e.jsx("p",{children:e.jsx(z,{i18nKey:"about.statistics.text",components:[e.jsx(Qe,{to:{pathname:"/stats",search:i},children:"endpoint statistics"})]})})]}),(r||a)&&e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:t("about.privacyPolicy.title")}),r&&e.jsx("p",{children:e.jsx(z,{i18nKey:"about.privacyPolicy.termsInfo",components:[e.jsx("a",{href:n,children:"clarin.eu"})]})}),a&&e.jsx("p",{children:e.jsx(z,{i18nKey:"about.privacyPolicy.matomoInfo",components:[e.jsx("a",{href:"https://matomo.org/",children:"Matomo"})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:t("about.sourceCode.title")}),e.jsx("p",{children:e.jsx(z,{i18nKey:"about.sourceCode.sourceInfo.text",components:[e.jsx("a",{href:t("about.sourceCode.sourceInfo.repoUrl"),children:"GitHub"}),e.jsx("a",{href:t("about.sourceCode.sourceInfo.licenseUrl"),children:"GPL 3.0 license"})]})}),e.jsx("p",{children:t("about.sourceCode.licenseInfo")})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"h2",children:t("about.technology.title")}),e.jsx("p",{children:t("about.technology.backendUses")}),l(on),e.jsx("p",{children:t("about.technology.frontendUses")}),l(ln),e.jsx("p",{children:e.jsx(z,{i18nKey:"about.technology.iconLicenseInfo",components:[e.jsx("a",{href:"http://www.freepik.com/",children:"Freepik"}),e.jsx("a",{href:"www.flaticon.com",children:"www.flaticon.com"}),e.jsx("a",{href:"http://creativecommons.org/licenses/by/3.0/",children:"CC BY 3.0"})]})})]})]})]})}const Bt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`,lt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`;function un(){const{t}=Z(),s=Q.getState().appTitleHead;return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsxs("title",{children:[s," – Help"]})}),e.jsxs(se,{className:"my-4",children:[e.jsx("h1",{className:"h1",children:t("help.title")}),e.jsx("h2",{className:"h2",id:"performing-a-fcs-search-in-resources",children:t("help.performSearch.title")}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.performSearch.textBasicSearch"})}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.performSearch.textAdvancedSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:lt},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.performSearch.textLexicalSearch",components:{iconMagicWand:e.jsx("i",{dangerouslySetInnerHTML:{__html:lt},"aria-hidden":"true"})}})}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.performSearch.textSearchProgress"})}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.performSearch.textViewResource",components:{iconEye:e.jsx("i",{dangerouslySetInnerHTML:{__html:Bt},"aria-hidden":"true"})}})}),e.jsx("h2",{className:"h2",id:"adjusting-search-criteria",children:t("help.adjustSearchCriteria.title")}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.adjustSearchCriteria.text"})}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.adjustSearchCriteria.textOtherSearchTypes"})}),e.jsx("h2",{className:"h2",id:"more-help",children:t("help.moreHelp.title")}),e.jsx("p",{children:e.jsx(z,{i18nKey:"help.moreHelp.text",components:[e.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),e.jsx("a",{title:t("help.contactTitle"),href:t("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"})]})})]})]})}const gt=d.createContext({resources:[],languages:{},weblichtLanguages:[]});gt.displayName="AggregatorDataContext";function dn({resources:t,languages:s,weblichtLanguages:n,children:r}){const a={resources:t,languages:s,weblichtLanguages:n};return e.jsx(gt.Provider,{value:a,children:r})}function pt(){return d.useContext(gt)}const ft=d.createContext(void 0);ft.displayName="AxiosContext";function Le(){const t=d.useContext(ft);if(!t)throw new Error('No "axios" instance set, use AxiosProvider to set one');return t}function hn({axios:t,children:s}){return e.jsx(ft.Provider,{value:t,children:s})}const xt=d.createContext(void 0);xt.displayName="SearchParamsContext";function jt(){const t=d.useContext(xt);if(!t)throw new Error('No "params" data set, use SearchParamsProvider to set one');return t}function mn({language:t,languageFilter:s,queryType:n,query:r,resourceIDs:a,numberOfResults:o,children:i}){const l={language:t,languageFilter:s,queryType:n,query:r,resourceIDs:a,numberOfResults:o};return e.jsx(xt.Provider,{value:l,children:i})}function gn(t,s=0){let n=3735928559^s,r=1103547991^s;for(let a=0,o;a<t.length;a++)o=t.charCodeAt(a),n=Math.imul(n^o,2654435761),r=Math.imul(r^o,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}window._paq=window._paq||[];function pn({siteId:t,trackerUrl:s,enableLinkTracking:n=!0,domains:r=[],userId:a=void 0}){window._paq.push(["setTrackerUrl",s]),window._paq.push(["setSiteId",t]),a&&window._paq.push(["setUserId",a]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),n&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function fn({srcUrl:t}){const s=document.createElement("script"),n=document.getElementsByTagName("script")[0];s.type="text/javascript",s.async=!0,s.defer=!0,s.src=t,n&&n.parentNode&&n.parentNode.insertBefore(s,n)}function xn(t){if(!t)return!1;let s=null;if(typeof t=="string")try{s=JSON.parse(t)}catch(u){return console.error("Error trying to parse tracking params!",u),!1}else typeof t=="object"&&(s=t);const n=s.siteId,r=s.trackerUrl,a=s.srcUrl,o=s.domains,i=s.userId?.toString();if(a===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(n===void 0||!Number.isInteger(n))return console.warn('No "siteId" configuration set for tracking!'),!1;const l={siteId:n,trackerUrl:r,domains:o};i&&(l.userId=gn(i).toString());const c={srcUrl:a};return pn(l),Vt(document.location.href||window.location.href,document.title),fn(c),!0}function Vt(t,s,n){window._paq.push(["setDocumentTitle",s??document.title]),window._paq.push(["setCustomUrl",t]),n!==void 0&&window._paq.push(["setReferrerUrl",n]),window._paq.push(["trackPageView"])}function $t(t,s=!1,n=!1){window._paq.push(["trackSiteSearch",t,s,n])}const ct="byMeta",jn="all",Kt="resource",bn="title-up",de="mul";function Xe(t,s=void 0,n={}){return t===de?n?.defaultAnyLanguage??"Any Language":s?.[t]||(n?.defaultUnknownLanguage??"Unknown Language")}function yn(t){const s=J.getState().locale,n=(o,i=null)=>({...o,subResources:o.subResources.map(l=>n(l,i??o)),rootResourceId:i?.id??null}),r=t.map(o=>n(o,null)),a=function(o,i){const l=U(o.institution,s)??"",c=U(i.institution,s)??"",u=l.localeCompare(c);if(u!==0)return u;const g=U(o.title,s)??"",p=U(i.title,s)??"";return g.toLowerCase().localeCompare(p.toLowerCase())};return Se(r,o=>{o.subResources.sort(a)}),r.sort(a),r}function wn(t,s){const n=[],r=[],a=[];return Object.entries(s).forEach(([o,i])=>{i.forEach(l=>{let c=!1;Se(t,u=>{u.handle===l&&(c=!0,a.push(u))}),c||(console.warn("Handle not found in resources",l),r.push(l))})}),Se(a,o=>{n.push(o.id)}),{selected:n,unavailable:r}}function Se(t,s){const n=(r,a)=>{s(r,a)===!1||r.subResources.forEach(n)};t.forEach(n)}function Qt(t,s){const n=r=>s(r)?r:r.subResources.find(n);return t.find(n)}function me(t){const s=[];return Se(t,n=>{s.push(n.id)}),s}function Sn(t,s,n){const r=[],a=o=>Gt(o,a)||_n(o,s,n);return Se(t,o=>{a(o)&&r.push(o.id)}),r}function vn(t,s){const n=J.getState().locale,r=new Set;return Se(t,a=>{if(s.includes(a.id)){const o=U(a.institution,n)??"";r.add(o)}return!0}),Array.from(r)}function Ln(t){const s=n=>[n,...n.subResources.map(s).flat()];return t.map(s).flat()}const Rn=["en","eng","de","deu"];function Cn(t){if(t===null)return null;if(typeof t=="string")return t;for(const n of Rn)if(Object.hasOwn(t,n))return t[n];const s=Object.getOwnPropertyNames(t);return s.length>0?t[s[0]]:null}function Nn(t,s){return t===null?null:typeof t=="string"?t:s&&Object.hasOwn(t,s)?t[s]:null}function U(t,s){s===void 0&&(s=J.getState().locale);const n=Nn(t,s);return n!==null?n:Cn(t)}function Je(t,s="en"){const n=typeof t.title=="string"||t.title===null?[s]:Object.getOwnPropertyNames(t.title),r=typeof t.description=="string"||t.description===null?[s]:Object.getOwnPropertyNames(t.description),a=typeof t.institution=="string"||t.institution===null?[s]:Object.getOwnPropertyNames(t.institution),o=[...n,...r,...a];return Array.from(new Set(o))}function Tn(t,s){return!(s==="fcs"&&!t.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||s==="lex"&&!t.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function In(t,s){return!!(s===de||t.languages&&t.languages.length===1&&t.languages[0]===s||t.languages&&t.languages.indexOf(s)>=0)}function Gt(t,s){if(!t.subResources||t.subResources.length===0)return!1;let n=!1;const r=a=>{if(s?.(a)===!0){n=!0;return}a.subResources.forEach(r)};return t.subResources.forEach(r),n}function _n(t,s,n){return!(!Tn(t,s)||!In(t,n))}const En={"title-up":(t,s)=>{const n=J.getState().locale,r=U(t.title,n)??"",a=U(s.title,n)??"";return r.localeCompare(a)},"title-down":(t,s)=>{const n=J.getState().locale,r=U(t.title,n)??"",a=U(s.title,n)??"";return-r.localeCompare(a)},"institution-up":(t,s)=>{const n=J.getState().locale,r=U(t.institution,n)??"",a=U(s.institution,n)??"",o=U(t.title,n)??"",i=U(s.title,n)??"",l=r.localeCompare(a);return l!==0?l:o.localeCompare(i)},"institution-down":(t,s)=>{const n=J.getState().locale,r=U(t.institution,n)??"",a=U(s.institution,n)??"",o=U(t.title,n)??"",i=U(s.title,n)??"",l=-r.localeCompare(a);return l!==0?l:o.localeCompare(i)}};function Wt(t,s){const[n,r]=d.useState(t);return d.useEffect(()=>{const a=setTimeout(()=>{r(t)},s);return()=>{clearTimeout(a)}},[t,s]),n}function ut(t,s,n=0,r=s){if(s===t&&s===r&&s.nodeType===Node.ELEMENT_NODE&&n===1)return s.nodeType,s.textContent?.length,s.textContent?.length||0;if(s===t||t===null)return n;const a=s.parentNode;if(a===null)return n;let o=0;const i=a.childNodes;for(let l=0;l<i.length;l++){const c=i[l];if(c===s)break;c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?o+=c.textContent?.length||0:console.warn("unknown node type",{container:t,node:s,offset:n,parent:a,i:l,child:c})}return ut(t,a,o+n,r)}function Yt(t,s){const n=t.textContent?.length||0;if(n<s)return null;let r=0;const a=t.childNodes;for(let o=0;o<a.length;o++){const i=a[o];let l=0;if(i.nodeType===Node.TEXT_NODE||i.nodeType===Node.ELEMENT_NODE?l=i.textContent?.length||0:console.warn("unknown node type, skip",{container:t,offset:s,child:i}),!(l===0&&a.length!==1)&&(r+=l,r>=s)){const c=s-(r-l);return i.nodeType===Node.ELEMENT_NODE?Yt(i,c):{node:i,offset:c}}}return a.length,null}function dt(t,s){if(!s)return null;const n=ut(t,s.startContainer,s.startOffset);if(s.startContainer.nodeType===Node.TEXT_NODE&&s.endContainer===s.startContainer)return[n,n+(s.endOffset-s.startOffset)];const r=ut(t,s.endContainer,s.endOffset);return[n,r]}function An(t,s){if(!(document.activeElement===t))return null;const r=window.getSelection();if(!r)return null;const a=document.createRange(),o=Yt(t,s);if(o)try{a.setStart(o.node,o.offset),a.collapse(!0),r.removeAllRanges(),r.addRange(a)}catch(i){console.error("Error trying to set cursor!",i,{container:t,offset:s,startRange:o})}}function Nt(t){if(!(document.activeElement===t))return null;const n=window.getSelection();if(!n||n.rangeCount===0)return null;const r=n.getRangeAt(0),a=dt(t,r);return a?a[0]:null}function kn(t){return t==="cql"?"fcs-cql":t==="fcs"?"fcs-fcsql":t==="lex"?"fcs-lexcql":"plain"}function ht(t,s){const n=kn(s),r="match-braces rainbow-braces";let a=t;try{a=_s.highlight(t,n)}catch(i){console.warn("Error trying to highlight value",{value:t,error:i,language:n})}return`<pre><code class="language-${n} ${r}">${a}</code></pre>`}function Te(t){return t?(t=t.replace(/[\n\t]/g," "),t=t.replace(/&nbsp;|\u202F|\u00A0/g," "),t):""}const Xt=ds.forwardRef(({value:t,onChange:s,onCursorChange:n,disabled:r,placeholder:a,queryType:o,delay:i=200,...l},c)=>{const u=d.useRef(null),g=d.useRef(null);d.useImperativeHandle(c,()=>g.current);const[p,x]=d.useState(Te(t)),[_,v]=d.useState(null),T=Wt(p,i),[b,R]=d.useState(T);d.useEffect(()=>{const L=ht(T,o);if(R(L),g.current){const A=Nt(g.current);v(A)}},[T,o]),d.useEffect(()=>{const L=Te(t);if(T!==L&&(x(L),R(ht(L)),g.current)){const A=Nt(g.current);v(A)}},[t,T]),d.useLayoutEffect(()=>{g.current&&_!==null&&An(g.current,_)});function E(L){const A=L.target.innerText;u.current&&(u.current.value=A),x(A),s?.(A)}function j(L){L.stopPropagation(),L.preventDefault();const K=(L.clipboardData||window.clipboardData).getData("text");w(K)}function M(L){L.key==="Enter"?(L.stopPropagation(),L.preventDefault(),u.current&&u.current.form?.requestSubmit()):L.key==="Backspace"?(L.stopPropagation(),L.preventDefault(),H()):L.key==="Delete"?(L.stopPropagation(),L.preventDefault(),$()):L.ctrlKey&&L.key==="a"||v(null)}function F(L=!1){if(!g.current||!n)return;const A=g.current;if(!(document.activeElement===A))return;const S=window.getSelection();if(!S||S.rangeCount===0)return;const I=[];for(let O=0;O<S.rangeCount;O++){const h=S.getRangeAt(O),C=dt(A,h);C&&I.push(C)}if(I.length===0)return;const[m,P]=I.pop();L?m===P&&(v(m),n?.(m)):n?.(m,m!==P?P:void 0)}function f(L){if(!g.current)return null;const A=g.current;if(!(document.activeElement===A))return null;const S=window.getSelection();if(!S||S.rangeCount===0)return null;const I=[];for(let h=0;h<S.rangeCount;h++){const C=S.getRangeAt(h),ee=dt(A,C);ee&&I.push(ee)}if(I.length===0)return null;I.sort();const m=I.map(([h,C])=>C-h).reduce((h,C)=>h+C,0),P=A.innerText,O=I.toReversed().reduce((h,[C,ee])=>h.slice(0,C)+h.slice(ee),P);if(L==="backspace"){if(m===0){const h=I.filter(([C,ee])=>C===ee).map(([,C])=>C).pop();if(h===0)return null;if(h!==void 0)return{value:O.slice(0,h-1)+O.slice(h),offset:h-1}}else{const h=I.map(([,C])=>C).pop();if(h!==void 0)return{value:O,offset:h-m}}return console.warn('invalid "backspace" process, abort',{container:A,selectionIndices:I,oldValue:P,newValueSpansRemoved:O,numDeleted:m}),null}else if(L==="delete"){if(m===0){const h=I.filter(([C,ee])=>C===ee).map(([,C])=>C).pop();if(h!==void 0)return{value:O.slice(0,h)+O.slice(h+1),offset:h}}else{const h=I.map(([,C])=>C).pop();if(h!==void 0)return{value:O,offset:h-m}}return console.warn('invalid "delete" process, abort',{container:A,selectionIndices:I,oldValue:P,newValueSpansRemoved:O,numDeleted:m}),null}else if(L==="paste"){if(m===0){const h=I.filter(([C,ee])=>C===ee).map(([C])=>C).shift();if(h!==void 0)return{value:O,offset:h}}else{const h=I.map(([C])=>C).shift();if(h!==void 0)return{value:O,offset:h}}return console.warn('invalid "paste" process, abort',{container:A,selectionIndices:I,oldValue:P,newValueSpansRemoved:O,numDeleted:m}),null}}function w(L){const A=f("paste");if(!A)return;const K=Te(L),{value:S,offset:I}=A,m=S.slice(0,I)+K+S.slice(I),P=I+L.length;x(m),v(P),u.current&&(u.current.value=m),s?.(m),n?.(P)}function H(){const L=f("backspace");if(!L)return;const{value:A,offset:K}=L,S=Te(A);x(S),v(K),u.current&&(u.current.value=S),s?.(S),n?.(K)}function $(){const L=f("delete");if(!L)return;const{value:A,offset:K}=L,S=Te(A);x(S),v(K),u.current&&(u.current.value=S),s?.(S),n?.(K)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{role:"input",disabled:r,placeholder:a,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...l,onInput:E,onPaste:j,onKeyDown:M,onKeyUp:()=>F(),onClick:()=>F(!0),tabIndex:r?-1:l.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:b},ref:g}),a&&t===""&&e.jsx("span",{className:"input-placeholder-simulacrum",children:a}),e.jsx("input",{type:"hidden",ref:u})]})});Xt.displayName="ContentEditable";var ae=hs();function Mn({show:t,languages:s,resources:n,searchLanguage:r,searchLanguageFilter:a,onModalClose:o}){const{t:i}=Z(),[l,c]=d.useState(r||de),[u,g]=d.useState(a||ct),[p,x]=d.useState(""),[_,v]=d.useState(!1),T=d.useMemo(()=>{const f=new Map;return n&&(n.forEach(w=>w.languages.forEach(H=>f.set(H,(f.get(H)??0)+1))),f.set(de,n.length)),f},[n]),b=ae.useFuzzySearchList({list:Object.entries(s??{}).toSorted(),queryText:p,getText:f=>[f[0],f[1]],mapResultItem:({item:f,score:w,matches:H})=>({item:f,matches:H,score:w})});if(!s)return null;const R=Math.floor((b.length+2)/3);function E(f){o({language:l,filter:u,action:f})}function j(){c(r||de),g(a||ct)}function M(){v(f=>!f)}function F(f,w,H,$){const L=l===f;let A="d-block py-0 my-1 border-0";return L&&(A+=" fw-semibold selected"),H===void 0&&(H=[null,null]),e.jsxs(W,{size:"sm",className:A,style:{color:`var(${L?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>c(f),"data-filter-score":$,children:[L&&e.jsx("span",{className:"selected-marker me-1",children:"✓"}),e.jsx(ae.Highlight,{ranges:H[1],text:w})," ",e.jsx("sup",{children:e.jsx(ae.Highlight,{ranges:H[0],text:f})}),_&&T.has(f)&&e.jsxs(e.Fragment,{children:[" (",T.get(f),")"]})]},f)}return e.jsxs(Y,{show:t,onHide:()=>E("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[e.jsx(Y.Header,{closeButton:!0,children:e.jsx(Y.Title,{children:i("search.languagesModal.title")})}),e.jsxs(Y.Body,{className:"px-0",children:[e.jsxs(se,{className:"px-4 pb-3 border-bottom",children:[e.jsxs(X,{children:[e.jsx(k,{sm:!0}),e.jsx(k,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:F(de,i("languageCodeToName.any",{ns:"common"}))}),e.jsxs(k,{sm:!0,children:[e.jsx(q.Control,{size:"sm",placeholder:i("search.languagesModal.filterInputPlaceholder"),name:"languages-filter",value:p,onChange:f=>x(f.target.value)}),n&&e.jsx(q.Check,{name:"languages-show-count",id:"languages-show-count",checked:_,onChange:M,type:"checkbox",label:i("search.languagesModal.checkboxShowNumberOfResources"),className:"mt-1"})]})]}),e.jsxs(X,{children:[e.jsx(k,{sm:!0,children:b.slice(0,R).map(({item:[f,w],matches:H,score:$})=>F(f,w,H,$))}),e.jsx(k,{sm:!0,children:b.slice(R,2*R).map(({item:[f,w],matches:H,score:$})=>F(f,w,H,$))}),e.jsx(k,{sm:!0,children:b.slice(2*R).map(({item:[f,w],matches:H,score:$})=>F(f,w,H,$))})]})]}),e.jsx(q,{children:e.jsx(se,{className:"px-4 pt-3",children:["byMeta","byGuess","byMetaAndGuess"].map(f=>e.jsx(q.Check,{type:"radio",name:"filterOpts",value:f,id:`filterOpts-${f}`,checked:u===f,onChange:()=>g(f),label:i(`search.languagesModal.optionLanguage${f}`)},f))})})]}),e.jsxs(Y.Footer,{children:[e.jsx(W,{variant:"secondary",onClick:j,children:i("search.languagesModal.buttonReset")}),e.jsx(W,{variant:"secondary",onClick:()=>E("abort"),children:i("search.languagesModal.buttonAbort")}),e.jsx(W,{variant:"primary",onClick:()=>E("confirm"),children:i("search.languagesModal.buttonConfirm")})]})]})}const bt=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],Ke=Object.fromEntries(["cql","fcs","lex"].map(t=>[t,bt.find(s=>s.id===t)])),Tt=["fcs","lex"],Pn=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],On="cql",Ve=[10,20,50,100,200,250],fe="info:srw/diagnostic/1/61",Un=[{id:"cql-single-term",queryType:"cql",query:"Elephant",description:"Query with single term"},{id:"cql-with-boolean",queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{id:"cql-with-phrase",queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{id:"fcs-three-tokens-artznei",queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb'},{id:"lex-plain-string",queryType:"lex",query:"apple",description:"Search for plain string"},{id:"lex-lemma-with-language",queryType:"lex",query:'lemma =/lang=deu "Apfel"',description:'Search for German lemma "Apfel"'}];function Hn({show:t,queryTypes:s,onModalClose:n}){const{t:r}=Z(),a=s&&s.length>0?s:["cql","fcs","lex"],o=Un.filter(u=>a.includes(u.queryType));if(o.length===0)return i("abort"),null;function i(u){n({query:void 0,queryType:void 0,action:u})}function l(u,g){n({query:u,queryType:g,action:"confirm"})}function c(u,g,p,x){return e.jsxs(X,{children:[e.jsx(k,{md:"auto",className:"d-none d-md-block",children:x&&`${x}.`}),e.jsxs(k,{className:"d-flex flex-column",children:[p!==void 0&&e.jsx("div",{children:p}),e.jsx("div",{dangerouslySetInnerHTML:{__html:ht(u,g)}})]}),e.jsx(k,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:e.jsx(W,{size:"sm",onClick:()=>l(u,g),children:r("search.suggestionsModal.buttonUseQuery")})})]},u)}return e.jsxs(Y,{id:"search-query-suggestions-modal",show:t,onHide:()=>i("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(Y.Header,{closeButton:!0,children:e.jsx(Y.Title,{children:r("search.suggestionsModal.title")})}),e.jsx(Y.Body,{className:"px-0",children:e.jsx(se,{fluid:!0,children:a.map(u=>{const g=o.filter(p=>p.queryType===u);return g.length===0?null:e.jsxs(d.Fragment,{children:[e.jsx(X,{children:e.jsx(k,{children:e.jsx("h4",{className:"border-bottom pb-2",children:r(`queryTypes.${u}.nameLong`,{ns:"common",defaultValue:Ke[u]?.name??u.toUpperCase()})})})}),g.map((p,x)=>c(p.query,p.queryType,p.description,x+1))]},u)})})}),e.jsx(Y.Footer,{children:e.jsx(W,{variant:"primary",onClick:()=>i("close"),children:r("search.suggestionsModal.buttonClose")})})]})}function Jt({disabled:t,value:s,onChange:n,delay:r=300}){const[a,o]=d.useState(s??""),i=Wt(a,r);return d.useEffect(()=>{n(i)},[n,i]),e.jsx(q.Control,{type:"search",placeholder:"Search for ...",value:a,onChange:l=>o(l.target.value),disabled:t})}const Ze=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,Zt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`;function yt({resource:t,selectedResourceIDs:s,highlighting:n,highlightings:r,shouldBeShown:a,localeForInfos:o,onSelectClick:i,languageCodeToName:l}){const{t:c}=Z(),[u,g]=d.useState(!1),[p,x]=d.useState(!1);n??=r?.get(t.id)??[null,null,null];const _=s.includes(t.id),v=Je(t),T=xe(f=>f.locale),[b,R]=d.useState(T);if(d.useEffect(()=>{T&&R(T)},[T]),d.useEffect(()=>{o&&R(o)},[o]),typeof a=="function"&&!a(t))return null;if(a===!1)return null;const E=typeof a=="function"?t.subResources.some(f=>a(f)):!0;function j(){u&&document.getSelection()?.type==="Range"||g(f=>!f)}function M(){i(t,!_)}function F(){x(f=>!f)}return e.jsxs(e.Fragment,{children:[e.jsxs(X,{className:`p-2 m-1 ${u&&"border-bottom"}`,children:[e.jsx(k,{md:"auto",sm:1,onClick:M,children:e.jsx(q.Check,{id:`resource-selection-${t.id}`,"aria-label":c("search.results.resourceInfo.checkboxResourceAriaLabel",{title:t.title}),children:e.jsx(q.Check.Input,{checked:_,onChange:()=>{}})})}),e.jsxs(k,{md:8,sm:11,className:`mb-sm-2 ${u?"":"text-truncate"}`,onClick:j,children:[e.jsxs("h4",{className:`h5 ${u?"":"text-truncate"}`,children:[e.jsx(ae.Highlight,{text:U(t.title,b)??"",ranges:n[0]})," ",t.landingPage&&e.jsx("small",{children:e.jsxs("a",{href:t.landingPage,className:"matomo_link",target:"_blank",children:[c("search.resourcesModal.resource.moreInformation")," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:Zt}})]})})]}),e.jsx("p",{className:`mb-0 ${u?"":"text-truncate"}`,children:U(t.description,b)&&e.jsx(ae.Highlight,{text:U(t.description,b)??"",ranges:n[2]})})]}),e.jsxs(k,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${u?"":" text-truncate"}`,onClick:j,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",e.jsx(ae.Highlight,{text:U(t.institution,b)??"",ranges:n[1]}),e.jsx("br",{}),e.jsx("i",{dangerouslySetInnerHTML:{__html:Me}})," ",t.languages.map(l).sort().join(", "),u&&v.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(We,{type:"radio",name:`resources-${t.id}-info-languages`,defaultValue:b,onChange:f=>R(f),onClick:f=>f.stopPropagation(),className:"mt-2",children:v.toSorted().map(f=>e.jsx(Ae,{variant:"outline-secondary",size:"sm",id:`resources-${t.id}-info-languages-${f}`,value:f,type:"radio",children:f},f))})]})]}),E&&t.subResources.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-100"}),e.jsx(k,{md:"auto",sm:1,style:{width:"2.8rem"}}),e.jsx(k,{md:{span:8,offset:0},sm:{span:11,offset:1},children:e.jsx(W,{variant:"link",size:"sm",className:"ps-0",onClick:F,children:c("search.resourcesModal.resource.toggleExpand",{context:p?"collapse":"expand",count:t.subResources.length})})})]})]}),E&&p&&e.jsx(te,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:t.subResources.map(f=>e.jsx(yt,{resource:f,highlightings:r,selectedResourceIDs:s,shouldBeShown:a,onSelectClick:i,languageCodeToName:l},f.id))})]})}function It({title:t,resources:s,selectedResourceIDs:n,resourceScores:r,highlightings:a,expanded:o,shouldBeShown:i,localeForInfos:l,onSelectClick:c,onExpandToggleClick:u,onSelectAllClick:g,onDeselectAllClick:p,languageCodeToName:x}){const{t:_}=Z(),[v,T]=d.useState(o);d.useEffect(()=>{T(o)},[o]);const b=r!==void 0?s.filter(j=>r.has(j.id)).toSorted((j,M)=>{const F=r.get(j.id),f=r.get(M.id);return F===f?0:F===void 0?1:f===void 0?-1:F-f}):s;if(b.length===0)return null;function R(){T(j=>!j),u(!v)}function E(){const j=s.filter(w=>!w.rootResourceId),M=me(j).length,F=j.length,f=me(j).filter(w=>n.includes(w)).length;return _("search.resourcesModal.grouped.msgResources",{count:F,nested:M-F,context:M-F?"nested":null})+(f!==M?_("search.resourcesModal.grouped.msgResourcesSelected",{count:f}):"")}return e.jsxs(se,{className:"border-bottom pb-2 mb-4 px-0",children:[e.jsxs(X,{className:"px-3",children:[e.jsx(k,{md:9,sm:12,children:e.jsx("h3",{children:t})}),e.jsxs(k,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:[e.jsx(W,{size:"sm",variant:"secondary",onClick:R,"aria-expanded":v,children:_("search.resourcesModal.grouped.buttonExpand",{context:v?"hide":"show"})}),e.jsx(W,{size:"sm",onClick:()=>g(s),children:_("search.resourcesModal.grouped.buttonSelectAll")}),e.jsx(W,{size:"sm",onClick:()=>p(s),children:_("search.resourcesModal.grouped.buttonDeselectAll")})]})]}),e.jsx(X,{className:"px-3",children:e.jsx(k,{children:E()})}),e.jsx(Dt,{in:v,children:e.jsx(se,{children:b.map(j=>e.jsx(yt,{resource:j,highlightings:a,selectedResourceIDs:n,shouldBeShown:i,onSelectClick:c,languageCodeToName:x,localeForInfos:l},j.id))})})]})}function Dn(t,s,n){const r=Ln(s),a=ae.useFuzzySearchList({list:r,queryText:t,getText:p=>[U(p.title,n),U(p.institution,n),U(p.description,n)],mapResultItem:({item:p,score:x,matches:_})=>({resource:p,matches:_,score:x})}),o=a.reduce((p,{resource:x,matches:_})=>(p.set(x.id,_),p),new Map),i=a.reduce((p,{resource:x,score:_})=>p.set(x.id,_),new Map),l=new Set;a.filter(({resource:p})=>p.rootResourceId!==null).forEach(({resource:p,score:x})=>{const _=i.get(p.rootResourceId);_===void 0?(l.add(p.rootResourceId),i.set(p.rootResourceId,x)):x<_&&i.set(p.rootResourceId,x)});const c=s.filter(p=>l.has(p.id)).map(p=>({resource:p,score:i.get(p.id)}));return{resources:[...a.filter(({resource:p})=>!p.rootResourceId),...c].toSorted(({score:p},{score:x})=>p===x?0:p===void 0?1:x===void 0?-1:p-x).map(({resource:p})=>p),matches:o,scores:i}}function Fn({show:t,showGrouping:s,resources:n,languages:r,availableResources:a,selectedResources:o,onModalClose:i}){const{t:l}=Z(),c=xe(y=>y.locale),[u,g]=d.useState(c);d.useEffect(()=>{c&&g(c)},[c]);const p=new Intl.DisplayNames([c,"en"],{type:"language"}),[x,_]=d.useState(o||a),[v,T]=d.useState(jn),[b,R]=d.useState(Kt),[E,j]=d.useState(bn),[M,F]=d.useState(""),[f,w]=d.useState({}),[H,$]=d.useState({});d.useEffect(()=>{s&&R(s)},[t,s]),d.useEffect(()=>_(o),[o]);const L=n.filter(y=>a.includes(y.id)).toSorted(En[E]),K=L.map(y=>Je(y)).flat().reduce((y,B)=>y.set(B,(y.get(B)??0)+1),new Map),{resources:S,matches:I,scores:m}=Dn(M,L,u),P=d.useMemo(()=>{const y=new Map;return b==="institution"?Object.entries(f).forEach(([B,G])=>{y.set(B,G.resources.reduce((V,ce)=>{const oe=m.get(ce.id);return oe===void 0?V:V===void 0?oe:V<oe?V:oe},void 0))}):b==="language"&&Object.entries(H).forEach(([B,G])=>{y.set(B,G.resources.reduce((V,ce)=>{const oe=m.get(ce.id);return oe===void 0?V:V===void 0?oe:V<oe?V:oe},void 0))}),y},[b,m,f,H]);if(d.useMemo(()=>{const y={},B={};n.forEach(G=>{const V=U(G.institution,u)??"";Object.getOwnPropertyNames(y).includes(V)||(y[V]={expanded:!0,resources:[]}),y[V].resources.push(G),G.languages.forEach(ce=>{Object.getOwnPropertyNames(B).includes(ce)||(B[ce]={expanded:!0,resources:[]}),B[ce].resources.push(G)})}),w(y),$(B)},[n,u]),!n)return null;const O={total:me(n).length,totalRoot:n.length,available:a.length,selected:x.length,visible:me(S.map(y=>y)).length,visibleRoot:S.length};function h(y){return Xe(y,r,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})}function C(y,B){const G=x.filter(V=>!y.includes(V));_(B?[...G,...y]:G)}function ee(y){i({resourceIDs:x,action:y})}function le(y){T(y.target.value)}function we(y){R(y.target.value)}function Oe(y){j(y.target.value)}function Re(){_(a)}function et(){_([])}function Ue(){_(S.map(y=>y.id))}function be(y,B){C(me([y]),B)}function He(y){C(me(y),!0)}function De(y){C(me(y),!1)}function Ce(y){return!(!a.includes(y.id)||v==="selected"&&!x.includes(y.id)&&!Gt(y,B=>x.includes(B.id)))}function tt(){return b==="institution"?Object.entries(f).toSorted(([y],[B])=>{const G=P.get(y),V=P.get(B);return G===V?0:G===void 0?1:V===void 0?-1:G-V}).map(([y,{expanded:B,resources:G}])=>e.jsx(It,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",y]}),resources:G,selectedResourceIDs:x,resourceScores:m,highlightings:I,expanded:B,shouldBeShown:Ce,onSelectAllClick:He,onExpandToggleClick:V=>{w({...f,[y]:{...f[y],expanded:V}})},onDeselectAllClick:De,onSelectClick:be,languageCodeToName:h,localeForInfos:u},y)):b==="language"?Object.entries(H).toSorted(([y],[B])=>{const G=P.get(y),V=P.get(B);return G===V?0:G===void 0?1:V===void 0?-1:G-V}).map(([y,{expanded:B,resources:G}])=>e.jsx(It,{title:e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Me}})," ",h(y)," [",y,"]"]}),resources:G,selectedResourceIDs:x,resourceScores:m,highlightings:I,expanded:B,shouldBeShown:Ce,onSelectAllClick:He,onExpandToggleClick:V=>H[y].expanded=V,onDeselectAllClick:De,onSelectClick:be,languageCodeToName:h,localeForInfos:u},y)):S.filter(y=>!y.rootResourceId).map(y=>e.jsx(yt,{resource:y,selectedResourceIDs:x,highlighting:I.get(y.id),highlightings:I,shouldBeShown:Ce,onSelectClick:be,languageCodeToName:h,localeForInfos:u},y.id))}return e.jsxs(Y,{id:"resource-selection-modal",show:t,onHide:()=>ee("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[e.jsx(Y.Header,{closeButton:!0,children:e.jsx(Y.Title,{children:l("search.resourcesModal.title")})}),e.jsxs(Y.Body,{className:"px-0",children:[e.jsx(q,{className:"px-3 pb-3 border-bottom",onSubmit:y=>y.preventDefault(),children:e.jsxs(se,{children:[e.jsxs(X,{className:"d-sm-flex row-gap-2 justify-content-around",children:[e.jsx(k,{md:2,sm:6,children:e.jsx(ge,{label:"View",controlId:"resource-view-options-visibility",children:e.jsxs(q.Select,{value:v,onChange:le,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"selected",children:"Selected only"})]})})}),e.jsx(k,{md:2,sm:6,children:e.jsx(ge,{label:"Group by",controlId:"resource-view-options-grouping",children:e.jsxs(q.Select,{value:b,onChange:we,children:[e.jsx("option",{value:"resource",children:"(Resource)"}),e.jsx("option",{value:"institution",children:"Institution"}),e.jsx("option",{value:"language",children:"Language"})]})})}),e.jsx(k,{md:2,sm:6,children:e.jsx(ge,{label:"Sort by",controlId:"resource-view-options-sorting",children:e.jsxs(q.Select,{value:E,onChange:Oe,disabled:b!=="resource"||M.trim()!=="",children:[e.jsx("option",{value:"title-up",children:"Title (up)"}),e.jsx("option",{value:"title-down",children:"Title (down)"}),e.jsx("option",{value:"institution-up",children:"Institution (up)"}),e.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),e.jsx(k,{md:3,sm:12,children:e.jsx(ge,{label:"Resource filter query",controlId:"resource-view-options-filter",children:e.jsx(Jt,{value:M,onChange:y=>F(y)})})}),e.jsxs(k,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[e.jsx(W,{onClick:Re,children:"Select all"}),e.jsx(W,{onClick:Ue,disabled:v!=="all"||M.trim()==="",children:"Select visible"}),e.jsx(W,{onClick:et,children:"Deselect all"})]})]}),K.size>1&&e.jsxs(q.Group,{as:X,controlId:"resource-info-language",className:"mt-2",children:[e.jsx(q.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:l("search.resourcesModal.labelChangeResourceInfoLanguage")}),e.jsx(k,{sm:"auto",children:e.jsx(We,{type:"radio",name:"resource-info-languages",defaultValue:u,onChange:y=>g(y),children:Array.from(K.entries()).toSorted().map(([y,B])=>e.jsxs(Ae,{size:"sm",id:`resource-info-languages-${y}`,value:y,variant:"secondary",title:l("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:B,language:y,languageName:p.of(y)}),children:[p.of(y)," ",e.jsx("sup",{children:y})]},y))})})]})]})}),e.jsx("p",{className:"m-4 mb-0",children:l("search.resourcesModal.msgResourcesSelected",{count:O.selected,total:O.visible,available:O.available,context:O.available!==O.visible?"available":null})}),e.jsx(se,{className:"px-3 pt-3",children:tt()})]}),e.jsx(Y.Footer,{children:e.jsx(W,{variant:"primary",onClick:()=>ee("confirm"),children:l("search.resourcesModal.buttonConfirm")})})]})}function zn(){const[t,s]=d.useState(!1);return[t,()=>{t!==!0&&s(!0)}]}function qn(){const t=Pt(),{hash:s}=mt(),n=d.useMemo(()=>new URLSearchParams(s.substring(1)),[s]),r=d.useCallback(a=>{const o=ms(typeof a=="function"?a(new URLSearchParams(n)):a),i=o.entries().next().done?"":`#${o}`;s!==i&&t({hash:i})},[n,s,t]);return[n,r]}const Bn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,$e=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,Vn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,$n=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,Kn=d.lazy(()=>ne(()=>import("./fcs-sru-aggregator-ui-query-builder-0.0.0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function _t(t,s=""){const n=t.get("query");return n||s}function Et(t,s="cql"){const n=t.get("queryType");if(n){if(bt.find(r=>r.id===n)!==void 0)return n;console.warn("Found unsupported queryType in search params",n)}return s}function Qn({resources:t,languages:s,onSearch:n,onShowToast:r,availableResources:a=null,selectedResources:o=null,hasSearch:i=!1,disabled:l=!1}){const{t:c}=Z(),[u,g]=Ge(),[p,x]=qn(),[_,v]=d.useState(!1),[T,b]=d.useState(Kt),[R,E]=d.useState(!1),[j,M]=d.useState(!1),[F,f]=d.useState(!1),[w,H]=zn(),[$,L]=d.useState(de),[A,K]=d.useState(ct),[S,I]=d.useState(Et(u,On)),[m,P]=d.useState(a??[]),[O,h]=d.useState(o??[]),[C,ee]=d.useState(Ve[0]),[le,we]=d.useState(_t(u,"")),[Oe]=d.useState(null),[Re,et]=d.useState(!1);d.useEffect(()=>{h(o??[])},[o]);const Ue=d.useCallback(N=>{const D=Sn(N,S,A==="byGuess"?de:$);return a&&a.length>0?D.filter(ie=>a.includes(ie)):D},[S,$,A,a]);d.useEffect(()=>{const N=Ue(t);P(N),h(D=>D.filter(ie=>N.includes(ie)))},[t,Ue]);const be=d.useCallback(()=>{const N={language:$,languageFilter:A,queryType:S,query:le,resourceIDs:O??[],numberOfResults:C};N.query!==""&&N.resourceIDs.length!==0&&n(N)},[$,A,C,n,le,S,O]);d.useEffect(()=>{if(u&&(we(D=>_t(u,D)),I(D=>Et(u,D)),!u.get("x-aggregation-context"))){const D=u.get("mode");D&&(D==="search"&&be(),u.delete("mode"),g(u))}},[u,g,be]),d.useEffect(()=>{u.get("query")!==le&&(u.set("query",le),g(u))},[le,u,g]),d.useEffect(()=>{u.get("queryType")!==S&&(u.set("queryType",S),g(u))},[S,u,g]),d.useEffect(()=>{p.has("openQueryBuilder")&&(H(),f(!0),p.delete("openQueryBuilder"),x(p))},[p,x,H]);const He=vn(t,O??[]).length,De=t.find(N=>N.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,Ce=t.find(N=>N.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,tt=Tt.includes(S);function y(N){N&&I(N)}function B(N){let D=Number.parseInt(N.target.value);D<10&&(D=10),D>250&&(D=250),Ve.includes(D)||console.warn("Invalid number of results?!",{valid:Ve,value:D}),ee(D)}function G({language:N,filter:D,action:ie}){E(!1),ie!=="abort"&&(L(N),K(D))}function V({resourceIDs:N,action:D}){v(!1),D!=="abort"&&h(N)}function ce({query:N,queryType:D,action:ie}){M(!1),ie!=="abort"&&ie!=="close"&&(!N||!D||(I(D),we(N)))}function oe({query:N,validResources:D,action:ie}){f(!1),ie!=="abort"&&ie!=="close"&&(we(N),O.length!==D.length&&r?.({title:c("search.toasts.searchInput.title"),body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:c("search.toasts.searchInput.msgResourcesChangedDueToQuery")}),e.jsx("p",{children:c("search.toasts.searchInput.msgResourcesAmountChanged",{before:O.length,after:D.length})}),e.jsx("hr",{}),e.jsx(W,{onClick:()=>h(O),children:c("search.toasts.searchInput.buttonRevertSelection")})]}),variant:"info",delay:7e3}),h(D))}function wt(N){we(N)}function os(N){N.preventDefault(),be()}function is(){const N=(O??[]).length,D=t.length===N||m.length===N?"all":null;return c("search.searchInput.buttonSelectedResources",{count:N,context:D})}return e.jsxs("search",{id:"fcs-query",children:[e.jsxs(q,{noValidate:!0,onSubmit:os,children:[e.jsxs(Rs,{size:i?void 0:"lg",hasValidation:!0,children:[e.jsx(W,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":c("search.searchInput.buttonOpenQuerySuggestions"),onClick:()=>M(!0),children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Bn},"aria-hidden":"true"})}),e.jsx(q.Control,{placeholder:"Elephant","aria-label":c("search.searchInput.inputQueryAriaLabel"),"aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:l,"aria-disabled":l,value:le,isInvalid:!!Oe,...Re?{as:Xt,queryType:S,onChange:wt}:{onChange:N=>wt(N.target.value)}}),tt&&e.jsx(W,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":c("search.searchInput.buttonOpenQueryBuilderAriaLabel"),className:"border-end-0 d-none d-md-block",onClick:()=>{H(),f(!0)},children:e.jsx("i",{dangerouslySetInnerHTML:{__html:lt},"aria-hidden":"true"})}),e.jsx(Ae,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:Re,onChange:()=>et(N=>!N),variant:"outline-secondary","aria-label":c("search.searchInput.buttonEnhanceQueryAriaLabel",{context:Re?"enabled":"disabled"}),className:"d-flex align-items-center border-end-0",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Vn},"aria-hidden":"true"})}),e.jsxs(W,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:l||le.trim().length===0,"aria-disabled":l,"aria-label":c("search.searchInput.buttonSearchAriaLabel"),children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:$n},"aria-hidden":"true",className:"d-inline d-md-none"}),e.jsx("span",{className:"d-none d-md-inline",children:c("search.searchInput.buttonSearch")})]}),e.jsx(q.Control.Feedback,{type:"invalid",children:Oe?.msg})]}),e.jsx("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:e.jsx(z,{i18nKey:"search.searchInput.filtersSummary",components:[e.jsxs(pe,{className:"d-inline-block",onSelect:y,"aria-disabled":l,"aria-label":c("search.searchInput.dropdownQueryTypeAriaLabel"),children:[e.jsxs(pe.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:l,"aria-disabled":l,style:Ke[S]?{"--color":Ke[S].color}:{},children:[c(`queryTypes.${S}.nameShort`,{ns:"common",defaultValue:Ke[S]?.searchLabel??S.toUpperCase()})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:$e},"aria-hidden":"true"})]}),e.jsx(pe.Menu,{children:bt.filter(N=>N.id==="cql"||N.id==="fcs"&&De||N.id==="lex"&&Ce).map(N=>e.jsx(pe.Item,{as:"button",eventKey:N.id,onClick:D=>D.preventDefault(),style:{"--color":N.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:c(`queryTypes.${N.id}.nameLong`,{ns:"common",defaultValue:N.name})},N.id))})]}),e.jsxs(W,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:l,"aria-disabled":l,onClick:()=>{b("resource"),v(!0)},children:[is()," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:$e},"aria-hidden":"true"})]}),e.jsxs(W,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:l,"aria-disabled":l,onClick:()=>{b("institution"),v(!0)},children:[c("search.searchInput.buttonSelectedInstitutions",{count:He})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:$e},"aria-hidden":"true"})]}),e.jsxs(W,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>E(!0),disabled:l,"aria-disabled":l,children:[Xe($,s??{},{defaultAnyLanguage:c("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:c("languageCodeToName.unknown",{ns:"common"})})," ",e.jsx("i",{dangerouslySetInnerHTML:{__html:$e},"aria-hidden":"true"})]}),e.jsx(q.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:B,value:C,"aria-label":c("search.searchInput.selectNumberOfSearchResultsAriaLabel"),disabled:l,"aria-disabled":l,children:Ve.map(N=>e.jsx("option",{value:N,children:N},N))})]})})]}),e.jsx(Mn,{languages:s,resources:t,searchLanguage:$,show:R,onModalClose:G}),e.jsx(Fn,{resources:t,languages:s,availableResources:m,selectedResources:O??[],show:_,showGrouping:T,onModalClose:V}),e.jsx(Hn,{queryTypes:[S],show:j,onModalClose:ce}),Tt.includes(S)&&w&&e.jsx(d.Suspense,{fallback:e.jsx(e.Fragment,{children:c("loading",{ns:"querybuilder",defaultValue:c("generic.loadingComponent",{ns:"common"})})}),children:e.jsx(Kn,{query:le,queryType:S,resources:t,selectedResources:O,show:F,onModalClose:oe})})]})}const Gn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`;function Wn({searchId:t,resourceId:s,numberOfResults:n,pollDelay:r=1500}){const{t:a}=Z(),o=Le(),i=Ot(),[l,c]=d.useState(!1),{isPending:u,mutate:g,reset:p}=Ut({mutationFn:Os.bind(null,o,t,{resourceId:s,numberOfResults:n}),mutationKey:["search-result-load-more",t,s],onSuccess:async j=>{j!==void 0&&t!==j&&console.warn("SearchIDs should be the same?!",{searchId:t,searchIdNewButSame:j,resourceId:s}),await i.invalidateQueries({queryKey:["search-results",t,s]}),c(!0)}});r??=1500;const{data:x,isLoading:_,isFetching:v}=Ee({queryKey:["search-results",t,s],queryFn:Hs.bind(null,o,t,s),enabled:l,refetchInterval(j){return j.state.data&&j.state.data.inProgress?r:!1}}),T=u||_||v,b=!!x&&!x.inProgress,R=T||l;l&&b&&(l&&c(!1),i.invalidateQueries({queryKey:["search-result-details",t,s]}));async function E(){p(),g()}return e.jsx(W,{className:"more-results-button",disabled:R,onClick:E,children:R?e.jsx(Ft,{animation:"border",className:"d-block"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Gn}})," ",a("search.results.buttonLoadMore")]})})}const Pe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`;function Yn(t,s=".."){const n=t.map(l=>l.split("/")),r=Math.max(...n.map(l=>l.length)),o=Array.from(Array(r).keys()).map(l=>new Set(n.map(c=>c.length>l?c[l]:!1)).size===1).reduce((l,c,u,g,p=s??"..")=>c?l&&l[l.length-1]!==p?l.concat([p]):l:l.concat([u]),[]);return t.map(l=>[l,l.split("/")]).map(([l,c])=>[l,o.map(u=>typeof u=="number"?c[u]:u).join("/").replace(/\/+$/,"")]).reduce((l,[c,u])=>l.set(c,u),new Map)}function es({data:t,resource:s}){const n=d.useRef(null),r=s?.availableLayers?.reduce((o,i)=>o.set(i.resultId,i),new Map);function a(o){const i=o.map(g=>g.id),l=Yn(i),c=Math.max(...o.map(g=>g.spans.length)),u=i.length>1;return e.jsxs(Ie,{hover:!0,responsive:!0,className:"mb-0 results-plain",style:{width:"unset"},children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[r!==void 0&&u&&e.jsx("th",{scope:"col",children:"Layer Type"}),u&&e.jsx("th",{scope:"col",children:"Layer Identifier"}),Array(c).fill(null).map((g,p)=>e.jsx("th",{scope:"col",children:"Token"},p))]})}),e.jsx("tbody",{children:o.map(g=>e.jsxs("tr",{children:[r!==void 0&&u&&e.jsx("td",{scope:"row",className:"text-uppercase",children:r.get(g.id)?.layerType}),u&&e.jsx("td",{scope:"row",title:g.id,children:l.get(g.id)}),g.spans.map((p,x)=>e.jsx("td",{children:p.hit?e.jsx("mark",{children:e.jsx("strong",{children:p.text})},x):p.text},p.range?.join("-")??x))]},g.id))})]})}return e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{responsive:!0,striped:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Annotation Layers"})]})}),e.jsx("tbody",{children:t.records.map((o,i)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:i+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[o.ref&&e.jsx("a",{href:o.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Pe}})})," ",o.pid&&e.jsx(ye,{placement:"auto-start",container:n,delay:{show:250,hide:400},overlay:e.jsx(ve,{id:`ttip-${o.pid}-${i}`,children:o.pid}),children:e.jsx(je,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:a(o.adv)})]},`${o.pid??o.ref??t.resource.id}-${i}`))})]}),e.jsx("div",{ref:n,className:"tooltip-mounting-point"})]})}function ts({data:t}){const s=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Left Context"}),e.jsx("th",{scope:"col",children:"Hit"}),e.jsx("th",{scope:"col",children:"Right Context"})]})}),e.jsx("tbody",{children:t.records.map((n,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[n.ref&&e.jsx("a",{href:n.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Pe}})})," ",n.pid&&e.jsx(ye,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(ve,{id:`ttip-${n.pid}-${r}`,children:n.pid}),children:e.jsx(je,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:n.hits.left}),e.jsx("td",{children:n.hits.keyword&&e.jsx("mark",{children:e.jsx("strong",{children:n.hits.keyword})})}),e.jsx("td",{children:n.hits.right})]},`${n.pid??n.ref??t.resource.id}-${r}`))})]}),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function ss({data:t}){const s=d.useRef(null);return e.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[t.records.map((n,r)=>e.jsx(te,{className:"flex-grow-1",children:e.jsxs(te.Body,{children:[e.jsx(te.Title,{children:n.lex.fields.filter(a=>a.type==="lemma").map(a=>a.values).flat(1).map(a=>e.jsx("span",{children:a.value}))}),e.jsxs(st,{variant:"flush",children:[(n.lex.lang||n.lex.langUri)&&e.jsxs(st.Item,{children:[e.jsx("strong",{children:"lang"}),": ",n.lex.lang," ",n.lex.langUri]}),n.lex.fields.filter(a=>a.type!=="lemma").map(a=>e.jsxs(st.Item,{children:[e.jsx("strong",{children:a.type}),":",a.values.map((o,i)=>e.jsx("span",{className:"ms-2 lex-value",children:o.value},i))]},a.type))]}),e.jsx(te.Link,{children:n.ref&&e.jsxs("a",{href:n.ref,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Pe}})," Original results ..."]})}),e.jsx(te.Link,{children:n.pid&&e.jsx(ye,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(ve,{id:`ttip-${n.pid}-${r}`,children:n.pid}),children:e.jsx(je,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${n.pid??n.ref??t.resource.id}-${r}`)),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function ns({data:t}){const s=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:t.records.map((n,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[n.ref&&e.jsx("a",{href:n.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Pe}})})," ",n.pid&&e.jsx(ye,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(ve,{id:`ttip-${n.pid}-${r}`,children:n.pid}),children:e.jsx(je,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:n.hits.fragments.map((a,o)=>a.hit&&!a.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:a.text})},o):a.hit&&a.hitKind?e.jsx("span",{className:`lex-hitkind-${a.hitKind}`,title:`Annotated as "${a.hitKind.split("-").slice(1).join("-")}"`,children:a.text},o):e.jsx("span",{children:a.text},o))})]},`${n.pid??n.ref??t.resource.id}-${r}`))})]}),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}function rs({data:t}){const s=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[e.jsx("thead",{className:"visually-hidden",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"References"}),e.jsx("th",{scope:"col",children:"Result with Hit"})]})}),e.jsx("tbody",{children:t.records.map((n,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),e.jsxs("td",{scope:"row",className:"result-refs",children:[n.ref&&e.jsx("a",{href:n.ref,className:"matomo_link",target:"_blank",children:e.jsx("i",{dangerouslySetInnerHTML:{__html:Pe}})})," ",n.pid&&e.jsx(ye,{placement:"auto-start",container:s,delay:{show:250,hide:400},overlay:e.jsx(ve,{id:`ttip-${n.pid}-${r}`,children:n.pid}),children:e.jsx(je,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),e.jsx("td",{children:n.hits.fragments.map((a,o)=>a.hit&&!a.hitKind?e.jsx("mark",{children:e.jsx("strong",{children:a.text})},o):e.jsx("span",{children:a.text},o))})]},`${n.pid??n.ref??t.resource.id}-${r}`))})]}),e.jsx("div",{ref:s,className:"tooltip-mounting-point"})]})}const Xn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,Jn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,as=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`;function Zn({show:t,searchId:s,resourceId:n,result:r,viewMode:a,showDiagnostics:o,onModalClose:i}){const l=Le(),{t:c}=Z(),u=xe(m=>m.locale),{languages:g,resources:p,weblichtLanguages:x}=pt(),{numberOfResults:_,queryType:v,language:T,languageFilter:b}=jt(),[R,E]=d.useState(u);d.useEffect(()=>{u&&E(u)},[u]);const j=new Intl.DisplayNames([u,"en"],{type:"language"}),[M,F]=d.useState(o);d.useEffect(()=>F(o),[o]);const[f,w]=d.useState(a);d.useEffect(()=>w(a),[a]);const H=Je(r.resource),$=r.exception||r.diagnostics?.filter(m=>m.uri!==fe).length>0;function L(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.records.length,!0)}let A=null,K=!1;if(!x.includes(T)){if(T===de)if(r.resource.languages&&r.resource.languages.length===1)A=r.resource.languages[0];else{const m=[...new Set(r.records.map(P=>P.lang).filter(P=>P!==null))];m.length===1&&(A=m[0])}A||(console.warn("Cannot use WebLicht: unsupported language",{language:T,languageFilter:b}),K=!0)}function S(m){w(m.target.value)}function I(){if(!r)return null;if(f==="annotation-layers"&&r.hasAdvResults){const m=Qt(p,P=>P.id===r.id);return e.jsx(es,{data:r,resource:m})}return f==="kwic"&&(v!=="lex"||!r.isLexHits)?e.jsx(ts,{data:r}):f==="lexical-entry"&&r.hasLexResults?e.jsx(ss,{data:r}):v==="lex"&&r.isLexHits?e.jsx(ns,{data:r}):e.jsx(rs,{data:r})}return e.jsxs(Y,{show:t,onHide:()=>i(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[e.jsx(Y.Header,{closeButton:!0,children:e.jsx(Y.Title,{children:U(r.resource.title,R)})}),e.jsxs(Y.Body,{className:"resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":c("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",c("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:U(r.resource.institution,R)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:as}})," ",c("search.results.resourceInfo.labelDescription")]}),U(r.resource.description,R)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:U(r.resource.description,R)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Me}})," ",c("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:r.resource.languages.map(g?m=>Xe(m,g,{defaultAnyLanguage:c("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:c("languageCodeToName.unknown",{ns:"common"})}):m=>m).toSorted().join(", ")}),H&&H.length>1&&e.jsx(We,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:R,onChange:m=>E(m),className:"mt-2 mb-3",children:H.toSorted().map(m=>e.jsxs(Ae,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${m}`,value:m,children:[j.of(m)," ",e.jsx("sup",{children:m})]},m))}),e.jsx("dt",{children:c("search.results.resourceInfo.labelPID")}),e.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&e.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Zt}})," ",c("search.results.resourceInfo.moreInformation")]}),e.jsx("hr",{}),e.jsxs(X,{className:"row-gap-2",children:[e.jsx(k,{lg:"auto",md:3,sm:6,children:e.jsx(ge,{label:c("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(q.Select,{value:f,onChange:S,children:[e.jsx("option",{value:"plain",children:c("search.results.displayOptions.viewModeOptions.plain")}),(v!=="lex"||!r.isLexHits)&&e.jsx("option",{value:"kwic",children:c("search.results.displayOptions.viewModeOptions.kwic")}),v==="fcs"&&e.jsx("option",{value:"annotation-layers",children:c("search.results.displayOptions.viewModeOptions.annotation-layers")}),v==="lex"&&e.jsx("option",{value:"lexical-entry",children:c("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(k,{lg:3,md:3,sm:6,className:"align-content-center",children:e.jsx(q.Check,{disabled:!$,checked:M,onChange:()=>F(m=>!m),id:"results-modal-view-warnings-errors",label:c("search.results.displayOptions.optionShowWarningsErrors")})}),e.jsxs(k,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[e.jsxs(pe,{children:[e.jsxs(pe.Toggle,{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Xn}})," ",c("search.results.buttonDownload")]}),e.jsx(pe.Menu,{children:Pn.map(({id:m,label:P})=>e.jsx(pe.Item,{href:Fs(l,s,n,m,T,b),className:"matomo_download",children:e.jsx(z,{i18nKey:"search.results.msgButtonDownloadOption",values:{label:c(`downloadFormats.${m}.name`,{ns:"common",defaultValue:P})}})},m))})]}),e.jsxs(W,{disabled:K,"aria-disabled":K,href:zs(l,s,n,A,T,b),className:"matomo_link",target:"_blank",children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Jn}})," ",c("search.results.buttonSendToWeblicht")]})]})]}),e.jsx("hr",{}),e.jsx("p",{children:e.jsx(z,{i18nKey:"search.results.msgShowingXresults",values:{count:r.records.length,context:L()?"hasmore":null,total:r.numberOfRecords}})}),I()]}),M&&$&&e.jsxs(Y.Body,{className:"border-top",children:[r.exception&&e.jsxs(re,{variant:"danger","aria-label":c("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:c("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":c("search.results.diagnostics.msgAriaLabel"),children:r.exception.message})]}),r.exception.cause&&e.jsx("p",{className:"mb-0 small",children:c("search.results.diagnostics.msgCause",{cause:r.exception.cause})}),r.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(z,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:r.exception.klass}})})]}),r.diagnostics.filter(m=>m.uri!==fe).map(m=>e.jsxs(re,{variant:"warning",children:[e.jsx(re.Heading,{style:{fontSize:"1rem"},children:m.message}),m.diagnostic&&e.jsx("p",{className:"mb-0 small",children:c("search.results.diagnostics.msgDiagnosticDetails",{details:m.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(z,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:m.uri}})})]},`${m.uri}-${m.message}-${m.diagnostic}`))]}),L()&&e.jsx(Y.Footer,{className:"justify-content-center border-top py-2",children:e.jsx(Wn,{searchId:s,resourceId:n,numberOfResults:_})})]})}function er({searchId:t,resourceId:s,resultInfo:n,viewMode:r,showResourceDetails:a,showDiagnostics:o}){const i=Le(),{t:l}=Z(),c=xe(m=>m.locale),{languages:u,resources:g}=pt(),{queryType:p}=jt(),[x,_]=d.useState(c);d.useEffect(()=>{c&&_(c)},[c]);const v=new Intl.DisplayNames([c,"en"],{type:"language"}),T=d.useId(),[b,R]=d.useState(!0),[E,j]=d.useState(!1),M=n.inProgress,F=n.numberOfRecordsLoaded>0,f=n.exception||n.diagnostics?.filter(m=>m.uri!==fe).length>0,{data:w,isLoading:H,isError:$}=Ee({queryKey:["search-result-details",t,s],queryFn:Ds.bind(null,i,t,s),enabled:!M}),L=w?Je(w.resource):[];if(M||!F&&(o&&!f||!o)||!w)return null;function A(){j(!0)}function K(){j(!1)}function S(){return w?w.numberOfRecords===-1?w.records.length:w.numberOfRecords===w.records.length&&w.nextRecordPosition===-1?`${w.records.length} / ${w.numberOfRecords}?`:`${w.records.length} / ${w.numberOfRecords}`:null}function I(){if(!w)return null;if(r==="annotation-layers"&&w.hasAdvResults){const m=Qt(g,P=>P.id===w.id);return e.jsx(es,{data:w,resource:m})}return r==="kwic"&&(p!=="lex"||!w.isLexHits)?e.jsx(ts,{data:w}):r==="lexical-entry"&&w.hasLexResults?e.jsx(ss,{data:w}):p==="lex"&&w.isLexHits?e.jsx(ns,{data:w}):e.jsx(rs,{data:w})}return e.jsxs(e.Fragment,{children:[e.jsxs(te,{className:"my-1 resource-search-result",role:"group","aria-label":l("search.results.resultResourceAriaLabel",{title:w.resource.title}),children:[e.jsxs(te.Header,{className:"d-flex accordion",children:[e.jsxs("button",{type:"button",onClick:()=>R(m=>!m),"aria-controls":T,"aria-expanded":b,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${b?"":"collapsed"}`,children:[e.jsx(je,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":l("search.results.resultCountAriaLabel"),children:S()}),e.jsx("span",{"aria-label":l("search.results.resultResourceTitleAriaLabel"),className:"user-select-text",children:U(w.resource.title,x)}),e.jsx("small",{className:"text-muted user-select-text","aria-label":l("search.results.resultResourceInstitutionAriaLabel"),children:U(w.resource.institution,x)})]}),e.jsx("div",{className:"d-inline-block ms-auto",children:e.jsxs(W,{size:"sm",onClick:A,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Bt}})," View"]})})]}),e.jsx(Dt,{in:b,children:e.jsxs("div",{id:T,children:[a&&e.jsxs(te.Body,{className:"border-bottom resource-info",children:[e.jsxs("dl",{className:"mb-0","aria-label":l("search.results.resourceInfo.infoTableAriaLabel"),children:[e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Ze}})," ",l("search.results.resourceInfo.labelInstitution")]}),e.jsx("dd",{className:"mb-0",children:U(w.resource.institution,x)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:as}})," ",l("search.results.resourceInfo.labelDescription")]}),U(w.resource.description,x)&&e.jsxs(e.Fragment,{children:[e.jsx("dd",{className:"mb-0",children:U(w.resource.description,x)}),e.jsxs("dt",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:Me}})," ",l("search.results.resourceInfo.labelLanguages")]})]}),e.jsx("dd",{className:"mb-0",children:w.resource.languages.map(u?m=>Xe(m,u,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})}):m=>m).toSorted().join(", ")})]}),L&&L.length>1&&e.jsx(We,{type:"radio",name:`${w.resource.id}-result-info-languages`,defaultValue:x,onChange:m=>_(m),className:"mt-2",children:L.toSorted().map(m=>e.jsxs(Ae,{variant:"outline-secondary",size:"sm",id:`${w.resource.id}-result-info-languages-${m}`,value:m,children:[v.of(m)," ",e.jsx("sup",{children:m})]},m))})]}),F&&e.jsx(te.Body,{children:I()}),o&&f&&e.jsxs(te.Body,{className:F?"border-top":"",children:[w.exception&&e.jsxs(re,{variant:"danger","aria-label":l("search.results.diagnostics.alertAriaLabel"),children:[e.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[e.jsx("span",{className:"text-uppercase",children:l("search.results.diagnostics.titleException")})," ",e.jsx("span",{"aria-label":l("search.results.diagnostics.msgAriaLabel"),children:w.exception.message})]}),w.exception.cause&&e.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgCause",{cause:w.exception.cause})}),w.exception.klass&&e.jsx("p",{className:"mb-0 small",children:e.jsx(z,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:w.exception.klass}})})]}),w.diagnostics.filter(m=>m.uri!==fe).map(m=>e.jsxs(re,{variant:"warning",children:[e.jsx(re.Heading,{style:{fontSize:"1rem"},children:m.message}),m.diagnostic&&e.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgDiagnosticDetails",{details:m.diagnostic})}),e.jsx("p",{className:"mb-0 small",children:e.jsx(z,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:m.uri}})})]},`${m.uri}-${m.message}-${m.diagnostic}`))]})]})})]}),e.jsx(Zn,{show:E,searchId:t,resourceId:s,result:w,viewMode:r,showDiagnostics:o,onModalClose:K})]})}const tr="plain",sr="lexical-entry",nr="plain",rr="default",ar={default:()=>()=>0,"title-up":t=>(s,n)=>{const r=J.getState().locale,a=U(t.get(s.id)?.title??null,r)??"",o=U(t.get(n.id)?.title??null,r)??"";return a.localeCompare(o)},"title-down":t=>(s,n)=>{const r=J.getState().locale,a=U(t.get(s.id)?.title??null,r)??"",o=U(t.get(n.id)?.title??null,r)??"";return-a.localeCompare(o)},"result-count-total-up":()=>(t,s)=>{const n=t.numberOfRecords!==-1?t.numberOfRecords:t.numberOfRecordsLoaded,r=s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded;return n-r},"result-count-total-down":()=>(t,s)=>{const n=t.numberOfRecords!==-1?t.numberOfRecords:t.numberOfRecordsLoaded;return(s.numberOfRecords!==-1?s.numberOfRecords:s.numberOfRecordsLoaded)-n}},At=1500;function or({searchId:t,pollDelay:s=At}){const{t:n}=Z(),r=Le(),{resources:a}=pt(),{query:o,queryType:i,resourceIDs:l}=jt(),[c,u]=d.useState(i==="lex"?sr:i==="fcs"?nr:tr),[g,p]=d.useState(rr),[x,_]=d.useState(""),[v,T]=d.useState(!1),[b,R]=d.useState(!1),E=d.useMemo(()=>{const h=new Map;return a?.forEach(C=>{h.set(C.id,C)}),ar[g](h)},[g,a]);s??=At;const{data:j}=Ee({queryKey:["search-results",t],queryFn:Us.bind(null,r,t??""),enabled:!!t,refetchInterval(h){return h.state.data&&h.state.data.inProgress>0?s:!1}}),M=d.useMemo(()=>j?.results.toSorted(E)||[],[j,E]),F=i==="lex"&&j?.results.every(h=>h.numberOfRecords<=0||h.isLexHits===!0),f=l.length,w=j?.inProgress??f,H=d.useMemo(()=>j?.results.filter(h=>(h.numberOfRecords!==-1?h.numberOfRecords:h.numberOfRecordsLoaded)>0).length??0,[j]),$=d.useMemo(()=>j?.results.filter(h=>!h.inProgress&&(h.numberOfRecords!==-1?h.numberOfRecords:h.numberOfRecordsLoaded)>0&&h.diagnostics.filter(C=>C.uri!==fe).length>0).length??0,[j]),L=d.useMemo(()=>j?.results.filter(h=>!h.inProgress&&(h.numberOfRecords!==-1?h.numberOfRecords:h.numberOfRecordsLoaded)<=0&&h.diagnostics.filter(C=>C.uri!==fe).length===0&&h.exception===null).length??0,[j]),A=d.useMemo(()=>j?.results.filter(h=>!h.inProgress&&(h.numberOfRecords!==-1?h.numberOfRecords:h.numberOfRecordsLoaded)<=0&&(h.diagnostics.filter(C=>C.uri!==fe).length>0||h.exception!==null)).length??0,[j]),K=d.useMemo(()=>j?.results.filter(h=>!h.inProgress&&h.numberOfRecords<=0&&h.exception!==null).length??0,[j]),S=d.useMemo(()=>j?.results.filter(h=>!h.inProgress&&(h.numberOfRecords!==-1?h.numberOfRecords:h.numberOfRecordsLoaded)<=0&&h.diagnostics.filter(C=>C.uri!==fe).length>0&&h.exception===null).length??0,[j]),I=d.useMemo(()=>j?.results.map(h=>h.numberOfRecords!==-1?h.numberOfRecords:h.numberOfRecordsLoaded).reduce((h,C)=>h+C,0)??0,[j]),m=d.useMemo(()=>j?.results.map(h=>h.numberOfRecordsLoaded).reduce((h,C)=>h+C,0)??0,[j]);{const[h,C]=d.useState(!1);d.useEffect(()=>{j&&w===0&&(h||(C(!0),$t(o,i,m)))},[j,w,o,i,t,h,m])}function P(h){u(h.target.value)}function O(h){p(h.target.value)}return e.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[e.jsx(ye,{placement:"auto",overlay:e.jsxs(nt,{id:"search-progress-information-popover",children:[e.jsx(nt.Header,{children:n("search.results.progressPopover.title")}),e.jsxs(nt.Body,{style:{textIndent:"2rem hanging"},children:[e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesRequested",count:f})}),w>0&&e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesRequestedPending",count:w})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithoutResults",count:L+A})}),e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsOK",count:L})}),S>0&&e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsWarnings",count:S})}),K>0&&e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsErrors",count:K})}),e.jsx("hr",{className:"mt-2 mb-1"}),e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithResults",count:H})}),$>0&&e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithResultsWarnings",count:$})}),e.jsx("hr",{className:"mt-2 mb-0"}),e.jsx("hr",{className:"mt-1 mb-1"}),e.jsx("div",{children:e.jsx(z,{i18nKey:"search.results.progressPopover.numResourcesWithResultsTotal",count:m,values:{available:I}})})]})]}),children:e.jsxs(ze,{className:"mb-3",children:[e.jsx(ze,{variant:"success",now:H,max:f,label:e.jsx("span",{children:n("search.results.progressBar.numWithResults",{count:H})}),"aria-label":n("search.results.progressBar.numWithResultsAriaLabel")}),e.jsx(ze,{variant:"secondary",now:L+A,max:f,label:e.jsx("span",{children:n("search.results.progressBar.numWithResults",{count:L+A})}),"aria-label":n("search.results.progressBar.numWithoutResultsAriaLabel")}),e.jsx(ze,{striped:!0,animated:!0,now:w,max:f,label:e.jsx("span",{children:n("search.results.progressBar.numResultsPending",{count:w})}),"aria-label":n("search.results.progressBar.numResultsPendingAriaLabel")})]})}),e.jsx(te,{className:"mb-2",role:"group","aria-label":n("search.results.displayOptions.cardAriaLabel"),children:e.jsx(te.Body,{children:e.jsxs(X,{className:"row-gap-2",children:[e.jsx(k,{lg:"auto",md:6,sm:6,children:e.jsx(ge,{label:n("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:e.jsxs(q.Select,{value:c,onChange:P,children:[e.jsx("option",{value:"plain",children:n("search.results.displayOptions.viewModeOptions.plain")}),(i!=="lex"||!F)&&e.jsx("option",{value:"kwic",children:n("search.results.displayOptions.viewModeOptions.kwic")}),i==="fcs"&&e.jsx("option",{value:"annotation-layers",children:n("search.results.displayOptions.viewModeOptions.annotation-layers")}),i==="lex"&&e.jsx("option",{value:"lexical-entry",children:n("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),e.jsx(k,{lg:"auto",md:6,sm:6,children:e.jsx(ge,{label:n("search.results.displayOptions.sortingLabel"),controlId:"results-sorting",children:e.jsxs(q.Select,{value:g,onChange:O,children:[e.jsx("option",{value:"default",children:n("search.results.displayOptions.sortingOptions.default")}),e.jsx("option",{value:"title-up",children:n("search.results.displayOptions.sortingOptions.title-up")}),e.jsx("option",{value:"title-down",children:n("search.results.displayOptions.sortingOptions.title-down")}),e.jsx("option",{value:"result-count-total-up",children:n("search.results.displayOptions.sortingOptions.result-count-total-up")}),e.jsx("option",{value:"result-count-total-down",children:n("search.results.displayOptions.sortingOptions.result-count-total-down")})]})})}),e.jsx(k,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:e.jsx(ge,{label:n("search.results.displayOptions.resultFilterQueryLabel"),controlId:"result-filter",children:e.jsx(Jt,{disabled:g!=="default"||!0,value:x,onChange:h=>_(h)})})}),e.jsxs(k,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[e.jsx(q.Check,{checked:v,onChange:()=>T(h=>!h),id:"results-view-resource-details",label:n("search.results.displayOptions.optionShowResultDetails")}),e.jsx(q.Check,{checked:b,onChange:()=>R(h=>!h),id:"results-view-warnings-errors",label:n("search.results.displayOptions.optionShowWarningsErrors")})]})]})})}),t&&j&&M.map(h=>e.jsx(er,{searchId:t,resourceId:h.id,resultInfo:h,viewMode:c,showResourceDetails:v,showDiagnostics:b},`${t}-${h.id}`))]})}const ir=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,kt=""+new URL("assets/logo-fcs.png",import.meta.url).href;function lr(){const t=Le(),{t:s}=Z(),[n,r]=Ge(),[a,o]=d.useState([]),[i,l]=d.useState({}),[c,u]=d.useState([]),[g,p]=d.useState(null),[x,_]=d.useState(!1),[v,T]=d.useState(null),[b,R]=d.useState([]),E=Q.getState().appTitleHead,j={consortia:n.get(ke)},{data:M,isLoading:F,isError:f}=Ee({queryKey:["init"],queryFn:ks.bind(null,t,j)});d.useEffect(()=>{if(!M)return;const S=yn(M.resources);l(M.languages),u(M.weblichtLanguages),o(S),p(me(S))},[M]),d.useEffect(()=>{if(!a||a.length===0)return;const S=n.get("x-aggregation-context");if(S){try{const I=JSON.parse(S),{selected:m,unavailable:P}=wn(a,I);m.length>0&&(p(m),R(O=>[...O,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[s("search.toasts.resourceSelection.msgPreselectedResources",{count:m.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:m.map(h=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:h}))})]}),variant:"success"}])),P.length>0&&R(O=>[...O,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[s("search.toasts.resourceSelection.msgUnableToSelectResources",{count:P.length}),e.jsx("br",{}),e.jsx("ul",{className:"ps-3",children:P.map(h=>e.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:h}))})]}),variant:"warning"}])}catch(I){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:S},I),I instanceof Error&&R(m=>[...m,{title:s("search.toasts.resourceSelection.title"),body:e.jsxs(e.Fragment,{children:[s("search.toasts.resourceSelection.msgErrorUnableToSelectResources",{error:I.name}),e.jsx("br",{}),e.jsx("small",{children:I.message})]}),variant:"error"}])}n.delete("x-aggregation-context"),r(n)}},[a,n,r,s]);const w=F||f,{mutate:H,data:$,isPending:L}=Ut({mutationKey:["search"],mutationFn:({query:S,queryType:I,language:m,numberOfResults:P,resourceIDs:O})=>Ps(t,{query:S,queryType:I,language:m,numberOfResults:P.toString(),resourceIds:O})});function A(S){p(S.resourceIDs),T(S),_(!0),$t(S.query,S.queryType),H(S)}function K(S){R(I=>[...I,S])}return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsx("title",{children:E})}),e.jsxs(se,{id:"search",children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:e.jsx(Cs,{position:"top-end",className:"mt-2",style:{zIndex:100},children:b.map((S,I)=>e.jsxs(rt,{bg:S.variant,onClose:()=>R(m=>m.filter(P=>P!==S)),delay:S.delay??5e3,autohide:!0,children:[e.jsx(rt.Header,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:S.title})}),e.jsx(rt.Body,{children:S.body})]},I))})}),!x&&e.jsx(X,{children:e.jsx(k,{className:"text-center",children:e.jsxs("picture",{children:[e.jsx("source",{srcSet:kt,media:"(prefers-color-scheme: light)"}),e.jsx("source",{srcSet:ir,media:"(prefers-color-scheme: dark)"}),e.jsx("img",{src:kt,className:"logo",alt:"FCS logo"})]})})}),e.jsx(X,{className:"mt-3",children:e.jsx(k,{children:e.jsx(Qn,{resources:a,languages:i,availableResources:null,selectedResources:g,onSearch:A,onShowToast:K,hasSearch:x,disabled:w})})}),!x&&e.jsx(X,{className:"mt-3",children:e.jsxs(k,{children:[e.jsx("p",{children:e.jsx(z,{i18nKey:"search.intro.textGeneral"})}),e.jsx("p",{children:e.jsx(z,{i18nKey:"search.intro.textLearnMore",components:[e.jsxs("a",{href:s("search.intro.url"),children:["page ",e.jsx("em",{children:"Content Search"})," at CLARIN.eu"]})]})})]})}),x&&L&&e.jsx(X,{children:e.jsx(k,{className:"text-center my-5",children:e.jsx(Ft,{animation:"border"})})}),v&&$&&e.jsx(dn,{resources:a,languages:i,weblichtLanguages:c,children:e.jsx(mn,{...v,children:e.jsx(or,{searchId:$})})})]})]})}function cr(){const t=Pt(),s=Ye();return d.useCallback((r,a,o)=>{const i=gs(r,a);t({pathname:i,search:s},o)},[t,s])}function ur(){const t=d.useContext(ps),s=mt(),n=t.matches.map(a=>a.route),r=fs(n,s);return r!==null&&r.length>0?r[0]:null}const dr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,hr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`;function mr({url:t,statistics:s,validatorUrl:n,isScan:r}){const{t:a,i18n:o}=Z(),i=new Intl.NumberFormat(o.language,{style:"unit",unit:"second",unitDisplay:"short"});function l(c,u){const g=e.jsx(ae.Highlight,{text:c.title,ranges:s.matchResources?.[u]??null});return c.valid&&c.notes.length===0?g:e.jsx(ye,{placement:"auto-start",delay:{show:250,hide:400},overlay:e.jsxs(ve,{id:`resource-info-warning-${c.handle}`,children:[!c.valid&&a("statistics.errors.notAvailableInAggregator"),!c.valid&&c.notes.length>=1&&e.jsx("hr",{className:"mt-2 mb-1"}),c.notes.length===1?c.notes[0]:c.notes.length>=1?e.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:c.notes.map((p,x)=>e.jsx("li",{children:p},x))}):null]}),children:e.jsxs("span",{children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:dr},className:"align-baseline me-2"}),c.valid?g:e.jsx("s",{children:g})]})})}return e.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[e.jsxs("h4",{className:"h5",id:`${Ht(t)}-${r?"scan":"search"}`,children:[e.jsx(ae.Highlight,{text:t,ranges:s.matchEndpoint}),n&&e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{href:`${n}?url=${encodeURIComponent(t)}`,children:e.jsx("i",{dangerouslySetInnerHTML:{__html:hr},className:"align-baseline ms-2"})})]})]}),e.jsxs("dl",{className:"ps-sm-4",children:[e.jsx("dt",{children:a("statistics.labels.fcsVersion")}),e.jsx("dd",{children:s.version}),e.jsx("dt",{children:a("statistics.labels.searchCapabilities")}),e.jsx("dd",{children:s.searchCapabilities.join(", ")}),e.jsx("dt",{children:a("statistics.labels.maxConcurrentScanRequests")}),e.jsx("dd",{children:s.maxConcurrentRequests}),e.jsx("dt",{children:a("statistics.labels.requestStatistics")}),e.jsx("dd",{className:"mb-0",children:a("statistics.labels.numberOfRequests",{count:s.numberOfRequests})}),s.avgQueueTime!==0&&e.jsx("dd",{className:"mb-0",children:a("statistics.labels.queueTime",{avg:i.format(s.avgQueueTime),max:i.format(s.maxQueueTime)})}),e.jsx("dd",{children:a("statistics.labels.executionTime",{avg:i.format(s.avgExecutionTime),max:i.format(s.maxExecutionTime)})}),s.rootResources?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{children:a("statistics.labels.resources")}),e.jsx("dd",{children:a("statistics.labels.numberOfRootResources",{count:s.rootResources.length})}),e.jsx("dd",{children:e.jsx("ul",{children:s.rootResources.map((c,u)=>typeof c=="string"?e.jsx("li",{children:e.jsx(ae.Highlight,{text:c,ranges:s.matchResources?.[u]??null})},c):e.jsx("li",{children:l(c,u)},c.handle))})})]}),e.jsxs(e.Fragment,{children:[Object.entries(s.diagnostics||{}).map(([c,u])=>e.jsxs(re,{variant:"warning",style:{fontSize:"0.85rem"},children:[e.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(je,{bg:"warning",children:[u.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:a("statistics.diagnostic.diagnostic")})," ",u.diagnostic.message,u.diagnostic.diagnostic&&e.jsxs(e.Fragment,{children:[" - ",e.jsx("small",{children:u.diagnostic.diagnostic})]})]}),e.jsxs("p",{className:"mb-0",children:[a("statistics.diagnostic.context")," ",e.jsx("a",{href:u.context,children:u.context})]})]},c)),Object.entries(s.errors||{}).map(([c,u])=>e.jsxs(re,{variant:"danger",style:{fontSize:"0.85rem"},children:[e.jsxs(re.Heading,{style:{fontSize:"1rem"},children:[e.jsxs(je,{bg:"danger",children:[u.counter,"x"]})," ",e.jsx("span",{className:"text-uppercase",children:a("statistics.diagnostic.exception")})," ",u.exception.message]}),e.jsxs("p",{className:"mb-0",children:[a("statistics.diagnostic.context")," ",e.jsx("a",{href:u.context,children:u.context})]}),u.exception.cause&&e.jsxs("p",{className:"mb-0",children:[a("statistics.diagnostic.causedBy")," ",u.exception.cause]})]},c))]})]})]},t)}function gr({data:t,validatorUrl:s}){const{t:n,i18n:r}=Z(),[a,o]=d.useState(""),[i,l]=d.useState(["institution","endpoint","resources"]),[c,u]=d.useState(!1),g=`-${t.isScan?"scan":"search"}`,p=d.useMemo(()=>Object.entries(t.institutions).toSorted().map(([b,R])=>Object.entries(R).toSorted().map(([E,j])=>({institutionName:b,endpointUrl:E,endpointInfo:{...j,rootResources:j.rootResources.toSorted()}}))).flat(1).filter(c?b=>Object.keys(b.endpointInfo.diagnostics).length>0||Object.keys(b.endpointInfo.errors).length>0:()=>!0),[t,c]),x=p.filter(b=>Object.keys(b.endpointInfo.diagnostics).length>0||Object.keys(b.endpointInfo.errors).length>0),v=ae.useFuzzySearchList({list:p,queryText:a,getText:b=>{const R=[];return i.length===0?R.push(b.institutionName,b.endpointUrl,...b.endpointInfo.rootResources.map(E=>typeof E=="string"?E:E.title)):(i.includes("institution")&&R.push(b.institutionName),i.includes("endpoint")&&R.push(b.endpointUrl),i.includes("resources")&&R.push(...b.endpointInfo.rootResources.map(E=>typeof E=="string"?E:E.title))),R},mapResultItem:({item:b,score:R,matches:E})=>({item:b,matches:E,score:R})}).reduce((b,R)=>{const{institutionName:E,endpointUrl:j,endpointInfo:M}=R.item;return Object.getOwnPropertyNames(b).includes(E)||(b[E]={match:i.length===0||i.includes("institution")?R.matches[0]:null,endpoints:{}}),b[E].endpoints[j]={...M,matchEndpoint:i.length===0||i.includes("endpoint")?R.matches[i.length===0||i.includes("institution")?1:0]:null,matchResources:i.length===0||i.includes("resources")?R.matches.slice(0+(i.length===0||i.includes("institution")?1:0)+(i.length===0||i.includes("endpoint")?1:0)):[]},b},{});function T(b){i.includes(b)?l(i.filter(R=>R!==b)):l([...i,b])}return e.jsxs(se,{className:"d-grid gap-2 mt-3",children:[e.jsx(re,{variant:"info",className:"mb-0",children:e.jsxs("dl",{className:"mb-0",children:[e.jsx("dt",{children:n("statistics.labels.startDate")}),e.jsx("dd",{className:"mb-0",children:new Date(t.date).toLocaleString(r.language)}),e.jsx("dt",{children:n("statistics.labels.timeout")}),e.jsx("dd",{className:"mb-0",children:new Intl.NumberFormat(r.language,{style:"unit",unit:"second",unitDisplay:"short"}).format(t.timeout)})]})}),e.jsx(q,{onSubmit:b=>b.preventDefault(),children:e.jsxs(X,{className:"gy-2",children:[e.jsx(k,{lg:6,md:12,children:e.jsx(q.Control,{placeholder:n("statistics.filter.inputPlaceholder"),value:a,onChange:b=>o(b.target.value)})}),e.jsxs(k,{className:"filter-checkboxes",lg:6,md:12,children:[e.jsx(q.Text,{className:"me-2",children:n("statistics.filter.labelForCheckboxes")}),e.jsx(q.Check,{type:"checkbox",checked:i.includes("institution"),onChange:()=>T("institution"),id:`filter-institution-name${g}`,label:n("statistics.filter.checkboxInstitution")}),e.jsx(q.Check,{type:"checkbox",checked:i.includes("endpoint"),onChange:()=>T("endpoint"),id:`filter-endpoint-url${g}`,label:n("statistics.filter.checkboxEndpoint")}),e.jsx(q.Check,{type:"checkbox",checked:i.includes("resources"),onChange:()=>T("resources"),id:`filter-resource-names${g}`,label:n("statistics.filter.checkboxResources")})]})]})}),e.jsx(X,{children:e.jsx(k,{children:e.jsx(q.Check,{type:"checkbox",checked:c,onChange:()=>u(!c),id:`filter-show-issues-only${g}`,label:n("statistics.filter.checkboxShowWithIssues",{count:x.length})})})}),Object.entries(v).map(([b,{match:R,endpoints:E}])=>e.jsxs(te,{className:"p-2",children:[e.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${Ht(b)}${g}`,children:e.jsx(ae.Highlight,{text:b,ranges:R})}),Object.entries(E).toSorted().map(([j,M])=>e.jsx(mr,{url:j,statistics:M,validatorUrl:s,isScan:t.isScan},j))]},b))]})}const pr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,fr=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],xr=Object.fromEntries(fr.map(t=>[t.id,t]));function jr(){const t=Le(),s=Ot(),[n]=Ge(),{t:r}=Z(),{categoryId:a}=xs(),o=ur(),i=cr(),l={consortia:n.get(ke)},{isPending:c,isError:u,data:g,error:p}=Ee({queryKey:["statistics"],queryFn:Ms.bind(null,t,l)}),[x,_]=d.useState(Q.getState().validatorURL);Q.subscribe(j=>_(j.validatorURL));const v=Q.getState().appTitleHead,T=g!==void 0?Object.keys(g).toSorted():[],b=a!=null&&T.includes(a)?a:T.length>0?T[0]:void 0;function R(){s.invalidateQueries({queryKey:["statistics"]})}function E(j){o?.params.categoryId,o&&o.params.categoryId!==j&&o.route.path&&i(o.route.path,{categoryId:j})}return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsxs("title",{children:[v," – Statistics"]})}),e.jsxs(se,{id:"statistics",className:"my-4",children:[e.jsx("h1",{className:"h1",children:r("statistics.title")}),(c||u)&&e.jsx(X,{children:e.jsxs(k,{children:[c?r("statistics.loading"):null,e.jsx("br",{}),u?p.message:null]})}),g&&e.jsxs(at.Container,{defaultActiveKey:b,onSelect:E,children:[e.jsxs(ue,{className:"nav-tabs",as:"ul",children:[Object.keys(g).map(j=>e.jsx(ue.Item,{as:"li",role:"presentation",children:e.jsx(ue.Link,{as:"button",eventKey:j,children:r(`statistics.tabs.${j}`,{defaultValue:xr[j]?.label??j})})},j)),e.jsx(ue.Item,{as:"li",role:"presentation",className:"ms-auto",children:e.jsxs(ue.Link,{as:"button",onClick:R,children:[e.jsx("i",{dangerouslySetInnerHTML:{__html:pr}})," ",r("statistics.tabs.btnRefresh")]})})]}),e.jsx(at.Content,{children:Object.entries(g).map(([j,M])=>e.jsx(at.Pane,{eventKey:j,children:e.jsx(gr,{data:M,validatorUrl:x})},j))})]})]})]})}function br(){const t=Q.getState().appTitleHead;Ws();const s=xe(n=>n.locale);d.useEffect(()=>{he.changeLanguage(s)},[s]);{const n=mt(),[r,a]=d.useState(n.pathname);d.useEffect(()=>{const o=n.pathname;o!==r&&(a(o+n.search),Vt(o,document.title,r))},[n,r])}return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsx("title",{children:t})}),e.jsx(Ks,{}),e.jsx("main",{children:e.jsxs(js,{children:[e.jsx(Fe,{index:!0,element:e.jsx(lr,{})}),e.jsx(Fe,{path:"/about",element:e.jsx(cn,{})}),e.jsx(Fe,{path:"/help",element:e.jsx(un,{})}),e.jsx(Fe,{path:"/stats/:categoryId?",element:e.jsx(jr,{})})]})}),e.jsx(Bs,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const yr=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function wr(){window.MyAggregator.DEPLOY_PATH!==void 0&&Q.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&Q.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&Q.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&Q.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&Q.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&Q.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&Q.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_USERNAME!==void 0&&Q.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(t,s){return t[s]},set(t,s,n){return yr.includes(s)?(console.error(`Configuration ${s} can only be set on initialization!`),!1):s==="VALIDATOR_URL"?n===null||typeof n=="string"?(Q.getState().setValidatorURL(n),!0):!1:s==="SHOW_SEARCH_RESULT_LINK"?typeof n=="boolean"?(Q.getState().setShowSearchResultLink(n),!0):!1:s==="AUTH_USERNAME"?n===null||typeof n=="string"?(Q.getState().setAuthUsername(n),!0):!1:(t[s]=n,!0)}}),Object.assign(window.MyAggregator,{getAppStore:()=>Q})}function Sr(){const t=J.getState(),s=[navigator.language,...navigator.languages];let n=!1;for(const r of s){if(r===t.locale){n=!0;break}if(t.locales.includes(r)){t.setLocale(r),n=!0;break}}n||console.warn("User locale",s,"was not found in available languages",t.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>J})}wr();Sr();Q.getInitialState(),Q.getState();J.getInitialState(),J.getState();const vr=Q.getState().deployPath,Lr=Q.getState().apiURL,Rr=J.getState().locale;he.changeLanguage(Rr);const Cr=new bs({defaultOptions:{queries:{}}}),Nr=ys.create({baseURL:Lr,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const t=Q.getState().matomoTrackingParams;xn(t)||console.warn("Unable to setup tracking ...")}const Tr="root",Ir=document.getElementById(Tr),_r=As.createRoot(Ir);_r.render(e.jsx(d.StrictMode,{children:e.jsx(hn,{axios:Nr,children:e.jsx(ws,{client:Cr,children:e.jsx(Ss,{children:e.jsx(vs,{basename:vr,children:e.jsx(br,{})})})})})}));export{Xt as C,Ln as f,Vn as h,Wt as u};
//# sourceMappingURL=fcs-sru-aggregator-ui-0.0.0.js.map

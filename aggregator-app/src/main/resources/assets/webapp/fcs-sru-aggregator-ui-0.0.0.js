const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fcs-sru-aggregator-ui-query-builder-0.0.0.js","./vendor/react-ext.js","./vendor/react.js","./vendor/bootstrap.js","./vendor/antlr4.js","./locales/en/default.js","./vendor/prism.js","./fcs-sru-aggregator-ui-query-builder-0.0.0.css","./vendor/bootstrap.css"])))=>i.map(i=>d[i]);
import{r as g,u as ct,j as s,L as it,c as ws,b as rn,N as Kt,H as He,R as an,d as on,e as vs,f as Mt,g as ln,h as Ls,k as Rs,l as Ve,m as cn,n as un,o as dn,s as Ns,p as hn,q as fn,t as Je,Q as gn,v as pn,w as mn,x as xn,B as bn}from"./vendor/react-ext.js";import{b as yn,g as jn}from"./vendor/react.js";/* empty css                            */import{C as ie,R as te,a as U,N as Pe,b as pe,c as Qt,M as Z,F as q,B as X,T as ut,d as ze,e as re,f as Cs,g as ye,I as Sn,D as je,S as Es,h as $t,O as Te,i as Le,j as Be,L as bt,A as oe,P as Ye,k as yt,l as wn,m as jt,n as St}from"./vendor/bootstrap.js";import{_ as Ts,a as Is,b as vn,c as Ln,d as Rn}from"./locales/en/default.js";import{g as Nn}from"./vendor/prism.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Xe={},Wt;function Cn(){if(Wt)return Xe;Wt=1;var n=yn();return Xe.createRoot=n.createRoot,Xe.hydrateRoot=n.hydrateRoot,Xe}var En=Cn(),wt,Gt;function Tn(){return Gt||(Gt=1,wt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),wt}var In=Tn();const On=jn(In);var kn=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Jt(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(On[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(kn),a=null;(a=i.exec(n))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),e.attrs[l[0]]=l[1],i.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var An=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Pn=/^\s*$/,_n=Object.create(null);function Os(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(Os,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Mn={parse:function(n,e){e||(e={}),e.components||(e.components=_n);var t,r=[],i=[],a=-1,o=!1;if(n.indexOf("<")!==0){var l=n.indexOf("<");r.push({type:"text",content:l===-1?n:n.substring(0,l)})}return n.replace(An,function(c,u){if(o){if(c!=="</"+t.name+">")return;o=!1}var d,h=c.charAt(1)!=="/",m=c.startsWith("<!--"),y=u+c.length,p=n.charAt(y);if(m){var R=Jt(c);return a<0?(r.push(R),r):((d=i[a]).children.push(R),r)}if(h&&(a++,(t=Jt(c)).type==="tag"&&e.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!p||p==="<"||t.children.push({type:"text",content:n.slice(y,n.indexOf("<",y))}),a===0&&r.push(t),(d=i[a-1])&&d.children.push(t),i[a]=t),(!h||t.voidElement)&&(a>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(a--,t=a===-1?r:i[a]),!o&&p!=="<"&&p)){d=a===-1?r:i[a].children;var S=n.indexOf("<",y),w=n.slice(y,S===-1?void 0:S);Pn.test(w)&&(w=" "),(S>-1&&a+d.length>=0||w!==" ")&&d.push({type:"text",content:w})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+Os("",t)},"")}};const nt=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);ue(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},Yt={},Fe=(n,e,t,r)=>{ue(t)&&Yt[t]||(ue(t)&&(Yt[t]=new Date),nt(n,e,t,r))},ks=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Nt=(n,e,t)=>{n.loadNamespaces(e,ks(n,t))},Xt=(n,e,t,r)=>{if(ue(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Nt(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,ks(n,r))},$n=(n,e,t={})=>!e.languages||!e.languages.length?(Fe(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),ue=n=>typeof n=="string",Se=n=>typeof n=="object"&&n!==null,Fn=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Dn={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Un=n=>Dn[n],Hn=n=>n.replace(Fn,Un);let Ct={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Hn};const Vn=(n={})=>{Ct={...Ct,...n}},As=()=>Ct;let Ps;const zn=n=>{Ps=n},Ft=()=>Ps,vt=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},Lt=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?Ce(e):e},Bn=n=>Array.isArray(n)&&n.every(g.isValidElement),Ce=n=>Array.isArray(n)?n:[n],qn=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},_s=(n,e,t,r)=>{if(!n)return"";let i="";const a=Ce(n),o=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((l,c)=>{if(ue(l)){i+=`${l}`;return}if(g.isValidElement(l)){const{props:u,type:d}=l,h=Object.keys(u).length,m=o.indexOf(d)>-1,y=u.children;if(!y&&m&&!h){i+=`<${d}/>`;return}if(!y&&(!m||h)||u.i18nIsDynamicList){i+=`<${c}></${c}>`;return}if(m&&h===1&&ue(y)){i+=`<${d}>${y}</${d}>`;return}const p=_s(y,e,t,r);i+=`<${c}>${p}</${c}>`;return}if(l===null){nt(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(Se(l)){const{format:u,...d}=l,h=Object.keys(d);if(h.length===1){const m=u?`${h[0]}, ${u}`:h[0];i+=`{{${m}}}`;return}nt(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:l});return}nt(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:l})}),i},Kn=(n,e,t,r,i,a,o)=>{if(t==="")return[];const l=i.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(l.map(w=>`<${w}`).join("|")).test(t);if(!n&&!e&&!c&&!o)return[t];const u=e??{},d=w=>{Ce(w).forEach(x=>{ue(x)||(vt(x)?d(Lt(x)):Se(x)&&!g.isValidElement(x)&&Object.assign(u,x))})};d(n);const h=Mn.parse(`<0>${t}</0>`),m={...u,...a},y=(w,N,x)=>{const C=Lt(w),k=R(C,N.children,x);return Bn(C)&&k.length===0||w.props?.i18nIsDynamicList?C:k},p=(w,N,x,C,k)=>{w.dummy?(w.children=N,x.push(g.cloneElement(w,{key:C},k?void 0:N))):x.push(...g.Children.map([w],f=>{const v={...f.props};return delete v.i18nIsDynamicList,g.createElement(f.type,{...v,key:C,ref:f.props.ref??f.ref},k?null:N)}))},R=(w,N,x)=>{const C=Ce(w);return Ce(N).reduce((f,v,_)=>{const D=v.children?.[0]?.content&&r.services.interpolator.interpolate(v.children[0].content,m,r.language);if(v.type==="tag"){let L=C[parseInt(v.name,10)];!L&&e&&(L=e[v.name]),x.length===1&&!L&&(L=x[0][v.name]),L||(L={});const I=Object.keys(v.attrs).length!==0?qn({props:v.attrs},L):L,T=g.isValidElement(I),O=T&&vt(v,!0)&&!v.voidElement,b=c&&Se(I)&&I.dummy&&!T,$=Se(e)&&Object.hasOwnProperty.call(e,v.name);if(ue(I)){const P=r.services.interpolator.interpolate(I,m,r.language);f.push(P)}else if(vt(I)||O){const P=y(I,v,x);p(I,P,f,_)}else if(b){const P=R(C,v.children,x);p(I,P,f,_)}else if(Number.isNaN(parseFloat(v.name)))if($){const P=y(I,v,x);p(I,P,f,_,v.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(v.name)>-1)if(v.voidElement)f.push(g.createElement(v.name,{key:`${v.name}-${_}`}));else{const P=R(C,v.children,x);f.push(g.createElement(v.name,{key:`${v.name}-${_}`},P))}else if(v.voidElement)f.push(`<${v.name} />`);else{const P=R(C,v.children,x);f.push(`<${v.name}>${P}</${v.name}>`)}else if(Se(I)&&!T){const P=v.children[0]?D:null;P&&f.push(P)}else p(I,D,f,_,v.children.length!==1||!D)}else if(v.type==="text"){const L=i.transWrapTextNodes,I=o?i.unescape(r.services.interpolator.interpolate(v.content,m,r.language)):r.services.interpolator.interpolate(v.content,m,r.language);L?f.push(g.createElement(L,{key:`${v.name}-${_}`},I)):f.push(I)}return f},[])},S=R([{dummy:!0,children:n||[]}],h,Ce(n||[]));return Lt(S[0])},Ms=(n,e,t)=>{const r=n.key||e,i=g.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function a(){return g.createElement(g.Fragment,null,i)}return g.createElement(a,{key:r})},Qn=(n,e)=>n.map((t,r)=>Ms(t,r,e)),Wn=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:Ms(n[r],r,e)})}),t},Gn=(n,e,t,r)=>n?Array.isArray(n)?Qn(n,e):Se(n)?Wn(n,e):(Fe(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,Jn=n=>!Se(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function Yn({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:c,ns:u,i18n:d,t:h,shouldUnescape:m,...y}){const p=d||Ft();if(!p)return Fe(p,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const R=h||p.t.bind(p)||(b=>b),S={...As(),...p.options?.react};let w=u||R.ns||p.options?.defaultNS;w=ue(w)?[w]:w||["translation"];const N=_s(n,S,p,r),x=l||N||S.transEmptyNodeValue||r,{hashTransKey:C}=S,k=r||(C?C(N||x):N||x);p.options?.interpolation?.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...p.options.interpolation.defaultVariables}:{...p.options.interpolation.defaultVariables});const f=o||e!==void 0&&!p.options?.interpolation?.alwaysFormat||!n?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},v={...a,context:i||a.context,count:e,...o,...f,defaultValue:x,ns:w},_=k?R(k,v):x,D=Gn(c,_,p,r);let L=D||n,I=null;Jn(D)&&(I=D,L=n);const T=Kn(L,I,_,p,S,v,m),O=t??S.defaultTransParent;return O?g.createElement(O,y,T):T}const Xn={type:"3rdParty",init(n){Vn(n.options.react),zn(n)}},$s=g.createContext();class Zn{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function B({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:c,ns:u,i18n:d,t:h,shouldUnescape:m,...y}){const{i18n:p,defaultNS:R}=g.useContext($s)||{},S=d||p||Ft(),w=h||S?.t.bind(S);return Yn({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:a,values:o,defaults:l,components:c,ns:u||w?.ns||R||S?.options?.defaultNS,i18n:S,t:h,shouldUnescape:m,...y})}const er=(n,e)=>{const t=g.useRef();return g.useEffect(()=>{t.current=n},[n,e]),t.current},Fs=(n,e,t,r)=>n.getFixedT(e,t,r),tr=(n,e,t,r)=>g.useCallback(Fs(n,e,t,r),[n,e,t,r]),ne=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=g.useContext($s)||{},a=t||r||Ft();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Zn),!a){Fe(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const C=(f,v)=>ue(v)?v:Se(v)&&ue(v.defaultValue)?v.defaultValue:Array.isArray(f)?f[f.length-1]:f,k=[C,{},!1];return k.t=C,k.i18n={},k.ready=!1,k}a.options.react?.wait&&Fe(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...As(),...a.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let u=n||i||a.options?.defaultNS;u=ue(u)?[u]:u||["translation"],a.reportNamespaces.addUsedNamespaces?.(u);const d=(a.isInitialized||a.initializedStoreOnce)&&u.every(C=>$n(C,a,o)),h=tr(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),m=()=>h,y=()=>Fs(a,e.lng||null,o.nsMode==="fallback"?u:u[0],c),[p,R]=g.useState(m);let S=u.join();e.lng&&(S=`${e.lng}${S}`);const w=er(S),N=g.useRef(!0);g.useEffect(()=>{const{bindI18n:C,bindI18nStore:k}=o;N.current=!0,!d&&!l&&(e.lng?Xt(a,e.lng,u,()=>{N.current&&R(y)}):Nt(a,u,()=>{N.current&&R(y)})),d&&w&&w!==S&&N.current&&R(y);const f=()=>{N.current&&R(y)};return C&&a?.on(C,f),k&&a?.store.on(k,f),()=>{N.current=!1,a&&C&&C?.split(" ").forEach(v=>a.off(v,f)),k&&a&&k.split(" ").forEach(v=>a.store.off(v,f))}},[a,S]),g.useEffect(()=>{N.current&&d&&R(m)},[a,c,d]);const x=[p,a,d];if(x.t=p,x.i18n=a,x.ready=d,d||!d&&!l)return x;throw new Promise(C=>{e.lng?Xt(a,e.lng,u,()=>C()):Nt(a,u,()=>C())})},qe="x-consortia";async function sr(n,e){const t=new URLSearchParams;e?.consortia!==void 0&&e?.consortia!==null&&t.set(qe,e.consortia);const r="init"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function nr(n,e){const t=new URLSearchParams;e?.consortia!==void 0&&e?.consortia!==null&&t.set(qe,e.consortia);const r="statistics"+(t.entries().next().done?"":`?${t}`);return(await n.get(r)).data}async function rr(n,e){return(await n.post("search",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function ir(n,e,t){return(await n.post(`search/${e}`,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}async function ar(n,e){if(!e)throw new Error('Invalid "searchID" parameter!');return(await n.get(`search/${e}/metaonly`)).data}async function or(n,e,t){if(!e)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await n.get(`search/${e}/metaonly?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.id===t);if(i.length===0)throw new Error(`Results (meta) for resource not found! (searchId: ${e}, resourceId: ${t})`);return i[0]}async function lr(n,e,t){if(!e)throw new Error('Invalid "searchID" parameter!');if(!t)throw new Error('Invalid "resourceID" parameter!');const i=(await n.get(`search/${e}?resourceId=${encodeURIComponent(t)}`)).data.results.filter(a=>a.resource.id===t);if(i.length===0)throw new Error(`Results for resource not found! (searchId: ${e}, resourceId: ${t})`);return i[0]}function cr(n,e,t,r,i,a){const o=new URLSearchParams({resourceId:t,format:r});(a==="byGuess"||a==="byMetaAndGuess")&&o.set("filterLanguage",i);const l=`search/${e}/download?${o.toString()}`;return n.getUri({url:l})}function ur(n,e,t,r,i,a){const o=new URLSearchParams({resourceId:t});r?o.set("filterLanguage",r):(a==="byGuess"||a==="byMetaAndGuess")&&o.set("filterLanguage",i);const l=`search/${e}/toWeblicht?${o.toString()}`;return n.getUri({url:l})}const dr=[qe];function dt(){const[n]=ct(),e=new URLSearchParams(Array.from(n.entries()).filter(([t])=>dr.includes(t)));if(!e.entries().next().done)return`?${e}`}function hr(){const{t:n}=ne(),e="urls.termsUseAndDisclaimer",t=n(e,{ns:"common"}),r=t!==e,i="urls.contact",a=n(i,{ns:"common"}),o=a!==i,l="footer.serviceInfo.text",u=n(l)!==l,d=dt();return s.jsx("footer",{className:"text-muted",children:s.jsx(ie,{children:s.jsxs(te,{children:[s.jsxs(U,{className:"text-start d-flex flex-sm-row flex-column column-gap-3 row-gap-2",children:[s.jsxs("div",{children:[s.jsx(it,{to:{pathname:"/about",search:d},className:"hidden-xs",children:n("footer.links.about")}),s.jsxs("div",{className:"version-info text-muted text-center-xs",children:["v","0.0.0"]})]}),s.jsx(it,{to:{pathname:"/stats",search:d},children:n("footer.links.statistics")})]}),s.jsx(U,{className:"text-center",children:u&&s.jsxs(B,{i18nKey:l,children:[s.jsxs("span",{className:"footer-fineprint",children:["Service provided by ",s.jsx("a",{href:n("footer.serviceInfo.url"),children:"CLARIN"})]}),s.jsxs("span",{children:[s.jsx("br",{}),"Hosted by CLARIN ERIC"]})]})}),s.jsxs(U,{className:"hidden-xs text-end d-flex flex-sm-row flex-column justify-content-sm-end column-gap-3 row-gap-2",children:[r&&s.jsx("a",{href:t,children:n("footer.links.termsUseAndDisclaimer")}),o&&s.jsx("a",{href:a,children:n("footer.links.contact")})]})]})})})}const W=ws(n=>({deployPath:"/",apiURL:"https://contentsearch.clarin.eu/rest/",validatorURL:"https://www.clarin.eu/fcsvalidator/",showSearchResultLink:!1,appTitle:"Content Search",appTitleHead:"FCS Aggregator – Content Search",matomoTrackingEnabled:!0,matomoTrackingParams:null,authUsername:null,setDeployPath:e=>n(t=>({deployPath:typeof e=="function"?e(t.deployPath):e})),setApiURL:e=>n(t=>({apiURL:typeof e=="function"?e(t.apiURL):e})),setValidatorURL:e=>n(t=>({validatorURL:typeof e=="function"?e(t.validatorURL):e})),setShowSearchResultLink:e=>n(t=>({showSearchResultLink:typeof e=="function"?e(t.showSearchResultLink):e})),setAppTitle:e=>n(t=>({appTitle:typeof e=="function"?e(t.appTitle):e})),setAppTitleHead:e=>n(t=>({appTitleHead:typeof e=="function"?e(t.appTitleHead):e})),setMatomoTrackingParams:e=>n(t=>({matomoTrackingParams:typeof e=="function"?e(t.matomoTrackingParams):e})),setAuthUsername:e=>n(t=>({authUsername:typeof e=="function"?e(t.authUsername):e}))}));var fr=["en","de"];const se=ws(n=>({locale:"en",locales:fr??["en"],setLocale:e=>n(t=>({locale:typeof e=="function"?e(t.locale):e})),setLocales:e=>n(t=>({locales:typeof e=="function"?e(t.locales):e}))})),ve=n=>{const e=rn(se,n);return Object.assign(e,se),e},gr=""+new URL("assets/icon-services-fcs.png",import.meta.url).href,Zt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
</svg>`,Ke=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
</svg>`;function pr(){const{t:n}=ne(),e=ve(m=>m.locale),t=ve(m=>m.locales),r=ve(m=>m.setLocale),i=W.getState().authUsername,a=i!==null&&i!=="anonymous",o=W.getState().deployPath??"",l=o+(o.endsWith("/")?"":"/")+"login",c=dt();function u(m){m!==null&&r(m)}function d(){return a?s.jsxs(Pe.Text,{className:"ms-auto",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Zt}})," Signed in as"," ",s.jsx("span",{className:"fw-bold",children:i})]}):s.jsxs(pe.Link,{href:`${l}${c??""}`,className:"ms-auto",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Zt}})," ",n("header.login.login")]})}function h(){if(!t||t.length===1)return null;const m=new Intl.DisplayNames([e,"en"],{type:"language"}),y=s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",e.toUpperCase()," "]});return s.jsx(Qt,{title:y,align:"end",className:"ms-2",onSelect:u,children:t.map(p=>{const R=new Intl.DisplayNames([p,"en"],{type:"language"});return s.jsxs(Qt.Item,{disabled:p===e,"aria-disabled":p===e,eventKey:p,title:n("header.localeOptionTitle",{code:p,name:R.of(p),context:p!==e?"translated":null,translated:m.of(p)}),children:[p.toUpperCase()," – ",R.of(p)]},p)})})}return s.jsx("header",{children:s.jsx(Pe,{expand:"md",className:"bg-body-tertiary",children:s.jsxs(ie,{children:[s.jsxs(Pe.Brand,{as:it,to:{pathname:"/",search:c},children:[s.jsx("img",{src:gr,width:"30",height:"30",className:"d-inline-block align-top",alt:`${n("header.title")} logo`})," ",n("header.title")]}),s.jsx(Pe.Toggle,{"aria-controls":"header-navbar-nav"}),s.jsx(Pe.Collapse,{id:"header-navbar-nav",children:s.jsxs(pe,{className:"w-100 d-flex",children:[s.jsx(pe.Link,{as:Kt,to:{pathname:"/",search:c},children:n("header.menu.home")}),s.jsx(pe.Link,{as:Kt,to:{pathname:"/help",search:c},children:n("header.menu.help")}),d(),h()]})})]})})})}/*!
 * Color mode switcher based on example from Bootstrap 5 docs.
 * @see https://getbootstrap.com/docs/5.3/customize/color-modes/#javascript
 */function mr(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function xr(n){n==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",n)}function br(){g.useEffect(()=>{function n(){xr(mr())}return n(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",n)},[])}const yr="modulepreload",jr=function(n,e){return new URL(n,e).href},es={},ae=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=u(t.map(d=>{if(d=jr(d,r),d in es)return;es[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(!!r)for(let R=o.length-1;R>=0;R--){const S=o[R];if(S.href===d&&(!h||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":yr,h||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((R,S)=>{p.addEventListener("load",R),p.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Sr=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},F=n=>typeof n=="string",_e=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},ts=n=>n==null?"":""+n,wr=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},vr=/###/g,ss=n=>n&&n.indexOf("###")>-1?n.replace(vr,"."):n,ns=n=>!n||F(n),$e=(n,e,t)=>{const r=F(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(ns(n))return{};const a=ss(r[i]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++i}return ns(n)?{}:{obj:n,k:ss(r[i])}},rs=(n,e,t)=>{const{obj:r,k:i}=$e(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let a=e[e.length-1],o=e.slice(0,e.length-1),l=$e(n,o,Object);for(;l.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),l=$e(n,o,Object),l?.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=t},Lr=(n,e,t,r)=>{const{obj:i,k:a}=$e(n,e,Object);i[a]=i[a]||[],i[a].push(t)},at=(n,e)=>{const{obj:t,k:r}=$e(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},Rr=(n,e,t)=>{const r=at(n,t);return r!==void 0?r:at(e,t)},Ds=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?F(n[r])||n[r]instanceof String||F(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):Ds(n[r],e[r],t):n[r]=e[r]);return n},Ne=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Nr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Cr=n=>F(n)?n.replace(/[&<>"'\/]/g,e=>Nr[e]):n;class Er{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Tr=[" ",",","?","!",";"],Ir=new Er(20),Or=(n,e,t)=>{e=e||"",t=t||"";const r=Tr.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(r.length===0)return!0;const i=Ir.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(n);if(!a){const o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(a=!0)}return a},Et=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,l="";for(let c=a;c<r.length;++c)if(c!==a&&(l+=t),l+=r[c],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;a+=c-a+1;break}i=o}return i},De=n=>n?.replace("_","-"),kr={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class ot{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||kr,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(F(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ot(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ot(this.logger,e)}}var fe=new ot;class ht{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...t])})}}class is extends ht{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],r&&(Array.isArray(r)?l.push(...r):F(r)&&a?l.push(...r.split(a)):l.push(r)));const c=at(this.data,l);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=l[0],t=l[1],r=l.slice(2).join(".")),c||!o||!F(r)?c:Et(this.data?.[e]?.[t],r,a)}addResource(e,t,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[e,t];r&&(l=l.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(l=e.split("."),i=t,t=l[1]),this.addNamespaces(t),rs(this.data,l,i),a.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const a in r)(F(r[a])||Array.isArray(r[a]))&&this.addResource(e,t,a,r[a],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,a,o={silent:!1,skipCopy:!1}){let l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=t,t=l[1]),this.addNamespaces(t);let c=at(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Ds(c,r,a):c={...c,...r},rs(this.data,l,c),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var Us={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(a=>{e=this.processors[a]?.process(e,t,r,i)??e}),e}};const as={},os=n=>!F(n)&&typeof n!="boolean"&&typeof n!="number";class lt extends ht{constructor(e,t={}){super(),wr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fe.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Or(e,r,i);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:F(a)?[a]:a};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(i)}return{key:e,namespaces:F(a)?[a]:a}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],i),u=c[c.length-1];let d=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return m?a?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${d}${l}`:a?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:l;const y=this.resolve(e,i);let p=y?.res;const R=y?.usedKey||l,S=y?.exactUsedKey||l,w=["[object Number]","[object Function]","[object RegExp]"],N=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,C=i.count!==void 0&&!F(i.count),k=lt.hasDefaultValue(i),f=C?this.pluralResolver.getSuffix(h,i.count,i):"",v=i.ordinal&&C?this.pluralResolver.getSuffix(h,i.count,{ordinal:!1}):"",_=C&&!i.ordinal&&i.count===0,D=_&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${f}`]||i[`defaultValue${v}`]||i.defaultValue;let L=p;x&&!p&&k&&(L=D);const I=os(L),T=Object.prototype.toString.apply(L);if(x&&L&&I&&w.indexOf(T)<0&&!(F(N)&&Array.isArray(L))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(R,L,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(y.res=O,y.usedParams=this.getUsedParamsDetails(i),y):O}if(o){const O=Array.isArray(L),b=O?[]:{},$=O?S:R;for(const P in L)if(Object.prototype.hasOwnProperty.call(L,P)){const H=`${$}${o}${P}`;k&&!p?b[P]=this.translate(H,{...i,defaultValue:os(D)?D[P]:void 0,joinArrays:!1,ns:c}):b[P]=this.translate(H,{...i,joinArrays:!1,ns:c}),b[P]===H&&(b[P]=L[P])}p=b}}else if(x&&F(N)&&Array.isArray(p))p=p.join(N),p&&(p=this.extendTranslation(p,e,i,r));else{let O=!1,b=!1;!this.isValidLookup(p)&&k&&(O=!0,p=D),this.isValidLookup(p)||(b=!0,p=l);const P=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&b?void 0:p,H=k&&D!==p&&this.options.updateMissing;if(b||O||H){if(this.logger.log(H?"updateKey":"missingKey",h,u,l,H?D:p),o){const ee=this.resolve(l,{...i,keySeparator:!1});ee&&ee.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let j=[];const A=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&A&&A[0])for(let ee=0;ee<A.length;ee++)j.push(A[ee]);else this.options.saveMissingTo==="all"?j=this.languageUtils.toResolveHierarchy(i.lng||this.language):j.push(i.lng||this.language);const G=(ee,le,he)=>{const Re=k&&he!==p?he:P;this.options.missingKeyHandler?this.options.missingKeyHandler(ee,u,le,Re,H,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ee,u,le,Re,H,i),this.emit("missingKey",ee,u,le,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?j.forEach(ee=>{const le=this.pluralResolver.getSuffixes(ee,i);_&&i[`defaultValue${this.options.pluralSeparator}zero`]&&le.indexOf(`${this.options.pluralSeparator}zero`)<0&&le.push(`${this.options.pluralSeparator}zero`),le.forEach(he=>{G([ee],l+he,i[`defaultValue${he}`]||D)})}):G(j,l,D))}p=this.extendTranslation(p,e,i,y,r),b&&p===l&&this.options.appendNamespaceToMissingKey&&(p=`${u}${d}${l}`),(b||O)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,O?p:void 0,i))}return a?(y.res=p,y.usedParams=this.getUsedParamsDetails(i),y):p}extendTranslation(e,t,r,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=F(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let d=r.replace&&!F(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||i.usedLng,r),c){const h=e.match(this.interpolator.nestingRegexp),m=h&&h.length;u<m&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...h)=>a?.[0]===h[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${t[0]}`),null):this.translate(...h,t),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=F(o)?[o]:o;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=Us.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,a,o,l;return F(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,t),d=u.key;i=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=t.count!==void 0&&!F(t.count),y=m&&!t.ordinal&&t.count===0,p=t.context!==void 0&&(F(t.context)||typeof t.context=="number")&&t.context!=="",R=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(S=>{this.isValidLookup(r)||(l=S,!as[`${R[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(as[`${R[0]}-${S}`]=!0,this.logger.warn(`key "${i}" for languages "${R.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(w=>{if(this.isValidLookup(r))return;o=w;const N=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(N,d,w,S,t);else{let C;m&&(C=this.pluralResolver.getSuffix(w,t.count,t));const k=`${this.options.pluralSeparator}zero`,f=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(N.push(d+C),t.ordinal&&C.indexOf(f)===0&&N.push(d+C.replace(f,this.options.pluralSeparator)),y&&N.push(d+k)),p){const v=`${d}${this.options.contextSeparator}${t.context}`;N.push(v),m&&(N.push(v+C),t.ordinal&&C.indexOf(f)===0&&N.push(v+C.replace(f,this.options.pluralSeparator)),y&&N.push(v+k))}}let x;for(;x=N.pop();)this.isValidLookup(r)||(a=x,r=this.getResource(w,S,x,t))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!F(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of t)delete i[a]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class ls{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fe.create("languageUtils")}getScriptPartFromCode(e){if(e=De(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=De(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(F(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),F(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return F(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):F(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const cs={zero:0,one:1,two:2,few:3,many:4,other:5},us={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ar{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=fe.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=De(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),us;if(!e.match(/-|_/))return us;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[a]=o,o}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>cs[i]-cs[a]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const ds=(n,e,t,r=".",i=!0)=>{let a=Rr(n,e,t);return!a&&i&&F(t)&&(a=Et(n,t,r),a===void 0&&(a=Et(e,t,r))),a},Rt=n=>n.replace(/\$/g,"$$$$");class Pr{constructor(e={}){this.logger=fe.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:y,nestingSuffix:p,nestingSuffixEscaped:R,nestingOptionsSeparator:S,maxReplaces:w,alwaysFormat:N}=e.interpolation;this.escape=t!==void 0?t:Cr,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Ne(a):o||"{{",this.suffix=l?Ne(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=m?Ne(m):y||Ne("$t("),this.nestingSuffix=p?Ne(p):R||Ne(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=w||1e3,this.alwaysFormat=N!==void 0?N:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let a,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=y=>{if(y.indexOf(this.formatSeparator)<0){const w=ds(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...i,...t,interpolationkey:y}):w}const p=y.split(this.formatSeparator),R=p.shift().trim(),S=p.join(this.formatSeparator).trim();return this.format(ds(t,c,R,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...i,...t,interpolationkey:R})};this.resetRegExp();const d=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Rt(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Rt(this.escape(y)):Rt(y)}].forEach(y=>{for(l=0;a=y.regex.exec(e);){const p=a[1].trim();if(o=u(p),o===void 0)if(typeof d=="function"){const S=d(e,a,i);o=F(S)?S:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))o="";else if(h){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),o="";else!F(o)&&!this.useRawValueToEscape&&(o=ts(o));const R=y.safeValue(o);if(e=e.replace(a[0],R),h?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=a[0].length):y.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,a,o;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const h=c.split(new RegExp(`${d}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,o);const y=m.match(/'/g),p=m.match(/"/g);((y?.length??0)%2===0&&!p||p.length%2!==0)&&(m=m.replace(/'/g,'"'));try{o=JSON.parse(m),u&&(o={...u,...o})}catch(R){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,R),`${c}${d}${m}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!F(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(u!==-1&&(c=i[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),i[1]=i[1].slice(0,u)),a=t(l.call(this,i[1].trim(),o),o),a&&i[0]===e&&!F(a))return a;F(a)||(a=ts(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),c.length&&(a=c.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const _r=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();t[d]||(t[d]=u),u==="false"&&(t[d]=!1),u==="true"&&(t[d]=!0),isNaN(u)||(t[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},hs=n=>{const e={};return(t,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let l=e[o];return l||(l=n(De(r),i),e[o]=l),l(t)}},Mr=n=>(e,t,r)=>n(De(t),r)(e);class $r{constructor(e={}){this.logger=fe.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?hs:Mr;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return l=>o.format(l)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return l=>o.format(l)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return l=>o.format(l)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return l=>o.format(l,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return l=>o.format(l)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=hs(t)}format(e,t,r,i={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,c)=>{const{formatName:u,formatOptions:d}=_r(c);if(this.formats[u]){let h=l;try{const m=i?.formatParams?.[i.interpolationkey]||{},y=m.locale||m.lng||i.locale||i.lng||r;h=this.formats[u](l,y,{...d,...i,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const Fr=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Dr extends ht{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=fe.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const a={},o={},l={},c={};return e.forEach(u=>{let d=!0;t.forEach(h=>{const m=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?o[m]===void 0&&(o[m]=!0):(this.state[m]=1,d=!1,o[m]===void 0&&(o[m]=!0),a[m]===void 0&&(a[m]=!0),c[h]===void 0&&(c[h]=!0)))}),d||(l[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const i=e.split("|"),a=i[0],o=i[1];t&&this.emit("failedLoading",a,o,t),!t&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{Lr(c.loaded,[a],o),Fr(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,a*2,o)},a);return}o(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,t,l)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();F(e)&&(e=this.languageUtils.toResolveHierarchy(e)),F(t)&&(t=[t]);const a=this.queueLoad(e,t,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${t}loading namespace ${a} for language ${i} failed`,o),!o&&l&&this.logger.log(`${t}loaded namespace ${a} for language ${i}`,l),this.loaded(e,o,l)})}saveMissing(e,t,r,i,a,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,t,r,i,c):d=u(e,t,r,i),d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}else u(e,t,r,i,l,c)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const fs=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),F(n[1])&&(e.defaultValue=n[1]),F(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),gs=n=>(F(n.ns)&&(n.ns=[n.ns]),F(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),F(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Ze=()=>{},Ur=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Ue extends ht{constructor(e={},t){if(super(),this.options=gs(e),this.services={},this.logger=fe,this.modules={external:[]},Ur(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(F(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=fs();this.options={...r,...this.options,...gs(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?fe.init(i(this.modules.logger),this.options):fe.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=$r;const d=new ls(this.options);this.store=new is(this.options.resources,this.options);const h=this.services;h.logger=fe,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new Ar(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=i(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Pr(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Dr(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(y,...p)=>{this.emit(y,...p)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new lt(this.services,this.options),this.translator.on("*",(y,...p)=>{this.emit(y,...p)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Ze),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=_e(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),t(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,t=Ze){let r=t;const i=F(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,t,r){const i=_e();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Ze),this.services.backendConnector.reload(e,t,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Us.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=_e();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),t&&t(l,(...u)=>this.t(...u))},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=F(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(F(l)?[l]:l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,d=>{a(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,t,r){const i=(a,o,...l)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([a,o].concat(l)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(a)?d=a.map(h=>`${c.keyPrefix}${u}${h}`):d=c.keyPrefix?`${c.keyPrefix}${u}${a}`:a,this.t(d,c)};return F(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const l=t.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,t){const r=_e();return this.options.ns?(F(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=_e();F(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new ls(fs());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Ue(e,t)}cloneInstance(e={},t=Ze){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new Ue(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,h)=>(d[h]={...c[u][h]},d),c[u]),c),{});a.store=new is(l,i),a.services.resourceStore=a.store}return a.translator=new lt(a.services,i),a.translator.on("*",(l,...c)=>{a.emit(l,...c)}),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Y=Ue.createInstance();Y.createInstance=Ue.createInstance;Y.createInstance;Y.dir;Y.init;Y.loadResources;Y.reloadResources;Y.use;Y.changeLanguage;Y.getFixedT;Y.t;Y.exists;Y.setDefaultNamespace;Y.hasLoadedNamespace;Y.loadNamespaces;Y.loadLanguages;var Hr=function(e){return{type:"backend",init:function(r,i,a){},read:function(r,i,a){if(typeof e=="function"){if(e.length<3){try{var o=e(r,i);o&&typeof o.then=="function"?o.then(function(l){return a(null,l&&l.default||l)}).catch(a):a(null,o)}catch(l){a(l)}return}e(r,i,a);return}a(null,e&&e[r]&&e[r][i])}}};const Vr={en:{app:Is,common:Ts}},Tt="clarin",zr=se.getInitialState().locale,Br=se.getInitialState().locales;function qr(n,e){if(!n)return e;const t=typeof n=="string"?[n]:n;return[...t.map(i=>`${Tt}.${i}`),...t]}const It=["app","common"],Kr=qr(It);function et(n){return typeof n=="string"||!Array.isArray(n)?[String(n)]:n}function Qr(n,e,t,r){if(t?.postProcessTryPrefixedNamespacesFirst!==void 0)return n;const i=et(e),a=et(t.ns||r.options.defaultNS||[]),o=r.resolve(i,t),c=(o?.res!==void 0?[...et(t.ns||[]),o.usedNS]:[...et(t.ns||[]),...a]).map(d=>d.startsWith(Tt)?d:`${Tt}.${d}`),u=r.translate(i,{...t,ns:c,postProcessTryPrefixedNamespacesFirst:!0});return i.includes(u)?n:u}Y.use(Xn).use({type:"postProcessor",name:"try-prefixed-namespaces-first",process:Qr}).use(Hr((n,e)=>Sr(Object.assign({"../locales/de/app.json":()=>ae(()=>import("./locales/de/default.js").then(r=>r.a),[],import.meta.url),"../locales/de/clarin.app.json":()=>ae(()=>import("./locales/de/default.js").then(r=>r.c),[],import.meta.url),"../locales/de/common.json":()=>ae(()=>import("./locales/de/default.js").then(r=>r.b),[],import.meta.url),"../locales/de/textplus.app.json":()=>ae(()=>import("./locales/de/textplus.app.js"),[],import.meta.url),"../locales/en/app.json":()=>ae(()=>import("./locales/en/default.js").then(r=>r.e),[],import.meta.url),"../locales/en/clarin.app.json":()=>ae(()=>import("./locales/en/default.js").then(r=>r.g),[],import.meta.url),"../locales/en/clarin.common.json":()=>ae(()=>import("./locales/en/default.js").then(r=>r.h),[],import.meta.url),"../locales/en/common.json":()=>ae(()=>import("./locales/en/default.js").then(r=>r.f),[],import.meta.url),"../locales/en/querybuilder.json":()=>ae(()=>import("./locales/en/querybuilder.js"),[],import.meta.url),"../locales/en/querysuggestions.json":()=>ae(()=>import("./locales/en/default.js").then(r=>r.q),[],import.meta.url),"../locales/en/textplus.app.json":()=>ae(()=>import("./locales/en/textplus.app.js"),[],import.meta.url),"../locales/en/textplus.common.json":()=>ae(()=>import("./locales/en/textplus.common.js"),[],import.meta.url)}),`../locales/${n}/${e}.json`,4))).init({lng:zr,fallbackLng:"en",supportedLngs:Br,ns:Kr,defaultNS:It,fallbackNS:It,debug:!1,interpolation:{escapeValue:!1},postProcess:["try-prefixed-namespaces-first"],resources:Vr,partialBundledLanguages:!0,react:{nsMode:"fallback",transKeepBasicHtmlNodesFor:["br","strong","i","p","em","kbd","code"]}});Y.addResourceBundle("en","clarin.app",vn);Y.addResourceBundle("en","clarin.common",Ln);Y.addResourceBundle("en","app",Is);Y.addResourceBundle("en","querysuggestions",Rn);Y.addResourceBundle("en","common",Ts);Object.assign(window,{i18n:Y});const Wr=["Emanuel Dima","Erik Körner","Leif-Jöran Olsson","Yana Panchenko","Oliver Schonefeld","Dieter Van Uytvanck"],Gr=[{id:"dropwizard",name:"Dropwizard",url:"https://www.dropwizard.io/",license:"Apache License 2.0",licenseUrl:"https://github.com/dropwizard/dropwizard/blob/release/3.0.x/LICENSE",usage:"web server"},{id:"de.mpg.mpgaai:mpgaai-shhaa",name:"MPG-AAI - simple http header authn/z",url:"https://github.com/clarin-eric/mpgaai",license:"Apache License 2.0",licenseUrl:"http://www.apache.org/licenses/LICENSE-2.0.txt",usage:"AAI / Shibboleth support"},{id:"io.swagger.core.v3",name:"Swagger Core",url:"https://github.com/swagger-api/swagger-core",license:"Apache License 2.0",licenseUrl:"https://github.com/swagger-api/swagger-core/blob/master/LICENSE",usage:"REST API documentation"},{id:"org.glassfish.jersey",name:"Eclipse Jersey",url:"https://eclipse-ee4j.github.io/jersey/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/eclipse-ee4j/jersey/blob/2.x/LICENSE.md",usage:"RESTful web services"},{id:"org.slf4j",name:"Simple Logging Facade for Java (SLF4J)",url:"https://www.slf4j.org/",license:"MIT License",licenseUrl:"https://www.slf4j.org/license.html",usage:"logging"},{id:"org.junit",name:"JUnit 5",url:"https://junit.org/",license:"Eclipse Public License 2.0",licenseUrl:"https://github.com/junit-team/junit-framework/blob/main/LICENSE.md",usage:"testing"},{id:"optimaize/language-detector",name:"Optimaize Language Detector",url:"https://github.com/optimaize/language-detector",license:"Apache License 2.0",licenseUrl:"https://github.com/optimaize/language-detector/blob/master/LICENSE",usage:"language detection of results"},{id:"org.apache.commons:commons-text",name:"Apache Commons Text",url:"https://commons.apache.org/proper/commons-text/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/commons-text/blob/master/LICENSE.txt",usage:"export format"},{id:"com.sun.xml.bind",name:"JAXB Reference Implementation",url:"https://eclipse-ee4j.github.io/jaxb-ri/",license:"Common Development and Distribution License (CCDL) 1.1",licenseUrl:"https://github.com/javaee/jaxb-v2/blob/2.3.0.1/jaxb-ri/License.txt",usage:"XML support",hide:!0},{id:"eu.clarin.weblicht:wlfxb",name:"Weblicht wlfxb",url:"https://weblicht.sfs.uni-tuebingen.de",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://github.com/weblicht/wlfxb/blob/master/LICENSE.txt",usage:"export format"},{id:"org.apache.poi:poi-ooxml",name:"Apache POI",url:"https://poi.apache.org/",license:"Apache License 2.0",licenseUrl:"https://github.com/apache/poi/blob/trunk/legal/LICENSE",usage:"export format"},{id:"org.jopendocument:jOpenDocument",name:"jOpenDocument",url:"https://www.jopendocument.org/",license:"GNU Lesser General Public License v3.0",licenseUrl:"https://www.jopendocument.org/support.html",usage:"export format"},{id:"eu.clarin.sru:sru-client",name:"CLARIN SRU/CQL Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-sru-client/blob/main/LICENSE.txt",usage:"SRU / CQL client framework",hide:!0},{id:"eu.clarin.sru.fcs:fcs-simple-client",name:"CLARIN-FCS Client",license:"GNU General Public License v3.0",licenseUrl:"https://github.com/clarin-eric/fcs-simple-client/blob/main/LICENSE.txt",usage:"FCS client framework",hide:!0}],Jr=[{id:"react",name:"React",url:"https://react.dev/",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE"},{id:"react-dom",name:"ReactDOM",url:"https://react.dev/reference/react-dom",license:"MIT License",licenseUrl:"https://github.com/facebook/react/blob/main/LICENSE",hide:!0},{id:"react-router",name:"React Router",url:"https://reactrouter.com/",license:"MIT License",licenseUrl:"https://github.com/remix-run/react-router/blob/main/LICENSE.md",usage:"single page application routing"},{id:"react-bootstrap",name:"React Bootstrap",url:"https://react-bootstrap.netlify.app/",license:"MIT License",licenseUrl:"https://github.com/react-bootstrap/react-bootstrap/blob/master/LICENSE",usage:"react bindings for bootstrap"},{id:"bootstrap",name:"Bootstrap",url:"https://getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/bootstrap/blob/main/LICENSE",usage:"UI framework"},{id:"bootstrap-icons",name:"Bootstrap Icons",url:"https://icons.getbootstrap.com/",license:"MIT License",licenseUrl:"https://github.com/twbs/icons/blob/main/LICENSE"},{id:"@tanstack/react-query",name:"TanStack Query",url:"https://tanstack.com/query",license:"MIT License",licenseUrl:"https://github.com/TanStack/query/blob/main/LICENSE",usage:"data loading via REST APIs"},{id:"axios",name:"Axios",url:"https://axios-http.com/",license:"MIT License",licenseUrl:"https://github.com/axios/axios/blob/v1.x/LICENSE",usage:"cross-browser support for REST API requests"},{id:"antlr4ng",name:"Next Generation TypeScript runtime for ANTLR4",url:"https://github.com/mike-lischke/antlr4ng",license:'The "BSD license"',licenseUrl:"https://github.com/mike-lischke/antlr4ng/blob/main/LICENSE.txt",usage:"query parser"},{id:"i18next",name:"i18next",url:"https://www.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next/blob/master/LICENSE",usage:"translations"},{id:"react-i18next",name:"react-i18next",url:"https://react.i18next.com/",license:"MIT License",licenseUrl:"https://github.com/i18next/react-i18next/blob/master/LICENSE",usage:"translations",hide:!0},{id:"i18next-resources-to-backend",name:"i18next-resources-to-backend",url:"https://github.com/i18next/i18next-resources-to-backend",license:"MIT License",licenseUrl:"https://github.com/i18next/i18next-resources-to-backend/blob/main/licence",usage:"translation resource loading",hide:!0},{id:"zustand",name:"Zustand",url:"https://zustand-demo.pmnd.rs/",license:"MIT License",licenseUrl:"https://github.com/pmndrs/zustand/blob/main/LICENSE",usage:"state management"},{id:"@nozbe/microfuzz",name:"microfuzz",url:"https://github.com/Nozbe/microfuzz",license:"MIT License",licenseUrl:"https://github.com/Nozbe/microfuzz/blob/main/LICENSE",usage:"fuzzy search"},{id:"react-helmet-async",name:"React Helmet (async fork)",url:"https://github.com/staylor/react-helmet-async",license:"Apache License 2.0",licenseUrl:"https://github.com/staylor/react-helmet-async/blob/main/LICENSE",usage:"HTML head modifications"},{id:"react-slugify",name:"react-slugify",url:"https://github.com/martpie/react-slugify",license:"MIT License",licenseUrl:"https://github.com/martpie/react-slugify/blob/master/LICENSE",usage:"jump id fragment generation"}];function Yr(){const{t:n}=ne(),e="urls.termsUseAndDisclaimer",t=n(e,{ns:"common"}),r=t!==e,i=W.getState().matomoTrackingEnabled,a=W.getState().appTitleHead,o=dt();function l(c){return s.jsx("ul",{children:c.filter(u=>u.hide!==!0).map(u=>s.jsxs("li",{children:[u.url?s.jsx("a",{href:u.url,children:u.name}):s.jsx("span",{children:u.name}),u.license&&s.jsxs(s.Fragment,{children:[" ","(",u.licenseUrl?s.jsx("a",{href:u.licenseUrl,children:u.license}):s.jsx("span",{children:u.license}),")"]})]},u.id))})}return s.jsxs(s.Fragment,{children:[s.jsx(He,{children:s.jsxs("title",{children:[a," – About"]})}),s.jsxs(ie,{className:"py-4",children:[s.jsx("h1",{className:"h1 mb-4",children:n("about.title")}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.people.title")}),s.jsx("p",{children:n("about.people.developedBy")}),s.jsx("ul",{children:Wr.map(c=>s.jsx("li",{children:c},c))})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.statistics.title")}),s.jsx("p",{children:s.jsx(B,{i18nKey:"about.statistics.text",components:[s.jsx(it,{to:{pathname:"/stats",search:o},children:"endpoint statistics"})]})})]}),(r||i)&&s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.privacyPolicy.title")}),r&&s.jsx("p",{children:s.jsx(B,{i18nKey:"about.privacyPolicy.termsInfo",components:[s.jsx("a",{href:t,children:"clarin.eu"})]})}),i&&s.jsx("p",{children:s.jsx(B,{i18nKey:"about.privacyPolicy.matomoInfo",components:[s.jsx("a",{href:"https://matomo.org/",children:"Matomo"})]})})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.sourceCode.title")}),s.jsx("p",{children:s.jsx(B,{i18nKey:"about.sourceCode.sourceInfo.text",components:[s.jsx("a",{href:n("about.sourceCode.sourceInfo.repoUrl"),children:"GitHub"}),s.jsx("a",{href:n("about.sourceCode.sourceInfo.licenseUrl"),children:"GPL 3.0 license"})]})}),s.jsx("p",{children:n("about.sourceCode.licenseInfo")})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"h2",children:n("about.technology.title")}),s.jsx("p",{children:n("about.technology.backendUses")}),l(Gr),s.jsx("p",{children:n("about.technology.frontendUses")}),l(Jr),s.jsx("p",{children:s.jsx(B,{i18nKey:"about.technology.iconLicenseInfo",components:[s.jsx("a",{href:"http://www.freepik.com/",children:"Freepik"}),s.jsx("a",{href:"www.flaticon.com",children:"www.flaticon.com"}),s.jsx("a",{href:"http://creativecommons.org/licenses/by/3.0/",children:"CC BY 3.0"})]})})]})]})]})}const Hs=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
  <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
</svg>`,Ot=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-magic" viewBox="0 0 16 16">
  <path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0zm4.5.035A.5.5 0 0 0 13.293 2L12 3.293a.5.5 0 1 0 .707.707zM7.293 4A.5.5 0 1 0 8 3.293L6.707 2A.5.5 0 0 0 6 2.707zm-.621 2.5a.5.5 0 1 0 0-1H4.843a.5.5 0 1 0 0 1zm8.485 0a.5.5 0 1 0 0-1h-1.829a.5.5 0 0 0 0 1zM13.293 10A.5.5 0 1 0 14 9.293L12.707 8a.5.5 0 1 0-.707.707zM9.5 11.157a.5.5 0 0 0 1 0V9.328a.5.5 0 0 0-1 0zm1.854-5.097a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L8.646 5.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0l1.293-1.293Zm-3 3a.5.5 0 0 0 0-.706l-.708-.708a.5.5 0 0 0-.707 0L.646 13.94a.5.5 0 0 0 0 .707l.708.708a.5.5 0 0 0 .707 0z"/>
</svg>`;function Xr(){const{t:n}=ne(),e=W.getState().appTitleHead;return s.jsxs(s.Fragment,{children:[s.jsx(He,{children:s.jsxs("title",{children:[e," – Help"]})}),s.jsxs(ie,{className:"my-4",children:[s.jsx("h1",{className:"h1",children:n("help.title")}),s.jsx("h2",{className:"h2",id:"performing-a-fcs-search-in-resources",children:n("help.performSearch.title")}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.performSearch.textBasicSearch"})}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.performSearch.textAdvancedSearch",components:{iconMagicWand:s.jsx("i",{dangerouslySetInnerHTML:{__html:Ot},"aria-hidden":"true"})}})}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.performSearch.textLexicalSearch",components:{iconMagicWand:s.jsx("i",{dangerouslySetInnerHTML:{__html:Ot},"aria-hidden":"true"})}})}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.performSearch.textSearchProgress"})}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.performSearch.textViewResource",components:{iconEye:s.jsx("i",{dangerouslySetInnerHTML:{__html:Hs},"aria-hidden":"true"})}})}),s.jsx("h2",{className:"h2",id:"adjusting-search-criteria",children:n("help.adjustSearchCriteria.title")}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.adjustSearchCriteria.text"})}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.adjustSearchCriteria.textOtherSearchTypes"})}),s.jsx("h2",{className:"h2",id:"more-help",children:n("help.moreHelp.title")}),s.jsx("p",{children:s.jsx(B,{i18nKey:"help.moreHelp.text",components:[s.jsx("a",{href:"https://www.clarin.eu/content/content-search-tutorial",children:"Content Search: Tutorial at CLARIN.eu"}),s.jsx("a",{title:n("help.contactTitle"),href:n("urls.contact",{ns:"common"}),children:"CLARIN FCS Helpdesk"})]})})]})]})}const Dt=g.createContext({resources:[],languages:{},weblichtLanguages:[]});Dt.displayName="AggregatorDataContext";function Zr({resources:n,languages:e,weblichtLanguages:t,children:r}){const i={resources:n,languages:e,weblichtLanguages:t};return s.jsx(Dt.Provider,{value:i,children:r})}function Ut(){return g.useContext(Dt)}const Ht=g.createContext(void 0);Ht.displayName="AxiosContext";function Ie(){const n=g.useContext(Ht);if(!n)throw new Error('No "axios" instance set, use AxiosProvider to set one');return n}function ei({axios:n,children:e}){return s.jsx(Ht.Provider,{value:n,children:e})}const Vt=g.createContext(void 0);Vt.displayName="SearchParamsContext";function zt(){const n=g.useContext(Vt);if(!n)throw new Error('No "params" data set, use SearchParamsProvider to set one');return n}function ti({language:n,languageFilter:e,queryType:t,query:r,resourceIDs:i,numberOfResults:a,children:o}){const l={language:n,languageFilter:e,queryType:t,query:r,resourceIDs:i,numberOfResults:a};return s.jsx(Vt.Provider,{value:l,children:o})}function si(n,e=0){let t=3735928559^e,r=1103547991^e;for(let i=0,a;i<n.length;i++)a=n.charCodeAt(i),t=Math.imul(t^a,2654435761),r=Math.imul(r^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}window._paq=window._paq||[];function ni({siteId:n,trackerUrl:e,enableLinkTracking:t=!0,domains:r=[],userId:i=void 0}){window._paq.push(["setTrackerUrl",e]),window._paq.push(["setSiteId",n]),i&&window._paq.push(["setUserId",i]),Array.isArray(r)&&r.length>0&&window._paq.push(["setDomains",r]),t&&(window._paq.push(["enableLinkTracking"]),window._paq.push(["setLinkTrackingTimer",250]))}function ri({srcUrl:n}){const e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.defer=!0,e.src=n,t&&t.parentNode&&t.parentNode.insertBefore(e,t)}function ii(n){if(!n)return!1;let e=null;if(typeof n=="string")try{e=JSON.parse(n)}catch(u){return console.error("Error trying to parse tracking params!",u),!1}else typeof n=="object"&&(e=n);const t=e.siteId,r=e.trackerUrl,i=e.srcUrl,a=e.domains,o=e.userId?.toString();if(i===void 0)return console.warn('No "srcUrl" configuration set for tracking!'),!1;if(r===void 0)return console.warn('No "trackerUrl" configuration set for tracking!'),!1;if(t===void 0||!Number.isInteger(t))return console.warn('No "siteId" configuration set for tracking!'),!1;const l={siteId:t,trackerUrl:r,domains:a};o&&(l.userId=si(o).toString());const c={srcUrl:i};return ni(l),Vs(document.location.href||window.location.href,document.title),ri(c),!0}function Vs(n,e,t){window._paq.push(["setDocumentTitle",e??document.title]),window._paq.push(["setCustomUrl",n]),t!==void 0&&window._paq.push(["setReferrerUrl",t]),window._paq.push(["trackPageView"])}function zs(n,e=!1,t=!1){window._paq.push(["trackSiteSearch",n,e,t])}const kt="byMeta",ai="all",Bs="resource",oi="title-up",me="mul";function ft(n,e=void 0,t={}){return n===me?t?.defaultAnyLanguage??"Any Language":e?.[n]||(t?.defaultUnknownLanguage??"Unknown Language")}function li(n){const e=se.getState().locale,t=(a,o=null)=>({...a,subResources:a.subResources.map(l=>t(l,o??a)),rootResourceId:o?.id??null}),r=n.map(a=>t(a,null)),i=function(a,o){const l=V(a.institution,e)??"",c=V(o.institution,e)??"",u=l.localeCompare(c);if(u!==0)return u;const d=V(a.title,e)??"",h=V(o.title,e)??"";return d.toLowerCase().localeCompare(h.toLowerCase())};return Ee(r,a=>{a.subResources.sort(i)}),r.sort(i),r}function ci(n,e){const t=[],r=[],i=[];return Object.entries(e).forEach(([a,o])=>{o.forEach(l=>{let c=!1;Ee(n,u=>{u.handle===l&&(c=!0,i.push(u))}),c||(console.warn("Handle not found in resources",l),r.push(l))})}),Ee(i,a=>{t.push(a.id)}),{selected:t,unavailable:r}}function Ee(n,e){const t=(r,i)=>{e(r,i)===!1||r.subResources.forEach(t)};n.forEach(t)}function be(n){const e=[];return Ee(n,t=>{e.push(t.id)}),e}function ui(n,e,t){const r=[],i=a=>qs(a,i)||bi(a,e,t);return Ee(n,a=>{i(a)&&r.push(a.id)}),r}function di(n,e){const t=se.getState().locale,r=new Set;return Ee(n,i=>{if(e.includes(i.id)){const a=V(i.institution,t)??"";r.add(a)}return!0}),Array.from(r)}function hi(n){const e=t=>[t,...t.subResources.map(e).flat()];return n.map(e).flat()}const fi=["en","eng","de","deu"];function gi(n){if(n===null)return null;if(typeof n=="string")return n;for(const t of fi)if(Object.hasOwn(n,t))return n[t];const e=Object.getOwnPropertyNames(n);return e.length>0?n[e[0]]:null}function pi(n,e){return n===null?null:typeof n=="string"?n:e&&Object.hasOwn(n,e)?n[e]:null}function V(n,e){e===void 0&&(e=se.getState().locale);const t=pi(n,e);return t!==null?t:gi(n)}function gt(n,e="en"){const t=typeof n.title=="string"||n.title===null?[e]:Object.getOwnPropertyNames(n.title),r=typeof n.description=="string"||n.description===null?[e]:Object.getOwnPropertyNames(n.description),i=typeof n.institution=="string"||n.institution===null?[e]:Object.getOwnPropertyNames(n.institution),a=[...t,...r,...i];return Array.from(new Set(a))}function mi(n,e){return!(e==="fcs"&&!n.endpoint.searchCapabilities.includes("ADVANCED_SEARCH")||e==="lex"&&!n.endpoint.searchCapabilities.includes("LEX_SEARCH"))}function xi(n,e){return!!(e===me||n.languages&&n.languages.length===1&&n.languages[0]===e||n.languages&&n.languages.indexOf(e)>=0)}function qs(n,e){if(!n.subResources||n.subResources.length===0)return!1;let t=!1;const r=i=>{if(e?.(i)===!0){t=!0;return}i.subResources.forEach(r)};return n.subResources.forEach(r),t}function bi(n,e,t){return!(!mi(n,e)||!xi(n,t))}const yi={"title-up":(n,e)=>{const t=se.getState().locale,r=V(n.title,t)??"",i=V(e.title,t)??"";return r.localeCompare(i)},"title-down":(n,e)=>{const t=se.getState().locale,r=V(n.title,t)??"",i=V(e.title,t)??"";return-r.localeCompare(i)},"institution-up":(n,e)=>{const t=se.getState().locale,r=V(n.institution,t)??"",i=V(e.institution,t)??"",a=V(n.title,t)??"",o=V(e.title,t)??"",l=r.localeCompare(i);return l!==0?l:a.localeCompare(o)},"institution-down":(n,e)=>{const t=se.getState().locale,r=V(n.institution,t)??"",i=V(e.institution,t)??"",a=V(n.title,t)??"",o=V(e.title,t)??"",l=-r.localeCompare(i);return l!==0?l:a.localeCompare(o)}};function Ks(n,e){const[t,r]=g.useState(n);return g.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}function At(n,e,t=0,r=e){if(e===n&&e===r&&e.nodeType===Node.ELEMENT_NODE&&t===1)return e.nodeType,e.textContent?.length,e.textContent?.length||0;if(e===n||n===null)return t;const i=e.parentNode;if(i===null)return t;let a=0;const o=i.childNodes;for(let l=0;l<o.length;l++){const c=o[l];if(c===e)break;c.nodeType===Node.TEXT_NODE||c.nodeType===Node.ELEMENT_NODE?a+=c.textContent?.length||0:console.warn("unknown node type",{container:n,node:e,offset:t,parent:i,i:l,child:c})}return At(n,i,a+t,r)}function Qs(n,e){const t=n.textContent?.length||0;if(t<e)return null;let r=0;const i=n.childNodes;for(let a=0;a<i.length;a++){const o=i[a];let l=0;if(o.nodeType===Node.TEXT_NODE||o.nodeType===Node.ELEMENT_NODE?l=o.textContent?.length||0:console.warn("unknown node type, skip",{container:n,offset:e,child:o}),!(l===0&&i.length!==1)&&(r+=l,r>=e)){const c=e-(r-l);return o.nodeType===Node.ELEMENT_NODE?Qs(o,c):{node:o,offset:c}}}return i.length,null}function Pt(n,e){if(!e)return null;const t=At(n,e.startContainer,e.startOffset);if(e.startContainer.nodeType===Node.TEXT_NODE&&e.endContainer===e.startContainer)return[t,t+(e.endOffset-e.startOffset)];const r=At(n,e.endContainer,e.endOffset);return[t,r]}function ji(n,e){if(!(document.activeElement===n))return null;const r=window.getSelection();if(!r)return null;const i=document.createRange(),a=Qs(n,e);if(a)try{i.setStart(a.node,a.offset),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}catch(o){console.error("Error trying to set cursor!",o,{container:n,offset:e,startRange:a})}}function ps(n){if(!(document.activeElement===n))return null;const t=window.getSelection();if(!t||t.rangeCount===0)return null;const r=t.getRangeAt(0),i=Pt(n,r);return i?i[0]:null}function Si(n){return n==="cql"?"fcs-cql":n==="fcs"?"fcs-fcsql":n==="lex"?"fcs-lexcql":"plain"}function _t(n,e){const t=Si(e),r="match-braces rainbow-braces";let i=n;try{i=Nn.highlight(n,t)}catch(o){console.warn("Error trying to highlight value",{value:n,error:o,language:t})}return`<pre><code class="language-${t} ${r}">${i}</code></pre>`}function Me(n){return n?(n=n.replace(/[\n\t]/g," "),n=n.replace(/&nbsp;|\u202F|\u00A0/g," "),n):""}const Ws=an.forwardRef(({value:n,onChange:e,onCursorChange:t,disabled:r,placeholder:i,queryType:a,delay:o=200,...l},c)=>{const u=g.useRef(null),d=g.useRef(null);g.useImperativeHandle(c,()=>d.current);const[h,m]=g.useState(Me(n)),[y,p]=g.useState(null),R=Ks(h,o),[S,w]=g.useState(R);g.useEffect(()=>{const L=_t(R,a);if(w(L),d.current){const I=ps(d.current);p(I)}},[R,a]),g.useEffect(()=>{const L=Me(n);if(R!==L&&(m(L),w(_t(L)),d.current)){const I=ps(d.current);p(I)}},[n,R]),g.useLayoutEffect(()=>{d.current&&y!==null&&ji(d.current,y)});function N(L){const I=L.target.innerText;u.current&&(u.current.value=I),m(I),e?.(I)}function x(L){L.stopPropagation(),L.preventDefault();const T=(L.clipboardData||window.clipboardData).getData("text");v(T)}function C(L){L.key==="Enter"?(L.stopPropagation(),L.preventDefault(),u.current&&u.current.form?.requestSubmit()):L.key==="Backspace"?(L.stopPropagation(),L.preventDefault(),_()):L.key==="Delete"?(L.stopPropagation(),L.preventDefault(),D()):L.ctrlKey&&L.key==="a"||p(null)}function k(L=!1){if(!d.current||!t)return;const I=d.current;if(!(document.activeElement===I))return;const O=window.getSelection();if(!O||O.rangeCount===0)return;const b=[];for(let H=0;H<O.rangeCount;H++){const j=O.getRangeAt(H),A=Pt(I,j);A&&b.push(A)}if(b.length===0)return;const[$,P]=b.pop();L?$===P&&(p($),t?.($)):t?.($,$!==P?P:void 0)}function f(L){if(!d.current)return null;const I=d.current;if(!(document.activeElement===I))return null;const O=window.getSelection();if(!O||O.rangeCount===0)return null;const b=[];for(let j=0;j<O.rangeCount;j++){const A=O.getRangeAt(j),G=Pt(I,A);G&&b.push(G)}if(b.length===0)return null;b.sort();const $=b.map(([j,A])=>A-j).reduce((j,A)=>j+A,0),P=I.innerText,H=b.toReversed().reduce((j,[A,G])=>j.slice(0,A)+j.slice(G),P);if(L==="backspace"){if($===0){const j=b.filter(([A,G])=>A===G).map(([,A])=>A).pop();if(j===0)return null;if(j!==void 0)return{value:H.slice(0,j-1)+H.slice(j),offset:j-1}}else{const j=b.map(([,A])=>A).pop();if(j!==void 0)return{value:H,offset:j-$}}return console.warn('invalid "backspace" process, abort',{container:I,selectionIndices:b,oldValue:P,newValueSpansRemoved:H,numDeleted:$}),null}else if(L==="delete"){if($===0){const j=b.filter(([A,G])=>A===G).map(([,A])=>A).pop();if(j!==void 0)return{value:H.slice(0,j)+H.slice(j+1),offset:j}}else{const j=b.map(([,A])=>A).pop();if(j!==void 0)return{value:H,offset:j-$}}return console.warn('invalid "delete" process, abort',{container:I,selectionIndices:b,oldValue:P,newValueSpansRemoved:H,numDeleted:$}),null}else if(L==="paste"){if($===0){const j=b.filter(([A,G])=>A===G).map(([A])=>A).shift();if(j!==void 0)return{value:H,offset:j}}else{const j=b.map(([A])=>A).shift();if(j!==void 0)return{value:H,offset:j}}return console.warn('invalid "paste" process, abort',{container:I,selectionIndices:b,oldValue:P,newValueSpansRemoved:H,numDeleted:$}),null}}function v(L){const I=f("paste");if(!I)return;const T=Me(L),{value:O,offset:b}=I,$=O.slice(0,b)+T+O.slice(b),P=b+L.length;m($),p(P),u.current&&(u.current.value=$),e?.($),t?.(P)}function _(){const L=f("backspace");if(!L)return;const{value:I,offset:T}=L,O=Me(I);m(O),p(T),u.current&&(u.current.value=O),e?.(O),t?.(T)}function D(){const L=f("delete");if(!L)return;const{value:I,offset:T}=L,O=Me(I);m(O),p(T),u.current&&(u.current.value=O),e?.(O),t?.(T)}return s.jsxs(s.Fragment,{children:[s.jsx("div",{role:"input",disabled:r,placeholder:i,spellCheck:!1,autoCapitalize:"off",autoCorrect:"off",...l,onInput:N,onPaste:x,onKeyDown:C,onKeyUp:()=>k(),onClick:()=>k(!0),tabIndex:r?-1:l.tabIndex,contentEditable:!0,dangerouslySetInnerHTML:{__html:S},ref:d}),i&&n===""&&s.jsx("span",{className:"input-placeholder-simulacrum",children:i}),s.jsx("input",{type:"hidden",ref:u})]})});Ws.displayName="ContentEditable";var de=on();function wi({show:n,languages:e,resources:t,searchLanguage:r,searchLanguageFilter:i,onModalClose:a}){const{t:o}=ne(),[l,c]=g.useState(r||me),[u,d]=g.useState(i||kt),[h,m]=g.useState(""),[y,p]=g.useState(!1),R=g.useMemo(()=>{const f=new Map;return t&&(t.forEach(v=>v.languages.forEach(_=>f.set(_,(f.get(_)??0)+1))),f.set(me,t.length)),f},[t]),S=de.useFuzzySearchList({list:Object.entries(e??{}).toSorted(),queryText:h,getText:f=>[f[0],f[1]],mapResultItem:({item:f,score:v,matches:_})=>({item:f,matches:_,score:v})});if(!e)return null;const w=Math.floor((S.length+2)/3);function N(f){a({language:l,filter:u,action:f})}function x(){c(r||me),d(i||kt)}function C(){p(f=>!f)}function k(f,v,_,D){const L=l===f;let I="d-block py-0 my-1 border-0";return L&&(I+=" fw-semibold selected"),_===void 0&&(_=[null,null]),s.jsxs(X,{size:"sm",className:I,style:{color:`var(${L?"--bs-green":"--bs-body-colors"})`,backgroundColor:"var(--bs-body-bg)"},onClick:()=>c(f),"data-filter-score":D,children:[L&&s.jsx("span",{className:"selected-marker me-1",children:"✓"}),s.jsx(de.Highlight,{ranges:_[1],text:v})," ",s.jsx("sup",{children:s.jsx(de.Highlight,{ranges:_[0],text:f})}),y&&R.has(f)&&s.jsxs(s.Fragment,{children:[" (",R.get(f),")"]})]},f)}return s.jsxs(Z,{show:n,onHide:()=>N("close"),size:"xl",fullscreen:"lg-down",centered:!0,children:[s.jsx(Z.Header,{closeButton:!0,children:s.jsx(Z.Title,{children:o("search.languagesModal.title")})}),s.jsxs(Z.Body,{className:"px-0",children:[s.jsxs(ie,{className:"px-4 pb-3 border-bottom",children:[s.jsxs(te,{children:[s.jsx(U,{sm:!0}),s.jsx(U,{sm:!0,className:"mb-3 mb-sm-2 align-content-end",children:k(me,o("languageCodeToName.any",{ns:"common"}))}),s.jsxs(U,{sm:!0,children:[s.jsx(q.Control,{size:"sm",placeholder:o("search.languagesModal.filterInputPlaceholder"),name:"languages-filter",value:h,onChange:f=>m(f.target.value)}),t&&s.jsx(q.Check,{name:"languages-show-count",id:"languages-show-count",checked:y,onChange:C,type:"checkbox",label:o("search.languagesModal.checkboxShowNumberOfResources"),className:"mt-1"})]})]}),s.jsxs(te,{children:[s.jsx(U,{sm:!0,children:S.slice(0,w).map(({item:[f,v],matches:_,score:D})=>k(f,v,_,D))}),s.jsx(U,{sm:!0,children:S.slice(w,2*w).map(({item:[f,v],matches:_,score:D})=>k(f,v,_,D))}),s.jsx(U,{sm:!0,children:S.slice(2*w).map(({item:[f,v],matches:_,score:D})=>k(f,v,_,D))})]})]}),s.jsx(q,{children:s.jsx(ie,{className:"px-4 pt-3",children:["byMeta","byGuess","byMetaAndGuess"].map(f=>s.jsx(q.Check,{type:"radio",name:"filterOpts",value:f,id:`filterOpts-${f}`,checked:u===f,onChange:()=>d(f),label:o(`search.languagesModal.optionLanguage${f}`)},f))})})]}),s.jsxs(Z.Footer,{children:[s.jsx(X,{variant:"secondary",onClick:x,children:o("search.languagesModal.buttonReset")}),s.jsx(X,{variant:"secondary",onClick:()=>N("abort"),children:o("search.languagesModal.buttonAbort")}),s.jsx(X,{variant:"primary",onClick:()=>N("confirm"),children:o("search.languagesModal.buttonConfirm")})]})]})}const Bt=[{id:"cql",name:"Text layer Contextual Query Language (CQL)",searchLabel:"Full-text search",color:"#29a900",searchPlaceholder:"Elephant"},{id:"fcs",name:"Multi-layer Federated Content Search Query Language (FCS-QL)",searchLabel:"Multi-layer annotation search",color:"#00a8cc",searchPlaceholder:"[word = 'annotation'][word = 'focused']"},{id:"lex",name:"Lexical Resources Contextual Query Language (LexCQL)",searchLabel:"Lexical resource search",color:"#e77e00",searchPlaceholder:"banana"}],rt=Object.fromEntries(["cql","fcs","lex"].map(n=>[n,Bt.find(e=>e.id===n)])),ms=["fcs","lex"],vi=[{id:"text",label:"Plain Text"},{id:"csv",label:"CSV"},{id:"tcf",label:"TCF"},{id:"ods",label:"ODS"},{id:"excel",label:"Excel"}],Li="cql",tt=[10,20,50,100,200,250],we="info:srw/diagnostic/1/61",Ri=[{id:"cql-single-term",queryType:"cql",query:"Elephant",description:"Query with single term"},{id:"cql-with-boolean",queryType:"cql",query:"cat AND dog",description:"Query with boolean"},{id:"cql-with-phrase",queryType:"cql",query:'"exciting news"',description:"Query with phrase (quoting because of whitespaces)"},{id:"fcs-three-tokens-artznei",queryType:"fcs",query:'[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]',description:'Phrase with three tokens: a word starting with "her", a lemmatized word, and a verb'},{id:"lex-plain-string",queryType:"lex",query:"apple",description:"Search for plain string"},{id:"lex-lemma-with-language",queryType:"lex",query:'lemma =/lang=deu "Apfel"',description:'Search for German lemma "Apfel"'}];function Ni({show:n,queryTypes:e,onModalClose:t}){const{t:r}=ne(),i=e&&e.length>0?e:["cql","fcs","lex"],a=Ri.filter(u=>i.includes(u.queryType));if(a.length===0)return o("abort"),null;function o(u){t({query:void 0,queryType:void 0,action:u})}function l(u,d){t({query:u,queryType:d,action:"confirm"})}function c(u,d,h,m){return s.jsxs(te,{children:[s.jsx(U,{md:"auto",className:"d-none d-md-block",children:m&&`${m}.`}),s.jsxs(U,{className:"d-flex flex-column",children:[h!==void 0&&s.jsx("div",{children:h}),s.jsx("div",{dangerouslySetInnerHTML:{__html:_t(u,d)}})]}),s.jsx(U,{md:"auto",className:"d-flex justify-content-end align-items-baseline",children:s.jsx(X,{size:"sm",onClick:()=>l(u,d),children:r("search.suggestionsModal.buttonUseQuery")})})]},u)}return s.jsxs(Z,{id:"search-query-suggestions-modal",show:n,onHide:()=>o("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[s.jsx(Z.Header,{closeButton:!0,children:s.jsx(Z.Title,{children:r("search.suggestionsModal.title")})}),s.jsx(Z.Body,{className:"px-0",children:s.jsx(ie,{fluid:!0,children:i.map(u=>{const d=a.filter(h=>h.queryType===u);return d.length===0?null:s.jsxs(g.Fragment,{children:[s.jsx(te,{children:s.jsx(U,{children:s.jsx("h4",{className:"border-bottom pb-2",children:r(`queryTypes.${u}.nameLong`,{ns:"common",defaultValue:rt[u]?.name??u.toUpperCase()})})})}),d.map((h,m)=>c(h.query,h.queryType,h.description,m+1))]},u)})})}),s.jsx(Z.Footer,{children:s.jsx(X,{variant:"primary",onClick:()=>o("close"),children:r("search.suggestionsModal.buttonClose")})})]})}function Gs({disabled:n,value:e,onChange:t,delay:r=300}){const[i,a]=g.useState(e??""),o=Ks(i,r);return g.useEffect(()=>{t(o)},[t,o]),s.jsx(q.Control,{type:"search",placeholder:"Search for ...",value:i,onChange:l=>a(l.target.value),disabled:n})}const pt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bank" viewBox="0 0 16 16">
  <path d="m8 0 6.61 3h.89a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v7a.5.5 0 0 1 .485.38l.5 2a.498.498 0 0 1-.485.62H.5a.498.498 0 0 1-.485-.62l.5-2A.5.5 0 0 1 1 13V6H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 3h.89zM3.777 3h8.447L8 1zM2 6v7h1V6zm2 0v7h2.5V6zm3.5 0v7h1V6zm2 0v7H12V6zM13 6v7h1V6zm2-1V4H1v1zm-.39 9H1.39l-.25 1h13.72z"/>
</svg>`,Js=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4z"/>
</svg>`;function qt({resource:n,selectedResourceIDs:e,highlighting:t,highlightings:r,shouldBeShown:i,localeForInfos:a,onSelectClick:o,languageCodeToName:l}){const{t:c}=ne(),[u,d]=g.useState(!1),[h,m]=g.useState(!1);t??=r?.get(n.id)??[null,null,null];const y=e.includes(n.id),p=gt(n),R=ve(f=>f.locale),[S,w]=g.useState(R);if(g.useEffect(()=>{R&&w(R)},[R]),g.useEffect(()=>{a&&w(a)},[a]),typeof i=="function"&&!i(n))return null;if(i===!1)return null;const N=typeof i=="function"?n.subResources.some(f=>i(f)):!0;function x(){u&&document.getSelection()?.type==="Range"||d(f=>!f)}function C(){o(n,!y)}function k(){m(f=>!f)}return s.jsxs(s.Fragment,{children:[s.jsxs(te,{className:`p-2 m-1 ${u&&"border-bottom"}`,children:[s.jsx(U,{md:"auto",sm:1,onClick:C,children:s.jsx(q.Check,{id:`resource-selection-${n.id}`,"aria-label":c("search.results.resourceInfo.checkboxResourceAriaLabel",{title:n.title}),children:s.jsx(q.Check.Input,{checked:y,onChange:()=>{}})})}),s.jsxs(U,{md:8,sm:11,className:`mb-sm-2 ${u?"":"text-truncate"}`,onClick:x,children:[s.jsxs("h4",{className:`h5 ${u?"":"text-truncate"}`,children:[s.jsx(de.Highlight,{text:V(n.title,S)??"",ranges:t[0]})," ",n.landingPage&&s.jsx("small",{children:s.jsxs("a",{href:n.landingPage,className:"matomo_link",target:"_blank",children:[c("search.resourcesModal.resource.moreInformation")," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:Js}})]})})]}),s.jsx("p",{className:`mb-0 ${u?"":"text-truncate"}`,children:V(n.description,S)&&s.jsx(de.Highlight,{text:V(n.description,S)??"",ranges:t[2]})})]}),s.jsxs(U,{md:{span:3,offset:0},sm:{span:11,offset:1},className:`${u?"":" text-truncate"}`,onClick:x,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})," ",s.jsx(de.Highlight,{text:V(n.institution,S)??"",ranges:t[1]}),s.jsx("br",{}),s.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",n.languages.map(l).sort().join(", "),u&&p.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx(ut,{type:"radio",name:`resources-${n.id}-info-languages`,defaultValue:S,onChange:f=>w(f),onClick:f=>f.stopPropagation(),className:"mt-2",children:p.toSorted().map(f=>s.jsx(ze,{variant:"outline-secondary",size:"sm",id:`resources-${n.id}-info-languages-${f}`,value:f,type:"radio",children:f},f))})]})]}),N&&n.subResources.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-100"}),s.jsx(U,{md:"auto",sm:1,style:{width:"2.8rem"}}),s.jsx(U,{md:{span:8,offset:0},sm:{span:11,offset:1},children:s.jsx(X,{variant:"link",size:"sm",className:"ps-0",onClick:k,children:c("search.resourcesModal.resource.toggleExpand",{context:h?"collapse":"expand",count:n.subResources.length})})})]})]}),N&&h&&s.jsx(re,{className:"ms-md-5 ms-sm-2 border-end-0 border-top-0 rounded-end-0 rounded-top-0",children:n.subResources.map(f=>s.jsx(qt,{resource:f,highlightings:r,selectedResourceIDs:e,shouldBeShown:i,onSelectClick:o,languageCodeToName:l},f.id))})]})}function xs({title:n,resources:e,selectedResourceIDs:t,resourceScores:r,highlightings:i,expanded:a,shouldBeShown:o,localeForInfos:l,onSelectClick:c,onExpandToggleClick:u,onSelectAllClick:d,onDeselectAllClick:h,languageCodeToName:m}){const{t:y}=ne(),[p,R]=g.useState(a);g.useEffect(()=>{R(a)},[a]);const S=r!==void 0?e.filter(x=>r.has(x.id)).toSorted((x,C)=>{const k=r.get(x.id),f=r.get(C.id);return k===f?0:k===void 0?1:f===void 0?-1:k-f}):e;if(S.length===0)return null;function w(){R(x=>!x),u(!p)}function N(){const x=e.filter(v=>!v.rootResourceId),C=be(x).length,k=x.length,f=be(x).filter(v=>t.includes(v)).length;return y("search.resourcesModal.grouped.msgResources",{count:k,nested:C-k,context:C-k?"nested":null})+(f!==C?y("search.resourcesModal.grouped.msgResourcesSelected",{count:f}):"")}return s.jsxs(ie,{className:"border-bottom pb-2 mb-4 px-0",children:[s.jsxs(te,{className:"px-3",children:[s.jsx(U,{md:9,sm:12,children:s.jsx("h3",{children:n})}),s.jsxs(U,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",style:{height:"fit-content"},children:[s.jsx(X,{size:"sm",variant:"secondary",onClick:w,"aria-expanded":p,children:y("search.resourcesModal.grouped.buttonExpand",{context:p?"hide":"show"})}),s.jsx(X,{size:"sm",onClick:()=>d(e),children:y("search.resourcesModal.grouped.buttonSelectAll")}),s.jsx(X,{size:"sm",onClick:()=>h(e),children:y("search.resourcesModal.grouped.buttonDeselectAll")})]})]}),s.jsx(te,{className:"px-3",children:s.jsx(U,{children:N()})}),s.jsx(Cs,{in:p,children:s.jsx(ie,{children:S.map(x=>s.jsx(qt,{resource:x,highlightings:i,selectedResourceIDs:t,shouldBeShown:o,onSelectClick:c,languageCodeToName:m,localeForInfos:l},x.id))})})]})}function Ci(n,e,t){const r=hi(e),i=de.useFuzzySearchList({list:r,queryText:n,getText:h=>[V(h.title,t),V(h.institution,t),V(h.description,t)],mapResultItem:({item:h,score:m,matches:y})=>({resource:h,matches:y,score:m})}),a=i.reduce((h,{resource:m,matches:y})=>(h.set(m.id,y),h),new Map),o=i.reduce((h,{resource:m,score:y})=>h.set(m.id,y),new Map),l=new Set;i.filter(({resource:h})=>h.rootResourceId!==null).forEach(({resource:h,score:m})=>{const y=o.get(h.rootResourceId);y===void 0?(l.add(h.rootResourceId),o.set(h.rootResourceId,m)):m<y&&o.set(h.rootResourceId,m)});const c=e.filter(h=>l.has(h.id)).map(h=>({resource:h,score:o.get(h.id)}));return{resources:[...i.filter(({resource:h})=>!h.rootResourceId),...c].toSorted(({score:h},{score:m})=>h===m?0:h===void 0?1:m===void 0?-1:h-m).map(({resource:h})=>h),matches:a,scores:o}}function Ei({show:n,showGrouping:e,resources:t,languages:r,availableResources:i,selectedResources:a,onModalClose:o}){const{t:l}=ne(),c=ve(E=>E.locale),[u,d]=g.useState(c);g.useEffect(()=>{c&&d(c)},[c]);const h=new Intl.DisplayNames([c,"en"],{type:"language"}),[m,y]=g.useState(a||i),[p,R]=g.useState(ai),[S,w]=g.useState(Bs),[N,x]=g.useState(oi),[C,k]=g.useState(""),[f,v]=g.useState({}),[_,D]=g.useState({});g.useEffect(()=>{e&&w(e)},[n,e]),g.useEffect(()=>y(a),[a]);const L=t.filter(E=>i.includes(E.id)).toSorted(yi[N]),T=L.map(E=>gt(E)).flat().reduce((E,K)=>E.set(K,(E.get(K)??0)+1),new Map),{resources:O,matches:b,scores:$}=Ci(C,L,u),P=g.useMemo(()=>{const E=new Map;return S==="institution"?Object.entries(f).forEach(([K,J])=>{E.set(K,J.resources.reduce((Q,ge)=>{const ce=$.get(ge.id);return ce===void 0?Q:Q===void 0?ce:Q<ce?Q:ce},void 0))}):S==="language"&&Object.entries(_).forEach(([K,J])=>{E.set(K,J.resources.reduce((Q,ge)=>{const ce=$.get(ge.id);return ce===void 0?Q:Q===void 0?ce:Q<ce?Q:ce},void 0))}),E},[S,$,f,_]);if(g.useMemo(()=>{const E={},K={};t.forEach(J=>{const Q=V(J.institution,u)??"";Object.getOwnPropertyNames(E).includes(Q)||(E[Q]={expanded:!0,resources:[]}),E[Q].resources.push(J),J.languages.forEach(ge=>{Object.getOwnPropertyNames(K).includes(ge)||(K[ge]={expanded:!0,resources:[]}),K[ge].resources.push(J)})}),v(E),D(K)},[t,u]),!t)return null;const H={total:be(t).length,totalRoot:t.length,available:i.length,selected:m.length,visible:be(O.map(E=>E)).length,visibleRoot:O.length};function j(E){return ft(E,r,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})}function A(E,K){const J=m.filter(Q=>!E.includes(Q));y(K?[...J,...E]:J)}function G(E){o({resourceIDs:m,action:E})}function ee(E){R(E.target.value)}function le(E){w(E.target.value)}function he(E){x(E.target.value)}function Re(){y(i)}function Qe(){y([])}function Oe(){y(O.map(E=>E.id))}function ke(E,K){A(be([E]),K)}function We(E){A(be(E),!0)}function Ge(E){A(be(E),!1)}function Ae(E){return!(!i.includes(E.id)||p==="selected"&&!m.includes(E.id)&&!qs(E,K=>m.includes(K.id)))}function xt(){return S==="institution"?Object.entries(f).toSorted(([E],[K])=>{const J=P.get(E),Q=P.get(K);return J===Q?0:J===void 0?1:Q===void 0?-1:J-Q}).map(([E,{expanded:K,resources:J}])=>s.jsx(xs,{title:s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})," ",E]}),resources:J,selectedResourceIDs:m,resourceScores:$,highlightings:b,expanded:K,shouldBeShown:Ae,onSelectAllClick:We,onExpandToggleClick:Q=>{v({...f,[E]:{...f[E],expanded:Q}})},onDeselectAllClick:Ge,onSelectClick:ke,languageCodeToName:j,localeForInfos:u},E)):S==="language"?Object.entries(_).toSorted(([E],[K])=>{const J=P.get(E),Q=P.get(K);return J===Q?0:J===void 0?1:Q===void 0?-1:J-Q}).map(([E,{expanded:K,resources:J}])=>s.jsx(xs,{title:s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",j(E)," [",E,"]"]}),resources:J,selectedResourceIDs:m,resourceScores:$,highlightings:b,expanded:K,shouldBeShown:Ae,onSelectAllClick:We,onExpandToggleClick:Q=>_[E].expanded=Q,onDeselectAllClick:Ge,onSelectClick:ke,languageCodeToName:j,localeForInfos:u},E)):O.filter(E=>!E.rootResourceId).map(E=>s.jsx(qt,{resource:E,selectedResourceIDs:m,highlighting:b.get(E.id),highlightings:b,shouldBeShown:Ae,onSelectClick:ke,languageCodeToName:j,localeForInfos:u},E.id))}return s.jsxs(Z,{id:"resource-selection-modal",show:n,onHide:()=>G("close"),size:"xl",fullscreen:"xl-down",centered:!0,children:[s.jsx(Z.Header,{closeButton:!0,children:s.jsx(Z.Title,{children:l("search.resourcesModal.title")})}),s.jsxs(Z.Body,{className:"px-0",children:[s.jsx(q,{className:"px-3 pb-3 border-bottom",onSubmit:E=>E.preventDefault(),children:s.jsxs(ie,{children:[s.jsxs(te,{className:"d-sm-flex row-gap-2 justify-content-around",children:[s.jsx(U,{md:2,sm:6,children:s.jsx(ye,{label:"View",controlId:"resource-view-options-visibility",children:s.jsxs(q.Select,{value:p,onChange:ee,children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"selected",children:"Selected only"})]})})}),s.jsx(U,{md:2,sm:6,children:s.jsx(ye,{label:"Group by",controlId:"resource-view-options-grouping",children:s.jsxs(q.Select,{value:S,onChange:le,children:[s.jsx("option",{value:"resource",children:"(Resource)"}),s.jsx("option",{value:"institution",children:"Institution"}),s.jsx("option",{value:"language",children:"Language"})]})})}),s.jsx(U,{md:2,sm:6,children:s.jsx(ye,{label:"Sort by",controlId:"resource-view-options-sorting",children:s.jsxs(q.Select,{value:N,onChange:he,disabled:S!=="resource"||C.trim()!=="",children:[s.jsx("option",{value:"title-up",children:"Title (up)"}),s.jsx("option",{value:"title-down",children:"Title (down)"}),s.jsx("option",{value:"institution-up",children:"Institution (up)"}),s.jsx("option",{value:"institution-down",children:"Institution (down)"})]})})}),s.jsx(U,{md:3,sm:12,children:s.jsx(ye,{label:"Resource filter query",controlId:"resource-view-options-filter",children:s.jsx(Gs,{value:C,onChange:E=>k(E)})})}),s.jsxs(U,{md:3,sm:12,className:"gap-1 d-inline-flex column-gap-2 justify-content-evenly",children:[s.jsx(X,{onClick:Re,children:"Select all"}),s.jsx(X,{onClick:Oe,disabled:p!=="all"||C.trim()==="",children:"Select visible"}),s.jsx(X,{onClick:Qe,children:"Deselect all"})]})]}),T.size>1&&s.jsxs(q.Group,{as:te,controlId:"resource-info-language",className:"mt-2",children:[s.jsx(q.Label,{column:!0,sm:"auto",style:{fontSize:"0.875rem"},children:l("search.resourcesModal.labelChangeResourceInfoLanguage")}),s.jsx(U,{sm:"auto",children:s.jsx(ut,{type:"radio",name:"resource-info-languages",defaultValue:u,onChange:E=>d(E),children:Array.from(T.entries()).toSorted().map(([E,K])=>s.jsxs(ze,{size:"sm",id:`resource-info-languages-${E}`,value:E,variant:"secondary",title:l("search.resourcesModal.buttonChangeResourceInfoLanguageTitle",{count:K,language:E,languageName:h.of(E)}),children:[h.of(E)," ",s.jsx("sup",{children:E})]},E))})})]})]})}),s.jsx("p",{className:"m-4 mb-0",children:l("search.resourcesModal.msgResourcesSelected",{count:H.selected,total:H.visible,available:H.available,context:H.available!==H.visible?"available":null})}),s.jsx(ie,{className:"px-3 pt-3",children:xt()})]}),s.jsx(Z.Footer,{children:s.jsx(X,{variant:"primary",onClick:()=>G("confirm"),children:l("search.resourcesModal.buttonConfirm")})})]})}function Ti(){const[n,e]=g.useState(!1);return[n,()=>{n!==!0&&e(!0)}]}function Ii(){const n=vs(),{hash:e}=Mt(),t=g.useMemo(()=>new URLSearchParams(e.substring(1)),[e]),r=g.useCallback(i=>{const a=ln(typeof i=="function"?i(new URLSearchParams(t)):i),o=a.entries().next().done?"":`#${a}`;e!==o&&n({hash:o})},[t,e,n]);return[t,r]}const Oi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-balloon" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
</svg>`,st=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
  <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
</svg>`,ki=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-highlights" viewBox="0 0 16 16">
  <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0m-8 5v1H4.5a.5.5 0 0 0-.093.009A7 7 0 0 1 3.1 13zm0-1H2.255a7 7 0 0 1-.581-1H8zm-6.71-2a7 7 0 0 1-.22-1H8v1zM1 8q0-.51.07-1H8v1zm.29-2q.155-.519.384-1H8v1zm.965-2q.377-.54.846-1H8v1zm2.137-2A6.97 6.97 0 0 1 8 1v1z"/>
</svg>`,Ai=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
</svg>`,Pi=g.lazy(()=>ae(()=>import("./fcs-sru-aggregator-ui-query-builder-0.0.0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url));function bs(n,e=""){const t=n.get("query");return t||e}function ys(n,e="cql"){const t=n.get("queryType");if(t){if(Bt.find(r=>r.id===t)!==void 0)return t;console.warn("Found unsupported queryType in search params",t)}return e}function _i({resources:n,languages:e,onSearch:t,availableResources:r=null,selectedResources:i=null,hasSearch:a=!1,disabled:o=!1}){const{t:l}=ne(),[c,u]=ct(),[d,h]=Ii(),[m,y]=g.useState(!1),[p,R]=g.useState(Bs),[S,w]=g.useState(!1),[N,x]=g.useState(!1),[C,k]=g.useState(!1),[f,v]=Ti(),[_,D]=g.useState(me),[L,I]=g.useState(kt),[T,O]=g.useState(ys(c,Li)),[b,$]=g.useState(r??[]),[P,H]=g.useState(i??[]),[j,A]=g.useState(tt[0]),[G,ee]=g.useState(bs(c,"")),[le]=g.useState(null),[he,Re]=g.useState(!1);g.useEffect(()=>{H(i??[])},[i]);const Qe=g.useCallback(M=>{const z=ui(M,T,L==="byGuess"?me:_);return r&&r.length>0?z.filter(xe=>r.includes(xe)):z},[T,_,L,r]);g.useEffect(()=>{const M=Qe(n);$(M),H(z=>z.filter(xe=>M.includes(xe)))},[n,Qe]);const Oe=g.useCallback(()=>{const M={language:_,languageFilter:L,queryType:T,query:G,resourceIDs:P??[],numberOfResults:j};M.query!==""&&M.resourceIDs.length!==0&&t(M)},[_,L,j,t,G,T,P]);g.useEffect(()=>{if(c&&(ee(z=>bs(c,z)),O(z=>ys(c,z)),!c.get("x-aggregation-context"))){const z=c.get("mode");z&&(z==="search"&&Oe(),c.delete("mode"),u(c))}},[c,u,Oe]),g.useEffect(()=>{c.get("query")!==G&&(c.set("query",G),u(c))},[G,c,u]),g.useEffect(()=>{c.get("queryType")!==T&&(c.set("queryType",T),u(c))},[T,c,u]),g.useEffect(()=>{d.has("openQueryBuilder")&&(v(),k(!0),d.delete("openQueryBuilder"),h(d))},[d,h,v]);const ke=di(n,P??[]).length,We=n.find(M=>M.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))!==void 0,Ge=n.find(M=>M.searchCapabilitiesResolved.includes("LEX_SEARCH"))!==void 0,Ae=ms.includes(T);function xt(M){M&&O(M)}function E(M){let z=Number.parseInt(M.target.value);z<10&&(z=10),z>250&&(z=250),tt.includes(z)||console.warn("Invalid number of results?!",{valid:tt,value:z}),A(z)}function K({language:M,filter:z,action:xe}){w(!1),xe!=="abort"&&(D(M),I(z))}function J({resourceIDs:M,action:z}){y(!1),z!=="abort"&&H(M)}function Q({query:M,queryType:z,action:xe}){x(!1),xe!=="abort"&&xe!=="close"&&(!M||!z||(O(z),ee(M)))}function ge({query:M,action:z}){k(!1),z!=="abort"&&z!=="close"&&ee(M)}function ce(M){ee(M)}function sn(M){M.preventDefault(),Oe()}function nn(){const M=(P??[]).length,z=n.length===M||b.length===M?"all":null;return l("search.searchInput.buttonSelectedResources",{count:M,context:z})}return s.jsxs("search",{id:"fcs-query",children:[s.jsxs(q,{noValidate:!0,onSubmit:sn,children:[s.jsxs(Sn,{size:a?void 0:"lg",hasValidation:!0,children:[s.jsx(X,{variant:"outline-secondary",type:"button",id:"fcs-search-query-suggestions-button","aria-label":l("search.searchInput.buttonOpenQuerySuggestions"),onClick:()=>x(!0),children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Oi},"aria-hidden":"true"})}),s.jsx(q.Control,{placeholder:"Elephant","aria-label":l("search.searchInput.inputQueryAriaLabel"),"aria-describedby":"fcs-search-input-button",className:"text-center search-query-input",disabled:o,"aria-disabled":o,value:G,isInvalid:!!le,...he?{as:Ws,queryType:T,onChange:ce}:{onChange:M=>ce(M.target.value)}}),Ae&&s.jsx(X,{id:"fcs-search-input-query-builder-button",variant:"outline-secondary","aria-label":l("search.searchInput.buttonOpenQueryBuilderAriaLabel"),className:"border-end-0 d-none d-md-block",onClick:()=>{v(),k(!0)},children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Ot},"aria-hidden":"true"})}),s.jsx(ze,{id:"fcs-search-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:he,onChange:()=>Re(M=>!M),variant:"outline-secondary","aria-label":l("search.searchInput.buttonEnhanceQueryAriaLabel",{context:he?"enabled":"disabled"}),className:"d-flex align-items-center border-end-0",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:ki},"aria-hidden":"true"})}),s.jsxs(X,{variant:"outline-primary",type:"submit",id:"fcs-search-input-button",disabled:o||G.trim().length===0,"aria-disabled":o,"aria-label":l("search.searchInput.buttonSearchAriaLabel"),children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ai},"aria-hidden":"true",className:"d-inline d-md-none"}),s.jsx("span",{className:"d-none d-md-inline",children:l("search.searchInput.buttonSearch")})]}),s.jsx(q.Control.Feedback,{type:"invalid",children:le?.msg})]}),s.jsx("div",{id:"fcs-query-filters",className:"mt-2 mb-3 lh-lg text-center",children:s.jsx(B,{i18nKey:"search.searchInput.filtersSummary",components:[s.jsxs(je,{className:"d-inline-block",onSelect:xt,"aria-disabled":o,"aria-label":l("search.searchInput.dropdownQueryTypeAriaLabel"),children:[s.jsxs(je.Toggle,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2 no-arrow",disabled:o,"aria-disabled":o,style:rt[T]?{"--color":rt[T].color}:{},children:[l(`queryTypes.${T}.nameShort`,{ns:"common",defaultValue:rt[T]?.searchLabel??T.toUpperCase()})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:st},"aria-hidden":"true"})]}),s.jsx(je.Menu,{children:Bt.filter(M=>M.id==="cql"||M.id==="fcs"&&We||M.id==="lex"&&Ge).map(M=>s.jsx(je.Item,{as:"button",eventKey:M.id,onClick:z=>z.preventDefault(),style:{"--color":M.color,background:"color-mix(in srgb, var(--color) 50%, transparent)"},children:l(`queryTypes.${M.id}.nameLong`,{ns:"common",defaultValue:M.name})},M.id))})]}),s.jsxs(X,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{R("resource"),y(!0)},children:[nn()," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:st},"aria-hidden":"true"})]}),s.jsxs(X,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",disabled:o,"aria-disabled":o,onClick:()=>{R("institution"),y(!0)},children:[l("search.searchInput.buttonSelectedInstitutions",{count:ke})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:st},"aria-hidden":"true"})]}),s.jsxs(X,{size:"sm",variant:"outline-dark",className:"mx-1 pe-2",onClick:()=>w(!0),disabled:o,"aria-disabled":o,children:[ft(_,e??{},{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})})," ",s.jsx("i",{dangerouslySetInnerHTML:{__html:st},"aria-hidden":"true"})]}),s.jsx(q.Select,{size:"sm",className:"d-inline-block w-auto mx-1",onChange:E,value:j,"aria-label":l("search.searchInput.selectNumberOfSearchResultsAriaLabel"),disabled:o,"aria-disabled":o,children:tt.map(M=>s.jsx("option",{value:M,children:M},M))})]})})]}),s.jsx(wi,{languages:e,resources:n,searchLanguage:_,show:S,onModalClose:K}),s.jsx(Ei,{resources:n,languages:e,availableResources:b,selectedResources:P??[],show:m,showGrouping:p,onModalClose:J}),s.jsx(Ni,{queryTypes:[T],show:N,onModalClose:Q}),ms.includes(T)&&f&&s.jsx(g.Suspense,{fallback:s.jsx(s.Fragment,{children:l("loading",{ns:"querybuilder",defaultValue:l("generic.loadingComponent",{ns:"common"})})}),children:s.jsx(Pi,{query:G,queryType:T,resources:n,selectedResources:P,show:C,onModalClose:ge})})]})}const Mi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
</svg>`;function $i({searchId:n,resourceId:e,numberOfResults:t,pollDelay:r=1500}){const{t:i}=ne(),a=Ie(),o=Ls(),[l,c]=g.useState(!1),{isPending:u,mutate:d,reset:h}=Rs({mutationFn:ir.bind(null,a,n,{resourceId:e,numberOfResults:t}),mutationKey:["search-result-load-more",n,e],onSuccess:async x=>{x!==void 0&&n!==x&&console.warn("SearchIDs should be the same?!",{searchId:n,searchIdNewButSame:x,resourceId:e}),await o.invalidateQueries({queryKey:["search-results",n,e]}),c(!0)}});r??=1500;const{data:m,isLoading:y,isFetching:p}=Ve({queryKey:["search-results",n,e],queryFn:or.bind(null,a,n,e),enabled:l,refetchInterval(x){return x.state.data&&x.state.data.inProgress?r:!1}}),R=u||y||p,S=!!m&&!m.inProgress,w=R||l;l&&S&&(l&&c(!1),o.invalidateQueries({queryKey:["search-result-details",n,e]}));async function N(){h(),d()}return s.jsx(X,{className:"more-results-button",disabled:w,onClick:N,children:w?s.jsx(Es,{animation:"border",className:"d-block"}):s.jsxs(s.Fragment,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Mi}})," ",i("search.results.buttonLoadMore")]})})}const mt=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
  <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
</svg>`;function Ys({data:n}){const e=g.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs($t,{hover:!0,responsive:!0,className:"mb-0 results-kwic",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Left Context"}),s.jsx("th",{scope:"col",children:"Hit"}),s.jsx("th",{scope:"col",children:"Right Context"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})})," ",t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Le,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.left}),s.jsx("td",{children:t.keyword&&s.jsx("mark",{children:s.jsx("strong",{children:t.keyword})})}),s.jsx("td",{children:t.right})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Xs({data:n}){const e=g.useRef(null);return s.jsxs("div",{className:"results-lexical-entry d-flex flex-column flex-wrap column-gap-2 row-gap-2",children:[n.lexEntries.map((t,r)=>s.jsx(re,{className:"flex-grow-1",children:s.jsxs(re.Body,{children:[s.jsx(re.Title,{children:t.fields.filter(i=>i.type==="lemma").map(i=>i.values).flat(1).map(i=>s.jsx("span",{children:i.value}))}),s.jsxs(bt,{variant:"flush",children:[(t.lang||t.langUri)&&s.jsxs(bt.Item,{children:[s.jsx("strong",{children:"lang"}),": ",t.lang," ",t.langUri]}),t.fields.filter(i=>i.type!=="lemma").map(i=>s.jsxs(bt.Item,{children:[s.jsx("strong",{children:i.type}),":",i.values.map((a,o)=>s.jsx("span",{className:"ms-2 lex-value",children:a.value},o))]},i.type))]}),s.jsx(re.Link,{children:t.reference&&s.jsxs("a",{href:t.reference,className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})," Original results ..."]})}),s.jsx(re.Link,{children:t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Le,{bg:"secondary",className:"pid-badge",children:"PID"})})})]})},`${t.pid??t.reference??n.resource.id}-${r}`)),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function Zs({data:n}){const e=g.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs($t,{hover:!0,responsive:!0,className:"mb-0 results-lex-plain",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Result with Hit"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})})," ",t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Le,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.fragments.map((i,a)=>i.hit&&!i.hitKind?s.jsx("mark",{children:s.jsx("strong",{children:i.text})},a):i.hit&&i.hitKind?s.jsx("span",{className:`lex-hitkind-${i.hitKind}`,title:`Annotated as "${i.hitKind.split("-").slice(1).join("-")}"`,children:i.text},a):s.jsx("span",{children:i.text},a))})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}function en({data:n}){const e=g.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsxs($t,{hover:!0,responsive:!0,className:"mb-0 results-plain",children:[s.jsx("thead",{className:"visually-hidden",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"References"}),s.jsx("th",{scope:"col",children:"Result with Hit"})]})}),s.jsx("tbody",{children:n.kwics.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{scope:"row",className:"result-idx text-end text-muted d-none d-sm-table-cell",children:r+1}),s.jsxs("td",{scope:"row",className:"result-refs",children:[t.reference&&s.jsx("a",{href:t.reference,className:"matomo_link",target:"_blank",children:s.jsx("i",{dangerouslySetInnerHTML:{__html:mt}})})," ",t.pid&&s.jsx(Te,{placement:"auto-start",container:e,delay:{show:250,hide:400},overlay:s.jsx(Be,{id:`ttip-${t.pid}-${r}`,children:t.pid}),children:s.jsx(Le,{bg:"secondary",className:"pid-badge",children:"PID"})})]}),s.jsx("td",{children:t.fragments.map((i,a)=>i.hit&&!i.hitKind?s.jsx("mark",{children:s.jsx("strong",{children:i.text})},a):s.jsx("span",{children:i.text},a))})]},`${t.pid??t.reference??n.resource.id}-${r}`))})]}),s.jsx("div",{ref:e,className:"tooltip-mounting-point"})]})}const Fi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
</svg>`,Di=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-arrow-up" viewBox="0 0 16 16">
  <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4.5a.5.5 0 0 1-1 0V5.383l-7 4.2-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-1.99zm1 7.105 4.708-2.897L1 5.383zM1 4v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1"/>
  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.354 1.25 1.25a.5.5 0 0 1-.708.708L13 12.207V14a.5.5 0 0 1-1 0v-1.717l-.28.305a.5.5 0 0 1-.737-.676l1.149-1.25a.5.5 0 0 1 .722-.016"/>
</svg>`,tn=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`;function Ui({show:n,searchId:e,resourceId:t,result:r,viewMode:i,showDiagnostics:a,onModalClose:o}){const l=Ie(),{t:c}=ne(),u=ve(b=>b.locale),{languages:d,weblichtLanguages:h}=Ut(),{numberOfResults:m,queryType:y,language:p,languageFilter:R}=zt(),[S,w]=g.useState(u);g.useEffect(()=>{u&&w(u)},[u]);const N=new Intl.DisplayNames([u,"en"],{type:"language"}),[x,C]=g.useState(a);g.useEffect(()=>C(a),[a]);const[k,f]=g.useState(i);g.useEffect(()=>f(i),[i]);const v=gt(r.resource),_=r.exception||r.diagnostics?.filter(b=>b.uri!==we).length>0;function D(){return!r||r.nextRecordPosition===-1||r.numberOfRecords===-1?!1:(r.numberOfRecords===r.kwics.length,!0)}let L=null,I=!1;if(!h.includes(p)){if(p===me)if(r.resource.languages&&r.resource.languages.length===1)L=r.resource.languages[0];else{const b=[...new Set(r.kwics.map($=>$.language).filter($=>$!==null))];b.length===1&&(L=b[0])}L||(console.warn("Cannot use WebLicht: unsupported language",{language:p,languageFilter:R}),I=!0)}function T(b){f(b.target.value)}function O(){return r?k==="kwic"&&(y!=="lex"||!r.isLexHits)?s.jsx(Ys,{data:r}):k==="lexical-entry"?s.jsx(Xs,{data:r}):y==="lex"&&r.isLexHits?s.jsx(Zs,{data:r}):s.jsx(en,{data:r}):null}return s.jsxs(Z,{show:n,onHide:()=>o(),size:"xl",fullscreen:"lg-down",centered:!0,className:"resource-search-result-modal",children:[s.jsx(Z.Header,{closeButton:!0,children:s.jsx(Z.Title,{children:V(r.resource.title,S)})}),s.jsxs(Z.Body,{className:"resource-info",children:[s.jsxs("dl",{className:"mb-0","aria-label":c("search.results.resourceInfo.infoTableAriaLabel"),children:[s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})," ",c("search.results.resourceInfo.labelInstitution")]}),s.jsx("dd",{className:"mb-0",children:V(r.resource.institution,S)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:tn}})," ",c("search.results.resourceInfo.labelDescription")]}),V(r.resource.description,S)&&s.jsxs(s.Fragment,{children:[s.jsx("dd",{className:"mb-0",children:V(r.resource.description,S)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",c("search.results.resourceInfo.labelLanguages")]})]}),s.jsx("dd",{className:"mb-0",children:r.resource.languages.map(d?b=>ft(b,d,{defaultAnyLanguage:c("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:c("languageCodeToName.unknown",{ns:"common"})}):b=>b).toSorted().join(", ")}),v&&v.length>1&&s.jsx(ut,{type:"radio",name:`${r.resource.id}-result-modal-info-languages`,defaultValue:S,onChange:b=>w(b),className:"mt-2 mb-3",children:v.toSorted().map(b=>s.jsxs(ze,{variant:"outline-secondary",size:"sm",id:`${r.resource.id}-result-modal-info-languages-${b}`,value:b,children:[N.of(b)," ",s.jsx("sup",{children:b})]},b))}),s.jsx("dt",{children:c("search.results.resourceInfo.labelPID")}),s.jsx("dd",{children:r.resource.handle})]}),r.resource.landingPage&&s.jsxs("a",{href:r.resource.landingPage,className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Js}})," ",c("search.results.resourceInfo.moreInformation")]}),s.jsx("hr",{}),s.jsxs(te,{className:"row-gap-2",children:[s.jsx(U,{lg:"auto",md:3,sm:6,children:s.jsx(ye,{label:c("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:s.jsxs(q.Select,{value:k,onChange:T,children:[s.jsx("option",{value:"plain",children:c("search.results.displayOptions.viewModeOptions.plain")}),(y!=="lex"||!r.isLexHits)&&s.jsx("option",{value:"kwic",children:c("search.results.displayOptions.viewModeOptions.kwic")}),y==="fcs"&&s.jsx("option",{value:"annotation-layers",children:c("search.results.displayOptions.viewModeOptions.annotation-layers")}),y==="lex"&&s.jsx("option",{value:"lexical-entry",children:c("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),s.jsx(U,{lg:3,md:3,sm:6,className:"align-content-center",children:s.jsx(q.Check,{disabled:!_,checked:x,onChange:()=>C(b=>!b),id:"results-modal-view-warnings-errors",label:c("search.results.displayOptions.optionShowWarningsErrors")})}),s.jsxs(U,{lg:"auto",md:6,sm:6,className:"d-flex flex-grow-1 column-gap-3 align-items-center justify-content-end",children:[s.jsxs(je,{children:[s.jsxs(je.Toggle,{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Fi}})," ",c("search.results.buttonDownload")]}),s.jsx(je.Menu,{children:vi.map(({id:b,label:$})=>s.jsx(je.Item,{href:cr(l,e,t,b,p,R),className:"matomo_download",children:s.jsx(B,{i18nKey:"search.results.msgButtonDownloadOption",values:{label:c(`downloadFormats.${b}.name`,{ns:"common",defaultValue:$})}})},b))})]}),s.jsxs(X,{disabled:I,"aria-disabled":I,href:ur(l,e,t,L,p,R),className:"matomo_link",target:"_blank",children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Di}})," ",c("search.results.buttonSendToWeblicht")]})]})]}),s.jsx("hr",{}),s.jsx("p",{children:s.jsx(B,{i18nKey:"search.results.msgShowingXresults",values:{count:r.kwics.length,context:D()?"hasmore":null,total:r.numberOfRecords}})}),O()]}),x&&_&&s.jsxs(Z.Body,{className:"border-top",children:[r.exception&&s.jsxs(oe,{variant:"danger","aria-label":c("statistics.diagnostic.alertAriaLabel"),children:[s.jsxs(oe.Heading,{style:{fontSize:"1rem"},children:[s.jsx("span",{className:"text-uppercase",children:c("search.results.diagnostics.titleException")})," ",s.jsx("span",{"aria-label":c("search.results.diagnostics.msgAriaLabel"),children:r.exception.message})]}),r.exception.cause&&s.jsx("p",{className:"mb-0 small",children:c("search.results.diagnostics.msgCause",{cause:r.exception.cause})}),r.exception.klass&&s.jsx("p",{className:"mb-0 small",children:s.jsx(B,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:r.exception.klass}})})]}),r.diagnostics.filter(b=>b.uri!==we).map(b=>s.jsxs(oe,{variant:"warning",children:[s.jsx(oe.Heading,{style:{fontSize:"1rem"},children:b.message}),b.diagnostic&&s.jsx("p",{className:"mb-0 small",children:c("search.results.diagnostics.msgDiagnosticDetails",{details:b.diagnostic})}),s.jsx("p",{className:"mb-0 small",children:s.jsx(B,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:b.uri}})})]},`${b.uri}-${b.message}-${b.diagnostic}`))]}),D()&&s.jsx(Z.Footer,{className:"justify-content-center border-top py-2",children:s.jsx($i,{searchId:e,resourceId:t,numberOfResults:m})})]})}function Hi({searchId:n,resourceId:e,resultInfo:t,viewMode:r,showResourceDetails:i,showDiagnostics:a}){const o=Ie(),{t:l}=ne(),c=ve(b=>b.locale),{languages:u}=Ut(),{queryType:d}=zt(),[h,m]=g.useState(c);g.useEffect(()=>{c&&m(c)},[c]);const y=new Intl.DisplayNames([c,"en"],{type:"language"}),p=g.useId(),[R,S]=g.useState(!0),[w,N]=g.useState(!1),x=t.inProgress,C=t.numberOfRecordsLoaded>0,k=t.exception||t.diagnostics?.filter(b=>b.uri!==we).length>0,{data:f,isLoading:v,isError:_}=Ve({queryKey:["search-result-details",n,e],queryFn:lr.bind(null,o,n,e),enabled:!x}),D=f?gt(f.resource):[];if(x||!C&&(a&&!k||!a)||!f)return null;function L(){N(!0)}function I(){N(!1)}function T(){return f?f.numberOfRecords===-1?f.kwics.length:f.numberOfRecords===f.kwics.length&&f.nextRecordPosition===-1?`${f.kwics.length} / ${f.numberOfRecords}?`:`${f.kwics.length} / ${f.numberOfRecords}`:null}function O(){return f?r==="kwic"&&(d!=="lex"||!f.isLexHits)?s.jsx(Ys,{data:f}):r==="lexical-entry"?s.jsx(Xs,{data:f}):d==="lex"&&f.isLexHits?s.jsx(Zs,{data:f}):s.jsx(en,{data:f}):null}return s.jsxs(s.Fragment,{children:[s.jsxs(re,{className:"my-1 resource-search-result",role:"group","aria-label":l("search.results.resultResourceAriaLabel",{title:f.resource.title}),children:[s.jsxs(re.Header,{className:"d-flex accordion",children:[s.jsxs("button",{type:"button",onClick:()=>S(b=>!b),"aria-controls":p,"aria-expanded":R,className:`me-3 w-auto flex-grow-1 d-block text-start collapse-toggle-btn ${R?"":"collapsed"}`,children:[s.jsx(Le,{bg:"",className:"text-bg-light border me-2 user-select-text","aria-label":l("search.results.resultCountAriaLabel"),children:T()}),s.jsx("span",{"aria-label":l("search.results.resultResourceTitleAriaLabel"),className:"user-select-text",children:V(f.resource.title,h)}),s.jsx("small",{className:"text-muted user-select-text","aria-label":l("search.results.resultResourceInstitutionAriaLabel"),children:V(f.resource.institution,h)})]}),s.jsx("div",{className:"d-inline-block ms-auto",children:s.jsxs(X,{size:"sm",onClick:L,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Hs}})," View"]})})]}),s.jsx(Cs,{in:R,children:s.jsxs("div",{id:p,children:[i&&s.jsxs(re.Body,{className:"border-bottom resource-info",children:[s.jsxs("dl",{className:"mb-0","aria-label":l("search.results.resourceInfo.infoTableAriaLabel"),children:[s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:pt}})," ",l("search.results.resourceInfo.labelInstitution")]}),s.jsx("dd",{className:"mb-0",children:V(f.resource.institution,h)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:tn}})," ",l("search.results.resourceInfo.labelDescription")]}),V(f.resource.description,h)&&s.jsxs(s.Fragment,{children:[s.jsx("dd",{className:"mb-0",children:V(f.resource.description,h)}),s.jsxs("dt",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Ke}})," ",l("search.results.resourceInfo.labelLanguages")]})]}),s.jsx("dd",{className:"mb-0",children:f.resource.languages.map(u?b=>ft(b,u,{defaultAnyLanguage:l("languageCodeToName.any",{ns:"common"}),defaultUnknownLanguage:l("languageCodeToName.unknown",{ns:"common"})}):b=>b).toSorted().join(", ")})]}),D&&D.length>1&&s.jsx(ut,{type:"radio",name:`${f.resource.id}-result-info-languages`,defaultValue:h,onChange:b=>m(b),className:"mt-2",children:D.toSorted().map(b=>s.jsxs(ze,{variant:"outline-secondary",size:"sm",id:`${f.resource.id}-result-info-languages-${b}`,value:b,children:[y.of(b)," ",s.jsx("sup",{children:b})]},b))})]}),C&&s.jsx(re.Body,{children:O()}),a&&k&&s.jsxs(re.Body,{className:C?"border-top":"",children:[f.exception&&s.jsxs(oe,{variant:"danger","aria-label":l("statistics.diagnostic.alertAriaLabel"),children:[s.jsxs(oe.Heading,{style:{fontSize:"1rem"},children:[s.jsx("span",{className:"text-uppercase",children:l("search.results.diagnostics.titleException")})," ",s.jsx("span",{"aria-label":l("search.results.diagnostics.msgAriaLabel"),children:f.exception.message})]}),f.exception.cause&&s.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgCause",{cause:f.exception.cause})}),f.exception.klass&&s.jsx("p",{className:"mb-0 small",children:s.jsx(B,{i18nKey:"search.results.diagnostics.msgCausedBy",values:{class:f.exception.klass}})})]}),f.diagnostics.filter(b=>b.uri!==we).map(b=>s.jsxs(oe,{variant:"warning",children:[s.jsx(oe.Heading,{style:{fontSize:"1rem"},children:b.message}),b.diagnostic&&s.jsx("p",{className:"mb-0 small",children:l("search.results.diagnostics.msgDiagnosticDetails",{details:b.diagnostic})}),s.jsx("p",{className:"mb-0 small",children:s.jsx(B,{i18nKey:"search.results.diagnostics.msgDiagnosticType",values:{uri:b.uri}})})]},`${b.uri}-${b.message}-${b.diagnostic}`))]})]})})]}),s.jsx(Ui,{show:w,searchId:n,resourceId:e,result:f,viewMode:r,showDiagnostics:a,onModalClose:I})]})}const Vi="plain",zi="lexical-entry",Bi="default",qi={default:()=>()=>0,"title-up":n=>(e,t)=>{const r=se.getState().locale,i=V(n.get(e.id)?.title??null,r)??"",a=V(n.get(t.id)?.title??null,r)??"";return i.localeCompare(a)},"title-down":n=>(e,t)=>{const r=se.getState().locale,i=V(n.get(e.id)?.title??null,r)??"",a=V(n.get(t.id)?.title??null,r)??"";return-i.localeCompare(a)},"result-count-total-up":()=>(n,e)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded,r=e.numberOfRecords!==-1?e.numberOfRecords:e.numberOfRecordsLoaded;return t-r},"result-count-total-down":()=>(n,e)=>{const t=n.numberOfRecords!==-1?n.numberOfRecords:n.numberOfRecordsLoaded;return(e.numberOfRecords!==-1?e.numberOfRecords:e.numberOfRecordsLoaded)-t}},js=1500;function Ki({searchId:n,pollDelay:e=js}){const{t}=ne(),r=Ie(),{resources:i}=Ut(),{query:a,queryType:o,resourceIDs:l}=zt(),[c,u]=g.useState(o==="lex"?zi:Vi),[d,h]=g.useState(Bi),[m,y]=g.useState(""),[p,R]=g.useState(!1),[S,w]=g.useState(!1),N=g.useMemo(()=>{const j=new Map;return i?.forEach(A=>{j.set(A.id,A)}),qi[d](j)},[d,i]);e??=js;const{data:x}=Ve({queryKey:["search-results",n],queryFn:ar.bind(null,r,n??""),enabled:!!n,refetchInterval(j){return j.state.data&&j.state.data.inProgress>0?e:!1}}),C=g.useMemo(()=>x?.results.toSorted(N)||[],[x,N]),k=o==="lex"&&x?.results.every(j=>j.numberOfRecords<=0||j.isLexHits===!0),f=l.length,v=x?.inProgress??f,_=g.useMemo(()=>x?.results.filter(j=>(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)>0).length??0,[x]),D=g.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)>0&&j.diagnostics.filter(A=>A.uri!==we).length>0).length??0,[x]),L=g.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)<=0&&j.diagnostics.filter(A=>A.uri!==we).length===0&&j.exception===null).length??0,[x]),I=g.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)<=0&&(j.diagnostics.filter(A=>A.uri!==we).length>0||j.exception!==null)).length??0,[x]),T=g.useMemo(()=>x?.results.filter(j=>!j.inProgress&&j.numberOfRecords<=0&&j.exception!==null).length??0,[x]),O=g.useMemo(()=>x?.results.filter(j=>!j.inProgress&&(j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded)<=0&&j.diagnostics.filter(A=>A.uri!==we).length>0&&j.exception===null).length??0,[x]),b=g.useMemo(()=>x?.results.map(j=>j.numberOfRecords!==-1?j.numberOfRecords:j.numberOfRecordsLoaded).reduce((j,A)=>j+A,0)??0,[x]),$=g.useMemo(()=>x?.results.map(j=>j.numberOfRecordsLoaded).reduce((j,A)=>j+A,0)??0,[x]);{const[j,A]=g.useState(!1);g.useEffect(()=>{x&&v===0&&(j||(A(!0),zs(a,o,$)))},[x,v,a,o,n,j,$])}function P(j){u(j.target.value)}function H(j){h(j.target.value)}return s.jsxs("div",{id:"search-results",className:"mt-2 mb-4",children:[s.jsx(Te,{placement:"auto",overlay:s.jsxs(yt,{id:"search-progress-information-popover",children:[s.jsx(yt.Header,{children:t("search.results.progressPopover.title")}),s.jsxs(yt.Body,{style:{textIndent:"2rem hanging"},children:[s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesRequested",count:f})}),v>0&&s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesRequestedPending",count:v})}),s.jsx("hr",{className:"mt-2 mb-1"}),s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithoutResults",count:L+I})}),s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsOK",count:L})}),O>0&&s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsWarnings",count:O})}),T>0&&s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithoutResultsErrors",count:T})}),s.jsx("hr",{className:"mt-2 mb-1"}),s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithResults",count:_})}),D>0&&s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithResultsWarnings",count:D})}),s.jsx("hr",{className:"mt-2 mb-0"}),s.jsx("hr",{className:"mt-1 mb-1"}),s.jsx("div",{children:s.jsx(B,{i18nKey:"search.results.progressPopover.numResourcesWithResultsTotal",count:$,values:{available:b}})})]})]}),children:s.jsxs(Ye,{className:"mb-3",children:[s.jsx(Ye,{variant:"success",now:_,max:f,label:s.jsx("span",{children:t("search.results.progressBar.numWithResults",{count:_})}),"aria-label":t("search.results.progressBar.numWithResultsAriaLabel")}),s.jsx(Ye,{variant:"secondary",now:L+I,max:f,label:s.jsx("span",{children:t("search.results.progressBar.numWithResults",{count:L+I})}),"aria-label":t("search.results.progressBar.numWithoutResultsAriaLabel")}),s.jsx(Ye,{striped:!0,animated:!0,now:v,max:f,label:s.jsx("span",{children:t("search.results.progressBar.numResultsPending",{count:v})}),"aria-label":t("search.results.progressBar.numResultsPendingAriaLabel")})]})}),s.jsx(re,{className:"mb-2",role:"group","aria-label":t("search.results.displayOptions.cardAriaLabel"),children:s.jsx(re.Body,{children:s.jsxs(te,{className:"row-gap-2",children:[s.jsx(U,{lg:"auto",md:6,sm:6,children:s.jsx(ye,{label:t("search.results.displayOptions.viewModeLabel"),controlId:"results-view-mode",children:s.jsxs(q.Select,{value:c,onChange:P,children:[s.jsx("option",{value:"plain",children:t("search.results.displayOptions.viewModeOptions.plain")}),(o!=="lex"||!k)&&s.jsx("option",{value:"kwic",children:t("search.results.displayOptions.viewModeOptions.kwic")}),o==="fcs"&&s.jsx("option",{value:"annotation-layers",children:t("search.results.displayOptions.viewModeOptions.annotation-layers")}),o==="lex"&&s.jsx("option",{value:"lexical-entry",children:t("search.results.displayOptions.viewModeOptions.lexical-entry")})]})})}),s.jsx(U,{lg:"auto",md:6,sm:6,children:s.jsx(ye,{label:t("search.results.displayOptions.sortingLabel"),controlId:"results-sorting",children:s.jsxs(q.Select,{value:d,onChange:H,children:[s.jsx("option",{value:"default",children:t("search.results.displayOptions.sortingOptions.default")}),s.jsx("option",{value:"title-up",children:t("search.results.displayOptions.sortingOptions.title-up")}),s.jsx("option",{value:"title-down",children:t("search.results.displayOptions.sortingOptions.title-down")}),s.jsx("option",{value:"result-count-total-up",children:t("search.results.displayOptions.sortingOptions.result-count-total-up")}),s.jsx("option",{value:"result-count-total-down",children:t("search.results.displayOptions.sortingOptions.result-count-total-down")})]})})}),s.jsx(U,{lg:"auto",md:12,sm:6,className:"flex-fill order-xl-4",children:s.jsx(ye,{label:t("search.results.displayOptions.resultFilterQueryLabel"),controlId:"result-filter",children:s.jsx(Gs,{disabled:d!=="default"||!0,value:m,onChange:j=>y(j)})})}),s.jsxs(U,{lg:"auto",md:12,sm:12,className:"align-content-center order-xl-3",children:[s.jsx(q.Check,{checked:p,onChange:()=>R(j=>!j),id:"results-view-resource-details",label:t("search.results.displayOptions.optionShowResultDetails")}),s.jsx(q.Check,{checked:S,onChange:()=>w(j=>!j),id:"results-view-warnings-errors",label:t("search.results.displayOptions.optionShowWarningsErrors")})]})]})})}),n&&x&&C.map(j=>s.jsx(Hi,{searchId:n,resourceId:j.id,resultInfo:j,viewMode:c,showResourceDetails:p,showDiagnostics:S},`${n}-${j.id}`))]})}const Qi=""+new URL("assets/logo-fcs-dark.png",import.meta.url).href,Ss=""+new URL("assets/logo-fcs.png",import.meta.url).href;function Wi(){const n=Ie(),{t:e}=ne(),[t,r]=ct(),[i,a]=g.useState([]),[o,l]=g.useState({}),[c,u]=g.useState([]),[d,h]=g.useState(null),[m,y]=g.useState(!1),[p,R]=g.useState(null),[S,w]=g.useState([]),N=W.getState().appTitleHead,x={consortia:t.get(qe)},{data:C,isLoading:k,isError:f}=Ve({queryKey:["init"],queryFn:sr.bind(null,n,x)});g.useEffect(()=>{if(!C)return;const T=li(C.resources);l(C.languages),u(C.weblichtLanguages),a(T),h(be(T))},[C]),g.useEffect(()=>{if(!i||i.length===0)return;const T=t.get("x-aggregation-context");if(T){try{const O=JSON.parse(T),{selected:b,unavailable:$}=ci(i,O);b.length>0&&(h(b),w(P=>[...P,{title:e("search.toasts.resourceSelection.title"),body:s.jsxs(s.Fragment,{children:[e("search.toasts.resourceSelection.msgPreselectedResources",{count:b.length}),s.jsx("br",{}),s.jsx("ul",{className:"ps-3",children:b.map(H=>s.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:H}))})]}),variant:"success"}])),$.length>0&&w(P=>[...P,{title:e("search.toasts.resourceSelection.title"),body:s.jsxs(s.Fragment,{children:[e("search.toasts.resourceSelection.msgUnableToSelectResources",{count:$.length}),s.jsx("br",{}),s.jsx("ul",{className:"ps-3",children:$.map(H=>s.jsx("li",{style:{wordBreak:"break-all",fontSize:"0.7rem"},children:H}))})]}),variant:"warning"}])}catch(O){console.error('Error trying to parse "x-aggregation-context" search parameter!',{aggregationContext:T},O),O instanceof Error&&w(b=>[...b,{title:e("search.toasts.resourceSelection.title"),body:s.jsxs(s.Fragment,{children:[e("search.toasts.resourceSelection.msgErrorUnableToSelectResources",{error:O.name}),s.jsx("br",{}),s.jsx("small",{children:O.message})]}),variant:"error"}])}t.delete("x-aggregation-context"),r(t)}},[i,t,r,e]);const v=k||f,{mutate:_,data:D,isPending:L}=Rs({mutationKey:["search"],mutationFn:({query:T,queryType:O,language:b,numberOfResults:$,resourceIDs:P})=>rr(n,{query:T,queryType:O,language:b,numberOfResults:$.toString(),resourceIds:P})});function I(T){h(T.resourceIDs),R(T),y(!0),zs(T.query,T.queryType),_(T)}return s.jsxs(s.Fragment,{children:[s.jsx(He,{children:s.jsx("title",{children:N})}),s.jsxs(ie,{id:"search",children:[s.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"bg-dark position-relative",children:s.jsx(wn,{position:"top-end",className:"mt-2",style:{zIndex:100},children:S.map((T,O)=>s.jsxs(jt,{bg:T.variant,onClose:()=>w(b=>b.filter($=>$!==T)),delay:5e3,autohide:!0,children:[s.jsx(jt.Header,{closeButton:!0,children:s.jsx("strong",{className:"me-auto",children:T.title})}),s.jsx(jt.Body,{children:T.body})]},O))})}),!m&&s.jsx(te,{children:s.jsx(U,{className:"text-center",children:s.jsxs("picture",{children:[s.jsx("source",{srcSet:Ss,media:"(prefers-color-scheme: light)"}),s.jsx("source",{srcSet:Qi,media:"(prefers-color-scheme: dark)"}),s.jsx("img",{src:Ss,className:"logo",alt:"FCS logo"})]})})}),s.jsx(te,{className:"mt-3",children:s.jsx(U,{children:s.jsx(_i,{resources:i,languages:o,availableResources:null,selectedResources:d,onSearch:I,hasSearch:m,disabled:v})})}),!m&&s.jsx(te,{className:"mt-3",children:s.jsxs(U,{children:[s.jsx("p",{children:s.jsx(B,{i18nKey:"search.intro.textGeneral"})}),s.jsx("p",{children:s.jsx(B,{i18nKey:"search.intro.textLearnMore",components:[s.jsxs("a",{href:e("search.intro.url"),children:["page ",s.jsx("em",{children:"Content Search"})," at CLARIN.eu"]})]})})]})}),m&&L&&s.jsx(te,{children:s.jsx(U,{className:"text-center my-5",children:s.jsx(Es,{animation:"border"})})}),p&&D&&s.jsx(Zr,{resources:i,languages:o,weblichtLanguages:c,children:s.jsx(ti,{...p,children:s.jsx(Ki,{searchId:D})})})]})]})}function Gi(){const n=vs(),e=dt();return g.useCallback((r,i,a)=>{const o=cn(r,i);n({pathname:o,search:e},a)},[n,e])}function Ji(){const n=g.useContext(un),e=Mt(),t=n.matches.map(i=>i.route),r=dn(t,e);return r!==null&&r.length>0?r[0]:null}const Yi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,Xi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
  <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
</svg>`;function Zi({url:n,statistics:e,validatorUrl:t,isScan:r}){const{t:i,i18n:a}=ne(),o=new Intl.NumberFormat(a.language,{style:"unit",unit:"second",unitDisplay:"short"});function l(c,u){const d=s.jsx(de.Highlight,{text:c.title,ranges:e.matchResources?.[u]??null});return c.valid&&c.notes.length===0?d:s.jsx(Te,{placement:"auto-start",delay:{show:250,hide:400},overlay:s.jsxs(Be,{id:`resource-info-warning-${c.handle}`,children:[!c.valid&&i("statistics.errors.notAvailableInAggregator"),!c.valid&&c.notes.length>=1&&s.jsx("hr",{className:"mt-2 mb-1"}),c.notes.length===1?c.notes[0]:c.notes.length>=1?s.jsx("ul",{className:"text-start m-0 my-1 ps-3",children:c.notes.map((h,m)=>s.jsx("li",{children:h},m))}):null]}),children:s.jsxs("span",{children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:Yi},className:"align-baseline me-2"}),c.valid?d:s.jsx("s",{children:d})]})})}return s.jsxs("div",{className:"ps-sm-4 mt-sm-0 mt-2 pt-sm-0 pt-1",children:[s.jsxs("h4",{className:"h5",id:`${Ns(n)}-${r?"scan":"search"}`,children:[s.jsx(de.Highlight,{text:n,ranges:e.matchEndpoint}),t&&s.jsxs(s.Fragment,{children:[" ",s.jsx("a",{href:`${t}?url=${encodeURIComponent(n)}`,children:s.jsx("i",{dangerouslySetInnerHTML:{__html:Xi},className:"align-baseline ms-2"})})]})]}),s.jsxs("dl",{className:"ps-sm-4",children:[s.jsx("dt",{children:i("statistics.labels.fcsVersion")}),s.jsx("dd",{children:e.version}),s.jsx("dt",{children:i("statistics.labels.searchCapabilities")}),s.jsx("dd",{children:e.searchCapabilities.join(", ")}),s.jsx("dt",{children:i("statistics.labels.maxConcurrentScanRequests")}),s.jsx("dd",{children:e.maxConcurrentRequests}),s.jsx("dt",{children:i("statistics.labels.requestStatistics")}),s.jsx("dd",{className:"mb-0",children:i("statistics.labels.numberOfRequests",{count:e.numberOfRequests})}),e.avgQueueTime!==0&&s.jsx("dd",{className:"mb-0",children:i("statistics.labels.queueTime",{avg:o.format(e.avgQueueTime),max:o.format(e.maxQueueTime)})}),s.jsx("dd",{children:i("statistics.labels.executionTime",{avg:o.format(e.avgExecutionTime),max:o.format(e.maxExecutionTime)})}),e.rootResources?.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{children:i("statistics.labels.resources")}),s.jsx("dd",{children:i("statistics.labels.numberOfRootResources",{count:e.rootResources.length})}),s.jsx("dd",{children:s.jsx("ul",{children:e.rootResources.map((c,u)=>typeof c=="string"?s.jsx("li",{children:s.jsx(de.Highlight,{text:c,ranges:e.matchResources?.[u]??null})},c):s.jsx("li",{children:l(c,u)},c.handle))})})]}),s.jsxs(s.Fragment,{children:[Object.entries(e.diagnostics||{}).map(([c,u])=>s.jsxs(oe,{variant:"warning",style:{fontSize:"0.85rem"},children:[s.jsxs(oe.Heading,{style:{fontSize:"1rem"},children:[s.jsxs(Le,{bg:"warning",children:[u.counter,"x"]})," ",s.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.diagnostic")})," ",u.diagnostic.message,u.diagnostic.diagnostic&&s.jsxs(s.Fragment,{children:[" - ",s.jsx("small",{children:u.diagnostic.diagnostic})]})]}),s.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",s.jsx("a",{href:u.context,children:u.context})]})]},c)),Object.entries(e.errors||{}).map(([c,u])=>s.jsxs(oe,{variant:"danger",style:{fontSize:"0.85rem"},children:[s.jsxs(oe.Heading,{style:{fontSize:"1rem"},children:[s.jsxs(Le,{bg:"danger",children:[u.counter,"x"]})," ",s.jsx("span",{className:"text-uppercase",children:i("statistics.diagnostic.exception")})," ",u.exception.message]}),s.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.context")," ",s.jsx("a",{href:u.context,children:u.context})]}),u.exception.cause&&s.jsxs("p",{className:"mb-0",children:[i("statistics.diagnostic.causedBy")," ",u.exception.cause]})]},c))]})]})]},n)}function ea({data:n,validatorUrl:e}){const{t,i18n:r}=ne(),[i,a]=g.useState(""),[o,l]=g.useState(["institution","endpoint","resources"]),[c,u]=g.useState(!1),d=`-${n.isScan?"scan":"search"}`,h=g.useMemo(()=>Object.entries(n.institutions).toSorted().map(([S,w])=>Object.entries(w).toSorted().map(([N,x])=>({institutionName:S,endpointUrl:N,endpointInfo:{...x,rootResources:x.rootResources.toSorted()}}))).flat(1).filter(c?S=>Object.keys(S.endpointInfo.diagnostics).length>0||Object.keys(S.endpointInfo.errors).length>0:()=>!0),[n,c]),m=h.filter(S=>Object.keys(S.endpointInfo.diagnostics).length>0||Object.keys(S.endpointInfo.errors).length>0),p=de.useFuzzySearchList({list:h,queryText:i,getText:S=>{const w=[];return o.length===0?w.push(S.institutionName,S.endpointUrl,...S.endpointInfo.rootResources.map(N=>typeof N=="string"?N:N.title)):(o.includes("institution")&&w.push(S.institutionName),o.includes("endpoint")&&w.push(S.endpointUrl),o.includes("resources")&&w.push(...S.endpointInfo.rootResources.map(N=>typeof N=="string"?N:N.title))),w},mapResultItem:({item:S,score:w,matches:N})=>({item:S,matches:N,score:w})}).reduce((S,w)=>{const{institutionName:N,endpointUrl:x,endpointInfo:C}=w.item;return Object.getOwnPropertyNames(S).includes(N)||(S[N]={match:o.length===0||o.includes("institution")?w.matches[0]:null,endpoints:{}}),S[N].endpoints[x]={...C,matchEndpoint:o.length===0||o.includes("endpoint")?w.matches[o.length===0||o.includes("institution")?1:0]:null,matchResources:o.length===0||o.includes("resources")?w.matches.slice(0+(o.length===0||o.includes("institution")?1:0)+(o.length===0||o.includes("endpoint")?1:0)):[]},S},{});function R(S){o.includes(S)?l(o.filter(w=>w!==S)):l([...o,S])}return s.jsxs(ie,{className:"d-grid gap-2 mt-3",children:[s.jsx(oe,{variant:"info",className:"mb-0",children:s.jsxs("dl",{className:"mb-0",children:[s.jsx("dt",{children:t("statistics.labels.startDate")}),s.jsx("dd",{className:"mb-0",children:new Date(n.date).toLocaleString(r.language)}),s.jsx("dt",{children:t("statistics.labels.timeout")}),s.jsx("dd",{className:"mb-0",children:new Intl.NumberFormat(r.language,{style:"unit",unit:"second",unitDisplay:"short"}).format(n.timeout)})]})}),s.jsx(q,{onSubmit:S=>S.preventDefault(),children:s.jsxs(te,{className:"gy-2",children:[s.jsx(U,{lg:6,md:12,children:s.jsx(q.Control,{placeholder:t("statistics.filter.inputPlaceholder"),value:i,onChange:S=>a(S.target.value)})}),s.jsxs(U,{className:"filter-checkboxes",lg:6,md:12,children:[s.jsx(q.Text,{className:"me-2",children:t("statistics.filter.labelForCheckboxes")}),s.jsx(q.Check,{type:"checkbox",checked:o.includes("institution"),onChange:()=>R("institution"),id:`filter-institution-name${d}`,label:t("statistics.filter.checkboxInstitution")}),s.jsx(q.Check,{type:"checkbox",checked:o.includes("endpoint"),onChange:()=>R("endpoint"),id:`filter-endpoint-url${d}`,label:t("statistics.filter.checkboxEndpoint")}),s.jsx(q.Check,{type:"checkbox",checked:o.includes("resources"),onChange:()=>R("resources"),id:`filter-resource-names${d}`,label:t("statistics.filter.checkboxResources")})]})]})}),s.jsx(te,{children:s.jsx(U,{children:s.jsx(q.Check,{type:"checkbox",checked:c,onChange:()=>u(!c),id:`filter-show-issues-only${d}`,label:t("statistics.filter.checkboxShowWithIssues",{count:m.length})})})}),Object.entries(p).map(([S,{match:w,endpoints:N}])=>s.jsxs(re,{className:"p-2",children:[s.jsx("h3",{className:"h4 pb-1 border-bottom",id:`${Ns(S)}${d}`,children:s.jsx(de.Highlight,{text:S,ranges:w})}),Object.entries(N).toSorted().map(([x,C])=>s.jsx(Zi,{url:x,statistics:C,validatorUrl:e,isScan:n.isScan},x))]},S))]})}const ta=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
</svg>`,sa=[{id:"last-scan",label:"Last Scan"},{id:"recent-searches",label:"Recent Searches"}],na=Object.fromEntries(sa.map(n=>[n.id,n]));function ra(){const n=Ie(),e=Ls(),[t]=ct(),{t:r}=ne(),{categoryId:i}=hn(),a=Ji(),o=Gi(),l={consortia:t.get(qe)},{isPending:c,isError:u,data:d,error:h}=Ve({queryKey:["statistics"],queryFn:nr.bind(null,n,l)}),[m,y]=g.useState(W.getState().validatorURL);W.subscribe(x=>y(x.validatorURL));const p=W.getState().appTitleHead,R=d!==void 0?Object.keys(d).toSorted():[],S=i!=null&&R.includes(i)?i:R.length>0?R[0]:void 0;function w(){e.invalidateQueries({queryKey:["statistics"]})}function N(x){a?.params.categoryId,a&&a.params.categoryId!==x&&a.route.path&&o(a.route.path,{categoryId:x})}return s.jsxs(s.Fragment,{children:[s.jsx(He,{children:s.jsxs("title",{children:[p," – Statistics"]})}),s.jsxs(ie,{id:"statistics",className:"my-4",children:[s.jsx("h1",{className:"h1",children:r("statistics.title")}),(c||u)&&s.jsx(te,{children:s.jsxs(U,{children:[c?r("statistics.loading"):null,s.jsx("br",{}),u?h.message:null]})}),d&&s.jsxs(St.Container,{defaultActiveKey:S,onSelect:N,children:[s.jsxs(pe,{className:"nav-tabs",as:"ul",children:[Object.keys(d).map(x=>s.jsx(pe.Item,{as:"li",role:"presentation",children:s.jsx(pe.Link,{as:"button",eventKey:x,children:r(`statistics.tabs.${x}`,{defaultValue:na[x]?.label??x})})},x)),s.jsx(pe.Item,{as:"li",role:"presentation",className:"ms-auto",children:s.jsxs(pe.Link,{as:"button",onClick:w,children:[s.jsx("i",{dangerouslySetInnerHTML:{__html:ta}})," ",r("statistics.tabs.btnRefresh")]})})]}),s.jsx(St.Content,{children:Object.entries(d).map(([x,C])=>s.jsx(St.Pane,{eventKey:x,children:s.jsx(ea,{data:C,validatorUrl:m})},x))})]})]})]})}function ia(){const n=W.getState().appTitleHead;br();const e=ve(t=>t.locale);g.useEffect(()=>{Y.changeLanguage(e)},[e]);{const t=Mt(),[r,i]=g.useState(t.pathname);g.useEffect(()=>{const a=t.pathname;a!==r&&(i(a+t.search),Vs(a,document.title,r))},[t,r])}return s.jsxs(s.Fragment,{children:[s.jsx(He,{children:s.jsx("title",{children:n})}),s.jsx(pr,{}),s.jsx("main",{children:s.jsxs(fn,{children:[s.jsx(Je,{index:!0,element:s.jsx(Wi,{})}),s.jsx(Je,{path:"/about",element:s.jsx(Yr,{})}),s.jsx(Je,{path:"/help",element:s.jsx(Xr,{})}),s.jsx(Je,{path:"/stats/:categoryId?",element:s.jsx(ra,{})})]})}),s.jsx(hr,{})]})}window.MyAggregator=window.MyAggregator||{};window._paq=window._paq||[];const aa=["DEPLOY_PATH","API_URL","APP_TITLE","APP_TITLE_HEAD","MATOMO_TRACKING_PARAMS"];function oa(){window.MyAggregator.DEPLOY_PATH!==void 0&&W.getState().setDeployPath(window.MyAggregator.DEPLOY_PATH),window.MyAggregator.API_URL!==void 0&&W.getState().setApiURL(window.MyAggregator.API_URL),window.MyAggregator.VALIDATOR_URL!==void 0&&W.getState().setValidatorURL(window.MyAggregator.VALIDATOR_URL),window.MyAggregator.SHOW_SEARCH_RESULT_LINK!==void 0&&W.getState().setShowSearchResultLink(window.MyAggregator.SHOW_SEARCH_RESULT_LINK),window.MyAggregator.APP_TITLE!==void 0&&W.getState().setAppTitle(window.MyAggregator.APP_TITLE),window.MyAggregator.APP_TITLE_HEAD!==void 0&&W.getState().setAppTitleHead(window.MyAggregator.APP_TITLE_HEAD),window.MyAggregator.MATOMO_TRACKING_PARAMS!==void 0&&W.getState().setMatomoTrackingParams(window.MyAggregator.MATOMO_TRACKING_PARAMS),window.MyAggregator.AUTH_USERNAME!==void 0&&W.getState().setAuthUsername(window.MyAggregator.AUTH_USERNAME),window.MyAggregator=new Proxy(window.MyAggregator,{get(n,e){return n[e]},set(n,e,t){return aa.includes(e)?(console.error(`Configuration ${e} can only be set on initialization!`),!1):e==="VALIDATOR_URL"?t===null||typeof t=="string"?(W.getState().setValidatorURL(t),!0):!1:e==="SHOW_SEARCH_RESULT_LINK"?typeof t=="boolean"?(W.getState().setShowSearchResultLink(t),!0):!1:e==="AUTH_USERNAME"?t===null||typeof t=="string"?(W.getState().setAuthUsername(t),!0):!1:(n[e]=t,!0)}}),Object.assign(window.MyAggregator,{getAppStore:()=>W})}function la(){const n=se.getState(),e=[navigator.language,...navigator.languages];let t=!1;for(const r of e){if(r===n.locale){t=!0;break}if(n.locales.includes(r)){n.setLocale(r),t=!0;break}}t||console.warn("User locale",e,"was not found in available languages",n.locales),Object.assign(window.MyAggregator,{getLocaleStore:()=>se})}oa();la();W.getInitialState(),W.getState();se.getInitialState(),se.getState();const ca=W.getState().deployPath,ua=W.getState().apiURL,da=se.getState().locale;Y.changeLanguage(da);const ha=new gn({defaultOptions:{queries:{}}}),fa=pn.create({baseURL:ua,timeout:5e3,responseType:"json",transitional:{silentJSONParsing:!1}});{const n=W.getState().matomoTrackingParams;ii(n)||console.warn("Unable to setup tracking ...")}const ga="root",pa=document.getElementById(ga),ma=En.createRoot(pa);ma.render(s.jsx(g.StrictMode,{children:s.jsx(ei,{axios:fa,children:s.jsx(mn,{client:ha,children:s.jsx(xn,{children:s.jsx(bn,{basename:ca,children:s.jsx(ia,{})})})})})}));export{Ws as C,B as T,Ks as a,hi as f,ki as h,Y as i,ne as u};
//# sourceMappingURL=fcs-sru-aggregator-ui-0.0.0.js.map

import{r as h,j as i}from"./vendor/react-ext.js";import{F as v,B as ge,D as y,M as ve,C as Fe,R as Or,a as Qr,I as kr,d as jr,A as Ur}from"./vendor/bootstrap.js";import{u as Mr,C as qr,h as Hr,i as Br}from"./fcs-sru-aggregator-ui-0.0.0.js";import{P as St,F as It,a as Ot,b as Ue,R as N,N as le,A as gt,c as Me,V as qe,D as He,d as A,B as Gr,L as Qt,e as kt,f as Dr,C as jt,g as Ut,T as Mt}from"./vendor/antlr4.js";import"./vendor/react.js";/* empty css                            */import"./locales/en/default.js";import"./vendor/prism.js";function Pr(r,e){const[t,s]=h.useState(r),a=h.useRef(void 0),d=h.useCallback(f=>{clearTimeout(a.current),a.current=setTimeout(()=>{s(f)},e)},[s,e]);return[t,d,s]}class n extends St{static L_PAREN=1;static R_PAREN=2;static L_SQUARE_BRACKET=3;static R_SQUARE_BRACKET=4;static OR=5;static AND=6;static NOT=7;static FWD_SLASH=8;static L_CURLY_BRACKET=9;static R_CURLY_BRACKET=10;static Q_ONE_OR_MORE=11;static Q_ZERO_OR_MORE=12;static Q_ZERO_OR_ONE=13;static Q_COMMA=14;static OPERATOR_EQ=15;static OPERATOR_NE=16;static COLON=17;static WITHIN=18;static SIMPLE_WITHIN_SCOPE=19;static REGEXP_FLAGS=20;static IDENTIFIER=21;static INTEGER=22;static REGEXP=23;static QUOTED_STRING=24;static Space=25;static RULE_query=0;static RULE_main_query=1;static RULE_query_disjunction=2;static RULE_query_sequence=3;static RULE_query_group=4;static RULE_query_simple=5;static RULE_quantifier=6;static RULE_query_implicit=7;static RULE_query_segment=8;static RULE_within_part=9;static RULE_within_part_simple=10;static RULE_expression=11;static RULE_expression_or=12;static RULE_expression_and=13;static RULE_expression_group=14;static RULE_expression_not=15;static RULE_expression_basic=16;static RULE_attribute=17;static RULE_qualifier=18;static RULE_identifier=19;static RULE_regexp=20;static RULE_regexp_pattern=21;static RULE_regexp_flag=22;static literalNames=[null,"'('","')'","'['","']'","'|'","'&'","'!'","'/'","'{'","'}'","'+'","'*'","'?'","','","'='","'!='","':'","'within'"];static symbolicNames=[null,"L_PAREN","R_PAREN","L_SQUARE_BRACKET","R_SQUARE_BRACKET","OR","AND","NOT","FWD_SLASH","L_CURLY_BRACKET","R_CURLY_BRACKET","Q_ONE_OR_MORE","Q_ZERO_OR_MORE","Q_ZERO_OR_ONE","Q_COMMA","OPERATOR_EQ","OPERATOR_NE","COLON","WITHIN","SIMPLE_WITHIN_SCOPE","REGEXP_FLAGS","IDENTIFIER","INTEGER","REGEXP","QUOTED_STRING","Space"];static ruleNames=["query","main_query","query_disjunction","query_sequence","query_group","query_simple","quantifier","query_implicit","query_segment","within_part","within_part_simple","expression","expression_or","expression_and","expression_group","expression_not","expression_basic","attribute","qualifier","identifier","regexp","regexp_pattern","regexp_flag"];get grammarFileName(){return"FCSParser.g4"}get literalNames(){return n.literalNames}get symbolicNames(){return n.symbolicNames}get ruleNames(){return n.ruleNames}get serializedATN(){return n._serializedATN}createFailedPredicateException(e,t){return new It(this,e,t)}constructor(e){super(e),this.interpreter=new Ot(this,n._ATN,n.decisionsToDFA,new Ue)}query(){const e=new Wr(this.context,this.state);this.enterRule(e,0,n.RULE_query);let t;try{this.enterOuterAlt(e,1),this.state=46,this.main_query(),this.state=49,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===18&&(this.state=47,this.match(n.WITHIN),this.state=48,this.within_part()),this.state=51,this.match(n.EOF)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}main_query(){const e=new qt(this.context,this.state);this.enterRule(e,2,n.RULE_main_query);try{switch(this.state=57,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,1,this.context)){case 1:this.enterOuterAlt(e,1),this.state=53,this.query_simple();break;case 2:this.enterOuterAlt(e,2),this.state=54,this.query_group();break;case 3:this.enterOuterAlt(e,3),this.state=55,this.query_sequence();break;case 4:this.enterOuterAlt(e,4),this.state=56,this.query_disjunction();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}query_disjunction(){const e=new Be(this.context,this.state);this.enterRule(e,4,n.RULE_query_disjunction);let t;try{this.enterOuterAlt(e,1);{switch(this.state=62,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,2,this.context)){case 1:this.state=59,this.query_simple();break;case 2:this.state=60,this.query_sequence();break;case 3:this.state=61,this.query_group();break}this.state=70,this.errorHandler.sync(this),t=this.tokenStream.LA(1);do{switch(this.state=64,this.match(n.OR),this.state=68,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,3,this.context)){case 1:this.state=65,this.query_simple();break;case 2:this.state=66,this.query_sequence();break;case 3:this.state=67,this.query_group();break}this.state=72,this.errorHandler.sync(this),t=this.tokenStream.LA(1)}while(t===5)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_sequence(){const e=new ye(this.context,this.state);this.enterRule(e,6,n.RULE_query_sequence);let t;try{this.enterOuterAlt(e,1);{this.state=76,this.errorHandler.sync(this),t=this.tokenStream.LA(1);do{switch(this.state=76,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.L_SQUARE_BRACKET:case n.REGEXP:this.state=74,this.query_simple();break;case n.L_PAREN:this.state=75,this.query_group();break;default:throw new le(this)}this.state=78,this.errorHandler.sync(this),t=this.tokenStream.LA(1)}while((t&-32)===0&&(1<<t&8388618)!==0)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_group(){const e=new pe(this.context,this.state);this.enterRule(e,8,n.RULE_query_group);let t;try{this.enterOuterAlt(e,1);{switch(this.state=80,this.match(n.L_PAREN),this.state=83,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,7,this.context)){case 1:this.state=81,this.query_disjunction();break;case 2:this.state=82,this.query_sequence();break}this.state=85,this.match(n.R_PAREN),this.state=87,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&14848)!==0&&(this.state=86,this.quantifier())}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_simple(){const e=new _e(this.context,this.state);this.enterRule(e,10,n.RULE_query_simple);let t;try{this.enterOuterAlt(e,1);{switch(this.state=91,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.REGEXP:this.state=89,this.query_implicit();break;case n.L_SQUARE_BRACKET:this.state=90,this.query_segment();break;default:throw new le(this)}this.state=94,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&14848)!==0&&(this.state=93,this.quantifier())}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}quantifier(){const e=new et(this.context,this.state);this.enterRule(e,12,n.RULE_quantifier);let t;try{switch(this.enterOuterAlt(e,1),this.state=114,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.Q_ONE_OR_MORE:this.state=96,this.match(n.Q_ONE_OR_MORE);break;case n.Q_ZERO_OR_MORE:this.state=97,this.match(n.Q_ZERO_OR_MORE);break;case n.Q_ZERO_OR_ONE:this.state=98,this.match(n.Q_ZERO_OR_ONE);break;case n.L_CURLY_BRACKET:{switch(this.state=99,this.match(n.L_CURLY_BRACKET),this.state=111,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,13,this.context)){case 1:this.state=100,this.match(n.INTEGER);break;case 2:this.state=102,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===22&&(this.state=101,this.match(n.INTEGER)),this.state=104,this.match(n.Q_COMMA),this.state=105,this.match(n.INTEGER);break;case 3:this.state=106,this.match(n.INTEGER),this.state=107,this.match(n.Q_COMMA),this.state=109,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===22&&(this.state=108,this.match(n.INTEGER));break}this.state=113,this.match(n.R_CURLY_BRACKET)}break;default:throw new le(this)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_implicit(){const e=new Ht(this.context,this.state);this.enterRule(e,14,n.RULE_query_implicit);try{this.enterOuterAlt(e,1),this.state=116,this.regexp()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}query_segment(){const e=new Bt(this.context,this.state);this.enterRule(e,16,n.RULE_query_segment);let t;try{this.enterOuterAlt(e,1),this.state=118,this.match(n.L_SQUARE_BRACKET),this.state=120,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&3932290)!==0&&(this.state=119,this.expression()),this.state=122,this.match(n.R_SQUARE_BRACKET)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}within_part(){const e=new Gt(this.context,this.state);this.enterRule(e,18,n.RULE_within_part);try{this.enterOuterAlt(e,1),this.state=124,this.within_part_simple()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}within_part_simple(){const e=new Dt(this.context,this.state);this.enterRule(e,20,n.RULE_within_part_simple);try{this.enterOuterAlt(e,1),this.state=126,this.match(n.SIMPLE_WITHIN_SCOPE)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression(){const e=new Pt(this.context,this.state);this.enterRule(e,22,n.RULE_expression);try{switch(this.state=133,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,16,this.context)){case 1:this.enterOuterAlt(e,1),this.state=128,this.expression_basic();break;case 2:this.enterOuterAlt(e,2),this.state=129,this.expression_group();break;case 3:this.enterOuterAlt(e,3),this.state=130,this.expression_or();break;case 4:this.enterOuterAlt(e,4),this.state=131,this.expression_and();break;case 5:this.enterOuterAlt(e,5),this.state=132,this.expression_not();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_or(){const e=new ce(this.context,this.state);this.enterRule(e,24,n.RULE_expression_or);try{let t;this.enterOuterAlt(e,1);{switch(this.state=139,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,17,this.context)){case 1:this.state=135,this.expression_basic();break;case 2:this.state=136,this.expression_group();break;case 3:this.state=137,this.expression_and();break;case 4:this.state=138,this.expression_not();break}this.state=148,this.errorHandler.sync(this),t=1;do{switch(t){case 1:switch(this.state=141,this.match(n.OR),this.state=146,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,18,this.context)){case 1:this.state=142,this.expression_basic();break;case 2:this.state=143,this.expression_group();break;case 3:this.state=144,this.expression_and();break;case 4:this.state=145,this.expression_not();break}break;default:throw new le(this)}this.state=150,this.errorHandler.sync(this),t=this.interpreter.adaptivePredict(this.tokenStream,19,this.context)}while(t!==2&&t!==gt.INVALID_ALT_NUMBER)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_and(){const e=new ue(this.context,this.state);this.enterRule(e,26,n.RULE_expression_and);try{let t;this.enterOuterAlt(e,1);{switch(this.state=155,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.WITHIN:case n.SIMPLE_WITHIN_SCOPE:case n.REGEXP_FLAGS:case n.IDENTIFIER:this.state=152,this.expression_basic();break;case n.L_PAREN:this.state=153,this.expression_group();break;case n.NOT:this.state=154,this.expression_not();break;default:throw new le(this)}this.state=164,this.errorHandler.sync(this),t=1;do{switch(t){case 1:switch(this.state=157,this.match(n.AND),this.state=162,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,21,this.context)){case 1:this.state=158,this.expression_basic();break;case 2:this.state=159,this.expression_group();break;case 3:this.state=160,this.expression_or();break;case 4:this.state=161,this.expression_not();break}break;default:throw new le(this)}this.state=166,this.errorHandler.sync(this),t=this.interpreter.adaptivePredict(this.tokenStream,22,this.context)}while(t!==2&&t!==gt.INVALID_ALT_NUMBER)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_group(){const e=new G(this.context,this.state);this.enterRule(e,28,n.RULE_expression_group);try{this.enterOuterAlt(e,1);{switch(this.state=168,this.match(n.L_PAREN),this.state=174,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,23,this.context)){case 1:this.state=169,this.expression_basic();break;case 2:this.state=170,this.expression_group();break;case 3:this.state=171,this.expression_or();break;case 4:this.state=172,this.expression_and();break;case 5:this.state=173,this.expression_not();break}this.state=176,this.match(n.R_PAREN)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_not(){const e=new V(this.context,this.state);this.enterRule(e,30,n.RULE_expression_not);try{switch(this.enterOuterAlt(e,1),this.state=178,this.match(n.NOT),this.state=184,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,24,this.context)){case 1:this.state=179,this.expression_basic();break;case 2:this.state=180,this.expression_group();break;case 3:this.state=181,this.expression_not();break;case 4:this.state=182,this.expression_or();break;case 5:this.state=183,this.expression_and();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_basic(){const e=new J(this.context,this.state);this.enterRule(e,32,n.RULE_expression_basic);let t;try{this.enterOuterAlt(e,1),this.state=186,this.attribute(),this.state=187,t=this.tokenStream.LA(1),t===15||t===16?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this),this.state=188,this.regexp()}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}attribute(){const e=new Wt(this.context,this.state);this.enterRule(e,34,n.RULE_attribute);try{this.enterOuterAlt(e,1);{switch(this.state=193,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,25,this.context)){case 1:this.state=190,this.qualifier(),this.state=191,this.match(n.COLON);break}this.state=195,this.identifier()}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}qualifier(){const e=new Ft(this.context,this.state);this.enterRule(e,36,n.RULE_qualifier);let t;try{this.enterOuterAlt(e,1),this.state=197,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&3932160)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}identifier(){const e=new $t(this.context,this.state);this.enterRule(e,38,n.RULE_identifier);let t;try{this.enterOuterAlt(e,1),this.state=199,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&3932160)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}regexp(){const e=new tt(this.context,this.state);this.enterRule(e,40,n.RULE_regexp);let t;try{this.enterOuterAlt(e,1),this.state=201,this.regexp_pattern(),this.state=204,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===8&&(this.state=202,this.match(n.FWD_SLASH),this.state=203,this.regexp_flag())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}regexp_pattern(){const e=new Vt(this.context,this.state);this.enterRule(e,42,n.RULE_regexp_pattern);try{this.enterOuterAlt(e,1),this.state=206,this.match(n.REGEXP)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}regexp_flag(){const e=new Kt(this.context,this.state);this.enterRule(e,44,n.RULE_regexp_flag);try{this.enterOuterAlt(e,1),this.state=208,this.match(n.REGEXP_FLAGS)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}static _serializedATN=[4,1,25,211,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,1,0,1,0,1,0,3,0,50,8,0,1,0,1,0,1,1,1,1,1,1,1,1,3,1,58,8,1,1,2,1,2,1,2,3,2,63,8,2,1,2,1,2,1,2,1,2,3,2,69,8,2,4,2,71,8,2,11,2,12,2,72,1,3,1,3,4,3,77,8,3,11,3,12,3,78,1,4,1,4,1,4,3,4,84,8,4,1,4,1,4,3,4,88,8,4,1,5,1,5,3,5,92,8,5,1,5,3,5,95,8,5,1,6,1,6,1,6,1,6,1,6,1,6,3,6,103,8,6,1,6,1,6,1,6,1,6,1,6,3,6,110,8,6,3,6,112,8,6,1,6,3,6,115,8,6,1,7,1,7,1,8,1,8,3,8,121,8,8,1,8,1,8,1,9,1,9,1,10,1,10,1,11,1,11,1,11,1,11,1,11,3,11,134,8,11,1,12,1,12,1,12,1,12,3,12,140,8,12,1,12,1,12,1,12,1,12,1,12,3,12,147,8,12,4,12,149,8,12,11,12,12,12,150,1,13,1,13,1,13,3,13,156,8,13,1,13,1,13,1,13,1,13,1,13,3,13,163,8,13,4,13,165,8,13,11,13,12,13,166,1,14,1,14,1,14,1,14,1,14,1,14,3,14,175,8,14,1,14,1,14,1,15,1,15,1,15,1,15,1,15,1,15,3,15,185,8,15,1,16,1,16,1,16,1,16,1,17,1,17,1,17,3,17,194,8,17,1,17,1,17,1,18,1,18,1,19,1,19,1,20,1,20,1,20,3,20,205,8,20,1,21,1,21,1,22,1,22,1,22,0,0,23,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,0,2,1,0,15,16,1,0,18,21,237,0,46,1,0,0,0,2,57,1,0,0,0,4,62,1,0,0,0,6,76,1,0,0,0,8,80,1,0,0,0,10,91,1,0,0,0,12,114,1,0,0,0,14,116,1,0,0,0,16,118,1,0,0,0,18,124,1,0,0,0,20,126,1,0,0,0,22,133,1,0,0,0,24,139,1,0,0,0,26,155,1,0,0,0,28,168,1,0,0,0,30,178,1,0,0,0,32,186,1,0,0,0,34,193,1,0,0,0,36,197,1,0,0,0,38,199,1,0,0,0,40,201,1,0,0,0,42,206,1,0,0,0,44,208,1,0,0,0,46,49,3,2,1,0,47,48,5,18,0,0,48,50,3,18,9,0,49,47,1,0,0,0,49,50,1,0,0,0,50,51,1,0,0,0,51,52,5,0,0,1,52,1,1,0,0,0,53,58,3,10,5,0,54,58,3,8,4,0,55,58,3,6,3,0,56,58,3,4,2,0,57,53,1,0,0,0,57,54,1,0,0,0,57,55,1,0,0,0,57,56,1,0,0,0,58,3,1,0,0,0,59,63,3,10,5,0,60,63,3,6,3,0,61,63,3,8,4,0,62,59,1,0,0,0,62,60,1,0,0,0,62,61,1,0,0,0,63,70,1,0,0,0,64,68,5,5,0,0,65,69,3,10,5,0,66,69,3,6,3,0,67,69,3,8,4,0,68,65,1,0,0,0,68,66,1,0,0,0,68,67,1,0,0,0,69,71,1,0,0,0,70,64,1,0,0,0,71,72,1,0,0,0,72,70,1,0,0,0,72,73,1,0,0,0,73,5,1,0,0,0,74,77,3,10,5,0,75,77,3,8,4,0,76,74,1,0,0,0,76,75,1,0,0,0,77,78,1,0,0,0,78,76,1,0,0,0,78,79,1,0,0,0,79,7,1,0,0,0,80,83,5,1,0,0,81,84,3,4,2,0,82,84,3,6,3,0,83,81,1,0,0,0,83,82,1,0,0,0,84,85,1,0,0,0,85,87,5,2,0,0,86,88,3,12,6,0,87,86,1,0,0,0,87,88,1,0,0,0,88,9,1,0,0,0,89,92,3,14,7,0,90,92,3,16,8,0,91,89,1,0,0,0,91,90,1,0,0,0,92,94,1,0,0,0,93,95,3,12,6,0,94,93,1,0,0,0,94,95,1,0,0,0,95,11,1,0,0,0,96,115,5,11,0,0,97,115,5,12,0,0,98,115,5,13,0,0,99,111,5,9,0,0,100,112,5,22,0,0,101,103,5,22,0,0,102,101,1,0,0,0,102,103,1,0,0,0,103,104,1,0,0,0,104,105,5,14,0,0,105,112,5,22,0,0,106,107,5,22,0,0,107,109,5,14,0,0,108,110,5,22,0,0,109,108,1,0,0,0,109,110,1,0,0,0,110,112,1,0,0,0,111,100,1,0,0,0,111,102,1,0,0,0,111,106,1,0,0,0,112,113,1,0,0,0,113,115,5,10,0,0,114,96,1,0,0,0,114,97,1,0,0,0,114,98,1,0,0,0,114,99,1,0,0,0,115,13,1,0,0,0,116,117,3,40,20,0,117,15,1,0,0,0,118,120,5,3,0,0,119,121,3,22,11,0,120,119,1,0,0,0,120,121,1,0,0,0,121,122,1,0,0,0,122,123,5,4,0,0,123,17,1,0,0,0,124,125,3,20,10,0,125,19,1,0,0,0,126,127,5,19,0,0,127,21,1,0,0,0,128,134,3,32,16,0,129,134,3,28,14,0,130,134,3,24,12,0,131,134,3,26,13,0,132,134,3,30,15,0,133,128,1,0,0,0,133,129,1,0,0,0,133,130,1,0,0,0,133,131,1,0,0,0,133,132,1,0,0,0,134,23,1,0,0,0,135,140,3,32,16,0,136,140,3,28,14,0,137,140,3,26,13,0,138,140,3,30,15,0,139,135,1,0,0,0,139,136,1,0,0,0,139,137,1,0,0,0,139,138,1,0,0,0,140,148,1,0,0,0,141,146,5,5,0,0,142,147,3,32,16,0,143,147,3,28,14,0,144,147,3,26,13,0,145,147,3,30,15,0,146,142,1,0,0,0,146,143,1,0,0,0,146,144,1,0,0,0,146,145,1,0,0,0,147,149,1,0,0,0,148,141,1,0,0,0,149,150,1,0,0,0,150,148,1,0,0,0,150,151,1,0,0,0,151,25,1,0,0,0,152,156,3,32,16,0,153,156,3,28,14,0,154,156,3,30,15,0,155,152,1,0,0,0,155,153,1,0,0,0,155,154,1,0,0,0,156,164,1,0,0,0,157,162,5,6,0,0,158,163,3,32,16,0,159,163,3,28,14,0,160,163,3,24,12,0,161,163,3,30,15,0,162,158,1,0,0,0,162,159,1,0,0,0,162,160,1,0,0,0,162,161,1,0,0,0,163,165,1,0,0,0,164,157,1,0,0,0,165,166,1,0,0,0,166,164,1,0,0,0,166,167,1,0,0,0,167,27,1,0,0,0,168,174,5,1,0,0,169,175,3,32,16,0,170,175,3,28,14,0,171,175,3,24,12,0,172,175,3,26,13,0,173,175,3,30,15,0,174,169,1,0,0,0,174,170,1,0,0,0,174,171,1,0,0,0,174,172,1,0,0,0,174,173,1,0,0,0,175,176,1,0,0,0,176,177,5,2,0,0,177,29,1,0,0,0,178,184,5,7,0,0,179,185,3,32,16,0,180,185,3,28,14,0,181,185,3,30,15,0,182,185,3,24,12,0,183,185,3,26,13,0,184,179,1,0,0,0,184,180,1,0,0,0,184,181,1,0,0,0,184,182,1,0,0,0,184,183,1,0,0,0,185,31,1,0,0,0,186,187,3,34,17,0,187,188,7,0,0,0,188,189,3,40,20,0,189,33,1,0,0,0,190,191,3,36,18,0,191,192,5,17,0,0,192,194,1,0,0,0,193,190,1,0,0,0,193,194,1,0,0,0,194,195,1,0,0,0,195,196,3,38,19,0,196,35,1,0,0,0,197,198,7,1,0,0,198,37,1,0,0,0,199,200,7,1,0,0,200,39,1,0,0,0,201,204,3,42,21,0,202,203,5,8,0,0,203,205,3,44,22,0,204,202,1,0,0,0,204,205,1,0,0,0,205,41,1,0,0,0,206,207,5,23,0,0,207,43,1,0,0,0,208,209,5,20,0,0,209,45,1,0,0,0,27,49,57,62,68,72,76,78,83,87,91,94,102,109,111,114,120,133,139,146,150,155,162,166,174,184,193,204];static __ATN;static get _ATN(){return n.__ATN||(n.__ATN=new Me().deserialize(n._serializedATN)),n.__ATN}static vocabulary=new qe(n.literalNames,n.symbolicNames,[]);get vocabulary(){return n.vocabulary}static decisionsToDFA=n._ATN.decisionToState.map((e,t)=>new He(e,t))}let Wr=class extends A{constructor(e,t){super(e,t)}main_query(){return this.getRuleContext(0,qt)}EOF(){return this.getToken(n.EOF,0)}WITHIN(){return this.getToken(n.WITHIN,0)}within_part(){return this.getRuleContext(0,Gt)}get ruleIndex(){return n.RULE_query}enterRule(e){e.enterQuery&&e.enterQuery(this)}exitRule(e){e.exitQuery&&e.exitQuery(this)}accept(e){return e.visitQuery?e.visitQuery(this):e.visitChildren(this)}};class qt extends A{constructor(e,t){super(e,t)}query_simple(){return this.getRuleContext(0,_e)}query_group(){return this.getRuleContext(0,pe)}query_sequence(){return this.getRuleContext(0,ye)}query_disjunction(){return this.getRuleContext(0,Be)}get ruleIndex(){return n.RULE_main_query}enterRule(e){e.enterMain_query&&e.enterMain_query(this)}exitRule(e){e.exitMain_query&&e.exitMain_query(this)}accept(e){return e.visitMain_query?e.visitMain_query(this):e.visitChildren(this)}}class Be extends A{constructor(e,t){super(e,t)}query_simple(e){return e===void 0?this.getRuleContexts(_e):this.getRuleContext(e,_e)}query_sequence(e){return e===void 0?this.getRuleContexts(ye):this.getRuleContext(e,ye)}query_group(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}OR(e){return e===void 0?this.getTokens(n.OR):this.getToken(n.OR,e)}get ruleIndex(){return n.RULE_query_disjunction}enterRule(e){e.enterQuery_disjunction&&e.enterQuery_disjunction(this)}exitRule(e){e.exitQuery_disjunction&&e.exitQuery_disjunction(this)}accept(e){return e.visitQuery_disjunction?e.visitQuery_disjunction(this):e.visitChildren(this)}}class ye extends A{constructor(e,t){super(e,t)}query_simple(e){return e===void 0?this.getRuleContexts(_e):this.getRuleContext(e,_e)}query_group(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}get ruleIndex(){return n.RULE_query_sequence}enterRule(e){e.enterQuery_sequence&&e.enterQuery_sequence(this)}exitRule(e){e.exitQuery_sequence&&e.exitQuery_sequence(this)}accept(e){return e.visitQuery_sequence?e.visitQuery_sequence(this):e.visitChildren(this)}}class pe extends A{constructor(e,t){super(e,t)}L_PAREN(){return this.getToken(n.L_PAREN,0)}R_PAREN(){return this.getToken(n.R_PAREN,0)}query_disjunction(){return this.getRuleContext(0,Be)}query_sequence(){return this.getRuleContext(0,ye)}quantifier(){return this.getRuleContext(0,et)}get ruleIndex(){return n.RULE_query_group}enterRule(e){e.enterQuery_group&&e.enterQuery_group(this)}exitRule(e){e.exitQuery_group&&e.exitQuery_group(this)}accept(e){return e.visitQuery_group?e.visitQuery_group(this):e.visitChildren(this)}}class _e extends A{constructor(e,t){super(e,t)}query_implicit(){return this.getRuleContext(0,Ht)}query_segment(){return this.getRuleContext(0,Bt)}quantifier(){return this.getRuleContext(0,et)}get ruleIndex(){return n.RULE_query_simple}enterRule(e){e.enterQuery_simple&&e.enterQuery_simple(this)}exitRule(e){e.exitQuery_simple&&e.exitQuery_simple(this)}accept(e){return e.visitQuery_simple?e.visitQuery_simple(this):e.visitChildren(this)}}class et extends A{constructor(e,t){super(e,t)}Q_ONE_OR_MORE(){return this.getToken(n.Q_ONE_OR_MORE,0)}Q_ZERO_OR_MORE(){return this.getToken(n.Q_ZERO_OR_MORE,0)}Q_ZERO_OR_ONE(){return this.getToken(n.Q_ZERO_OR_ONE,0)}L_CURLY_BRACKET(){return this.getToken(n.L_CURLY_BRACKET,0)}R_CURLY_BRACKET(){return this.getToken(n.R_CURLY_BRACKET,0)}INTEGER(e){return e===void 0?this.getTokens(n.INTEGER):this.getToken(n.INTEGER,e)}Q_COMMA(){return this.getToken(n.Q_COMMA,0)}get ruleIndex(){return n.RULE_quantifier}enterRule(e){e.enterQuantifier&&e.enterQuantifier(this)}exitRule(e){e.exitQuantifier&&e.exitQuantifier(this)}accept(e){return e.visitQuantifier?e.visitQuantifier(this):e.visitChildren(this)}}class Ht extends A{constructor(e,t){super(e,t)}regexp(){return this.getRuleContext(0,tt)}get ruleIndex(){return n.RULE_query_implicit}enterRule(e){e.enterQuery_implicit&&e.enterQuery_implicit(this)}exitRule(e){e.exitQuery_implicit&&e.exitQuery_implicit(this)}accept(e){return e.visitQuery_implicit?e.visitQuery_implicit(this):e.visitChildren(this)}}class Bt extends A{constructor(e,t){super(e,t)}L_SQUARE_BRACKET(){return this.getToken(n.L_SQUARE_BRACKET,0)}R_SQUARE_BRACKET(){return this.getToken(n.R_SQUARE_BRACKET,0)}expression(){return this.getRuleContext(0,Pt)}get ruleIndex(){return n.RULE_query_segment}enterRule(e){e.enterQuery_segment&&e.enterQuery_segment(this)}exitRule(e){e.exitQuery_segment&&e.exitQuery_segment(this)}accept(e){return e.visitQuery_segment?e.visitQuery_segment(this):e.visitChildren(this)}}class Gt extends A{constructor(e,t){super(e,t)}within_part_simple(){return this.getRuleContext(0,Dt)}get ruleIndex(){return n.RULE_within_part}enterRule(e){e.enterWithin_part&&e.enterWithin_part(this)}exitRule(e){e.exitWithin_part&&e.exitWithin_part(this)}accept(e){return e.visitWithin_part?e.visitWithin_part(this):e.visitChildren(this)}}class Dt extends A{constructor(e,t){super(e,t)}SIMPLE_WITHIN_SCOPE(){return this.getToken(n.SIMPLE_WITHIN_SCOPE,0)}get ruleIndex(){return n.RULE_within_part_simple}enterRule(e){e.enterWithin_part_simple&&e.enterWithin_part_simple(this)}exitRule(e){e.exitWithin_part_simple&&e.exitWithin_part_simple(this)}accept(e){return e.visitWithin_part_simple?e.visitWithin_part_simple(this):e.visitChildren(this)}}class Pt extends A{constructor(e,t){super(e,t)}expression_basic(){return this.getRuleContext(0,J)}expression_group(){return this.getRuleContext(0,G)}expression_or(){return this.getRuleContext(0,ce)}expression_and(){return this.getRuleContext(0,ue)}expression_not(){return this.getRuleContext(0,V)}get ruleIndex(){return n.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}class ce extends A{constructor(e,t){super(e,t)}expression_basic(e){return e===void 0?this.getRuleContexts(J):this.getRuleContext(e,J)}expression_group(e){return e===void 0?this.getRuleContexts(G):this.getRuleContext(e,G)}expression_and(e){return e===void 0?this.getRuleContexts(ue):this.getRuleContext(e,ue)}expression_not(e){return e===void 0?this.getRuleContexts(V):this.getRuleContext(e,V)}OR(e){return e===void 0?this.getTokens(n.OR):this.getToken(n.OR,e)}get ruleIndex(){return n.RULE_expression_or}enterRule(e){e.enterExpression_or&&e.enterExpression_or(this)}exitRule(e){e.exitExpression_or&&e.exitExpression_or(this)}accept(e){return e.visitExpression_or?e.visitExpression_or(this):e.visitChildren(this)}}class ue extends A{constructor(e,t){super(e,t)}expression_basic(e){return e===void 0?this.getRuleContexts(J):this.getRuleContext(e,J)}expression_group(e){return e===void 0?this.getRuleContexts(G):this.getRuleContext(e,G)}expression_not(e){return e===void 0?this.getRuleContexts(V):this.getRuleContext(e,V)}AND(e){return e===void 0?this.getTokens(n.AND):this.getToken(n.AND,e)}expression_or(e){return e===void 0?this.getRuleContexts(ce):this.getRuleContext(e,ce)}get ruleIndex(){return n.RULE_expression_and}enterRule(e){e.enterExpression_and&&e.enterExpression_and(this)}exitRule(e){e.exitExpression_and&&e.exitExpression_and(this)}accept(e){return e.visitExpression_and?e.visitExpression_and(this):e.visitChildren(this)}}class G extends A{constructor(e,t){super(e,t)}L_PAREN(){return this.getToken(n.L_PAREN,0)}R_PAREN(){return this.getToken(n.R_PAREN,0)}expression_basic(){return this.getRuleContext(0,J)}expression_group(){return this.getRuleContext(0,G)}expression_or(){return this.getRuleContext(0,ce)}expression_and(){return this.getRuleContext(0,ue)}expression_not(){return this.getRuleContext(0,V)}get ruleIndex(){return n.RULE_expression_group}enterRule(e){e.enterExpression_group&&e.enterExpression_group(this)}exitRule(e){e.exitExpression_group&&e.exitExpression_group(this)}accept(e){return e.visitExpression_group?e.visitExpression_group(this):e.visitChildren(this)}}class V extends A{constructor(e,t){super(e,t)}NOT(){return this.getToken(n.NOT,0)}expression_basic(){return this.getRuleContext(0,J)}expression_group(){return this.getRuleContext(0,G)}expression_not(){return this.getRuleContext(0,V)}expression_or(){return this.getRuleContext(0,ce)}expression_and(){return this.getRuleContext(0,ue)}get ruleIndex(){return n.RULE_expression_not}enterRule(e){e.enterExpression_not&&e.enterExpression_not(this)}exitRule(e){e.exitExpression_not&&e.exitExpression_not(this)}accept(e){return e.visitExpression_not?e.visitExpression_not(this):e.visitChildren(this)}}class J extends A{constructor(e,t){super(e,t)}attribute(){return this.getRuleContext(0,Wt)}regexp(){return this.getRuleContext(0,tt)}OPERATOR_EQ(){return this.getToken(n.OPERATOR_EQ,0)}OPERATOR_NE(){return this.getToken(n.OPERATOR_NE,0)}get ruleIndex(){return n.RULE_expression_basic}enterRule(e){e.enterExpression_basic&&e.enterExpression_basic(this)}exitRule(e){e.exitExpression_basic&&e.exitExpression_basic(this)}accept(e){return e.visitExpression_basic?e.visitExpression_basic(this):e.visitChildren(this)}}class Wt extends A{constructor(e,t){super(e,t)}identifier(){return this.getRuleContext(0,$t)}qualifier(){return this.getRuleContext(0,Ft)}COLON(){return this.getToken(n.COLON,0)}get ruleIndex(){return n.RULE_attribute}enterRule(e){e.enterAttribute&&e.enterAttribute(this)}exitRule(e){e.exitAttribute&&e.exitAttribute(this)}accept(e){return e.visitAttribute?e.visitAttribute(this):e.visitChildren(this)}}class Ft extends A{constructor(e,t){super(e,t)}IDENTIFIER(){return this.getToken(n.IDENTIFIER,0)}WITHIN(){return this.getToken(n.WITHIN,0)}SIMPLE_WITHIN_SCOPE(){return this.getToken(n.SIMPLE_WITHIN_SCOPE,0)}REGEXP_FLAGS(){return this.getToken(n.REGEXP_FLAGS,0)}get ruleIndex(){return n.RULE_qualifier}enterRule(e){e.enterQualifier&&e.enterQualifier(this)}exitRule(e){e.exitQualifier&&e.exitQualifier(this)}accept(e){return e.visitQualifier?e.visitQualifier(this):e.visitChildren(this)}}class $t extends A{constructor(e,t){super(e,t)}IDENTIFIER(){return this.getToken(n.IDENTIFIER,0)}WITHIN(){return this.getToken(n.WITHIN,0)}SIMPLE_WITHIN_SCOPE(){return this.getToken(n.SIMPLE_WITHIN_SCOPE,0)}REGEXP_FLAGS(){return this.getToken(n.REGEXP_FLAGS,0)}get ruleIndex(){return n.RULE_identifier}enterRule(e){e.enterIdentifier&&e.enterIdentifier(this)}exitRule(e){e.exitIdentifier&&e.exitIdentifier(this)}accept(e){return e.visitIdentifier?e.visitIdentifier(this):e.visitChildren(this)}}class tt extends A{constructor(e,t){super(e,t)}regexp_pattern(){return this.getRuleContext(0,Vt)}FWD_SLASH(){return this.getToken(n.FWD_SLASH,0)}regexp_flag(){return this.getRuleContext(0,Kt)}get ruleIndex(){return n.RULE_regexp}enterRule(e){e.enterRegexp&&e.enterRegexp(this)}exitRule(e){e.exitRegexp&&e.exitRegexp(this)}accept(e){return e.visitRegexp?e.visitRegexp(this):e.visitChildren(this)}}class Vt extends A{constructor(e,t){super(e,t)}REGEXP(){return this.getToken(n.REGEXP,0)}get ruleIndex(){return n.RULE_regexp_pattern}enterRule(e){e.enterRegexp_pattern&&e.enterRegexp_pattern(this)}exitRule(e){e.exitRegexp_pattern&&e.exitRegexp_pattern(this)}accept(e){return e.visitRegexp_pattern?e.visitRegexp_pattern(this):e.visitChildren(this)}}class Kt extends A{constructor(e,t){super(e,t)}REGEXP_FLAGS(){return this.getToken(n.REGEXP_FLAGS,0)}get ruleIndex(){return n.RULE_regexp_flag}enterRule(e){e.enterRegexp_flag&&e.enterRegexp_flag(this)}exitRule(e){e.exitRegexp_flag&&e.exitRegexp_flag(this)}accept(e){return e.visitRegexp_flag?e.visitRegexp_flag(this):e.visitChildren(this)}}class Xt extends Gr{errors=[];syntaxError(e,t,s,a,d,f){this.errors.push(`Syntax error: ${d} at position ${a}`)}}function Te(r,e){if(!r||e===void 0)return!1;const t=Array.isArray(e)?e[0]:e,s=Array.isArray(e)?e[1]:e;if(r instanceof A&&r.start!==null&&r.stop!==null){const a=r.start.start,d=r.stop.stop+1;if(a<t&&t<d||a<s&&s<d||t===s&&(a===s||s===d)||t<=a&&d<=s)return!0}return!1}const zt=[{id:"text",label:"textual representation"},{id:"lemma",label:"lemmatization of tokens"},{id:"pos",label:"part-of-speech UD v2.0 tagset"},{id:"orth",label:"orthographic transcription"},{id:"norm",label:"orthographic normalization"},{id:"phonetic",label:"phonetic transcription SAMPA"}],yt=Object.fromEntries(zt.map(r=>[r.id,r])),Fr=[{id:"pos",operators:["is","is-not"],options:[{value:"ADJ",label:"Adjective"},{value:"ADV",label:"Adverb"},{value:"INTJ",label:"Interjection"},{value:"NOUN",label:"Noun"},{value:"PROPN",label:"Proper noun"},{value:"VERB",label:"Verb"},{value:"ADP",label:"Adposition"},{value:"AUX",label:"Auxiliary"},{value:"CCONJ",label:"Coordinating conjunction"},{value:"DET",label:"Determiner"},{value:"NUM",label:"Numeral"},{value:"PART",label:"Particle"},{value:"PRON",label:"Pronoun"},{value:"SCONJ",label:"Subordinating conjunction"},{value:"PUNCT",label:"Punctuation"},{value:"SYM",label:"Symbol"},{value:"X",label:"Other"}]}],bt=Object.fromEntries(Fr.map(r=>[r.id,r])),Yt=[{id:"is",label:"is",operator:"=",valueAfter:null,valueBefore:null,escape:!0},{id:"is-not",label:"is not",operator:"!=",valueAfter:null,valueBefore:null,escape:!0},{id:"contains",label:"contains",operator:"=",valueAfter:".*",valueBefore:".*",escape:!0},{id:"starts-with",label:"starts with",operator:"=",valueAfter:".*",valueBefore:null,escape:!0},{id:"ends-with",label:"ends with",operator:"=",valueAfter:null,valueBefore:".*",escape:!0},{id:"regex",label:"regex",operator:"=",valueAfter:null,valueBefore:null,escape:!1},{id:"not-regex",label:"not regex",operator:"!=",valueAfter:null,valueBefore:null,escape:!1}],$e=Object.fromEntries(Yt.map(r=>[r.id,r])),$r="?",ie='text = ""',Vr=["sentence","s","utterance","u","paragraph","p","turn","t","text","session"],Zt=[{id:"*",label:"Zero or More",type:"symbol",new:"*"},{id:"+",label:"One or More",type:"symbol",new:"+"},{id:"?",label:"Zero or One",type:"symbol",new:"?"},{id:"n-n",label:"Exactly N",type:"range",new:"{1}"},{id:"n-m",label:"N to M",type:"range",new:"{0,1}"},{id:"n-",label:"At least N",type:"range",new:"{0,}"},{id:"-m",label:"At most M",type:"range",new:"{,1}"}],Kr=Object.fromEntries(Zt.map(r=>[r.id,r])),Jt=[{id:"token",label:"Normal Token",new:`[ ${ie} ]`},{id:"unspecific-token",label:"Unspecific Token",new:"[]"},{id:"string",label:"Plain String",new:'""'}],Ve=Object.fromEntries(Jt.map(r=>[r.id,r])),er=[{id:"basic",label:"Expression",new:`${ie}`},{id:"or",label:"OR",new:`${ie} | ${ie}`},{id:"and",label:"AND",new:`${ie} & ${ie}`}],Oe=Object.fromEntries(er.map(r=>[r.id,r])),tr=[{id:"or",label:"OR",newBefore:`${ie} |`,newAfter:`| ${ie}`},{id:"and",label:"AND",newBefore:`${ie} &`,newAfter:`& ${ie}`}],Xr=Object.fromEntries(tr.map(r=>[r.id,r])),rr=[{id:"group",label:"Group",newBefore:"(",newAfter:")"},{id:"not",label:"Negation",newBefore:"!",newAfter:null}],At=Object.fromEntries(rr.map(r=>[r.id,r])),rt=h.createContext(void 0);rt.displayName="FCSParserLexerContext";function zr({parser:r,lexer:e,cursorPos:t,children:s}){const a={parser:r,lexer:e,cursorPos:t};return i.jsx(rt.Provider,{value:a,children:s})}function ir(){const r=h.useContext(rt);if(!r)throw new Error('No parser and lexer "data" set, use FCSParserLexerProvider to set');return r}const it=h.createContext(void 0);it.displayName="FCSQueryBuilderConfigContext";function Yr({enableWithin:r=!0,enableWrapGroup:e=!0,enableWrapNegation:t=!0,enableImplicitQuery:s=!0,enableMultipleQuerySegments:a=!0,enableQuantifiers:d=!0,enableRegexpFlags:f=!0,showBasicLayer:u=!0,showAllAdvancedLayers:c=!0,showCustomLayers:p=!0,showLayerQualifiers:m=!0,showResourceCountForLayer:w=!0,children:_}){const R={enableWithin:r,enableWrapGroup:e,enableWrapNegation:t,enableImplicitQuery:s,enableMultipleQuerySegments:a,enableQuantifiers:d,enableRegexpFlags:f,showBasicLayer:u,showAllAdvancedLayers:c,showCustomLayers:p,showLayerQualifiers:m,showResourceCountForLayer:w};return i.jsx(it.Provider,{value:R,children:_})}function be(){const r=h.useContext(it);if(!r)throw new Error('No flags "data" set, use FCSQueryBuilderConfigProvider to set');return r}const st=h.createContext(void 0);st.displayName="FCSQueryUpdaterContext";function Zr({rewriter:r,children:e}){const t={rewriter:r};return i.jsx(st.Provider,{value:t,children:e})}function Ae(){const r=h.useContext(st);if(!r)throw new Error('No rewriter "data" set, use FCSQueryUpdaterProvider to set');return r}const nt=h.createContext(void 0);nt.displayName="FCSResourceLayerInfoContext";function Jr({resources:r,layerInfo:e,children:t}){const s={resources:r,layerInfo:e};return i.jsx(nt.Provider,{value:s,children:t})}function ei(){const r=h.useContext(nt);if(!r)throw new Error('No resources and layer info "data" set, use FCSResourceLayerInfoProvider to set');return r}class q extends Qt{static L_PAREN=1;static R_PAREN=2;static L_SQUARE_BRACKET=3;static R_SQUARE_BRACKET=4;static OR=5;static AND=6;static NOT=7;static FWD_SLASH=8;static L_CURLY_BRACKET=9;static R_CURLY_BRACKET=10;static Q_ONE_OR_MORE=11;static Q_ZERO_OR_MORE=12;static Q_ZERO_OR_ONE=13;static Q_COMMA=14;static OPERATOR_EQ=15;static OPERATOR_NE=16;static COLON=17;static WITHIN=18;static SIMPLE_WITHIN_SCOPE=19;static REGEXP_FLAGS=20;static IDENTIFIER=21;static INTEGER=22;static REGEXP=23;static QUOTED_STRING=24;static Space=25;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,"'('","')'","'['","']'","'|'","'&'","'!'","'/'","'{'","'}'","'+'","'*'","'?'","','","'='","'!='","':'","'within'"];static symbolicNames=[null,"L_PAREN","R_PAREN","L_SQUARE_BRACKET","R_SQUARE_BRACKET","OR","AND","NOT","FWD_SLASH","L_CURLY_BRACKET","R_CURLY_BRACKET","Q_ONE_OR_MORE","Q_ZERO_OR_MORE","Q_ZERO_OR_ONE","Q_COMMA","OPERATOR_EQ","OPERATOR_NE","COLON","WITHIN","SIMPLE_WITHIN_SCOPE","REGEXP_FLAGS","IDENTIFIER","INTEGER","REGEXP","QUOTED_STRING","Space"];static modeNames=["DEFAULT_MODE"];static ruleNames=["L_PAREN","R_PAREN","L_SQUARE_BRACKET","R_SQUARE_BRACKET","OR","AND","NOT","FWD_SLASH","L_CURLY_BRACKET","R_CURLY_BRACKET","Q_ONE_OR_MORE","Q_ZERO_OR_MORE","Q_ZERO_OR_ONE","Q_COMMA","OPERATOR_EQ","OPERATOR_NE","COLON","WITHIN","SIMPLE_WITHIN_SCOPE","REGEXP_FLAGS","IDENTIFIER_FIRST_CHAR","IDENTIFIER_LAST_CHAR","IDENTIFIER_CHAR","IDENTIFIER","INTEGER","REGEXP","QUOTED_STRING","CHAR","WS","ESCAPED_CHAR","HEX","Space"];constructor(e){super(e),this.interpreter=new kt(this,q._ATN,q.decisionsToDFA,new Ue)}get grammarFileName(){return"FCSLexer.g4"}get literalNames(){return q.literalNames}get symbolicNames(){return q.symbolicNames}get ruleNames(){return q.ruleNames}get serializedATN(){return q._serializedATN}get channelNames(){return q.channelNames}get modeNames(){return q.modeNames}static _serializedATN=[4,0,25,238,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,2,29,7,29,2,30,7,30,2,31,7,31,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,1,5,1,5,1,6,1,6,1,7,1,7,1,8,1,8,1,9,1,9,1,10,1,10,1,11,1,11,1,12,1,12,1,13,1,13,1,14,1,14,1,15,1,15,1,15,1,16,1,16,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,3,18,153,8,18,1,19,4,19,156,8,19,11,19,12,19,157,1,20,1,20,1,21,1,21,1,22,1,22,1,23,1,23,5,23,168,8,23,10,23,12,23,171,9,23,1,23,3,23,174,8,23,1,24,4,24,177,8,24,11,24,12,24,178,1,25,1,25,1,26,1,26,1,26,5,26,186,8,26,10,26,12,26,189,9,26,1,26,1,26,1,26,1,26,5,26,195,8,26,10,26,12,26,198,9,26,1,26,3,26,201,8,26,1,27,1,27,3,27,205,8,27,1,28,1,28,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,3,29,231,8,29,1,30,1,30,1,31,1,31,1,31,1,31,0,0,32,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,35,18,37,19,39,20,41,0,43,0,45,0,47,21,49,22,51,23,53,24,55,0,57,0,59,0,61,0,63,25,1,0,10,5,0,67,67,73,73,99,100,105,105,108,108,2,0,65,90,97,122,3,0,48,57,65,90,97,122,4,0,45,45,48,57,65,90,97,122,1,0,48,57,2,0,39,39,92,92,2,0,34,34,92,92,10,0,9,13,32,32,133,133,160,160,5760,5760,8192,8202,8232,8233,8239,8239,8287,8287,12288,12288,9,0,34,34,36,36,39,43,46,46,63,63,91,94,110,110,116,116,123,125,3,0,48,57,65,70,97,102,252,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,0,35,1,0,0,0,0,37,1,0,0,0,0,39,1,0,0,0,0,47,1,0,0,0,0,49,1,0,0,0,0,51,1,0,0,0,0,53,1,0,0,0,0,63,1,0,0,0,1,65,1,0,0,0,3,67,1,0,0,0,5,69,1,0,0,0,7,71,1,0,0,0,9,73,1,0,0,0,11,75,1,0,0,0,13,77,1,0,0,0,15,79,1,0,0,0,17,81,1,0,0,0,19,83,1,0,0,0,21,85,1,0,0,0,23,87,1,0,0,0,25,89,1,0,0,0,27,91,1,0,0,0,29,93,1,0,0,0,31,95,1,0,0,0,33,98,1,0,0,0,35,100,1,0,0,0,37,152,1,0,0,0,39,155,1,0,0,0,41,159,1,0,0,0,43,161,1,0,0,0,45,163,1,0,0,0,47,165,1,0,0,0,49,176,1,0,0,0,51,180,1,0,0,0,53,200,1,0,0,0,55,204,1,0,0,0,57,206,1,0,0,0,59,208,1,0,0,0,61,232,1,0,0,0,63,234,1,0,0,0,65,66,5,40,0,0,66,2,1,0,0,0,67,68,5,41,0,0,68,4,1,0,0,0,69,70,5,91,0,0,70,6,1,0,0,0,71,72,5,93,0,0,72,8,1,0,0,0,73,74,5,124,0,0,74,10,1,0,0,0,75,76,5,38,0,0,76,12,1,0,0,0,77,78,5,33,0,0,78,14,1,0,0,0,79,80,5,47,0,0,80,16,1,0,0,0,81,82,5,123,0,0,82,18,1,0,0,0,83,84,5,125,0,0,84,20,1,0,0,0,85,86,5,43,0,0,86,22,1,0,0,0,87,88,5,42,0,0,88,24,1,0,0,0,89,90,5,63,0,0,90,26,1,0,0,0,91,92,5,44,0,0,92,28,1,0,0,0,93,94,5,61,0,0,94,30,1,0,0,0,95,96,5,33,0,0,96,97,5,61,0,0,97,32,1,0,0,0,98,99,5,58,0,0,99,34,1,0,0,0,100,101,5,119,0,0,101,102,5,105,0,0,102,103,5,116,0,0,103,104,5,104,0,0,104,105,5,105,0,0,105,106,5,110,0,0,106,36,1,0,0,0,107,108,5,115,0,0,108,109,5,101,0,0,109,110,5,110,0,0,110,111,5,116,0,0,111,112,5,101,0,0,112,113,5,110,0,0,113,114,5,99,0,0,114,153,5,101,0,0,115,153,5,115,0,0,116,117,5,117,0,0,117,118,5,116,0,0,118,119,5,116,0,0,119,120,5,101,0,0,120,121,5,114,0,0,121,122,5,97,0,0,122,123,5,110,0,0,123,124,5,99,0,0,124,153,5,101,0,0,125,153,5,117,0,0,126,127,5,112,0,0,127,128,5,97,0,0,128,129,5,114,0,0,129,130,5,97,0,0,130,131,5,103,0,0,131,132,5,114,0,0,132,133,5,97,0,0,133,134,5,112,0,0,134,153,5,104,0,0,135,153,5,112,0,0,136,137,5,116,0,0,137,138,5,117,0,0,138,139,5,114,0,0,139,153,5,110,0,0,140,153,5,116,0,0,141,142,5,116,0,0,142,143,5,101,0,0,143,144,5,120,0,0,144,153,5,116,0,0,145,146,5,115,0,0,146,147,5,101,0,0,147,148,5,115,0,0,148,149,5,115,0,0,149,150,5,105,0,0,150,151,5,111,0,0,151,153,5,110,0,0,152,107,1,0,0,0,152,115,1,0,0,0,152,116,1,0,0,0,152,125,1,0,0,0,152,126,1,0,0,0,152,135,1,0,0,0,152,136,1,0,0,0,152,140,1,0,0,0,152,141,1,0,0,0,152,145,1,0,0,0,153,38,1,0,0,0,154,156,7,0,0,0,155,154,1,0,0,0,156,157,1,0,0,0,157,155,1,0,0,0,157,158,1,0,0,0,158,40,1,0,0,0,159,160,7,1,0,0,160,42,1,0,0,0,161,162,7,2,0,0,162,44,1,0,0,0,163,164,7,3,0,0,164,46,1,0,0,0,165,173,3,41,20,0,166,168,3,45,22,0,167,166,1,0,0,0,168,171,1,0,0,0,169,167,1,0,0,0,169,170,1,0,0,0,170,172,1,0,0,0,171,169,1,0,0,0,172,174,3,43,21,0,173,169,1,0,0,0,173,174,1,0,0,0,174,48,1,0,0,0,175,177,7,4,0,0,176,175,1,0,0,0,177,178,1,0,0,0,178,176,1,0,0,0,178,179,1,0,0,0,179,50,1,0,0,0,180,181,3,53,26,0,181,52,1,0,0,0,182,187,5,39,0,0,183,186,3,59,29,0,184,186,8,5,0,0,185,183,1,0,0,0,185,184,1,0,0,0,186,189,1,0,0,0,187,185,1,0,0,0,187,188,1,0,0,0,188,190,1,0,0,0,189,187,1,0,0,0,190,201,5,39,0,0,191,196,5,34,0,0,192,195,3,59,29,0,193,195,8,6,0,0,194,192,1,0,0,0,194,193,1,0,0,0,195,198,1,0,0,0,196,194,1,0,0,0,196,197,1,0,0,0,197,199,1,0,0,0,198,196,1,0,0,0,199,201,5,34,0,0,200,182,1,0,0,0,200,191,1,0,0,0,201,54,1,0,0,0,202,205,3,59,29,0,203,205,8,7,0,0,204,202,1,0,0,0,204,203,1,0,0,0,205,56,1,0,0,0,206,207,7,7,0,0,207,58,1,0,0,0,208,230,5,92,0,0,209,231,7,8,0,0,210,211,5,120,0,0,211,212,3,61,30,0,212,213,3,61,30,0,213,231,1,0,0,0,214,215,5,117,0,0,215,216,3,61,30,0,216,217,3,61,30,0,217,218,3,61,30,0,218,219,3,61,30,0,219,231,1,0,0,0,220,221,5,85,0,0,221,222,3,61,30,0,222,223,3,61,30,0,223,224,3,61,30,0,224,225,3,61,30,0,225,226,3,61,30,0,226,227,3,61,30,0,227,228,3,61,30,0,228,229,3,61,30,0,229,231,1,0,0,0,230,209,1,0,0,0,230,210,1,0,0,0,230,214,1,0,0,0,230,220,1,0,0,0,231,60,1,0,0,0,232,233,7,9,0,0,233,62,1,0,0,0,234,235,3,57,28,0,235,236,1,0,0,0,236,237,6,31,0,0,237,64,1,0,0,0,13,0,152,157,169,173,178,185,187,194,196,200,204,230,1,0,1,0];static __ATN;static get _ATN(){return q.__ATN||(q.__ATN=new Me().deserialize(q._serializedATN)),q.__ATN}static vocabulary=new qe(q.literalNames,q.symbolicNames,[]);get vocabulary(){return q.vocabulary}static decisionsToDFA=q._ATN.decisionToState.map((e,t)=>new He(e,t))}class ti extends Dr{visitQuery;visitMain_query;visitQuery_disjunction;visitQuery_sequence;visitQuery_group;visitQuery_simple;visitQuantifier;visitQuery_implicit;visitQuery_segment;visitWithin_part;visitWithin_part_simple;visitExpression;visitExpression_or;visitExpression_and;visitExpression_group;visitExpression_not;visitExpression_basic;visitAttribute;visitQualifier;visitIdentifier;visitRegexp;visitRegexp_pattern;visitRegexp_flag}function sr(r){if(!r||!r.trim())return null;const e=jt.fromString(r),t=new q(e),s=new Ut(t),a=new Mt(s),d=new n(s),f=new Xt;return t.removeErrorListeners(),t.addErrorListener(f),d.removeErrorListeners(),d.addErrorListener(f),{tree:d.query(),lexer:t,parser:d,rewriter:a,errors:f.errors}}class ri extends ti{layers=[];visitAttribute=e=>{this.layers.push(e.getText())}}function ii(r){const e=new ri;r&&e.visit(r);const t=e.layers;return[...new Set(t)]}function si(r,e){const t=e.filter(c=>c!=="word").filter(c=>c!=="text");if(t.length===0||r.length===0)return{supported:r,unsupported:[],unsupportedByLayer:new Map};const s=t.map(c=>c.split(":").toReversed()),a=r.map(c=>{const p=[];return s.forEach(([m,w])=>{w?c.availableLayers?.find(_=>_.layerType===m&&_.qualifier===w)||p.push(`${w}:${m}`):c.availableLayers?.find(_=>_.layerType===m)||p.push(m)}),[c,p]}),d=a.filter(([,c])=>c.length===0).map(([c])=>c),f=a.filter(([,c])=>c.length!==0),u=f.map(([c,p])=>p.map(m=>[m,c])).flat(1).reduce((c,[p,m])=>(c.has(p)||c.set(p,[]),c.get(p).push(m),c),new Map);return{supported:d,unsupported:f,unsupportedByLayer:u}}const ni=/([\^$\\.*+?()[\]{}|/])/g,ai=/\\([\^$\\.*+?()[\]{}|/])/g,oi=/(^|[^\\])([\^$.*+?()[\]{}|/])/g,nr=/(^|[^\\])((?:\\{2})*['"])/g,ar=/(^|[^\\])\\((?:\\{2})*['"])/g;function Ct(r){if(!r)return r;let e=r;return e=e.replace(ni,"\\$1"),e=e.replace(nr,"$1\\$2"),e}function li(r){if(!r)return r;let e=r;return e=e.replace(ar,"$1$2"),e=e.replace(ai,"$1"),e}function ci(r){return r?r.replace(oi,"\\$1$2")!==r:!1}function Ke(r){return r&&r.replaceAll("\\","\\\\").replace(nr,"$1\\$2")}function or(r){return r&&r.replace(ar,"$1$2").replaceAll("\\\\","\\")}const ui=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-braces" viewBox="0 0 16 16">
  <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6M13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6"/>
</svg>`,Ge=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
</svg>`,hi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16">
  <path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/>
</svg>`,lr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
</svg>`;function di({query:r,cursorPos:e,resources:t,onChange:s,...a}){const[d,f]=h.useState(r??"");h.useEffect(()=>f(r??""),[r]);const u=h.useMemo(()=>{const _=t?.filter(R=>(R.availableDataViews?.find(x=>x.mimeType==="application/x-clarin-fcs-adv+xml")!==void 0||R.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))&&R.availableLayers!==null&&R.availableLayers.length>0)??[];if(t&&t.length!==_.length){const R=t.filter(x=>!_.includes(x));console.warn("Filter out resource(s) that do(es) not correctly declare ADV query support",R)}return _},[t]),c=h.useMemo(()=>u.map(_=>{const R=new Map;return _.availableLayers.forEach(x=>{R.has(x.layerType)||R.set(x.layerType,{resultIDs:[],qualifiers:[]});const L=R.get(x.layerType);L.resultIDs.push(x.resultId),x.qualifier!==null&&L.qualifiers.push(x.qualifier)}),[...R.entries()].map(([x,L])=>({layerType:x,resource:_,layerIDs:L}))}).reduce((_,R)=>(R.forEach(({layerType:x,resource:L,layerIDs:T})=>{_.has(x)||_.set(x,{resources:[],qualifiers:new Map});const k=_.get(x);k.resources.push({resource:L,layerIDs:T}),T.qualifiers.length>0&&T.qualifiers.forEach(I=>{k.qualifiers.has(I)||k.qualifiers.set(I,[]),k.qualifiers.get(I).push(L)})}),_),new Map),[u]),p=h.useMemo(()=>sr(d),[d]);function m(){if(p){const{rewriter:_}=p,R=_.getText();f(R),s?.(R)}else console.warn("No parsed query! Unable to handle change request",p)}function w(_){const R=Ve[_].new;f(R),s?.(R)}return i.jsx("div",{id:"query-builder",className:"fcs-query d-flex justify-content-center",children:i.jsx(Yr,{enableWithin:a.enableWithin??!1,enableWrapGroup:a.enableWrapGroup??!1,enableWrapNegation:a.enableWrapNegation??!1,enableImplicitQuery:a.enableImplicitQuery??!1,enableMultipleQuerySegments:a.enableMultipleQuerySegments??!0,enableQuantifiers:a.enableQuantifiers??!0,enableRegexpFlags:a.enableRegexpFlags??!1,showBasicLayer:a.showBasicLayer??!0,showAllAdvancedLayers:a.showAllAdvancedLayers??!1,showCustomLayers:a.showCustomLayers??!0,showLayerQualifiers:a.showLayerQualifiers??!0,showResourceCountForLayer:a.showResourceCountForLayer??!0,children:i.jsx(Jr,{resources:u,layerInfo:c,children:p?i.jsx(zr,{parser:p.parser,lexer:p.lexer,cursorPos:e,children:i.jsx(Zr,{rewriter:p.rewriter,children:i.jsx(pi,{tree:p.tree,onChange:m})})}):i.jsx(Xe,{onClick:w})})})})}function cr(r,e=!0){if(r instanceof Be){if(e)throw Error("Unsupported syntax: Query-Disjunction");return[]}if(r instanceof pe){if(e)throw Error("Unsupported syntax: Query-Group");return[]}if(r instanceof _e)return[r];if(r instanceof ye)return r.children.map(t=>cr(t,e)).flat(1);if(e)throw Error(`Invalid ParseTree for tokens ${r.getSourceInterval().toString()}: ${r.getText()}`);return[]}function Qe(r,e){e.delete(r.start,r.stop);const t=r.parent;if(t instanceof ue||t instanceof ce){if(t.children.length===1){Qe(t,e);return}const s=t.children.findIndex(a=>a===r);if(s===0){const a=t.getChild(s+1);e.delete(a.symbol)}else{const a=t.getChild(s-1);e.delete(a.symbol)}if(t.children.length===3){const a=t.parent,d=t.getChild(s+(s===0?2:-2));a instanceof G&&d instanceof G&&(e.delete(d.L_PAREN().symbol),e.delete(d.R_PAREN().symbol))}return}if(t instanceof G){Qe(t,e);return}if(t instanceof V){Qe(t,e);return}console.warn("Unexpected other parent to remove?",{parentCtx:t,ctx:r})}function Xe({onClick:r}){const{enableImplicitQuery:e}=be();function t(s){s&&r?.(s)}return i.jsx(i.Fragment,{children:i.jsxs(y,{className:"d-inline-block",onSelect:t,"aria-label":"Add query segment",children:[i.jsx(y.Toggle,{variant:"link",className:"add-query-segment-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(y.Menu,{children:Jt.filter(e?()=>!0:s=>s.id!=="string").map(s=>i.jsx(y.Item,{eventKey:s.id,children:s.label},s.id))})]})})}function ze({allowedIds:r,onClick:e}){function t(s){s&&e?.(s)}return i.jsx(i.Fragment,{children:i.jsxs(y,{className:"d-inline-block",onSelect:t,"aria-label":"Add expression",children:[i.jsx(y.Toggle,{variant:"link",className:"add-expression-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(y.Menu,{children:er.filter(r&&r.length>0?s=>r.includes(s.id):()=>!0).map(s=>i.jsx(y.Item,{eventKey:s.id,children:s.label},s.id))})]})})}function Nt({className:r,onClick:e}){function t(s){s&&e?.(s)}return i.jsx(i.Fragment,{children:i.jsxs(y,{className:["d-inline-block"].concat(r??[]).join(" "),onSelect:t,"aria-label":"Change to expressions list",children:[i.jsx(y.Toggle,{variant:"link",className:"change-to-expression-list-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(y.Menu,{children:tr.map(s=>i.jsx(y.Item,{eventKey:s.id,children:s.label},s.id))})]})})}function fi({allowedIds:r,className:e,onClick:t}){const{enableWrapGroup:s,enableWrapNegation:a}=be();function d(f){f&&t?.(f)}return s||a?i.jsx(i.Fragment,{children:i.jsxs(y,{className:["d-inline-block"].concat(e??[]).join(" "),onSelect:d,"aria-label":"Wrap expression",children:[i.jsx(y.Toggle,{variant:"link",className:"wrap-expression-btn action-btn rounded-circle p-1 no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:ui},"aria-hidden":"true"})}),i.jsx(y.Menu,{children:rr.filter(r&&r.length>0?f=>r.includes(f.id):()=>!0).filter(s?()=>!0:f=>f.id!=="group").filter(a?()=>!0:f=>f.id!=="not").map(f=>i.jsx(y.Item,{eventKey:f.id,children:f.label},f.id))})]})}):null}function De({className:r,onClick:e}){return i.jsx(ge,{variant:"link",className:["del-btn action-btn rounded-circle p-1"].concat(r??[]).join(" "),onClick:e,children:i.jsx("i",{dangerouslySetInnerHTML:{__html:lr},"aria-hidden":"true"})})}function xi({className:r,onClick:e}){return i.jsx(ge,{variant:"link",className:["add-quantifier-btn action-btn rounded-circle p-1"].concat(r??[]).join(" "),onClick:e,children:i.jsx("i",{dangerouslySetInnerHTML:{__html:hi},"aria-hidden":"true"})})}function pi({tree:r,onChange:e}){const{rewriter:t}=Ae(),{enableWithin:s}=be(),a=r.main_query(),d=a.getChild(0),f=cr(d,!1),u=s?r.within_part():null,c=u?.getText()??"",[p,m]=h.useState(c);h.useEffect(()=>m(c),[c]);function w(){const x="sentence";m(x);const L=a.stop?.tokenIndex;L!==void 0?(t.insertAfter(L,` within ${x}`),e?.()):console.warn("Unable to add within part. End token index not found!",{queryCtx:a})}function _(x){const L=x.target.value;if(m(L),u){const T=u.within_part_simple(),k=T?.SIMPLE_WITHIN_SCOPE();k?(t.replaceSingle(k.symbol,L),e?.()):console.warn("Error trying to update within part. Token not found!",{withinCtx:u,withinPartCtx:T,token:k})}else console.warn("Error trying to update within part. Context not found!",{tree:r,withinCtx:u})}function R(){u?(m(""),t.delete(r.WITHIN().symbol,u.stop),e?.()):console.warn("Error trying to remove within part. Context not found!",{tree:r,withinCtx:u})}return i.jsxs("div",{className:"block query flex-grow-1 justify-content-center d-flex flex-wrap row-gap-2 column-gap-1 border rounded p-1",children:[i.jsx(_i,{children:f,onChange:e}),s&&(p?i.jsxs("div",{className:"block within-clause position-relative d-flex column-gap-2 align-items-center border rounded p-1",children:[i.jsx("code",{className:"keyword",children:"within"}),i.jsx(v.Select,{className:"w-auto",value:p,onChange:_,children:Vr.map(x=>i.jsx("option",{value:x,children:x},x))}),i.jsx(De,{className:"del-within-clause-btn position-absolute top-0 start-100 translate-middle",onClick:R})]}):i.jsx(ge,{size:"sm",onClick:w,style:{alignSelf:"center"},children:"Add within clause"}))]})}function _i({children:r,onChange:e}){const{rewriter:t}=Ae(),{enableMultipleQuerySegments:s}=be(),a=h.useCallback(f=>{const u=r&&r.length>0?r[0].start.tokenIndex:0,c=Ve[f].new;t.insertBefore(u,`${c} `),e?.()},[t,r,e]),d=h.useCallback((f,u)=>{const c=u.stop.tokenIndex,p=Ve[f].new;t.insertAfter(c,` ${p}`),e?.()},[t,e]);return i.jsxs("div",{className:"block query-simple-or-sequence border rounded py-1 px-2 d-flex flex-wrap row-gap-3 column-gap-2 align-items-center",children:[s&&i.jsx(Xe,{onClick:a},"add-0"),r.map(f=>i.jsxs(h.Fragment,{children:[i.jsx(Ei,{ctx:f,onChange:e}),s&&i.jsx(Xe,{onClick:u=>d(u,f)})]},`query-${f.getSourceInterval().toString()}`))]})}function Ri({value:r,onChange:e}){const[t,s]=h.useState(r);return h.useEffect(()=>s(r),[r]),i.jsx(v.Control,{className:"d-inline",style:{width:"10ch"},value:t,onChange:a=>s(a.target.value),onBlur:()=>e?.(t)})}function at({ctx:r,showChangeToExpressionListButton:e=!1,onChange:t}){const{rewriter:s}=Ae(),{layerInfo:a}=ei(),{showBasicLayer:d,showAllAdvancedLayers:f,showCustomLayers:u,showLayerQualifiers:c,showResourceCountForLayer:p}=be(),{cursorPos:m}=ir(),w=Te(r,m),_="word",R=Object.keys(yt),x=[_,...R],L=u?[...a.keys()].filter(l=>!x.includes(l)).toSorted():[],T=a.has(_),k=[...a.keys()].filter(l=>Object.keys(yt).includes(l)).length>0,I=L.length>0,B=r.attribute(),z=r.getChild(1),F=r.regexp().regexp_pattern().REGEXP(),[D,Y]=h.useState("text"),[$,U]=h.useState("is"),[O,ee]=h.useState(""),te=h.useRef($);h.useEffect(()=>{const l=B.identifier(),b=B.qualifier(),j=b!==null?`${b.getText()}:${l.getText()}`:`${l.getText()}`,M=z.symbol.type===n.OPERATOR_EQ,se=F.symbol.text?.slice(1,-1),de=Le(se??"",M);let ne=de.operator,fe=Re(de.value,ne);te.current!==ne&&["regex","not-regex"].includes(te.current)&&(te.current,ne=te.current);const xe=bt[j];xe&&xe.options&&xe.options.length>0&&(!xe.options.map(Se=>Se.value).includes(fe)||!fe)&&(fe=xe.options[0]?.value??"",ne="is"),Y(j??""),U(ne),ee(fe),te.current=ne},[B,z,F]);const he=r.parent,Ne=Object.keys(At).filter(he instanceof G?l=>l!=="group":()=>!0).filter(he instanceof V?l=>l!=="group":()=>!0),ae=bt[D];function Le(l,b){const j=l.startsWith(".*"),M=l.endsWith(".*"),W=j&&M?l.slice(2,-2):j?l.slice(2):M?l.slice(0,-2):l;return ci(W)?{operator:b?"regex":"not-regex",value:l}:b?j&&M?{operator:"contains",value:W}:j?{operator:"ends-with",value:l.slice(2)}:M?{operator:"starts-with",value:l.slice(0,-2)}:{operator:"is",value:l}:j||M?{operator:"not-regex",value:l}:{operator:"is-not",value:l}}function Re(l,b){return["regex","not-regex"].includes(b)?or(l):li(l)}function we(l,b){return["regex","not-regex"].includes(b)?Ke(l):Ct(l)}function g(l){const b=l;b&&b!==D&&(Y(b),s.replace(B.start,B.stop,b),t?.())}function C(l){const b=l.target.value,j=$;U(b),te.current=b;const M=["is-not","not-regex"].includes(b)?"!=":"=";s.replaceSingle(z.symbol,M);let W=O??"";const se=$e[b],de=$e[j];if(!se){console.warn("Unexpected state, did not find known operator value!",{newOpInfo:se,oldOpInfo:de,newOperator:b,oldOperator:j});return}W=we(W,b),s.replaceSingle(F.symbol,`"${se.valueBefore??""}${W}${se.valueAfter??""}"`),t?.()}function Q(){const l=["regex","not-regex"].includes($)?Ke(O):Ct(O),b=$e[$];s.replaceSingle(F.symbol,`"${b?.valueBefore??""}${l}${b?.valueAfter??""}"`),t?.()}function S(l,b){const j=Xr[l];b?s.insertBefore(r.start,`${j.newBefore} `):s.insertAfter(r.stop,` ${j.newAfter}`),t?.()}function Z(l){const b=At[l];b.newBefore&&s.insertBefore(r.start,b.newBefore),b.newAfter&&s.insertAfter(r.stop,b.newAfter),t?.()}function re(){Qe(r,s),t?.()}function K(l,b=void 0){return b?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:l}),": ",b,P(l)]}):i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:l}),P(l)]})}function P(l,b=void 0){if(!p)return null;const j=a.get(l)?.resources.length??0,M=b?a.get(l)?.qualifiers?.get(b)?.length??0:void 0;if(b&&j===M)return null;const W=b?M:j;return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsxs("small",{className:"text-body-secondary",children:["Supported by ",W," resources."]})]})}function oe(l){if(!c)return null;const b=a.get(l)?.qualifiers;return!b||b.size===0?null:[...b.keys()].map(M=>{const W=`${M}:${l}`;return i.jsx(y.Item,{eventKey:W,active:D===W,children:i.jsxs("div",{className:"ms-3",children:[i.jsx("strong",{children:M}),":",l,P(l,M)]})},W)})}function We(){return ae&&ae.options?.length>0?i.jsxs(y,{onSelect:l=>ee(l??""),onBlur:Q,children:[i.jsx(y.Toggle,{className:"form-select",children:O}),i.jsx(y.Menu,{children:ae.options.map(l=>i.jsx(y.Item,{eventKey:l.value,active:O===l.value,children:l.label},l.value))})]}):i.jsx(v.Control,{className:"d-inline",style:{width:"10ch"},value:O,onChange:l=>ee(l.target.value),onBlur:Q})}return i.jsxs("div",{className:["block input-block basic-expression position-relative focus-ring border rounded py-3 ps-2 pe-3 my-2 ms-1 me-2"].concat([w?"cursor-focus":""]).join(" "),children:[e&&i.jsx(Nt,{className:"position-absolute top-0 start-50 translate-middle rounded-circle p-1",onClick:l=>S(l,!0)}),i.jsxs("div",{className:"d-flex justify-content-center column-gap-2",children:[i.jsxs(y,{onSelect:g,children:[i.jsx(y.Toggle,{className:"form-select",children:D}),i.jsx(y.Menu,{children:i.jsxs("div",{className:"d-flex",children:[i.jsxs("div",{className:[].concat(u&&I?["border-end pe-1"]:[]).join(" "),children:[d&&i.jsxs(i.Fragment,{children:[i.jsx(y.Header,{children:"Basic Search Layer"}),i.jsx(y.Item,{eventKey:_,active:D===_,children:K(_)}),i.jsx(y.Divider,{})]}),(d||u&&L.length>0)&&i.jsx(y.Header,{children:"Advanced Search Layers"}),zt.filter(f?()=>!0:l=>a.has(l.id)).map(l=>i.jsxs(h.Fragment,{children:[i.jsxs(y.Item,{eventKey:l.id,active:D===l.id,children:[i.jsx("strong",{children:l.id}),": ",l.label,P(l.id)]}),oe(l.id)]},l.id)),!d&&!f&&L.length===0&&i.jsxs(y.ItemText,{style:{width:"max-content"},children:[i.jsx("em",{className:"text-warning-emphasis",children:"No supported layers available?!"}),i.jsx("br",{}),i.jsx("em",{className:"text-secondary",children:"Maybe select a few more resources."})]})]}),i.jsx("div",{className:[].concat(d&&T||k?["ps-1"]:[]).join(" "),children:u&&L.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(y.Header,{children:"Custom Layers"}),L.map(l=>i.jsxs(h.Fragment,{children:[i.jsxs(y.Item,{eventKey:l,active:D===l,children:[i.jsx("strong",{children:l}),P(l)]}),oe(l)]},l))]})})]})})]}),i.jsx(v.Select,{style:{width:"fit-content"},value:$,onChange:C,children:Yt.map(l=>i.jsx("option",{value:l.id,children:l.label},l.id))}),We()]}),e&&i.jsx(Nt,{className:"position-absolute top-100 start-50 translate-middle rounded-circle p-1",onClick:l=>S(l,!1)}),i.jsxs("div",{className:"actions position-absolute top-0 d-flex",children:[i.jsx(fi,{allowedIds:Ne,onClick:Z}),i.jsx(De,{onClick:re})]})]})}function mi({ctx:r,onChange:e}){const{rewriter:t}=Ae(),s=r.Q_ZERO_OR_MORE()!==null,a=r.Q_ONE_OR_MORE()!==null,d=r.Q_ZERO_OR_ONE()!==null,f=!(s||a||d),u=r.getChildCount(),c=u>=4,p=f&&(u===3||r.Q_COMMA()===r.getChild(2))?r.getChild(1).symbol:null,m=f&&u>=4&&r.Q_COMMA()===r.getChild(u-3)?r.getChild(u-2).symbol:null,w=p!==null?Number.parseInt(p.text):null,_=m!==null?Number.parseInt(m.text):null,R=f?w!==null&&_!==null?"n-m":w!==null?c?"n-":"n-n":_!==null?"-m":null:s?"*":d?"?":a?"+":null,[x,L]=h.useState(R??"?"),[T,k]=h.useState(w),[I,B]=h.useState(_);h.useEffect(()=>{k(w),B(_)},[w,_]);const z=T!==null&&I!==null&&T>I||T!==null&&T<0||I!==null&&I<1;function F(U){const O=U.target.value;L(O);const ee=Kr[O].new??"?";t.replace(r.start,r.stop,ee),e?.()}function D(U){const O=Number.parseInt(U.target.value);k(Number.isNaN(O)?null:O),p!==null&&!Number.isNaN(O)&&(t.replaceSingle(p,O.toString()),e?.())}function Y(U){const O=Number.parseInt(U.target.value);B(Number.isNaN(O)?null:O),m!==null&&!Number.isNaN(O)&&(t.replaceSingle(m,O.toString()),e?.())}function $(){t.delete(r.start,r.stop),e?.()}return i.jsxs("div",{className:["block input-block quantifier position-relative border rounded p-1 pt-3 px-1 m-1 me-2 mt-2"].concat(z?["invalid-range"]:[]).join(" "),children:[i.jsxs("div",{className:"d-flex flex-column align-items-center row-gap-1",children:[i.jsx(v.Select,{size:"sm",style:{width:"fit-content"},value:x,onChange:F,children:Zt.map(U=>i.jsx("option",{value:U.id,children:U.label},U.id))}),i.jsx("div",{className:"d-flex align-items-baseline column-gap-1",children:["+","*","?"].includes(x)?i.jsx("code",{className:"keyword",children:x}):i.jsxs(i.Fragment,{children:[i.jsx("code",{className:"keyword",children:"{"}),i.jsx(v.Text,{children:"Repeat"}),["n-m","n-","n-n"].includes(x)&&i.jsx(v.Control,{size:"sm",style:{width:"8ch"},type:"number",min:x==="n-n"?1:0,max:x==="n-m"?I??void 0:void 0,value:T??0,onChange:D}),x==="n-m"&&i.jsx(v.Text,{children:"to"}),["n-m","-m"].includes(x)&&i.jsx(v.Control,{size:"sm",style:{width:"8ch"},type:"number",min:x==="n-m"&&T||1,value:I??T??1,onChange:Y}),i.jsx("code",{className:"keyword",children:"}"})]})})]}),i.jsx(De,{className:"del-quantifier-btn position-absolute top-0 start-100 translate-middle",onClick:$})]})}function Ei({ctx:r,onChange:e}){const{rewriter:t}=Ae(),{enableQuantifiers:s}=be(),{cursorPos:a}=ir(),d=r.query_implicit(),f=r.query_segment(),u=r.quantifier(),c=d!==null,p=Te(c?d:f,a);function m(){t.delete(r.start,r.stop),e?.()}function w(){t.insertAfter(r.stop,` ${$r}`),e?.()}function _(){if(d!==null){let R=function(k){t.replaceSingle(x.symbol,`"${Ke(k)}"`),e?.()};const x=d.regexp().regexp_pattern().REGEXP(),L=x.symbol.text,T=or(L?.slice(1,-1));return i.jsx(Ri,{value:T??"",onChange:R})}if(f!==null){const R=f.expression();if(!R){let x=function(L){const T=Oe[L].new;t.insertAfter(r.start,` ${T} `),e?.()};return i.jsx(ze,{onClick:L=>x(L)})}return i.jsx(gi,{ctx:R,onChange:e})}throw Error('Invalid parse tree. Expected "query-segment" context.')}return i.jsxs("div",{className:["block query-simple focus-ring border rounded p-1 pe-2 my-2 position-relative d-flex align-items-center"].concat(p?"cursor-focus":"").join(" "),children:[c?i.jsx("code",{className:"delims",children:'"'}):i.jsx("code",{className:"delims",children:"["}),_(),c?i.jsx("code",{className:"delims",children:'"'}):i.jsx("code",{className:"delims",children:"]"}),s&&u!==null&&i.jsx(mi,{ctx:u,onChange:e}),i.jsx(De,{className:"del-query-segment-btn position-absolute top-0 start-100 translate-middle",onClick:m}),s&&u===null&&i.jsx(xi,{className:"position-absolute top-100 start-100 translate-middle",onClick:w})]})}function gi({ctx:r,onChange:e}){const t=r.getChild(0);return t instanceof J?i.jsx(at,{ctx:t,showChangeToExpressionListButton:!0,onChange:e}):t instanceof V||t instanceof G?i.jsx(ot,{ctx:t,onChange:e}):i.jsx(lt,{ctx:t,onChange:e})}function ot({ctx:r,onChange:e}){const t=r instanceof V,s=r instanceof G,a=r.getChild(1);return i.jsxs("div",{className:["block expression-wrap position-relative p-1 m-1 border rounded"].concat(t?["negation-expression d-flex align-items-center"]:[]).concat(s?["group-expression d-flex align-items-center"]:[]).join(" "),children:[t&&i.jsx("code",{className:"delims",children:"!"}),s&&i.jsx("code",{className:"delims",children:"("}),a instanceof J?i.jsx(at,{ctx:a,showChangeToExpressionListButton:!t,onChange:e}):a instanceof V||a instanceof G?i.jsx(ot,{ctx:a,onChange:e}):i.jsx(lt,{ctx:a,onChange:e}),s&&i.jsx("code",{className:"delims",children:")"})]})}function lt({ctx:r,onChange:e}){const{rewriter:t}=Ae(),s=r instanceof ue,a=r instanceof ce,d=Object.keys(Oe).filter(s?m=>m!=="and":()=>!0).filter(a?m=>m!=="or":()=>!0),f=s?"&":"|";function u(m){const w=r.children.length>0?r.children[0].start.tokenIndex:0,_=Oe[m].new,R=m==="basic"?_:`( ${_} )`;t.insertBefore(w,`${R} ${f} `),e?.()}function c(m,w){const _=w.stop.tokenIndex,R=Oe[m].new,x=m==="basic"?R:`( ${R} )`;t.insertAfter(_,` ${f} ${x}`),e?.()}function p(m){return m instanceof J?i.jsx(at,{ctx:m,showChangeToExpressionListButton:!1,onChange:e}):m instanceof V||m instanceof G?i.jsx(ot,{ctx:m,onChange:e}):i.jsx(lt,{ctx:m,onChange:e})}return i.jsxs("div",{className:["block expression-list p-1 m-1 border rounded position-relative"].concat(a?["or-expression"]:[]).concat(s?["and-expression"]:[]).join(" "),children:[a&&i.jsx("code",{className:"delims position-absolute ps-1",children:"OR"}),s&&i.jsx("code",{className:"delims position-absolute ps-1",children:"AND"}),i.jsxs("div",{className:"d-flex flex-column align-items-center mt-1",children:[i.jsx(ze,{allowedIds:d,onClick:u}),r.children.filter((m,w)=>w%2===0).map(m=>i.jsxs(h.Fragment,{children:[p(m),i.jsx(ze,{allowedIds:d,onClick:w=>c(w,m)})]},`expression-${m.getSourceInterval().toString()}`))]})]})}class o extends St{static L_PAREN=1;static R_PAREN=2;static EQUAL=3;static GREATER=4;static LESSER=5;static GREATER_EQUAL=6;static LESSER_EQUAL=7;static NOT_EQUAL=8;static EQUAL_EQUAL=9;static SLASH=10;static AND=11;static OR=12;static NOT=13;static DOT=14;static QUOTED_STRING=15;static SIMPLE_STRING=16;static WS=17;static RULE_query=0;static RULE_boolean_query=1;static RULE_subquery=2;static RULE_search_clause=3;static RULE_search_term=4;static RULE_index=5;static RULE_relation_modified=6;static RULE_relation=7;static RULE_relation_name=8;static RULE_relation_symbol=9;static RULE_boolean_modified=10;static RULE_r_boolean=11;static RULE_modifier_list=12;static RULE_modifier=13;static RULE_modifier_name=14;static RULE_modifier_relation=15;static RULE_modifier_value=16;static RULE_prefix_name=17;static RULE_prefix=18;static RULE_simple_name=19;static literalNames=[null,"'('","')'","'='","'>'","'<'","'>='","'<='","'<>'","'=='","'/'",null,null,null,"'.'"];static symbolicNames=[null,"L_PAREN","R_PAREN","EQUAL","GREATER","LESSER","GREATER_EQUAL","LESSER_EQUAL","NOT_EQUAL","EQUAL_EQUAL","SLASH","AND","OR","NOT","DOT","QUOTED_STRING","SIMPLE_STRING","WS"];static ruleNames=["query","boolean_query","subquery","search_clause","search_term","index","relation_modified","relation","relation_name","relation_symbol","boolean_modified","r_boolean","modifier_list","modifier","modifier_name","modifier_relation","modifier_value","prefix_name","prefix","simple_name"];get grammarFileName(){return"LexParser.g4"}get literalNames(){return o.literalNames}get symbolicNames(){return o.symbolicNames}get ruleNames(){return o.ruleNames}get serializedATN(){return o._serializedATN}createFailedPredicateException(e,t){return new It(this,e,t)}constructor(e){super(e),this.interpreter=new Ot(this,o._ATN,o.decisionsToDFA,new Ue)}query(){const e=new yi(this.context,this.state);this.enterRule(e,0,o.RULE_query);try{this.enterOuterAlt(e,1),this.state=40,this.boolean_query(),this.state=41,this.match(o.EOF)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}boolean_query(){const e=new Pe(this.context,this.state);this.enterRule(e,2,o.RULE_boolean_query);let t;try{for(this.enterOuterAlt(e,1),this.state=43,this.subquery(),this.state=49,this.errorHandler.sync(this),t=this.tokenStream.LA(1);(t&-32)===0&&(1<<t&14336)!==0;)this.state=44,this.boolean_modified(),this.state=45,this.subquery(),this.state=51,this.errorHandler.sync(this),t=this.tokenStream.LA(1)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}subquery(){const e=new ke(this.context,this.state);this.enterRule(e,4,o.RULE_subquery);try{switch(this.state=57,this.errorHandler.sync(this),this.tokenStream.LA(1)){case o.L_PAREN:this.enterOuterAlt(e,1),this.state=52,this.match(o.L_PAREN),this.state=53,this.boolean_query(),this.state=54,this.match(o.R_PAREN);break;case o.QUOTED_STRING:case o.SIMPLE_STRING:this.enterOuterAlt(e,2),this.state=56,this.search_clause();break;default:throw new le(this)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}search_clause(){const e=new ur(this.context,this.state);this.enterRule(e,6,o.RULE_search_clause);try{this.enterOuterAlt(e,1);{switch(this.state=62,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,2,this.context)){case 1:this.state=59,this.index(),this.state=60,this.relation_modified();break}this.state=64,this.search_term()}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}search_term(){const e=new hr(this.context,this.state);this.enterRule(e,8,o.RULE_search_term);let t;try{this.enterOuterAlt(e,1),this.state=66,t=this.tokenStream.LA(1),t===15||t===16?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}index(){const e=new dr(this.context,this.state);this.enterRule(e,10,o.RULE_index);try{switch(this.state=70,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,3,this.context)){case 1:this.enterOuterAlt(e,1),this.state=68,this.simple_name();break;case 2:this.enterOuterAlt(e,2),this.state=69,this.prefix_name();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}relation_modified(){const e=new fr(this.context,this.state);this.enterRule(e,12,o.RULE_relation_modified);let t;try{this.enterOuterAlt(e,1),this.state=72,this.relation(),this.state=74,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===10&&(this.state=73,this.modifier_list())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}relation(){const e=new xr(this.context,this.state);this.enterRule(e,14,o.RULE_relation);try{switch(this.state=78,this.errorHandler.sync(this),this.tokenStream.LA(1)){case o.SIMPLE_STRING:this.enterOuterAlt(e,1),this.state=76,this.relation_name();break;case o.EQUAL:case o.GREATER:case o.LESSER:case o.GREATER_EQUAL:case o.LESSER_EQUAL:case o.NOT_EQUAL:case o.EQUAL_EQUAL:this.enterOuterAlt(e,2),this.state=77,this.relation_symbol();break;default:throw new le(this)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}relation_name(){const e=new pr(this.context,this.state);this.enterRule(e,16,o.RULE_relation_name);try{switch(this.state=82,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,6,this.context)){case 1:this.enterOuterAlt(e,1),this.state=80,this.simple_name();break;case 2:this.enterOuterAlt(e,2),this.state=81,this.prefix_name();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}relation_symbol(){const e=new ct(this.context,this.state);this.enterRule(e,18,o.RULE_relation_symbol);let t;try{this.enterOuterAlt(e,1),this.state=84,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&1016)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}boolean_modified(){const e=new je(this.context,this.state);this.enterRule(e,20,o.RULE_boolean_modified);let t;try{this.enterOuterAlt(e,1),this.state=86,this.r_boolean(),this.state=88,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===10&&(this.state=87,this.modifier_list())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}r_boolean(){const e=new _r(this.context,this.state);this.enterRule(e,22,o.RULE_r_boolean);let t;try{this.enterOuterAlt(e,1),this.state=90,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&14336)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}modifier_list(){const e=new ut(this.context,this.state);this.enterRule(e,24,o.RULE_modifier_list);let t;try{this.enterOuterAlt(e,1);{this.state=93,this.errorHandler.sync(this),t=this.tokenStream.LA(1);do this.state=92,this.modifier(),this.state=95,this.errorHandler.sync(this),t=this.tokenStream.LA(1);while(t===10)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}modifier(){const e=new Ye(this.context,this.state);this.enterRule(e,26,o.RULE_modifier);let t;try{this.enterOuterAlt(e,1),this.state=97,this.match(o.SLASH),this.state=98,this.modifier_name(),this.state=100,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&1016)!==0&&(this.state=99,this.modifier_relation())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}modifier_name(){const e=new Rr(this.context,this.state);this.enterRule(e,28,o.RULE_modifier_name);try{this.enterOuterAlt(e,1),this.state=102,this.simple_name()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}modifier_relation(){const e=new mr(this.context,this.state);this.enterRule(e,30,o.RULE_modifier_relation);try{this.enterOuterAlt(e,1),this.state=104,this.relation_symbol(),this.state=105,this.modifier_value()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}modifier_value(){const e=new Er(this.context,this.state);this.enterRule(e,32,o.RULE_modifier_value);let t;try{this.enterOuterAlt(e,1),this.state=107,t=this.tokenStream.LA(1),t===15||t===16?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}prefix_name(){const e=new ht(this.context,this.state);this.enterRule(e,34,o.RULE_prefix_name);try{this.enterOuterAlt(e,1),this.state=109,this.prefix(),this.state=110,this.match(o.DOT),this.state=111,this.simple_name()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}prefix(){const e=new gr(this.context,this.state);this.enterRule(e,36,o.RULE_prefix);try{this.enterOuterAlt(e,1),this.state=113,this.simple_name()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}simple_name(){const e=new Ce(this.context,this.state);this.enterRule(e,38,o.RULE_simple_name);try{this.enterOuterAlt(e,1),this.state=115,this.match(o.SIMPLE_STRING)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}static _serializedATN=[4,1,17,118,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,1,0,1,0,1,0,1,1,1,1,1,1,1,1,5,1,48,8,1,10,1,12,1,51,9,1,1,2,1,2,1,2,1,2,1,2,3,2,58,8,2,1,3,1,3,1,3,3,3,63,8,3,1,3,1,3,1,4,1,4,1,5,1,5,3,5,71,8,5,1,6,1,6,3,6,75,8,6,1,7,1,7,3,7,79,8,7,1,8,1,8,3,8,83,8,8,1,9,1,9,1,10,1,10,3,10,89,8,10,1,11,1,11,1,12,4,12,94,8,12,11,12,12,12,95,1,13,1,13,1,13,3,13,101,8,13,1,14,1,14,1,15,1,15,1,15,1,16,1,16,1,17,1,17,1,17,1,17,1,18,1,18,1,19,1,19,1,19,0,0,20,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,0,3,1,0,15,16,1,0,3,9,1,0,11,13,107,0,40,1,0,0,0,2,43,1,0,0,0,4,57,1,0,0,0,6,62,1,0,0,0,8,66,1,0,0,0,10,70,1,0,0,0,12,72,1,0,0,0,14,78,1,0,0,0,16,82,1,0,0,0,18,84,1,0,0,0,20,86,1,0,0,0,22,90,1,0,0,0,24,93,1,0,0,0,26,97,1,0,0,0,28,102,1,0,0,0,30,104,1,0,0,0,32,107,1,0,0,0,34,109,1,0,0,0,36,113,1,0,0,0,38,115,1,0,0,0,40,41,3,2,1,0,41,42,5,0,0,1,42,1,1,0,0,0,43,49,3,4,2,0,44,45,3,20,10,0,45,46,3,4,2,0,46,48,1,0,0,0,47,44,1,0,0,0,48,51,1,0,0,0,49,47,1,0,0,0,49,50,1,0,0,0,50,3,1,0,0,0,51,49,1,0,0,0,52,53,5,1,0,0,53,54,3,2,1,0,54,55,5,2,0,0,55,58,1,0,0,0,56,58,3,6,3,0,57,52,1,0,0,0,57,56,1,0,0,0,58,5,1,0,0,0,59,60,3,10,5,0,60,61,3,12,6,0,61,63,1,0,0,0,62,59,1,0,0,0,62,63,1,0,0,0,63,64,1,0,0,0,64,65,3,8,4,0,65,7,1,0,0,0,66,67,7,0,0,0,67,9,1,0,0,0,68,71,3,38,19,0,69,71,3,34,17,0,70,68,1,0,0,0,70,69,1,0,0,0,71,11,1,0,0,0,72,74,3,14,7,0,73,75,3,24,12,0,74,73,1,0,0,0,74,75,1,0,0,0,75,13,1,0,0,0,76,79,3,16,8,0,77,79,3,18,9,0,78,76,1,0,0,0,78,77,1,0,0,0,79,15,1,0,0,0,80,83,3,38,19,0,81,83,3,34,17,0,82,80,1,0,0,0,82,81,1,0,0,0,83,17,1,0,0,0,84,85,7,1,0,0,85,19,1,0,0,0,86,88,3,22,11,0,87,89,3,24,12,0,88,87,1,0,0,0,88,89,1,0,0,0,89,21,1,0,0,0,90,91,7,2,0,0,91,23,1,0,0,0,92,94,3,26,13,0,93,92,1,0,0,0,94,95,1,0,0,0,95,93,1,0,0,0,95,96,1,0,0,0,96,25,1,0,0,0,97,98,5,10,0,0,98,100,3,28,14,0,99,101,3,30,15,0,100,99,1,0,0,0,100,101,1,0,0,0,101,27,1,0,0,0,102,103,3,38,19,0,103,29,1,0,0,0,104,105,3,18,9,0,105,106,3,32,16,0,106,31,1,0,0,0,107,108,7,0,0,0,108,33,1,0,0,0,109,110,3,36,18,0,110,111,5,14,0,0,111,112,3,38,19,0,112,35,1,0,0,0,113,114,3,38,19,0,114,37,1,0,0,0,115,116,5,16,0,0,116,39,1,0,0,0,10,49,57,62,70,74,78,82,88,95,100];static __ATN;static get _ATN(){return o.__ATN||(o.__ATN=new Me().deserialize(o._serializedATN)),o.__ATN}static vocabulary=new qe(o.literalNames,o.symbolicNames,[]);get vocabulary(){return o.vocabulary}static decisionsToDFA=o._ATN.decisionToState.map((e,t)=>new He(e,t))}class yi extends A{constructor(e,t){super(e,t)}boolean_query(){return this.getRuleContext(0,Pe)}EOF(){return this.getToken(o.EOF,0)}get ruleIndex(){return o.RULE_query}enterRule(e){e.enterQuery&&e.enterQuery(this)}exitRule(e){e.exitQuery&&e.exitQuery(this)}accept(e){return e.visitQuery?e.visitQuery(this):e.visitChildren(this)}}class Pe extends A{constructor(e,t){super(e,t)}subquery(e){return e===void 0?this.getRuleContexts(ke):this.getRuleContext(e,ke)}boolean_modified(e){return e===void 0?this.getRuleContexts(je):this.getRuleContext(e,je)}get ruleIndex(){return o.RULE_boolean_query}enterRule(e){e.enterBoolean_query&&e.enterBoolean_query(this)}exitRule(e){e.exitBoolean_query&&e.exitBoolean_query(this)}accept(e){return e.visitBoolean_query?e.visitBoolean_query(this):e.visitChildren(this)}}class ke extends A{constructor(e,t){super(e,t)}L_PAREN(){return this.getToken(o.L_PAREN,0)}boolean_query(){return this.getRuleContext(0,Pe)}R_PAREN(){return this.getToken(o.R_PAREN,0)}search_clause(){return this.getRuleContext(0,ur)}get ruleIndex(){return o.RULE_subquery}enterRule(e){e.enterSubquery&&e.enterSubquery(this)}exitRule(e){e.exitSubquery&&e.exitSubquery(this)}accept(e){return e.visitSubquery?e.visitSubquery(this):e.visitChildren(this)}}class ur extends A{constructor(e,t){super(e,t)}search_term(){return this.getRuleContext(0,hr)}index(){return this.getRuleContext(0,dr)}relation_modified(){return this.getRuleContext(0,fr)}get ruleIndex(){return o.RULE_search_clause}enterRule(e){e.enterSearch_clause&&e.enterSearch_clause(this)}exitRule(e){e.exitSearch_clause&&e.exitSearch_clause(this)}accept(e){return e.visitSearch_clause?e.visitSearch_clause(this):e.visitChildren(this)}}class hr extends A{constructor(e,t){super(e,t)}SIMPLE_STRING(){return this.getToken(o.SIMPLE_STRING,0)}QUOTED_STRING(){return this.getToken(o.QUOTED_STRING,0)}get ruleIndex(){return o.RULE_search_term}enterRule(e){e.enterSearch_term&&e.enterSearch_term(this)}exitRule(e){e.exitSearch_term&&e.exitSearch_term(this)}accept(e){return e.visitSearch_term?e.visitSearch_term(this):e.visitChildren(this)}}class dr extends A{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ce)}prefix_name(){return this.getRuleContext(0,ht)}get ruleIndex(){return o.RULE_index}enterRule(e){e.enterIndex&&e.enterIndex(this)}exitRule(e){e.exitIndex&&e.exitIndex(this)}accept(e){return e.visitIndex?e.visitIndex(this):e.visitChildren(this)}}class fr extends A{constructor(e,t){super(e,t)}relation(){return this.getRuleContext(0,xr)}modifier_list(){return this.getRuleContext(0,ut)}get ruleIndex(){return o.RULE_relation_modified}enterRule(e){e.enterRelation_modified&&e.enterRelation_modified(this)}exitRule(e){e.exitRelation_modified&&e.exitRelation_modified(this)}accept(e){return e.visitRelation_modified?e.visitRelation_modified(this):e.visitChildren(this)}}class xr extends A{constructor(e,t){super(e,t)}relation_name(){return this.getRuleContext(0,pr)}relation_symbol(){return this.getRuleContext(0,ct)}get ruleIndex(){return o.RULE_relation}enterRule(e){e.enterRelation&&e.enterRelation(this)}exitRule(e){e.exitRelation&&e.exitRelation(this)}accept(e){return e.visitRelation?e.visitRelation(this):e.visitChildren(this)}}class pr extends A{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ce)}prefix_name(){return this.getRuleContext(0,ht)}get ruleIndex(){return o.RULE_relation_name}enterRule(e){e.enterRelation_name&&e.enterRelation_name(this)}exitRule(e){e.exitRelation_name&&e.exitRelation_name(this)}accept(e){return e.visitRelation_name?e.visitRelation_name(this):e.visitChildren(this)}}class ct extends A{constructor(e,t){super(e,t)}EQUAL(){return this.getToken(o.EQUAL,0)}GREATER(){return this.getToken(o.GREATER,0)}LESSER(){return this.getToken(o.LESSER,0)}GREATER_EQUAL(){return this.getToken(o.GREATER_EQUAL,0)}LESSER_EQUAL(){return this.getToken(o.LESSER_EQUAL,0)}NOT_EQUAL(){return this.getToken(o.NOT_EQUAL,0)}EQUAL_EQUAL(){return this.getToken(o.EQUAL_EQUAL,0)}get ruleIndex(){return o.RULE_relation_symbol}enterRule(e){e.enterRelation_symbol&&e.enterRelation_symbol(this)}exitRule(e){e.exitRelation_symbol&&e.exitRelation_symbol(this)}accept(e){return e.visitRelation_symbol?e.visitRelation_symbol(this):e.visitChildren(this)}}class je extends A{constructor(e,t){super(e,t)}r_boolean(){return this.getRuleContext(0,_r)}modifier_list(){return this.getRuleContext(0,ut)}get ruleIndex(){return o.RULE_boolean_modified}enterRule(e){e.enterBoolean_modified&&e.enterBoolean_modified(this)}exitRule(e){e.exitBoolean_modified&&e.exitBoolean_modified(this)}accept(e){return e.visitBoolean_modified?e.visitBoolean_modified(this):e.visitChildren(this)}}class _r extends A{constructor(e,t){super(e,t)}AND(){return this.getToken(o.AND,0)}OR(){return this.getToken(o.OR,0)}NOT(){return this.getToken(o.NOT,0)}get ruleIndex(){return o.RULE_r_boolean}enterRule(e){e.enterR_boolean&&e.enterR_boolean(this)}exitRule(e){e.exitR_boolean&&e.exitR_boolean(this)}accept(e){return e.visitR_boolean?e.visitR_boolean(this):e.visitChildren(this)}}class ut extends A{constructor(e,t){super(e,t)}modifier(e){return e===void 0?this.getRuleContexts(Ye):this.getRuleContext(e,Ye)}get ruleIndex(){return o.RULE_modifier_list}enterRule(e){e.enterModifier_list&&e.enterModifier_list(this)}exitRule(e){e.exitModifier_list&&e.exitModifier_list(this)}accept(e){return e.visitModifier_list?e.visitModifier_list(this):e.visitChildren(this)}}class Ye extends A{constructor(e,t){super(e,t)}SLASH(){return this.getToken(o.SLASH,0)}modifier_name(){return this.getRuleContext(0,Rr)}modifier_relation(){return this.getRuleContext(0,mr)}get ruleIndex(){return o.RULE_modifier}enterRule(e){e.enterModifier&&e.enterModifier(this)}exitRule(e){e.exitModifier&&e.exitModifier(this)}accept(e){return e.visitModifier?e.visitModifier(this):e.visitChildren(this)}}class Rr extends A{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ce)}get ruleIndex(){return o.RULE_modifier_name}enterRule(e){e.enterModifier_name&&e.enterModifier_name(this)}exitRule(e){e.exitModifier_name&&e.exitModifier_name(this)}accept(e){return e.visitModifier_name?e.visitModifier_name(this):e.visitChildren(this)}}class mr extends A{constructor(e,t){super(e,t)}relation_symbol(){return this.getRuleContext(0,ct)}modifier_value(){return this.getRuleContext(0,Er)}get ruleIndex(){return o.RULE_modifier_relation}enterRule(e){e.enterModifier_relation&&e.enterModifier_relation(this)}exitRule(e){e.exitModifier_relation&&e.exitModifier_relation(this)}accept(e){return e.visitModifier_relation?e.visitModifier_relation(this):e.visitChildren(this)}}class Er extends A{constructor(e,t){super(e,t)}SIMPLE_STRING(){return this.getToken(o.SIMPLE_STRING,0)}QUOTED_STRING(){return this.getToken(o.QUOTED_STRING,0)}get ruleIndex(){return o.RULE_modifier_value}enterRule(e){e.enterModifier_value&&e.enterModifier_value(this)}exitRule(e){e.exitModifier_value&&e.exitModifier_value(this)}accept(e){return e.visitModifier_value?e.visitModifier_value(this):e.visitChildren(this)}}class ht extends A{constructor(e,t){super(e,t)}prefix(){return this.getRuleContext(0,gr)}DOT(){return this.getToken(o.DOT,0)}simple_name(){return this.getRuleContext(0,Ce)}get ruleIndex(){return o.RULE_prefix_name}enterRule(e){e.enterPrefix_name&&e.enterPrefix_name(this)}exitRule(e){e.exitPrefix_name&&e.exitPrefix_name(this)}accept(e){return e.visitPrefix_name?e.visitPrefix_name(this):e.visitChildren(this)}}class gr extends A{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ce)}get ruleIndex(){return o.RULE_prefix}enterRule(e){e.enterPrefix&&e.enterPrefix(this)}exitRule(e){e.exitPrefix&&e.exitPrefix(this)}accept(e){return e.visitPrefix?e.visitPrefix(this):e.visitChildren(this)}}class Ce extends A{constructor(e,t){super(e,t)}SIMPLE_STRING(){return this.getToken(o.SIMPLE_STRING,0)}get ruleIndex(){return o.RULE_simple_name}enterRule(e){e.enterSimple_name&&e.enterSimple_name(this)}exitRule(e){e.exitSimple_name&&e.exitSimple_name(this)}accept(e){return e.visitSimple_name?e.visitSimple_name(this):e.visitChildren(this)}}const bi=[{id:"lang",label:"Entry language",virtual:!0},{id:"lemma",label:"Lemma form"},{id:"entryId",label:"Identifier of the current entry"},{id:"phonetic",label:"Phonetic form"},{id:"translation",label:"Translation"},{id:"transcription",label:"Transcription or transliteration"},{id:"definition",label:"Definition or description"},{id:"etymology",label:"Etymology information"},{id:"case",label:"Morphological Case"},{id:"number",label:"Morphological Number"},{id:"gender",label:"Morphological Gender"},{id:"pos",label:"Part-of-Speech"},{id:"baseform",label:"Baseform (or stem )"},{id:"segmentation",label:"Composita segmentation, hyphenation"},{id:"sentiment",label:"Sentiment information",unstructured:!0},{id:"frequency",label:"Frequency information",unstructured:!0},{id:"antonym",label:"Antonym"},{id:"hyponym",label:"Hyponym"},{id:"hypernym",label:"Hypernym"},{id:"meronym",label:"Meronym"},{id:"holonym",label:"Holonym"},{id:"synonym",label:"Synonym"},{id:"related",label:"Unspecified relation"},{id:"ref",label:"A URI referencing a related resource"},{id:"senseRef",label:"ID of a sense definition"},{id:"citation",label:"Citation, quotation or example"}],Ai=Object.fromEntries(bi.map(r=>[r.id,r])),Ci=[{id:"virtual",label:"Virtual fields",fields:["lang"]},{id:"core",label:"Basic fields",fields:["lemma","entryId","phonetic","translation","transcription"]},{id:"description",label:"Description fields",fields:["definition","etymology"]},{id:"grammar",label:"Grammar and morphology fields",fields:["case","number","gender","pos","baseform","segmentation"]},{id:"numeric",label:"Unstructured numeric fields",fields:["sentiment","frequency"]},{id:"relation",label:"Semantic relation fields",fields:["antonym","hyponym","hypernym","meronym","holonym","synonym","related"]},{id:"reference",label:"Reference fields",fields:["ref","senseRef"]},{id:"citation",label:"Citation and quotation fields",fields:["citation"]}],Ni=[{id:"=",label:"equal"},{id:"==",label:"exact equal"},{id:"is",label:"is a"}],Lt=[{id:"lang",label:"Language"},{id:"unmasked",label:"Unmasked"},{id:"ignoreCase",label:"Ignore Case"},{id:"respectCase",label:"Respect Case"},{id:"ignoreAccents",label:"Ignore Accents"},{id:"respectAccents",label:"Respect Accents"},{id:"honorWhitespace",label:"Honor Whitespace"},{id:"regexp",label:"Regular Expression"},{id:"partialMatch",label:"Partial Match"},{id:"fullMatch",label:"Full Match"}],wt=[["masked","unmasked","regexp"],["ignoreCase","respectCase"],["ignoreAccents","respectAccents"],["partialMatch","fullMatch"]],Li=[{id:"and",label:"AND"},{id:"or",label:"OR"},{id:"not",label:"NOT"}],vt="=",Ee='""',Ie="or",yr=[{id:"search-clause",label:"Search Clause",new:`${Ee}`,newBefore:`${Ee} ${Ie}`,newAfter:`${Ie} ${Ee}`},{id:"sub-query",label:"Subquery",new:`( ${Ee} )`,newBefore:`( ${Ee} ) ${Ie}`,newAfter:`${Ie} ( ${Ee} )`}],Ze=Object.fromEntries(yr.map(r=>[r.id,r])),dt=h.createContext(void 0);dt.displayName="LexCQLParserLexerContext";function wi({parser:r,lexer:e,cursorPos:t,children:s}){const a={parser:r,lexer:e,cursorPos:t};return i.jsx(dt.Provider,{value:a,children:s})}function br(){const r=h.useContext(dt);if(!r)throw new Error('No parser and lexer "data" set, use LexCQLParserLexerProvider to set');return r}const ft=h.createContext(void 0);ft.displayName="LexCQLQueryBuilderConfigContext";function vi({enableRelationModifiers:r=!0,forceSearchTermQuoting:e=!1,showAllFields:t=!0,showResourceCountForField:s=!0,children:a}){const d={enableRelationModifiers:r,forceSearchTermQuoting:e,showAllFields:t,showResourceCountForField:s};return i.jsx(ft.Provider,{value:d,children:a})}function Ti(){const r=h.useContext(ft);if(!r)throw new Error('No flags "data" set, use LexCQLQueryBuilderConfigProvider to set');return r}const xt=h.createContext(void 0);xt.displayName="LexCQLQueryUpdaterContext";function Si({rewriter:r,children:e}){const t={rewriter:r};return i.jsx(xt.Provider,{value:t,children:e})}function pt(){const r=h.useContext(xt);if(!r)throw new Error('No rewriter "data" set, use LexCQLQueryUpdaterProvider to set');return r}const _t=h.createContext(void 0);_t.displayName="LexCQLResourceFieldInfoContext";function Ii({resources:r,fieldInfo:e,children:t}){const s={resources:r,fieldInfo:e};return i.jsx(_t.Provider,{value:s,children:t})}function Oi(){const r=h.useContext(_t);if(!r)throw new Error('No resources and field info "data" set, use LexCQLResourceFieldInfoProvider to set');return r}class H extends Qt{static L_PAREN=1;static R_PAREN=2;static EQUAL=3;static GREATER=4;static LESSER=5;static GREATER_EQUAL=6;static LESSER_EQUAL=7;static NOT_EQUAL=8;static EQUAL_EQUAL=9;static SLASH=10;static AND=11;static OR=12;static NOT=13;static DOT=14;static QUOTED_STRING=15;static SIMPLE_STRING=16;static WS=17;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,"'('","')'","'='","'>'","'<'","'>='","'<='","'<>'","'=='","'/'",null,null,null,"'.'"];static symbolicNames=[null,"L_PAREN","R_PAREN","EQUAL","GREATER","LESSER","GREATER_EQUAL","LESSER_EQUAL","NOT_EQUAL","EQUAL_EQUAL","SLASH","AND","OR","NOT","DOT","QUOTED_STRING","SIMPLE_STRING","WS"];static modeNames=["DEFAULT_MODE"];static ruleNames=["L_PAREN","R_PAREN","EQUAL","GREATER","LESSER","GREATER_EQUAL","LESSER_EQUAL","NOT_EQUAL","EQUAL_EQUAL","SLASH","AND","OR","NOT","DOT","QUOTED_STRING","SIMPLE_STRING","WS"];constructor(e){super(e),this.interpreter=new kt(this,H._ATN,H.decisionsToDFA,new Ue)}get grammarFileName(){return"LexLexer.g4"}get literalNames(){return H.literalNames}get symbolicNames(){return H.symbolicNames}get ruleNames(){return H.ruleNames}get serializedATN(){return H._serializedATN}get channelNames(){return H.channelNames}get modeNames(){return H.modeNames}static _serializedATN=[4,0,17,92,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,1,5,1,5,1,5,1,6,1,6,1,6,1,7,1,7,1,7,1,8,1,8,1,8,1,9,1,9,1,10,1,10,1,10,1,10,1,11,1,11,1,11,1,12,1,12,1,12,1,12,1,13,1,13,1,14,1,14,1,14,1,14,5,14,77,8,14,10,14,12,14,80,9,14,1,14,1,14,1,15,4,15,85,8,15,11,15,12,15,86,1,16,1,16,1,16,1,16,0,0,17,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,1,0,9,2,0,65,65,97,97,2,0,78,78,110,110,2,0,68,68,100,100,2,0,79,79,111,111,2,0,82,82,114,114,2,0,84,84,116,116,2,0,34,34,92,92,8,0,9,10,13,13,32,32,34,34,40,41,47,47,60,62,92,92,3,0,9,10,13,13,32,32,94,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,1,35,1,0,0,0,3,37,1,0,0,0,5,39,1,0,0,0,7,41,1,0,0,0,9,43,1,0,0,0,11,45,1,0,0,0,13,48,1,0,0,0,15,51,1,0,0,0,17,54,1,0,0,0,19,57,1,0,0,0,21,59,1,0,0,0,23,63,1,0,0,0,25,66,1,0,0,0,27,70,1,0,0,0,29,72,1,0,0,0,31,84,1,0,0,0,33,88,1,0,0,0,35,36,5,40,0,0,36,2,1,0,0,0,37,38,5,41,0,0,38,4,1,0,0,0,39,40,5,61,0,0,40,6,1,0,0,0,41,42,5,62,0,0,42,8,1,0,0,0,43,44,5,60,0,0,44,10,1,0,0,0,45,46,5,62,0,0,46,47,5,61,0,0,47,12,1,0,0,0,48,49,5,60,0,0,49,50,5,61,0,0,50,14,1,0,0,0,51,52,5,60,0,0,52,53,5,62,0,0,53,16,1,0,0,0,54,55,5,61,0,0,55,56,5,61,0,0,56,18,1,0,0,0,57,58,5,47,0,0,58,20,1,0,0,0,59,60,7,0,0,0,60,61,7,1,0,0,61,62,7,2,0,0,62,22,1,0,0,0,63,64,7,3,0,0,64,65,7,4,0,0,65,24,1,0,0,0,66,67,7,1,0,0,67,68,7,3,0,0,68,69,7,5,0,0,69,26,1,0,0,0,70,71,5,46,0,0,71,28,1,0,0,0,72,78,5,34,0,0,73,74,5,92,0,0,74,77,7,6,0,0,75,77,8,6,0,0,76,73,1,0,0,0,76,75,1,0,0,0,77,80,1,0,0,0,78,76,1,0,0,0,78,79,1,0,0,0,79,81,1,0,0,0,80,78,1,0,0,0,81,82,5,34,0,0,82,30,1,0,0,0,83,85,8,7,0,0,84,83,1,0,0,0,85,86,1,0,0,0,86,84,1,0,0,0,86,87,1,0,0,0,87,32,1,0,0,0,88,89,7,8,0,0,89,90,1,0,0,0,90,91,6,16,0,0,91,34,1,0,0,0,4,0,76,78,86,1,0,1,0];static __ATN;static get _ATN(){return H.__ATN||(H.__ATN=new Me().deserialize(H._serializedATN)),H.__ATN}static vocabulary=new qe(H.literalNames,H.symbolicNames,[]);get vocabulary(){return H.vocabulary}static decisionsToDFA=H._ATN.decisionToState.map((e,t)=>new He(e,t))}function Ar(r){if(!r||!r.trim())return null;const e=jt.fromString(r),t=new H(e),s=new Ut(t),a=new Mt(s),d=new o(s),f=new Xt;return t.removeErrorListeners(),t.addErrorListener(f),d.removeErrorListeners(),d.addErrorListener(f),{tree:d.query(),lexer:t,parser:d,rewriter:a,errors:f.errors}}const Qi=/([<>()=\\" ])/g,ki=/([\\"])/g,ji=/(?:\\)([\\"])/g;function Ui(r){if(!r)return"";if(r.startsWith('"')&&r.endsWith('"')){let e=r.slice(1,-1);return e=e.replace(ji,"$1"),e}return r}function Tt(r,e=!1){return r?r.match(Qi)?`"${r.replace(ki,"\\$1")}"`:e?`"${r}"`:r:'""'}function Mi({query:r,cursorPos:e,resources:t,onChange:s,...a}){const[d,f]=h.useState(r??"");h.useEffect(()=>f(r??""),[r]);const u=h.useMemo(()=>{const _=t?.filter(R=>(R.availableDataViews?.find(x=>x.mimeType==="application/x-clarin-fcs-lex+xml")!==void 0||R.searchCapabilitiesResolved.includes("LEX_SEARCH"))&&R.availableLexFields!==null&&R.availableLexFields.length>0)??[];if(t&&t.length!==_.length){const R=t.filter(x=>!_.includes(x));console.warn("Filter out resource(s) that do(es) not correctly declare LexCQL query support",R)}return _},[t]),c=h.useMemo(()=>u.map(_=>{const R=new Set;return _.availableLexFields.forEach(x=>{R.has(x.type)||R.add(x.type)}),[...R.values()].map(x=>({fieldType:x,resource:_}))}).reduce((_,R)=>(R.forEach(({fieldType:x,resource:L})=>{_.has(x)||_.set(x,[]),_.get(x).push(L)}),_),new Map),[u]),p=h.useMemo(()=>Ar(d),[d]);function m(){if(p){const{rewriter:_}=p,R=_.getText();f(R),s?.(R)}else console.warn("No parsed query! Unable to handle change request",p)}function w(_){const R=Ze[_].new;f(R),s?.(R)}return i.jsx("div",{id:"query-builder",className:"lex-query d-flex justify-content-center",children:i.jsx(vi,{enableRelationModifiers:a.enableRelationModifiers??!0,forceSearchTermQuoting:a.forceSearchTermQuoting??!1,showAllFields:a.showAllFields??!1,showResourceCountForField:a.showResourceCountForField??!0,children:i.jsx(Ii,{resources:u,fieldInfo:c,children:p?i.jsx(wi,{parser:p.parser,lexer:p.lexer,cursorPos:e,children:i.jsx(Si,{rewriter:p.rewriter,children:i.jsx(qi,{tree:p.tree,onChange:m})})}):i.jsx(Je,{onClick:w})})})})}function Cr({className:r,onClick:e}){return i.jsx(ge,{variant:"link",className:["del-btn action-btn rounded-circle p-1"].concat(r??[]).join(" "),onClick:e,children:i.jsx("i",{dangerouslySetInnerHTML:{__html:lr},"aria-hidden":"true"})})}function Je({className:r,onClick:e}){function t(s){s&&e?.(s)}return i.jsxs(y,{className:[""].concat(r??[]).join(" "),onSelect:t,"aria-label":"Add search clause",children:[i.jsx(y.Toggle,{variant:"link",className:"add-search-clause-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(y.Menu,{children:yr.map(s=>i.jsx(y.Item,{eventKey:s.id,children:s.label},s.id))})]})}function qi({tree:r,onChange:e}){const t=r.boolean_query();return i.jsx("div",{className:"query flex-grow-1 justify-content-center d-flex flex-wrap row-gap-2 column-gap-1 rounded",children:i.jsx(Nr,{ctx:t,onChange:e})})}function Nr({ctx:r,onChange:e}){const{rewriter:t}=pt(),s=r.getChildCount()>1;function a(u){if(r.getChildCount()===1){const c=r.subquery(0);if(!c||!c.start){console.warn("Invalid parse tree state. A subquery with associated token should exist!",{ctx:r,subqueryCtx:c,childIdx:u});return}t.delete(c.start,c.stop),e?.()}else if(u===0){const c=r.subquery(0),p=r.boolean_modified(0);if(!c||!p||!c.start||!p.stop){console.warn("Invalid parse tree state. A subquery and boolean_modified with associated tokens should exist!",{ctx:r,subqueryCtx:c,booleanModifiedCtx:p,childIdx:u});return}t.delete(c.start,p.stop),e?.()}else{const c=r.getChild(u),p=r.getChild(u-1);if(!c||!p||!c.stop||!p.start){console.warn("Invalid parse tree state. A subquery and boolean_modified with associated tokens should exist!",{ctx:r,subqueryCtx:c,booleanModifiedCtx:p,childIdx:u});return}t.delete(p.start,c.stop),e?.()}}function d(u){const c=r.start.tokenIndex,p=Ze[u].newBefore;t.insertBefore(c,`${p} `),e?.()}function f(u){const c=r.stop.tokenIndex,p=Ze[u].newAfter;t.insertAfter(c,` ${p}`),e?.()}return i.jsxs("div",{className:["boolean-query d-flex align-items-center row-gap-2 column-gap-1"].concat(s?"block justify-content-center flex-wrap border rounded p-1":"").join(" "),children:[i.jsx(Je,{onClick:d}),r.children.map((u,c)=>{if(u instanceof ke)return i.jsx(Hi,{ctx:u,onChange:e,onDelete:()=>a(c)},c);if(u instanceof je)return i.jsx(Bi,{ctx:u,onChange:e},c)}),i.jsx(Je,{onClick:f})]})}function Hi({ctx:r,onChange:e,onDelete:t}){const s=r.boolean_query(),a=r.search_clause(),d=s!==null,f=a!==null,u=d&&!(s.parent?.parent instanceof Pe&&s.parent?.parent.getChildCount()===1);return i.jsx("div",{className:["sub-query position-relative align-items-center justify-content-center d-flex"].concat(d?"block border rounded p-1":"").join(" "),children:d?i.jsxs(i.Fragment,{children:[i.jsx("code",{className:"delims",children:"("}),i.jsx(Nr,{ctx:s,onChange:e}),i.jsx("code",{className:"delims",children:")"}),u&&i.jsx(Cr,{className:"del-within-clause-btn position-absolute top-0 start-100 translate-middle",onClick:t})]}):f?i.jsx(Gi,{ctx:a,onChange:e,onDelete:t}):i.jsx("div",{className:"text-danger px-1",title:"Parse error. Expected search clause or a sub query!",children:"???"})})}function Bi({ctx:r,onChange:e}){const{rewriter:t}=pt(),{cursorPos:s}=br(),a=Te(r,s),d=r.getChild(0)?.getText().toLowerCase();function f(u){const c=u;if(!c||c===d)return;const p=r.r_boolean().getChild(0).symbol;if(!p){console.warn("Unexpected parse tree, expected terminal node as first child!",{ctx:r,boolean:r.r_boolean(),firstChild:r.r_boolean().getChild(0)});return}t.replaceSingle(p,c),e?.()}return i.jsx("div",{className:["boolean focus-ring rounded mx-1"].concat([a?"cursor-focus":""]).join(" "),children:i.jsxs(y,{onSelect:f,children:[i.jsx(y.Toggle,{className:"form-select",children:i.jsx("code",{className:"keyword",children:d})}),i.jsx(y.Menu,{children:Li.map(u=>i.jsx(y.Item,{eventKey:u.id,children:u.label},u.id))})]})})}function Gi({ctx:r,onChange:e,onDelete:t}){const{rewriter:s}=pt(),{cursorPos:a}=br(),{fieldInfo:d}=Oi(),{forceSearchTermQuoting:f,enableRelationModifiers:u,showAllFields:c,showResourceCountForField:p}=Ti(),m=[...d.keys()],w=Te(r,a),_=r.parent?.parent?.getChildCount()!==1,R=r.index(),x=r.relation_modified(),L=r.search_term(),[T,k]=h.useState(null),[I,B]=h.useState(null),[z,F]=h.useState([]),[D,Y]=h.useState("");h.useEffect(()=>{const g=R?.getText(),C=x?.relation().getText(),Q=L.QUOTED_STRING(),S=L.SIMPLE_STRING(),Z=Q?.symbol.text??S?.symbol.text;k(g??null),B(C??null),F(ee(x)),Y(Ui(Z))},[R,x,L]);const $=u&&I!=="is";function U(g,C){const Q=C.toLowerCase();return g.map(S=>S.toLowerCase()).includes(Q)?g.filter(S=>S.toLowerCase()!==Q):(wt.flat(1).map(S=>S.toLowerCase()).includes(Q)&&wt.find(S=>{const Z=S.map(re=>re.toLowerCase());if(Z.includes(Q)){const re=Z.filter(K=>K!==Q);return g=g.filter(K=>!re.includes(K.toLowerCase())),!0}}),[...g,C])}function O(g,C){if(!C){console.warn("Unexpected parse state. For updating relation modifiers, the relation context should exist!",{relationModifiers:g,relationModifiedCtx:C});return}const Q=C.stop.tokenIndex,S=C.modifier_list()?.modifier()??[],Z=g.map(P=>P.toLowerCase()),re=[];let K=!1;for(const P of S){const oe=P.modifier_name().simple_name().SIMPLE_STRING().symbol.text?.toLowerCase()??"";Z.includes(oe)?re.push(oe):(s.delete(P.start,P.stop),K=!0)}for(const P of g)re.includes(P.toLowerCase())||(s.insertAfter(Q,`/${P}`),K=!0);K&&e?.()}function ee(g){const Q=(g?.modifier_list()?.modifier()??[]).map(S=>S.modifier_name().simple_name().SIMPLE_STRING().symbol.text?.toLowerCase()??"").filter(S=>S!=="lang");return Lt.map(S=>S.id).filter(S=>Q.includes(S.toLowerCase()))}function te(g){const C=g;if(C&&C!==T){if(k(C),R===null){B(vt);const Q=`${C} ${vt} ${Tt(D,f||L.QUOTED_STRING()!==null)}`;s.replace(r.start,r.stop,Q)}else s.replace(R.start,R.stop,C);e?.()}}function he(g){const C=g;if(C&&C!==T){if(B(C),x!==null){const Q=x.relation();if(s.replace(Q.start,Q.stop,C),C==="is"){const S=x.modifier_list();S&&s.delete(S.start,S.stop)}}e?.()}}function Ne(){const g=Tt(D,f||L.QUOTED_STRING()!==null);s.replace(L.start,L.stop,g),e?.()}function ae(g){const C=U(z,g);O(C,x),F(Q=>U(Q,g))}function Le(){return i.jsx(v.Control,{className:"d-inline",style:{width:"10ch"},value:D,onChange:g=>Y(g.target.value),onBlur:Ne})}function Re(g,C=void 0){return i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:g}),C&&`: ${C}`,we(g)]})}function we(g){if(!p)return null;const C=d.get(g)?.length??0;return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsxs("small",{className:"text-body-secondary",children:["Supported by ",C," resources."]})]})}return i.jsxs("div",{className:["block input-block basic-expression position-relative focus-ring border rounded py-2 px-2"].concat([_?"me-2 mt-1":""]).concat([w?"cursor-focus":""]).join(" "),children:[i.jsxs("div",{className:"d-flex justify-content-center column-gap-2",children:[i.jsxs(y,{onSelect:te,children:[i.jsx(y.Toggle,{className:"form-select",children:T??i.jsx("em",{className:"text-muted",children:"(default)"})}),i.jsx(y.Menu,{children:Ci.map(g=>m.find(C=>g.fields.includes(C))||g.id==="virtual"||g.fields.includes(T)?i.jsxs(h.Fragment,{children:[(c||d.size>5)&&i.jsx(y.Header,{children:g.label}),g.fields.map(C=>(c||m.includes(C)||g.id==="virtual"||C===T)&&i.jsx(y.Item,{eventKey:C,active:C===T,children:Re(C,Ai[C]?.label)},C))]},g.id):null)})]}),I&&i.jsxs(y,{onSelect:he,children:[i.jsx(y.Toggle,{className:"form-select",children:I}),i.jsx(y.Menu,{children:i.jsxs("div",{className:"d-flex",children:[i.jsxs("div",{className:["flex-grow-1"].concat($?["border-end pe-1"]:[]).join(" "),children:[$&&i.jsx(y.Header,{children:"Relations"}),Ni.map(g=>i.jsx(y.Item,{eventKey:g.id,active:g.id===T,children:g.label},g.id))]}),i.jsx("div",{className:["text-nowrap"].concat($?["ps-1"]:[]).join(" "),children:$&&i.jsxs(i.Fragment,{children:[i.jsx(y.Header,{children:"Modifiers"}),Lt.filter(g=>g.id!=="lang").map(g=>i.jsx(y.ItemText,{children:i.jsx(v.Check,{id:g.id,name:g.id,label:g.label,type:"checkbox",checked:z.includes(g.id),onChange:()=>ae(g.id)})},g.id))]})})]})})]}),Le()]}),_&&i.jsx(Cr,{className:"del-within-clause-btn position-absolute top-0 start-100 translate-middle",onClick:t})]})}function Yi({show:r,query:e,queryType:t,resources:s,selectedResources:a,delay:d=1e3,onModalClose:f}){const[u,c]=h.useState(e??""),[p,m]=h.useState(null);h.useEffect(()=>{c(e??""),m(null)},[e]);const w=Mr(u,d),[_,R]=h.useState(!1),[x,L,T]=Pr(null,d),k=s?a?s.filter(E=>a.includes(E.id)):s:void 0,I=h.useMemo(()=>t==="fcs"?sr(u):t==="lex"?Ar(u):(console.warn("Unexpected queryType, so will not parse query!",t),null),[u,t]);I&&I.errors.length>0&&x!==I.errors[0]&&L(I.errors[0]),(!I||I.errors.length===0)&&x!==null&&T(null);const[B,z]=h.useState(0),[F,D]=h.useState(void 0);if(s&&I){const E=ii(I?.tree),X=si(s,E),me=X.unsupported.length;me!==B&&z(me);const mt=[...X.unsupportedByLayer.keys()],Et=F?[...F.keys()]:[];(mt.length!==Et.length||!mt.every(Ir=>Et.includes(Ir)))&&D(X.unsupportedByLayer)}I||B!==0&&(z(0),D(void 0));function Y(E){f({query:u,validResources:a??[],action:E})}function $(E){c(E)}function U(E){if(E.target.nodeName==="INPUT"){const X=E.target.selectionStart,me=E.target.selectionEnd;m(X!==null&&me!==null&&X!==me?[X,me]:X)}}function O(E){c(E)}const[ee,te]=h.useState(!1),[he,Ne]=h.useState(!1),[ae,Le]=h.useState(!1),[Re,we]=h.useState(!1),[g,C]=h.useState(!0),[Q,S]=h.useState(!1),[Z,re]=h.useState(!1),[K,P]=h.useState(!1),[oe,We]=h.useState(!1),[l,b]=h.useState(!0),[j,M]=h.useState(!0),[W,se]=h.useState(!0),[de,ne]=h.useState(!1),[fe,xe]=h.useState(!0),[Se,Lr]=h.useState(!1),[Rt,wr]=h.useState(!0);function vr(){return i.jsxs(i.Fragment,{children:[i.jsxs(v,{className:"my-2 p-2 border rounded",style:{textIndent:"3.6rem hanging"},children:[i.jsx(v.Text,{className:"me-3",style:{verticalAlign:"text-bottom"},children:"Enable"}),i.jsx(v.Check,{inline:!0,label:"Within",type:"checkbox",name:"enableWithin",id:"enableWithin",checked:ee,onChange:()=>te(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Expression Grouping",type:"checkbox",name:"enableWrapGroup",id:"enableWrapGroup",checked:he,onChange:()=>Ne(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Expression Negation",type:"checkbox",name:"enableWrapNegation",id:"enableWrapNegation",checked:ae,onChange:()=>Le(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Implicit Query",type:"checkbox",name:"enableImplicitQuery",id:"enableImplicitQuery",checked:Re,onChange:()=>we(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Multiple Query Segments",type:"checkbox",name:"enableMultipleQuerySegments",id:"enableMultipleQuerySegments",checked:g,onChange:()=>C(E=>!E),disabled:!0}),i.jsx(v.Check,{inline:!0,label:"Quantifiers",type:"checkbox",name:"enableQuantifiers",id:"enableQuantifiers",checked:Q,onChange:()=>S(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Regex Flags",type:"checkbox",name:"enableRegexpFlags",id:"enableRegexpFlags",checked:Z,onChange:()=>re(E=>!E),disabled:!0}),i.jsx(v.Check,{inline:!0,label:"BASIC Layer",type:"checkbox",name:"showBasicLayer",id:"showBasicLayer",checked:K,onChange:()=>P(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"All Advanced Layers",type:"checkbox",name:"showAllAdvancedLayers",id:"showAllAdvancedLayers",checked:oe,onChange:()=>We(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Custom Layers",type:"checkbox",name:"showCustomLayers",id:"showCustomLayers",checked:l,onChange:()=>b(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Layer Qualifiers",type:"checkbox",name:"showLayerQualifiers",id:"showLayerQualifiers",checked:j,onChange:()=>M(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Resource Count for Layer",type:"checkbox",name:"showResourceCountForLayer",id:"showResourceCountForLayer",checked:W,onChange:()=>se(E=>!E)})]}),i.jsx(di,{query:w,cursorPos:p??void 0,onChange:O,resources:k,enableWithin:ee,enableWrapGroup:he,enableWrapNegation:ae,enableImplicitQuery:Re,enableMultipleQuerySegments:g,enableQuantifiers:Q,enableRegexpFlags:Z,showBasicLayer:K,showAllAdvancedLayers:oe,showCustomLayers:l,showLayerQualifiers:j,showResourceCountForLayer:W})]})}function Tr(){return i.jsxs(i.Fragment,{children:[i.jsxs(v,{className:"my-2 p-2 border rounded",style:{textIndent:"3.6rem hanging"},children:[i.jsx(v.Text,{className:"me-3",style:{verticalAlign:"text-bottom"},children:"Enable"}),i.jsx(v.Check,{inline:!0,label:"Forced Search Term Quoting",type:"checkbox",name:"forceSearchTermQuoting",id:"forceSearchTermQuoting",checked:de,onChange:()=>ne(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Relation Modifiers",type:"checkbox",name:"enableRelationModifiers",id:"enableRelationModifiers",checked:fe,onChange:()=>xe(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"All Fields",type:"checkbox",name:"showAllFields",id:"showAllFields",checked:Se,onChange:()=>Lr(E=>!E)}),i.jsx(v.Check,{inline:!0,label:"Resource Count for Field",type:"checkbox",name:"showResourceCountForField",id:"showResourceCountForField",checked:Rt,onChange:()=>wr(E=>!E)})]}),i.jsx(Mi,{query:w,cursorPos:p??void 0,onChange:O,resources:k,enableRelationModifiers:fe,forceSearchTermQuoting:de,showAllFields:Se,showResourceCountForField:Rt})]})}function Sr(){return t==="fcs"?vr():t==="lex"?Tr():null}return i.jsxs(ve,{id:"query-builder-modal",show:r,onHide:()=>Y("close"),fullscreen:!0,centered:!0,children:[i.jsx(ve.Header,{className:"py-2",closeButton:!0,children:i.jsx(ve.Title,{children:"Query Builder"})}),i.jsxs(ve.Body,{className:"px-0",children:[i.jsx(v,{className:"px-1 pb-3 border-bottom",onSubmit:E=>E.preventDefault(),children:i.jsx(Fe,{children:i.jsx(Or,{className:"d-sm-flex row-gap-2 justify-content-around",children:i.jsx(Qr,{children:i.jsxs(kr,{hasValidation:!0,children:[i.jsx(v.Control,{placeholder:'"Elephant"',"aria-label":"query builder input",className:"text-center query-builder-input",value:u,isInvalid:!!x,onBlur:()=>m(null),..._?{as:qr,queryType:t,onChange:$,onCursorChange:(E,X)=>{m(E!==X&&E!==null&&X!==void 0?[E,X]:E)}}:{onChange:E=>{$(E.target.value),U(E)},onKeyUp:U,onClick:U}}),i.jsx(jr,{id:"fcs-query-builder-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:_,onChange:()=>R(E=>!E),variant:"outline-secondary","aria-label":"Enable enhanced visual input support",className:"d-flex align-items-center",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Hr},"aria-hidden":"true"})}),i.jsx(v.Control.Feedback,{type:"invalid",children:x})]})})})})}),B>0&&i.jsx(Fe,{className:"px-3",children:i.jsxs(Ur,{variant:"warning",className:"mb-0 mt-3",dismissible:!0,children:["For this query, ",B," of ",s?.length," resources will not be available! Certain layers are not supported by some resources.",F&&i.jsx("ul",{className:"mb-0",children:[...F.keys()].map(E=>i.jsxs("li",{children:[i.jsx("strong",{children:E}),": ",F.get(E)?.length," ","unsupported resources"]}))})]})}),i.jsx(Fe,{className:"px-3 pt-3",children:Sr()})]}),i.jsxs(ve.Footer,{className:"py-2",children:[i.jsx(ge,{variant:"secondary",onClick:()=>Y("abort"),children:"Cancel"}),i.jsx(ge,{variant:"primary",onClick:()=>Y("confirm"),children:"Use Query"})]})]})}Br.loadNamespaces("querybuilder");export{Yi as default};
//# sourceMappingURL=fcs-sru-aggregator-ui-query-builder-0.0.0.js.map

import{r as d,j as i}from"./vendor/react-ext.js";import{F as X,B as Ee,D as g,M as Se,C as Ve,R as Ur,a as jr,I as kr,d as Mr,A as qr}from"./vendor/bootstrap.js";import{u as Hr,a as Br,f as Dr,C as Gr,h as Pr,T as Wr,i as Fr}from"./fcs-sru-aggregator-ui-0.0.0.js";import{P as Tt,F as It,a as Ot,b as Me,R as N,N as ce,A as gt,c as qe,V as He,D as Be,d as b,B as $r,L as Qt,e as Ut,f as jt,C as kt,g as Mt,T as qt}from"./vendor/antlr4.js";import"./vendor/react.js";/* empty css                            */import"./locales/en/default.js";import"./vendor/prism.js";function Vr(r,e){const[t,s]=d.useState(r),o=d.useRef(void 0),f=d.useCallback(u=>{clearTimeout(o.current),o.current=setTimeout(()=>{s(u)},e)},[s,e]);return[t,f,s]}class n extends Tt{static L_PAREN=1;static R_PAREN=2;static L_SQUARE_BRACKET=3;static R_SQUARE_BRACKET=4;static OR=5;static AND=6;static NOT=7;static FWD_SLASH=8;static L_CURLY_BRACKET=9;static R_CURLY_BRACKET=10;static Q_ONE_OR_MORE=11;static Q_ZERO_OR_MORE=12;static Q_ZERO_OR_ONE=13;static Q_COMMA=14;static OPERATOR_EQ=15;static OPERATOR_NE=16;static COLON=17;static WITHIN=18;static SIMPLE_WITHIN_SCOPE=19;static REGEXP_FLAGS=20;static IDENTIFIER=21;static INTEGER=22;static REGEXP=23;static QUOTED_STRING=24;static Space=25;static RULE_query=0;static RULE_main_query=1;static RULE_query_disjunction=2;static RULE_query_sequence=3;static RULE_query_group=4;static RULE_query_simple=5;static RULE_quantifier=6;static RULE_query_implicit=7;static RULE_query_segment=8;static RULE_within_part=9;static RULE_within_part_simple=10;static RULE_expression=11;static RULE_expression_or=12;static RULE_expression_and=13;static RULE_expression_group=14;static RULE_expression_not=15;static RULE_expression_basic=16;static RULE_attribute=17;static RULE_qualifier=18;static RULE_identifier=19;static RULE_regexp=20;static RULE_regexp_pattern=21;static RULE_regexp_flag=22;static literalNames=[null,"'('","')'","'['","']'","'|'","'&'","'!'","'/'","'{'","'}'","'+'","'*'","'?'","','","'='","'!='","':'","'within'"];static symbolicNames=[null,"L_PAREN","R_PAREN","L_SQUARE_BRACKET","R_SQUARE_BRACKET","OR","AND","NOT","FWD_SLASH","L_CURLY_BRACKET","R_CURLY_BRACKET","Q_ONE_OR_MORE","Q_ZERO_OR_MORE","Q_ZERO_OR_ONE","Q_COMMA","OPERATOR_EQ","OPERATOR_NE","COLON","WITHIN","SIMPLE_WITHIN_SCOPE","REGEXP_FLAGS","IDENTIFIER","INTEGER","REGEXP","QUOTED_STRING","Space"];static ruleNames=["query","main_query","query_disjunction","query_sequence","query_group","query_simple","quantifier","query_implicit","query_segment","within_part","within_part_simple","expression","expression_or","expression_and","expression_group","expression_not","expression_basic","attribute","qualifier","identifier","regexp","regexp_pattern","regexp_flag"];get grammarFileName(){return"FCSParser.g4"}get literalNames(){return n.literalNames}get symbolicNames(){return n.symbolicNames}get ruleNames(){return n.ruleNames}get serializedATN(){return n._serializedATN}createFailedPredicateException(e,t){return new It(this,e,t)}constructor(e){super(e),this.interpreter=new Ot(this,n._ATN,n.decisionsToDFA,new Me)}query(){const e=new Kr(this.context,this.state);this.enterRule(e,0,n.RULE_query);let t;try{this.enterOuterAlt(e,1),this.state=46,this.main_query(),this.state=49,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===18&&(this.state=47,this.match(n.WITHIN),this.state=48,this.within_part()),this.state=51,this.match(n.EOF)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}main_query(){const e=new Ht(this.context,this.state);this.enterRule(e,2,n.RULE_main_query);try{switch(this.state=57,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,1,this.context)){case 1:this.enterOuterAlt(e,1),this.state=53,this.query_simple();break;case 2:this.enterOuterAlt(e,2),this.state=54,this.query_group();break;case 3:this.enterOuterAlt(e,3),this.state=55,this.query_sequence();break;case 4:this.enterOuterAlt(e,4),this.state=56,this.query_disjunction();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}query_disjunction(){const e=new De(this.context,this.state);this.enterRule(e,4,n.RULE_query_disjunction);let t;try{this.enterOuterAlt(e,1);{switch(this.state=62,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,2,this.context)){case 1:this.state=59,this.query_simple();break;case 2:this.state=60,this.query_sequence();break;case 3:this.state=61,this.query_group();break}this.state=70,this.errorHandler.sync(this),t=this.tokenStream.LA(1);do{switch(this.state=64,this.match(n.OR),this.state=68,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,3,this.context)){case 1:this.state=65,this.query_simple();break;case 2:this.state=66,this.query_sequence();break;case 3:this.state=67,this.query_group();break}this.state=72,this.errorHandler.sync(this),t=this.tokenStream.LA(1)}while(t===5)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_sequence(){const e=new ge(this.context,this.state);this.enterRule(e,6,n.RULE_query_sequence);let t;try{this.enterOuterAlt(e,1);{this.state=76,this.errorHandler.sync(this),t=this.tokenStream.LA(1);do{switch(this.state=76,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.L_SQUARE_BRACKET:case n.REGEXP:this.state=74,this.query_simple();break;case n.L_PAREN:this.state=75,this.query_group();break;default:throw new ce(this)}this.state=78,this.errorHandler.sync(this),t=this.tokenStream.LA(1)}while((t&-32)===0&&(1<<t&8388618)!==0)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_group(){const e=new pe(this.context,this.state);this.enterRule(e,8,n.RULE_query_group);let t;try{this.enterOuterAlt(e,1);{switch(this.state=80,this.match(n.L_PAREN),this.state=83,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,7,this.context)){case 1:this.state=81,this.query_disjunction();break;case 2:this.state=82,this.query_sequence();break}this.state=85,this.match(n.R_PAREN),this.state=87,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&14848)!==0&&(this.state=86,this.quantifier())}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_simple(){const e=new _e(this.context,this.state);this.enterRule(e,10,n.RULE_query_simple);let t;try{this.enterOuterAlt(e,1);{switch(this.state=91,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.REGEXP:this.state=89,this.query_implicit();break;case n.L_SQUARE_BRACKET:this.state=90,this.query_segment();break;default:throw new ce(this)}this.state=94,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&14848)!==0&&(this.state=93,this.quantifier())}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}quantifier(){const e=new rt(this.context,this.state);this.enterRule(e,12,n.RULE_quantifier);let t;try{switch(this.enterOuterAlt(e,1),this.state=114,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.Q_ONE_OR_MORE:this.state=96,this.match(n.Q_ONE_OR_MORE);break;case n.Q_ZERO_OR_MORE:this.state=97,this.match(n.Q_ZERO_OR_MORE);break;case n.Q_ZERO_OR_ONE:this.state=98,this.match(n.Q_ZERO_OR_ONE);break;case n.L_CURLY_BRACKET:{switch(this.state=99,this.match(n.L_CURLY_BRACKET),this.state=111,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,13,this.context)){case 1:this.state=100,this.match(n.INTEGER);break;case 2:this.state=102,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===22&&(this.state=101,this.match(n.INTEGER)),this.state=104,this.match(n.Q_COMMA),this.state=105,this.match(n.INTEGER);break;case 3:this.state=106,this.match(n.INTEGER),this.state=107,this.match(n.Q_COMMA),this.state=109,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===22&&(this.state=108,this.match(n.INTEGER));break}this.state=113,this.match(n.R_CURLY_BRACKET)}break;default:throw new ce(this)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}query_implicit(){const e=new Bt(this.context,this.state);this.enterRule(e,14,n.RULE_query_implicit);try{this.enterOuterAlt(e,1),this.state=116,this.regexp()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}query_segment(){const e=new Dt(this.context,this.state);this.enterRule(e,16,n.RULE_query_segment);let t;try{this.enterOuterAlt(e,1),this.state=118,this.match(n.L_SQUARE_BRACKET),this.state=120,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&3932290)!==0&&(this.state=119,this.expression()),this.state=122,this.match(n.R_SQUARE_BRACKET)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}within_part(){const e=new Gt(this.context,this.state);this.enterRule(e,18,n.RULE_within_part);try{this.enterOuterAlt(e,1),this.state=124,this.within_part_simple()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}within_part_simple(){const e=new Pt(this.context,this.state);this.enterRule(e,20,n.RULE_within_part_simple);try{this.enterOuterAlt(e,1),this.state=126,this.match(n.SIMPLE_WITHIN_SCOPE)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression(){const e=new Wt(this.context,this.state);this.enterRule(e,22,n.RULE_expression);try{switch(this.state=133,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,16,this.context)){case 1:this.enterOuterAlt(e,1),this.state=128,this.expression_basic();break;case 2:this.enterOuterAlt(e,2),this.state=129,this.expression_group();break;case 3:this.enterOuterAlt(e,3),this.state=130,this.expression_or();break;case 4:this.enterOuterAlt(e,4),this.state=131,this.expression_and();break;case 5:this.enterOuterAlt(e,5),this.state=132,this.expression_not();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_or(){const e=new ue(this.context,this.state);this.enterRule(e,24,n.RULE_expression_or);try{let t;this.enterOuterAlt(e,1);{switch(this.state=139,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,17,this.context)){case 1:this.state=135,this.expression_basic();break;case 2:this.state=136,this.expression_group();break;case 3:this.state=137,this.expression_and();break;case 4:this.state=138,this.expression_not();break}this.state=148,this.errorHandler.sync(this),t=1;do{switch(t){case 1:switch(this.state=141,this.match(n.OR),this.state=146,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,18,this.context)){case 1:this.state=142,this.expression_basic();break;case 2:this.state=143,this.expression_group();break;case 3:this.state=144,this.expression_and();break;case 4:this.state=145,this.expression_not();break}break;default:throw new ce(this)}this.state=150,this.errorHandler.sync(this),t=this.interpreter.adaptivePredict(this.tokenStream,19,this.context)}while(t!==2&&t!==gt.INVALID_ALT_NUMBER)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_and(){const e=new he(this.context,this.state);this.enterRule(e,26,n.RULE_expression_and);try{let t;this.enterOuterAlt(e,1);{switch(this.state=155,this.errorHandler.sync(this),this.tokenStream.LA(1)){case n.WITHIN:case n.SIMPLE_WITHIN_SCOPE:case n.REGEXP_FLAGS:case n.IDENTIFIER:this.state=152,this.expression_basic();break;case n.L_PAREN:this.state=153,this.expression_group();break;case n.NOT:this.state=154,this.expression_not();break;default:throw new ce(this)}this.state=164,this.errorHandler.sync(this),t=1;do{switch(t){case 1:switch(this.state=157,this.match(n.AND),this.state=162,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,21,this.context)){case 1:this.state=158,this.expression_basic();break;case 2:this.state=159,this.expression_group();break;case 3:this.state=160,this.expression_or();break;case 4:this.state=161,this.expression_not();break}break;default:throw new ce(this)}this.state=166,this.errorHandler.sync(this),t=this.interpreter.adaptivePredict(this.tokenStream,22,this.context)}while(t!==2&&t!==gt.INVALID_ALT_NUMBER)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_group(){const e=new W(this.context,this.state);this.enterRule(e,28,n.RULE_expression_group);try{this.enterOuterAlt(e,1);{switch(this.state=168,this.match(n.L_PAREN),this.state=174,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,23,this.context)){case 1:this.state=169,this.expression_basic();break;case 2:this.state=170,this.expression_group();break;case 3:this.state=171,this.expression_or();break;case 4:this.state=172,this.expression_and();break;case 5:this.state=173,this.expression_not();break}this.state=176,this.match(n.R_PAREN)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_not(){const e=new V(this.context,this.state);this.enterRule(e,30,n.RULE_expression_not);try{switch(this.enterOuterAlt(e,1),this.state=178,this.match(n.NOT),this.state=184,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,24,this.context)){case 1:this.state=179,this.expression_basic();break;case 2:this.state=180,this.expression_group();break;case 3:this.state=181,this.expression_not();break;case 4:this.state=182,this.expression_or();break;case 5:this.state=183,this.expression_and();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}expression_basic(){const e=new te(this.context,this.state);this.enterRule(e,32,n.RULE_expression_basic);let t;try{this.enterOuterAlt(e,1),this.state=186,this.attribute(),this.state=187,t=this.tokenStream.LA(1),t===15||t===16?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this),this.state=188,this.regexp()}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}attribute(){const e=new Ft(this.context,this.state);this.enterRule(e,34,n.RULE_attribute);try{this.enterOuterAlt(e,1);{switch(this.state=193,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,25,this.context)){case 1:this.state=190,this.qualifier(),this.state=191,this.match(n.COLON);break}this.state=195,this.identifier()}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}qualifier(){const e=new $t(this.context,this.state);this.enterRule(e,36,n.RULE_qualifier);let t;try{this.enterOuterAlt(e,1),this.state=197,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&3932160)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}identifier(){const e=new Vt(this.context,this.state);this.enterRule(e,38,n.RULE_identifier);let t;try{this.enterOuterAlt(e,1),this.state=199,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&3932160)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}regexp(){const e=new it(this.context,this.state);this.enterRule(e,40,n.RULE_regexp);let t;try{this.enterOuterAlt(e,1),this.state=201,this.regexp_pattern(),this.state=204,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===8&&(this.state=202,this.match(n.FWD_SLASH),this.state=203,this.regexp_flag())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}regexp_pattern(){const e=new Kt(this.context,this.state);this.enterRule(e,42,n.RULE_regexp_pattern);try{this.enterOuterAlt(e,1),this.state=206,this.match(n.REGEXP)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}regexp_flag(){const e=new Xt(this.context,this.state);this.enterRule(e,44,n.RULE_regexp_flag);try{this.enterOuterAlt(e,1),this.state=208,this.match(n.REGEXP_FLAGS)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}static _serializedATN=[4,1,25,211,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,1,0,1,0,1,0,3,0,50,8,0,1,0,1,0,1,1,1,1,1,1,1,1,3,1,58,8,1,1,2,1,2,1,2,3,2,63,8,2,1,2,1,2,1,2,1,2,3,2,69,8,2,4,2,71,8,2,11,2,12,2,72,1,3,1,3,4,3,77,8,3,11,3,12,3,78,1,4,1,4,1,4,3,4,84,8,4,1,4,1,4,3,4,88,8,4,1,5,1,5,3,5,92,8,5,1,5,3,5,95,8,5,1,6,1,6,1,6,1,6,1,6,1,6,3,6,103,8,6,1,6,1,6,1,6,1,6,1,6,3,6,110,8,6,3,6,112,8,6,1,6,3,6,115,8,6,1,7,1,7,1,8,1,8,3,8,121,8,8,1,8,1,8,1,9,1,9,1,10,1,10,1,11,1,11,1,11,1,11,1,11,3,11,134,8,11,1,12,1,12,1,12,1,12,3,12,140,8,12,1,12,1,12,1,12,1,12,1,12,3,12,147,8,12,4,12,149,8,12,11,12,12,12,150,1,13,1,13,1,13,3,13,156,8,13,1,13,1,13,1,13,1,13,1,13,3,13,163,8,13,4,13,165,8,13,11,13,12,13,166,1,14,1,14,1,14,1,14,1,14,1,14,3,14,175,8,14,1,14,1,14,1,15,1,15,1,15,1,15,1,15,1,15,3,15,185,8,15,1,16,1,16,1,16,1,16,1,17,1,17,1,17,3,17,194,8,17,1,17,1,17,1,18,1,18,1,19,1,19,1,20,1,20,1,20,3,20,205,8,20,1,21,1,21,1,22,1,22,1,22,0,0,23,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,0,2,1,0,15,16,1,0,18,21,237,0,46,1,0,0,0,2,57,1,0,0,0,4,62,1,0,0,0,6,76,1,0,0,0,8,80,1,0,0,0,10,91,1,0,0,0,12,114,1,0,0,0,14,116,1,0,0,0,16,118,1,0,0,0,18,124,1,0,0,0,20,126,1,0,0,0,22,133,1,0,0,0,24,139,1,0,0,0,26,155,1,0,0,0,28,168,1,0,0,0,30,178,1,0,0,0,32,186,1,0,0,0,34,193,1,0,0,0,36,197,1,0,0,0,38,199,1,0,0,0,40,201,1,0,0,0,42,206,1,0,0,0,44,208,1,0,0,0,46,49,3,2,1,0,47,48,5,18,0,0,48,50,3,18,9,0,49,47,1,0,0,0,49,50,1,0,0,0,50,51,1,0,0,0,51,52,5,0,0,1,52,1,1,0,0,0,53,58,3,10,5,0,54,58,3,8,4,0,55,58,3,6,3,0,56,58,3,4,2,0,57,53,1,0,0,0,57,54,1,0,0,0,57,55,1,0,0,0,57,56,1,0,0,0,58,3,1,0,0,0,59,63,3,10,5,0,60,63,3,6,3,0,61,63,3,8,4,0,62,59,1,0,0,0,62,60,1,0,0,0,62,61,1,0,0,0,63,70,1,0,0,0,64,68,5,5,0,0,65,69,3,10,5,0,66,69,3,6,3,0,67,69,3,8,4,0,68,65,1,0,0,0,68,66,1,0,0,0,68,67,1,0,0,0,69,71,1,0,0,0,70,64,1,0,0,0,71,72,1,0,0,0,72,70,1,0,0,0,72,73,1,0,0,0,73,5,1,0,0,0,74,77,3,10,5,0,75,77,3,8,4,0,76,74,1,0,0,0,76,75,1,0,0,0,77,78,1,0,0,0,78,76,1,0,0,0,78,79,1,0,0,0,79,7,1,0,0,0,80,83,5,1,0,0,81,84,3,4,2,0,82,84,3,6,3,0,83,81,1,0,0,0,83,82,1,0,0,0,84,85,1,0,0,0,85,87,5,2,0,0,86,88,3,12,6,0,87,86,1,0,0,0,87,88,1,0,0,0,88,9,1,0,0,0,89,92,3,14,7,0,90,92,3,16,8,0,91,89,1,0,0,0,91,90,1,0,0,0,92,94,1,0,0,0,93,95,3,12,6,0,94,93,1,0,0,0,94,95,1,0,0,0,95,11,1,0,0,0,96,115,5,11,0,0,97,115,5,12,0,0,98,115,5,13,0,0,99,111,5,9,0,0,100,112,5,22,0,0,101,103,5,22,0,0,102,101,1,0,0,0,102,103,1,0,0,0,103,104,1,0,0,0,104,105,5,14,0,0,105,112,5,22,0,0,106,107,5,22,0,0,107,109,5,14,0,0,108,110,5,22,0,0,109,108,1,0,0,0,109,110,1,0,0,0,110,112,1,0,0,0,111,100,1,0,0,0,111,102,1,0,0,0,111,106,1,0,0,0,112,113,1,0,0,0,113,115,5,10,0,0,114,96,1,0,0,0,114,97,1,0,0,0,114,98,1,0,0,0,114,99,1,0,0,0,115,13,1,0,0,0,116,117,3,40,20,0,117,15,1,0,0,0,118,120,5,3,0,0,119,121,3,22,11,0,120,119,1,0,0,0,120,121,1,0,0,0,121,122,1,0,0,0,122,123,5,4,0,0,123,17,1,0,0,0,124,125,3,20,10,0,125,19,1,0,0,0,126,127,5,19,0,0,127,21,1,0,0,0,128,134,3,32,16,0,129,134,3,28,14,0,130,134,3,24,12,0,131,134,3,26,13,0,132,134,3,30,15,0,133,128,1,0,0,0,133,129,1,0,0,0,133,130,1,0,0,0,133,131,1,0,0,0,133,132,1,0,0,0,134,23,1,0,0,0,135,140,3,32,16,0,136,140,3,28,14,0,137,140,3,26,13,0,138,140,3,30,15,0,139,135,1,0,0,0,139,136,1,0,0,0,139,137,1,0,0,0,139,138,1,0,0,0,140,148,1,0,0,0,141,146,5,5,0,0,142,147,3,32,16,0,143,147,3,28,14,0,144,147,3,26,13,0,145,147,3,30,15,0,146,142,1,0,0,0,146,143,1,0,0,0,146,144,1,0,0,0,146,145,1,0,0,0,147,149,1,0,0,0,148,141,1,0,0,0,149,150,1,0,0,0,150,148,1,0,0,0,150,151,1,0,0,0,151,25,1,0,0,0,152,156,3,32,16,0,153,156,3,28,14,0,154,156,3,30,15,0,155,152,1,0,0,0,155,153,1,0,0,0,155,154,1,0,0,0,156,164,1,0,0,0,157,162,5,6,0,0,158,163,3,32,16,0,159,163,3,28,14,0,160,163,3,24,12,0,161,163,3,30,15,0,162,158,1,0,0,0,162,159,1,0,0,0,162,160,1,0,0,0,162,161,1,0,0,0,163,165,1,0,0,0,164,157,1,0,0,0,165,166,1,0,0,0,166,164,1,0,0,0,166,167,1,0,0,0,167,27,1,0,0,0,168,174,5,1,0,0,169,175,3,32,16,0,170,175,3,28,14,0,171,175,3,24,12,0,172,175,3,26,13,0,173,175,3,30,15,0,174,169,1,0,0,0,174,170,1,0,0,0,174,171,1,0,0,0,174,172,1,0,0,0,174,173,1,0,0,0,175,176,1,0,0,0,176,177,5,2,0,0,177,29,1,0,0,0,178,184,5,7,0,0,179,185,3,32,16,0,180,185,3,28,14,0,181,185,3,30,15,0,182,185,3,24,12,0,183,185,3,26,13,0,184,179,1,0,0,0,184,180,1,0,0,0,184,181,1,0,0,0,184,182,1,0,0,0,184,183,1,0,0,0,185,31,1,0,0,0,186,187,3,34,17,0,187,188,7,0,0,0,188,189,3,40,20,0,189,33,1,0,0,0,190,191,3,36,18,0,191,192,5,17,0,0,192,194,1,0,0,0,193,190,1,0,0,0,193,194,1,0,0,0,194,195,1,0,0,0,195,196,3,38,19,0,196,35,1,0,0,0,197,198,7,1,0,0,198,37,1,0,0,0,199,200,7,1,0,0,200,39,1,0,0,0,201,204,3,42,21,0,202,203,5,8,0,0,203,205,3,44,22,0,204,202,1,0,0,0,204,205,1,0,0,0,205,41,1,0,0,0,206,207,5,23,0,0,207,43,1,0,0,0,208,209,5,20,0,0,209,45,1,0,0,0,27,49,57,62,68,72,76,78,83,87,91,94,102,109,111,114,120,133,139,146,150,155,162,166,174,184,193,204];static __ATN;static get _ATN(){return n.__ATN||(n.__ATN=new qe().deserialize(n._serializedATN)),n.__ATN}static vocabulary=new He(n.literalNames,n.symbolicNames,[]);get vocabulary(){return n.vocabulary}static decisionsToDFA=n._ATN.decisionToState.map((e,t)=>new Be(e,t))}let Kr=class extends b{constructor(e,t){super(e,t)}main_query(){return this.getRuleContext(0,Ht)}EOF(){return this.getToken(n.EOF,0)}WITHIN(){return this.getToken(n.WITHIN,0)}within_part(){return this.getRuleContext(0,Gt)}get ruleIndex(){return n.RULE_query}enterRule(e){e.enterQuery&&e.enterQuery(this)}exitRule(e){e.exitQuery&&e.exitQuery(this)}accept(e){return e.visitQuery?e.visitQuery(this):e.visitChildren(this)}};class Ht extends b{constructor(e,t){super(e,t)}query_simple(){return this.getRuleContext(0,_e)}query_group(){return this.getRuleContext(0,pe)}query_sequence(){return this.getRuleContext(0,ge)}query_disjunction(){return this.getRuleContext(0,De)}get ruleIndex(){return n.RULE_main_query}enterRule(e){e.enterMain_query&&e.enterMain_query(this)}exitRule(e){e.exitMain_query&&e.exitMain_query(this)}accept(e){return e.visitMain_query?e.visitMain_query(this):e.visitChildren(this)}}class De extends b{constructor(e,t){super(e,t)}query_simple(e){return e===void 0?this.getRuleContexts(_e):this.getRuleContext(e,_e)}query_sequence(e){return e===void 0?this.getRuleContexts(ge):this.getRuleContext(e,ge)}query_group(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}OR(e){return e===void 0?this.getTokens(n.OR):this.getToken(n.OR,e)}get ruleIndex(){return n.RULE_query_disjunction}enterRule(e){e.enterQuery_disjunction&&e.enterQuery_disjunction(this)}exitRule(e){e.exitQuery_disjunction&&e.exitQuery_disjunction(this)}accept(e){return e.visitQuery_disjunction?e.visitQuery_disjunction(this):e.visitChildren(this)}}class ge extends b{constructor(e,t){super(e,t)}query_simple(e){return e===void 0?this.getRuleContexts(_e):this.getRuleContext(e,_e)}query_group(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}get ruleIndex(){return n.RULE_query_sequence}enterRule(e){e.enterQuery_sequence&&e.enterQuery_sequence(this)}exitRule(e){e.exitQuery_sequence&&e.exitQuery_sequence(this)}accept(e){return e.visitQuery_sequence?e.visitQuery_sequence(this):e.visitChildren(this)}}class pe extends b{constructor(e,t){super(e,t)}L_PAREN(){return this.getToken(n.L_PAREN,0)}R_PAREN(){return this.getToken(n.R_PAREN,0)}query_disjunction(){return this.getRuleContext(0,De)}query_sequence(){return this.getRuleContext(0,ge)}quantifier(){return this.getRuleContext(0,rt)}get ruleIndex(){return n.RULE_query_group}enterRule(e){e.enterQuery_group&&e.enterQuery_group(this)}exitRule(e){e.exitQuery_group&&e.exitQuery_group(this)}accept(e){return e.visitQuery_group?e.visitQuery_group(this):e.visitChildren(this)}}class _e extends b{constructor(e,t){super(e,t)}query_implicit(){return this.getRuleContext(0,Bt)}query_segment(){return this.getRuleContext(0,Dt)}quantifier(){return this.getRuleContext(0,rt)}get ruleIndex(){return n.RULE_query_simple}enterRule(e){e.enterQuery_simple&&e.enterQuery_simple(this)}exitRule(e){e.exitQuery_simple&&e.exitQuery_simple(this)}accept(e){return e.visitQuery_simple?e.visitQuery_simple(this):e.visitChildren(this)}}class rt extends b{constructor(e,t){super(e,t)}Q_ONE_OR_MORE(){return this.getToken(n.Q_ONE_OR_MORE,0)}Q_ZERO_OR_MORE(){return this.getToken(n.Q_ZERO_OR_MORE,0)}Q_ZERO_OR_ONE(){return this.getToken(n.Q_ZERO_OR_ONE,0)}L_CURLY_BRACKET(){return this.getToken(n.L_CURLY_BRACKET,0)}R_CURLY_BRACKET(){return this.getToken(n.R_CURLY_BRACKET,0)}INTEGER(e){return e===void 0?this.getTokens(n.INTEGER):this.getToken(n.INTEGER,e)}Q_COMMA(){return this.getToken(n.Q_COMMA,0)}get ruleIndex(){return n.RULE_quantifier}enterRule(e){e.enterQuantifier&&e.enterQuantifier(this)}exitRule(e){e.exitQuantifier&&e.exitQuantifier(this)}accept(e){return e.visitQuantifier?e.visitQuantifier(this):e.visitChildren(this)}}class Bt extends b{constructor(e,t){super(e,t)}regexp(){return this.getRuleContext(0,it)}get ruleIndex(){return n.RULE_query_implicit}enterRule(e){e.enterQuery_implicit&&e.enterQuery_implicit(this)}exitRule(e){e.exitQuery_implicit&&e.exitQuery_implicit(this)}accept(e){return e.visitQuery_implicit?e.visitQuery_implicit(this):e.visitChildren(this)}}class Dt extends b{constructor(e,t){super(e,t)}L_SQUARE_BRACKET(){return this.getToken(n.L_SQUARE_BRACKET,0)}R_SQUARE_BRACKET(){return this.getToken(n.R_SQUARE_BRACKET,0)}expression(){return this.getRuleContext(0,Wt)}get ruleIndex(){return n.RULE_query_segment}enterRule(e){e.enterQuery_segment&&e.enterQuery_segment(this)}exitRule(e){e.exitQuery_segment&&e.exitQuery_segment(this)}accept(e){return e.visitQuery_segment?e.visitQuery_segment(this):e.visitChildren(this)}}class Gt extends b{constructor(e,t){super(e,t)}within_part_simple(){return this.getRuleContext(0,Pt)}get ruleIndex(){return n.RULE_within_part}enterRule(e){e.enterWithin_part&&e.enterWithin_part(this)}exitRule(e){e.exitWithin_part&&e.exitWithin_part(this)}accept(e){return e.visitWithin_part?e.visitWithin_part(this):e.visitChildren(this)}}class Pt extends b{constructor(e,t){super(e,t)}SIMPLE_WITHIN_SCOPE(){return this.getToken(n.SIMPLE_WITHIN_SCOPE,0)}get ruleIndex(){return n.RULE_within_part_simple}enterRule(e){e.enterWithin_part_simple&&e.enterWithin_part_simple(this)}exitRule(e){e.exitWithin_part_simple&&e.exitWithin_part_simple(this)}accept(e){return e.visitWithin_part_simple?e.visitWithin_part_simple(this):e.visitChildren(this)}}class Wt extends b{constructor(e,t){super(e,t)}expression_basic(){return this.getRuleContext(0,te)}expression_group(){return this.getRuleContext(0,W)}expression_or(){return this.getRuleContext(0,ue)}expression_and(){return this.getRuleContext(0,he)}expression_not(){return this.getRuleContext(0,V)}get ruleIndex(){return n.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}class ue extends b{constructor(e,t){super(e,t)}expression_basic(e){return e===void 0?this.getRuleContexts(te):this.getRuleContext(e,te)}expression_group(e){return e===void 0?this.getRuleContexts(W):this.getRuleContext(e,W)}expression_and(e){return e===void 0?this.getRuleContexts(he):this.getRuleContext(e,he)}expression_not(e){return e===void 0?this.getRuleContexts(V):this.getRuleContext(e,V)}OR(e){return e===void 0?this.getTokens(n.OR):this.getToken(n.OR,e)}get ruleIndex(){return n.RULE_expression_or}enterRule(e){e.enterExpression_or&&e.enterExpression_or(this)}exitRule(e){e.exitExpression_or&&e.exitExpression_or(this)}accept(e){return e.visitExpression_or?e.visitExpression_or(this):e.visitChildren(this)}}class he extends b{constructor(e,t){super(e,t)}expression_basic(e){return e===void 0?this.getRuleContexts(te):this.getRuleContext(e,te)}expression_group(e){return e===void 0?this.getRuleContexts(W):this.getRuleContext(e,W)}expression_not(e){return e===void 0?this.getRuleContexts(V):this.getRuleContext(e,V)}AND(e){return e===void 0?this.getTokens(n.AND):this.getToken(n.AND,e)}expression_or(e){return e===void 0?this.getRuleContexts(ue):this.getRuleContext(e,ue)}get ruleIndex(){return n.RULE_expression_and}enterRule(e){e.enterExpression_and&&e.enterExpression_and(this)}exitRule(e){e.exitExpression_and&&e.exitExpression_and(this)}accept(e){return e.visitExpression_and?e.visitExpression_and(this):e.visitChildren(this)}}class W extends b{constructor(e,t){super(e,t)}L_PAREN(){return this.getToken(n.L_PAREN,0)}R_PAREN(){return this.getToken(n.R_PAREN,0)}expression_basic(){return this.getRuleContext(0,te)}expression_group(){return this.getRuleContext(0,W)}expression_or(){return this.getRuleContext(0,ue)}expression_and(){return this.getRuleContext(0,he)}expression_not(){return this.getRuleContext(0,V)}get ruleIndex(){return n.RULE_expression_group}enterRule(e){e.enterExpression_group&&e.enterExpression_group(this)}exitRule(e){e.exitExpression_group&&e.exitExpression_group(this)}accept(e){return e.visitExpression_group?e.visitExpression_group(this):e.visitChildren(this)}}class V extends b{constructor(e,t){super(e,t)}NOT(){return this.getToken(n.NOT,0)}expression_basic(){return this.getRuleContext(0,te)}expression_group(){return this.getRuleContext(0,W)}expression_not(){return this.getRuleContext(0,V)}expression_or(){return this.getRuleContext(0,ue)}expression_and(){return this.getRuleContext(0,he)}get ruleIndex(){return n.RULE_expression_not}enterRule(e){e.enterExpression_not&&e.enterExpression_not(this)}exitRule(e){e.exitExpression_not&&e.exitExpression_not(this)}accept(e){return e.visitExpression_not?e.visitExpression_not(this):e.visitChildren(this)}}class te extends b{constructor(e,t){super(e,t)}attribute(){return this.getRuleContext(0,Ft)}regexp(){return this.getRuleContext(0,it)}OPERATOR_EQ(){return this.getToken(n.OPERATOR_EQ,0)}OPERATOR_NE(){return this.getToken(n.OPERATOR_NE,0)}get ruleIndex(){return n.RULE_expression_basic}enterRule(e){e.enterExpression_basic&&e.enterExpression_basic(this)}exitRule(e){e.exitExpression_basic&&e.exitExpression_basic(this)}accept(e){return e.visitExpression_basic?e.visitExpression_basic(this):e.visitChildren(this)}}class Ft extends b{constructor(e,t){super(e,t)}identifier(){return this.getRuleContext(0,Vt)}qualifier(){return this.getRuleContext(0,$t)}COLON(){return this.getToken(n.COLON,0)}get ruleIndex(){return n.RULE_attribute}enterRule(e){e.enterAttribute&&e.enterAttribute(this)}exitRule(e){e.exitAttribute&&e.exitAttribute(this)}accept(e){return e.visitAttribute?e.visitAttribute(this):e.visitChildren(this)}}class $t extends b{constructor(e,t){super(e,t)}IDENTIFIER(){return this.getToken(n.IDENTIFIER,0)}WITHIN(){return this.getToken(n.WITHIN,0)}SIMPLE_WITHIN_SCOPE(){return this.getToken(n.SIMPLE_WITHIN_SCOPE,0)}REGEXP_FLAGS(){return this.getToken(n.REGEXP_FLAGS,0)}get ruleIndex(){return n.RULE_qualifier}enterRule(e){e.enterQualifier&&e.enterQualifier(this)}exitRule(e){e.exitQualifier&&e.exitQualifier(this)}accept(e){return e.visitQualifier?e.visitQualifier(this):e.visitChildren(this)}}class Vt extends b{constructor(e,t){super(e,t)}IDENTIFIER(){return this.getToken(n.IDENTIFIER,0)}WITHIN(){return this.getToken(n.WITHIN,0)}SIMPLE_WITHIN_SCOPE(){return this.getToken(n.SIMPLE_WITHIN_SCOPE,0)}REGEXP_FLAGS(){return this.getToken(n.REGEXP_FLAGS,0)}get ruleIndex(){return n.RULE_identifier}enterRule(e){e.enterIdentifier&&e.enterIdentifier(this)}exitRule(e){e.exitIdentifier&&e.exitIdentifier(this)}accept(e){return e.visitIdentifier?e.visitIdentifier(this):e.visitChildren(this)}}class it extends b{constructor(e,t){super(e,t)}regexp_pattern(){return this.getRuleContext(0,Kt)}FWD_SLASH(){return this.getToken(n.FWD_SLASH,0)}regexp_flag(){return this.getRuleContext(0,Xt)}get ruleIndex(){return n.RULE_regexp}enterRule(e){e.enterRegexp&&e.enterRegexp(this)}exitRule(e){e.exitRegexp&&e.exitRegexp(this)}accept(e){return e.visitRegexp?e.visitRegexp(this):e.visitChildren(this)}}class Kt extends b{constructor(e,t){super(e,t)}REGEXP(){return this.getToken(n.REGEXP,0)}get ruleIndex(){return n.RULE_regexp_pattern}enterRule(e){e.enterRegexp_pattern&&e.enterRegexp_pattern(this)}exitRule(e){e.exitRegexp_pattern&&e.exitRegexp_pattern(this)}accept(e){return e.visitRegexp_pattern?e.visitRegexp_pattern(this):e.visitChildren(this)}}class Xt extends b{constructor(e,t){super(e,t)}REGEXP_FLAGS(){return this.getToken(n.REGEXP_FLAGS,0)}get ruleIndex(){return n.RULE_regexp_flag}enterRule(e){e.enterRegexp_flag&&e.enterRegexp_flag(this)}exitRule(e){e.exitRegexp_flag&&e.exitRegexp_flag(this)}accept(e){return e.visitRegexp_flag?e.visitRegexp_flag(this):e.visitChildren(this)}}class zt extends $r{errors=[];syntaxError(e,t,s,o,f,u){this.errors.push(`Syntax error: ${f} at position ${o}`)}}function Te(r,e){if(!r||e===void 0)return!1;const t=Array.isArray(e)?e[0]:e,s=Array.isArray(e)?e[1]:e;if(r instanceof b&&r.start!==null&&r.stop!==null){const o=r.start.start,f=r.stop.stop+1;if(o<t&&t<f||o<s&&s<f||t===s&&(o===s||s===f)||t<=o&&f<=s)return!0}return!1}const Yt=[{id:"text",label:"textual representation"},{id:"lemma",label:"lemmatization of tokens"},{id:"pos",label:"part-of-speech UD v2.0 tagset"},{id:"orth",label:"orthographic transcription"},{id:"norm",label:"orthographic normalization"},{id:"phonetic",label:"phonetic transcription SAMPA"}],yt=Object.fromEntries(Yt.map(r=>[r.id,r])),Xr=[{id:"pos",operators:["is","is-not"],options:[{value:"ADJ",label:"Adjective"},{value:"ADV",label:"Adverb"},{value:"INTJ",label:"Interjection"},{value:"NOUN",label:"Noun"},{value:"PROPN",label:"Proper noun"},{value:"VERB",label:"Verb"},{value:"ADP",label:"Adposition"},{value:"AUX",label:"Auxiliary"},{value:"CCONJ",label:"Coordinating conjunction"},{value:"DET",label:"Determiner"},{value:"NUM",label:"Numeral"},{value:"PART",label:"Particle"},{value:"PRON",label:"Pronoun"},{value:"SCONJ",label:"Subordinating conjunction"},{value:"PUNCT",label:"Punctuation"},{value:"SYM",label:"Symbol"},{value:"X",label:"Other"}]}],bt=Object.fromEntries(Xr.map(r=>[r.id,r])),Zt=[{id:"is",label:"is",operator:"=",valueAfter:null,valueBefore:null,escape:!0},{id:"is-not",label:"is not",operator:"!=",valueAfter:null,valueBefore:null,escape:!0},{id:"contains",label:"contains",operator:"=",valueAfter:".*",valueBefore:".*",escape:!0},{id:"starts-with",label:"starts with",operator:"=",valueAfter:".*",valueBefore:null,escape:!0},{id:"ends-with",label:"ends with",operator:"=",valueAfter:null,valueBefore:".*",escape:!0},{id:"regex",label:"regex",operator:"=",valueAfter:null,valueBefore:null,escape:!1},{id:"not-regex",label:"not regex",operator:"!=",valueAfter:null,valueBefore:null,escape:!1}],Ke=Object.fromEntries(Zt.map(r=>[r.id,r])),zr="?",se='text = ""',Yr=["sentence","s","utterance","u","paragraph","p","turn","t","text","session"],Jt=[{id:"*",label:"Zero or More",type:"symbol",new:"*"},{id:"+",label:"One or More",type:"symbol",new:"+"},{id:"?",label:"Zero or One",type:"symbol",new:"?"},{id:"n-n",label:"Exactly N",type:"range",new:"{1}"},{id:"n-m",label:"N to M",type:"range",new:"{0,1}"},{id:"n-",label:"At least N",type:"range",new:"{0,}"},{id:"-m",label:"At most M",type:"range",new:"{,1}"}],Zr=Object.fromEntries(Jt.map(r=>[r.id,r])),er=[{id:"token",label:"Normal Token",new:`[ ${se} ]`},{id:"unspecific-token",label:"Unspecific Token",new:"[]"},{id:"string",label:"Plain String",new:'""'}],Xe=Object.fromEntries(er.map(r=>[r.id,r])),tr=[{id:"basic",label:"Expression",new:`${se}`},{id:"or",label:"OR",new:`${se} | ${se}`},{id:"and",label:"AND",new:`${se} & ${se}`}],Qe=Object.fromEntries(tr.map(r=>[r.id,r])),rr=[{id:"or",label:"OR",newBefore:`${se} |`,newAfter:`| ${se}`},{id:"and",label:"AND",newBefore:`${se} &`,newAfter:`& ${se}`}],Jr=Object.fromEntries(rr.map(r=>[r.id,r])),ir=[{id:"group",label:"Group",newBefore:"(",newAfter:")"},{id:"not",label:"Negation",newBefore:"!",newAfter:null}],At=Object.fromEntries(ir.map(r=>[r.id,r])),st=d.createContext(void 0);st.displayName="FCSParserLexerContext";function ei({parser:r,lexer:e,cursorPos:t,children:s}){const o={parser:r,lexer:e,cursorPos:t};return i.jsx(st.Provider,{value:o,children:s})}function sr(){const r=d.useContext(st);if(!r)throw new Error('No parser and lexer "data" set, use FCSParserLexerProvider to set');return r}const nt=d.createContext(void 0);nt.displayName="FCSQueryBuilderConfigContext";function ti({enableWithin:r=!0,enableWrapGroup:e=!0,enableWrapNegation:t=!0,enableImplicitQuery:s=!0,enableMultipleQuerySegments:o=!0,enableQuantifiers:f=!0,enableRegexpFlags:u=!0,showBasicLayer:c=!0,showAllAdvancedLayers:l=!0,showCustomLayers:x=!0,showLayerQualifiers:m=!0,showResourceCountForLayer:v=!0,children:R}){const _={enableWithin:r,enableWrapGroup:e,enableWrapNegation:t,enableImplicitQuery:s,enableMultipleQuerySegments:o,enableQuantifiers:f,enableRegexpFlags:u,showBasicLayer:c,showAllAdvancedLayers:l,showCustomLayers:x,showLayerQualifiers:m,showResourceCountForLayer:v};return i.jsx(nt.Provider,{value:_,children:R})}function ye(){const r=d.useContext(nt);if(!r)throw new Error('No flags "data" set, use FCSQueryBuilderConfigProvider to set');return r}const ot=d.createContext(void 0);ot.displayName="FCSQueryUpdaterContext";function ri({rewriter:r,children:e}){const t={rewriter:r};return i.jsx(ot.Provider,{value:t,children:e})}function be(){const r=d.useContext(ot);if(!r)throw new Error('No rewriter "data" set, use FCSQueryUpdaterProvider to set');return r}const at=d.createContext(void 0);at.displayName="FCSResourceLayerInfoContext";function ii({resources:r,layerInfo:e,children:t}){const s={resources:r,layerInfo:e};return i.jsx(at.Provider,{value:s,children:t})}function si(){const r=d.useContext(at);if(!r)throw new Error('No resources and layer info "data" set, use FCSResourceLayerInfoProvider to set');return r}class D extends Qt{static L_PAREN=1;static R_PAREN=2;static L_SQUARE_BRACKET=3;static R_SQUARE_BRACKET=4;static OR=5;static AND=6;static NOT=7;static FWD_SLASH=8;static L_CURLY_BRACKET=9;static R_CURLY_BRACKET=10;static Q_ONE_OR_MORE=11;static Q_ZERO_OR_MORE=12;static Q_ZERO_OR_ONE=13;static Q_COMMA=14;static OPERATOR_EQ=15;static OPERATOR_NE=16;static COLON=17;static WITHIN=18;static SIMPLE_WITHIN_SCOPE=19;static REGEXP_FLAGS=20;static IDENTIFIER=21;static INTEGER=22;static REGEXP=23;static QUOTED_STRING=24;static Space=25;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,"'('","')'","'['","']'","'|'","'&'","'!'","'/'","'{'","'}'","'+'","'*'","'?'","','","'='","'!='","':'","'within'"];static symbolicNames=[null,"L_PAREN","R_PAREN","L_SQUARE_BRACKET","R_SQUARE_BRACKET","OR","AND","NOT","FWD_SLASH","L_CURLY_BRACKET","R_CURLY_BRACKET","Q_ONE_OR_MORE","Q_ZERO_OR_MORE","Q_ZERO_OR_ONE","Q_COMMA","OPERATOR_EQ","OPERATOR_NE","COLON","WITHIN","SIMPLE_WITHIN_SCOPE","REGEXP_FLAGS","IDENTIFIER","INTEGER","REGEXP","QUOTED_STRING","Space"];static modeNames=["DEFAULT_MODE"];static ruleNames=["L_PAREN","R_PAREN","L_SQUARE_BRACKET","R_SQUARE_BRACKET","OR","AND","NOT","FWD_SLASH","L_CURLY_BRACKET","R_CURLY_BRACKET","Q_ONE_OR_MORE","Q_ZERO_OR_MORE","Q_ZERO_OR_ONE","Q_COMMA","OPERATOR_EQ","OPERATOR_NE","COLON","WITHIN","SIMPLE_WITHIN_SCOPE","REGEXP_FLAGS","IDENTIFIER_FIRST_CHAR","IDENTIFIER_LAST_CHAR","IDENTIFIER_CHAR","IDENTIFIER","INTEGER","REGEXP","QUOTED_STRING","CHAR","WS","ESCAPED_CHAR","HEX","Space"];constructor(e){super(e),this.interpreter=new Ut(this,D._ATN,D.decisionsToDFA,new Me)}get grammarFileName(){return"FCSLexer.g4"}get literalNames(){return D.literalNames}get symbolicNames(){return D.symbolicNames}get ruleNames(){return D.ruleNames}get serializedATN(){return D._serializedATN}get channelNames(){return D.channelNames}get modeNames(){return D.modeNames}static _serializedATN=[4,0,25,238,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,2,29,7,29,2,30,7,30,2,31,7,31,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,1,5,1,5,1,6,1,6,1,7,1,7,1,8,1,8,1,9,1,9,1,10,1,10,1,11,1,11,1,12,1,12,1,13,1,13,1,14,1,14,1,15,1,15,1,15,1,16,1,16,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,3,18,153,8,18,1,19,4,19,156,8,19,11,19,12,19,157,1,20,1,20,1,21,1,21,1,22,1,22,1,23,1,23,5,23,168,8,23,10,23,12,23,171,9,23,1,23,3,23,174,8,23,1,24,4,24,177,8,24,11,24,12,24,178,1,25,1,25,1,26,1,26,1,26,5,26,186,8,26,10,26,12,26,189,9,26,1,26,1,26,1,26,1,26,5,26,195,8,26,10,26,12,26,198,9,26,1,26,3,26,201,8,26,1,27,1,27,3,27,205,8,27,1,28,1,28,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,3,29,231,8,29,1,30,1,30,1,31,1,31,1,31,1,31,0,0,32,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,35,18,37,19,39,20,41,0,43,0,45,0,47,21,49,22,51,23,53,24,55,0,57,0,59,0,61,0,63,25,1,0,10,5,0,67,67,73,73,99,100,105,105,108,108,2,0,65,90,97,122,3,0,48,57,65,90,97,122,4,0,45,45,48,57,65,90,97,122,1,0,48,57,2,0,39,39,92,92,2,0,34,34,92,92,10,0,9,13,32,32,133,133,160,160,5760,5760,8192,8202,8232,8233,8239,8239,8287,8287,12288,12288,9,0,34,34,36,36,39,43,46,46,63,63,91,94,110,110,116,116,123,125,3,0,48,57,65,70,97,102,252,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,0,35,1,0,0,0,0,37,1,0,0,0,0,39,1,0,0,0,0,47,1,0,0,0,0,49,1,0,0,0,0,51,1,0,0,0,0,53,1,0,0,0,0,63,1,0,0,0,1,65,1,0,0,0,3,67,1,0,0,0,5,69,1,0,0,0,7,71,1,0,0,0,9,73,1,0,0,0,11,75,1,0,0,0,13,77,1,0,0,0,15,79,1,0,0,0,17,81,1,0,0,0,19,83,1,0,0,0,21,85,1,0,0,0,23,87,1,0,0,0,25,89,1,0,0,0,27,91,1,0,0,0,29,93,1,0,0,0,31,95,1,0,0,0,33,98,1,0,0,0,35,100,1,0,0,0,37,152,1,0,0,0,39,155,1,0,0,0,41,159,1,0,0,0,43,161,1,0,0,0,45,163,1,0,0,0,47,165,1,0,0,0,49,176,1,0,0,0,51,180,1,0,0,0,53,200,1,0,0,0,55,204,1,0,0,0,57,206,1,0,0,0,59,208,1,0,0,0,61,232,1,0,0,0,63,234,1,0,0,0,65,66,5,40,0,0,66,2,1,0,0,0,67,68,5,41,0,0,68,4,1,0,0,0,69,70,5,91,0,0,70,6,1,0,0,0,71,72,5,93,0,0,72,8,1,0,0,0,73,74,5,124,0,0,74,10,1,0,0,0,75,76,5,38,0,0,76,12,1,0,0,0,77,78,5,33,0,0,78,14,1,0,0,0,79,80,5,47,0,0,80,16,1,0,0,0,81,82,5,123,0,0,82,18,1,0,0,0,83,84,5,125,0,0,84,20,1,0,0,0,85,86,5,43,0,0,86,22,1,0,0,0,87,88,5,42,0,0,88,24,1,0,0,0,89,90,5,63,0,0,90,26,1,0,0,0,91,92,5,44,0,0,92,28,1,0,0,0,93,94,5,61,0,0,94,30,1,0,0,0,95,96,5,33,0,0,96,97,5,61,0,0,97,32,1,0,0,0,98,99,5,58,0,0,99,34,1,0,0,0,100,101,5,119,0,0,101,102,5,105,0,0,102,103,5,116,0,0,103,104,5,104,0,0,104,105,5,105,0,0,105,106,5,110,0,0,106,36,1,0,0,0,107,108,5,115,0,0,108,109,5,101,0,0,109,110,5,110,0,0,110,111,5,116,0,0,111,112,5,101,0,0,112,113,5,110,0,0,113,114,5,99,0,0,114,153,5,101,0,0,115,153,5,115,0,0,116,117,5,117,0,0,117,118,5,116,0,0,118,119,5,116,0,0,119,120,5,101,0,0,120,121,5,114,0,0,121,122,5,97,0,0,122,123,5,110,0,0,123,124,5,99,0,0,124,153,5,101,0,0,125,153,5,117,0,0,126,127,5,112,0,0,127,128,5,97,0,0,128,129,5,114,0,0,129,130,5,97,0,0,130,131,5,103,0,0,131,132,5,114,0,0,132,133,5,97,0,0,133,134,5,112,0,0,134,153,5,104,0,0,135,153,5,112,0,0,136,137,5,116,0,0,137,138,5,117,0,0,138,139,5,114,0,0,139,153,5,110,0,0,140,153,5,116,0,0,141,142,5,116,0,0,142,143,5,101,0,0,143,144,5,120,0,0,144,153,5,116,0,0,145,146,5,115,0,0,146,147,5,101,0,0,147,148,5,115,0,0,148,149,5,115,0,0,149,150,5,105,0,0,150,151,5,111,0,0,151,153,5,110,0,0,152,107,1,0,0,0,152,115,1,0,0,0,152,116,1,0,0,0,152,125,1,0,0,0,152,126,1,0,0,0,152,135,1,0,0,0,152,136,1,0,0,0,152,140,1,0,0,0,152,141,1,0,0,0,152,145,1,0,0,0,153,38,1,0,0,0,154,156,7,0,0,0,155,154,1,0,0,0,156,157,1,0,0,0,157,155,1,0,0,0,157,158,1,0,0,0,158,40,1,0,0,0,159,160,7,1,0,0,160,42,1,0,0,0,161,162,7,2,0,0,162,44,1,0,0,0,163,164,7,3,0,0,164,46,1,0,0,0,165,173,3,41,20,0,166,168,3,45,22,0,167,166,1,0,0,0,168,171,1,0,0,0,169,167,1,0,0,0,169,170,1,0,0,0,170,172,1,0,0,0,171,169,1,0,0,0,172,174,3,43,21,0,173,169,1,0,0,0,173,174,1,0,0,0,174,48,1,0,0,0,175,177,7,4,0,0,176,175,1,0,0,0,177,178,1,0,0,0,178,176,1,0,0,0,178,179,1,0,0,0,179,50,1,0,0,0,180,181,3,53,26,0,181,52,1,0,0,0,182,187,5,39,0,0,183,186,3,59,29,0,184,186,8,5,0,0,185,183,1,0,0,0,185,184,1,0,0,0,186,189,1,0,0,0,187,185,1,0,0,0,187,188,1,0,0,0,188,190,1,0,0,0,189,187,1,0,0,0,190,201,5,39,0,0,191,196,5,34,0,0,192,195,3,59,29,0,193,195,8,6,0,0,194,192,1,0,0,0,194,193,1,0,0,0,195,198,1,0,0,0,196,194,1,0,0,0,196,197,1,0,0,0,197,199,1,0,0,0,198,196,1,0,0,0,199,201,5,34,0,0,200,182,1,0,0,0,200,191,1,0,0,0,201,54,1,0,0,0,202,205,3,59,29,0,203,205,8,7,0,0,204,202,1,0,0,0,204,203,1,0,0,0,205,56,1,0,0,0,206,207,7,7,0,0,207,58,1,0,0,0,208,230,5,92,0,0,209,231,7,8,0,0,210,211,5,120,0,0,211,212,3,61,30,0,212,213,3,61,30,0,213,231,1,0,0,0,214,215,5,117,0,0,215,216,3,61,30,0,216,217,3,61,30,0,217,218,3,61,30,0,218,219,3,61,30,0,219,231,1,0,0,0,220,221,5,85,0,0,221,222,3,61,30,0,222,223,3,61,30,0,223,224,3,61,30,0,224,225,3,61,30,0,225,226,3,61,30,0,226,227,3,61,30,0,227,228,3,61,30,0,228,229,3,61,30,0,229,231,1,0,0,0,230,209,1,0,0,0,230,210,1,0,0,0,230,214,1,0,0,0,230,220,1,0,0,0,231,60,1,0,0,0,232,233,7,9,0,0,233,62,1,0,0,0,234,235,3,57,28,0,235,236,1,0,0,0,236,237,6,31,0,0,237,64,1,0,0,0,13,0,152,157,169,173,178,185,187,194,196,200,204,230,1,0,1,0];static __ATN;static get _ATN(){return D.__ATN||(D.__ATN=new qe().deserialize(D._serializedATN)),D.__ATN}static vocabulary=new He(D.literalNames,D.symbolicNames,[]);get vocabulary(){return D.vocabulary}static decisionsToDFA=D._ATN.decisionToState.map((e,t)=>new Be(e,t))}class ni extends jt{visitQuery;visitMain_query;visitQuery_disjunction;visitQuery_sequence;visitQuery_group;visitQuery_simple;visitQuantifier;visitQuery_implicit;visitQuery_segment;visitWithin_part;visitWithin_part_simple;visitExpression;visitExpression_or;visitExpression_and;visitExpression_group;visitExpression_not;visitExpression_basic;visitAttribute;visitQualifier;visitIdentifier;visitRegexp;visitRegexp_pattern;visitRegexp_flag}function nr(r){if(!r||!r.trim())return null;const e=kt.fromString(r),t=new D(e),s=new Mt(t),o=new qt(s),f=new n(s),u=new zt;return t.removeErrorListeners(),t.addErrorListener(u),f.removeErrorListeners(),f.addErrorListener(u),{tree:f.query(),lexer:t,parser:f,rewriter:o,errors:u.errors}}class oi extends ni{layers=[];visitAttribute=e=>{this.layers.push(e.getText())}}function ai(r){const e=new oi;r&&e.visit(r);const t=e.layers;return[...new Set(t)]}function li(r,e){const t=e.filter(l=>l!=="word").filter(l=>l!=="text");if(t.length===0||r.length===0)return{supported:r,unsupported:[],unsupportedByLayer:new Map};const s=t.map(l=>l.split(":").toReversed()),o=r.map(l=>{const x=[];return s.forEach(([m,v])=>{v?l.availableLayers?.find(R=>R.layerType===m&&R.qualifier===v)||x.push(`${v}:${m}`):l.availableLayers?.find(R=>R.layerType===m)||x.push(m)}),[l,x]}),f=o.filter(([,l])=>l.length===0).map(([l])=>l),u=o.filter(([,l])=>l.length!==0),c=u.map(([l,x])=>x.map(m=>[m,l])).flat(1).reduce((l,[x,m])=>(l.has(x)||l.set(x,[]),l.get(x).push(m),l),new Map);return{supported:f,unsupported:u,unsupportedByLayer:c}}const ci=/([\^$\\.*+?()[\]{}|/])/g,ui=/\\([\^$\\.*+?()[\]{}|/])/g,hi=/(^|[^\\])([\^$.*+?()[\]{}|/])/g,or=/(^|[^\\])((?:\\{2})*['"])/g,ar=/(^|[^\\])\\((?:\\{2})*['"])/g;function Nt(r){if(!r)return r;let e=r;return e=e.replace(ci,"\\$1"),e=e.replace(or,"$1\\$2"),e}function di(r){if(!r)return r;let e=r;return e=e.replace(ar,"$1$2"),e=e.replace(ui,"$1"),e}function fi(r){return r?r.replace(hi,"\\$1$2")!==r:!1}function ze(r){return r&&r.replaceAll("\\","\\\\").replace(or,"$1\\$2")}function lr(r){return r&&r.replace(ar,"$1$2").replaceAll("\\\\","\\")}const xi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-braces" viewBox="0 0 16 16">
  <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6M13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6"/>
</svg>`,Ge=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
</svg>`,pi=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16">
  <path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/>
</svg>`,cr=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
</svg>`;function _i({query:r,cursorPos:e,resources:t,onChange:s,...o}){const[f,u]=d.useState(r??"");d.useEffect(()=>u(r??""),[r]);const c=d.useMemo(()=>{const R=t?.filter(_=>(_.availableDataViews?.find(p=>p.mimeType==="application/x-clarin-fcs-adv+xml")!==void 0||_.searchCapabilitiesResolved.includes("ADVANCED_SEARCH"))&&_.availableLayers!==null&&_.availableLayers.length>0)??[];if(t&&t.length!==R.length){const _=t.filter(p=>!R.includes(p));console.warn("Filter out resource(s) that do(es) not correctly declare ADV query support",_)}return R},[t]),l=d.useMemo(()=>c.map(R=>{const _=new Map;return R.availableLayers.forEach(p=>{_.has(p.layerType)||_.set(p.layerType,{resultIDs:[],qualifiers:[]});const C=_.get(p.layerType);C.resultIDs.push(p.resultId),p.qualifier!==null&&p.qualifier!==void 0&&C.qualifiers.push(p.qualifier)}),[..._.entries()].map(([p,C])=>({layerType:p,resource:R,layerIDs:C}))}).reduce((R,_)=>(_.forEach(({layerType:p,resource:C,layerIDs:w})=>{R.has(p)||R.set(p,{resources:[],qualifiers:new Map});const O=R.get(p);O.resources.push({resource:C,layerIDs:w}),w.qualifiers.length>0&&w.qualifiers.forEach(P=>{O.qualifiers.has(P)||O.qualifiers.set(P,[]),O.qualifiers.get(P).push(C)})}),R),new Map),[c]),x=d.useMemo(()=>nr(f),[f]);function m(){if(x){const{rewriter:R}=x,_=R.getText();u(_),s?.(_)}else console.warn("No parsed query! Unable to handle change request",x)}function v(R){const _=Xe[R].new;u(_),s?.(_)}return i.jsx("div",{id:"query-builder",className:"fcs-query d-flex justify-content-center",children:i.jsx(ti,{enableWithin:o.enableWithin??!1,enableWrapGroup:o.enableWrapGroup??!1,enableWrapNegation:o.enableWrapNegation??!1,enableImplicitQuery:o.enableImplicitQuery??!1,enableMultipleQuerySegments:o.enableMultipleQuerySegments??!0,enableQuantifiers:o.enableQuantifiers??!0,enableRegexpFlags:o.enableRegexpFlags??!1,showBasicLayer:o.showBasicLayer??!0,showAllAdvancedLayers:o.showAllAdvancedLayers??!1,showCustomLayers:o.showCustomLayers??!0,showLayerQualifiers:o.showLayerQualifiers??!0,showResourceCountForLayer:o.showResourceCountForLayer??!0,children:i.jsx(ii,{resources:c,layerInfo:l,children:x?i.jsx(ei,{parser:x.parser,lexer:x.lexer,cursorPos:e,children:i.jsx(ri,{rewriter:x.rewriter,children:i.jsx(Ei,{tree:x.tree,onChange:m})})}):i.jsx(Ye,{onClick:v})})})})}function ur(r,e=!0){if(r instanceof De){if(e)throw Error("Unsupported syntax: Query-Disjunction");return[]}if(r instanceof pe){if(e)throw Error("Unsupported syntax: Query-Group");return[]}if(r instanceof _e)return[r];if(r instanceof ge)return r.children.map(t=>ur(t,e)).flat(1);if(e)throw Error(`Invalid ParseTree for tokens ${r.getSourceInterval().toString()}: ${r.getText()}`);return[]}function Ue(r,e){e.delete(r.start,r.stop);const t=r.parent;if(t instanceof he||t instanceof ue){if(t.children.length===1){Ue(t,e);return}const s=t.children.findIndex(o=>o===r);if(s===0){const o=t.getChild(s+1);e.delete(o.symbol)}else{const o=t.getChild(s-1);e.delete(o.symbol)}if(t.children.length===3){const o=t.parent,f=t.getChild(s+(s===0?2:-2));o instanceof W&&f instanceof W&&(e.delete(f.L_PAREN().symbol),e.delete(f.R_PAREN().symbol))}return}if(t instanceof W){Ue(t,e);return}if(t instanceof V){Ue(t,e);return}console.warn("Unexpected other parent to remove?",{parentCtx:t,ctx:r})}function Ye({onClick:r}){const{enableImplicitQuery:e}=ye();function t(s){s&&r?.(s)}return i.jsx(i.Fragment,{children:i.jsxs(g,{className:"d-inline-block",onSelect:t,"aria-label":"Add query segment",children:[i.jsx(g.Toggle,{variant:"link",className:"add-query-segment-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(g.Menu,{children:er.filter(e?()=>!0:s=>s.id!=="string").map(s=>i.jsx(g.Item,{eventKey:s.id,children:s.label},s.id))})]})})}function Ze({allowedIds:r,onClick:e}){function t(s){s&&e?.(s)}return i.jsx(i.Fragment,{children:i.jsxs(g,{className:"d-inline-block",onSelect:t,"aria-label":"Add expression",children:[i.jsx(g.Toggle,{variant:"link",className:"add-expression-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(g.Menu,{children:tr.filter(r&&r.length>0?s=>r.includes(s.id):()=>!0).map(s=>i.jsx(g.Item,{eventKey:s.id,children:s.label},s.id))})]})})}function Ct({className:r,onClick:e}){function t(s){s&&e?.(s)}return i.jsx(i.Fragment,{children:i.jsxs(g,{className:["d-inline-block"].concat(r??[]).join(" "),onSelect:t,"aria-label":"Change to expressions list",children:[i.jsx(g.Toggle,{variant:"link",className:"change-to-expression-list-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(g.Menu,{children:rr.map(s=>i.jsx(g.Item,{eventKey:s.id,children:s.label},s.id))})]})})}function Ri({allowedIds:r,className:e,onClick:t}){const{enableWrapGroup:s,enableWrapNegation:o}=ye();function f(u){u&&t?.(u)}return s||o?i.jsx(i.Fragment,{children:i.jsxs(g,{className:["d-inline-block"].concat(e??[]).join(" "),onSelect:f,"aria-label":"Wrap expression",children:[i.jsx(g.Toggle,{variant:"link",className:"wrap-expression-btn action-btn rounded-circle p-1 no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:xi},"aria-hidden":"true"})}),i.jsx(g.Menu,{children:ir.filter(r&&r.length>0?u=>r.includes(u.id):()=>!0).filter(s?()=>!0:u=>u.id!=="group").filter(o?()=>!0:u=>u.id!=="not").map(u=>i.jsx(g.Item,{eventKey:u.id,children:u.label},u.id))})]})}):null}function Pe({className:r,onClick:e}){return i.jsx(Ee,{variant:"link",className:["del-btn action-btn rounded-circle p-1"].concat(r??[]).join(" "),onClick:e,children:i.jsx("i",{dangerouslySetInnerHTML:{__html:cr},"aria-hidden":"true"})})}function mi({className:r,onClick:e}){return i.jsx(Ee,{variant:"link",className:["add-quantifier-btn action-btn rounded-circle p-1"].concat(r??[]).join(" "),onClick:e,children:i.jsx("i",{dangerouslySetInnerHTML:{__html:pi},"aria-hidden":"true"})})}function Ei({tree:r,onChange:e}){const{rewriter:t}=be(),{enableWithin:s}=ye(),o=r.main_query(),f=o.getChild(0),u=ur(f,!1),c=s?r.within_part():null,l=c?.getText()??"",[x,m]=d.useState(l);d.useEffect(()=>m(l),[l]);function v(){const p="sentence";m(p);const C=o.stop?.tokenIndex;C!==void 0?(t.insertAfter(C,` within ${p}`),e?.()):console.warn("Unable to add within part. End token index not found!",{queryCtx:o})}function R(p){const C=p.target.value;if(m(C),c){const w=c.within_part_simple(),O=w?.SIMPLE_WITHIN_SCOPE();O?(t.replaceSingle(O.symbol,C),e?.()):console.warn("Error trying to update within part. Token not found!",{withinCtx:c,withinPartCtx:w,token:O})}else console.warn("Error trying to update within part. Context not found!",{tree:r,withinCtx:c})}function _(){c?(m(""),t.delete(r.WITHIN().symbol,c.stop),e?.()):console.warn("Error trying to remove within part. Context not found!",{tree:r,withinCtx:c})}return i.jsxs("div",{className:"block query flex-grow-1 justify-content-center d-flex flex-wrap row-gap-2 column-gap-1 border rounded p-1",children:[i.jsx(gi,{children:u,onChange:e}),s&&(x?i.jsxs("div",{className:"block within-clause position-relative d-flex column-gap-2 align-items-center border rounded p-1",children:[i.jsx("code",{className:"keyword",children:"within"}),i.jsx(X.Select,{className:"w-auto",value:x,onChange:R,children:Yr.map(p=>i.jsx("option",{value:p,children:p},p))}),i.jsx(Pe,{className:"del-within-clause-btn position-absolute top-0 start-100 translate-middle",onClick:_})]}):i.jsx(Ee,{size:"sm",onClick:v,style:{alignSelf:"center"},children:"Add within clause"}))]})}function gi({children:r,onChange:e}){const{rewriter:t}=be(),{enableMultipleQuerySegments:s}=ye(),o=d.useCallback(u=>{const c=r&&r.length>0?r[0].start.tokenIndex:0,l=Xe[u].new;t.insertBefore(c,`${l} `),e?.()},[t,r,e]),f=d.useCallback((u,c)=>{const l=c.stop.tokenIndex,x=Xe[u].new;t.insertAfter(l,` ${x}`),e?.()},[t,e]);return i.jsxs("div",{className:"block query-simple-or-sequence border rounded py-1 px-2 d-flex flex-wrap row-gap-3 column-gap-2 align-items-center",children:[s&&i.jsx(Ye,{onClick:o},"add-0"),r.map(u=>i.jsxs(d.Fragment,{children:[i.jsx(Ai,{ctx:u,onChange:e}),s&&i.jsx(Ye,{onClick:c=>f(c,u)})]},`query-${u.getSourceInterval().toString()}`))]})}function yi({value:r,onChange:e}){const[t,s]=d.useState(r);return d.useEffect(()=>s(r),[r]),i.jsx(X.Control,{className:"d-inline",style:{width:"10ch"},value:t,onChange:o=>s(o.target.value),onBlur:()=>e?.(t)})}function lt({ctx:r,showChangeToExpressionListButton:e=!1,onChange:t}){const{rewriter:s}=be(),{layerInfo:o}=si(),{showBasicLayer:f,showAllAdvancedLayers:u,showCustomLayers:c,showLayerQualifiers:l,showResourceCountForLayer:x}=ye(),{cursorPos:m}=sr(),v=Te(r,m),R="word",_=Object.keys(yt),p=[R,..._],C=c?[...o.keys()].filter(h=>!p.includes(h)).toSorted():[],w=o.has(R),O=[...o.keys()].filter(h=>Object.keys(yt).includes(h)).length>0,P=C.length>0,$=r.attribute(),M=r.getChild(1),Q=r.regexp().regexp_pattern().REGEXP(),[q,Y]=d.useState("text"),[U,j]=d.useState("is"),[S,Z]=d.useState(""),z=d.useRef(U);d.useEffect(()=>{const h=$.identifier(),y=$.qualifier(),k=y!==null?`${y.getText()}:${h.getText()}`:`${h.getText()}`,H=M.symbol.type===n.OPERATOR_EQ,oe=Q.symbol.text?.slice(1,-1),ve=Ne(oe??"",H);let ae=ve.operator,Le=Ie(ve.value,ae);z.current!==ae&&["regex","not-regex"].includes(z.current)&&(z.current,ae=z.current);const xe=bt[k];xe&&xe.options&&xe.options.length>0&&(!xe.options.map(Et=>Et.value).includes(Le)||!Le)&&(Le=xe.options[0]?.value??"",ae="is"),Y(k??""),j(ae),Z(Le),z.current=ae},[$,M,Q]);const de=r.parent,fe=Object.keys(At).filter(de instanceof W?h=>h!=="group":()=>!0).filter(de instanceof V?h=>h!=="group":()=>!0),le=bt[q];function Ne(h,y){const k=h.startsWith(".*"),H=h.endsWith(".*"),K=k&&H?h.slice(2,-2):k?h.slice(2):H?h.slice(0,-2):h;return fi(K)?{operator:y?"regex":"not-regex",value:h}:y?k&&H?{operator:"contains",value:K}:k?{operator:"ends-with",value:h.slice(2)}:H?{operator:"starts-with",value:h.slice(0,-2)}:{operator:"is",value:h}:k||H?{operator:"not-regex",value:h}:{operator:"is-not",value:h}}function Ie(h,y){return["regex","not-regex"].includes(y)?lr(h):di(h)}function Ce(h,y){return["regex","not-regex"].includes(y)?ze(h):Nt(h)}function E(h){const y=h;y&&y!==q&&(Y(y),s.replace($.start,$.stop,y),t?.())}function A(h){const y=h.target.value,k=U;j(y),z.current=y;const H=["is-not","not-regex"].includes(y)?"!=":"=";s.replaceSingle(M.symbol,H);let K=S??"";const oe=Ke[y],ve=Ke[k];if(!oe){console.warn("Unexpected state, did not find known operator value!",{newOpInfo:oe,oldOpInfo:ve,newOperator:y,oldOperator:k});return}K=Ce(K,y),s.replaceSingle(Q.symbol,`"${oe.valueBefore??""}${K}${oe.valueAfter??""}"`),t?.()}function I(){const h=["regex","not-regex"].includes(U)?ze(S):Nt(S),y=Ke[U];s.replaceSingle(Q.symbol,`"${y?.valueBefore??""}${h}${y?.valueAfter??""}"`),t?.()}function T(h,y){const k=Jr[h];y?s.insertBefore(r.start,`${k.newBefore} `):s.insertAfter(r.stop,` ${k.newAfter}`),t?.()}function ne(h){const y=At[h];y.newBefore&&s.insertBefore(r.start,y.newBefore),y.newAfter&&s.insertAfter(r.stop,y.newAfter),t?.()}function re(){Ue(r,s),t?.()}function ie(h,y=void 0){return y?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:h}),": ",y,F(h)]}):i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:h}),F(h)]})}function F(h,y=void 0){if(!x)return null;const k=o.get(h)?.resources.length??0,H=y?o.get(h)?.qualifiers?.get(y)?.length??0:void 0;if(y&&k===H)return null;const K=y?H:k;return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsxs("small",{className:"text-body-secondary",children:["Supported by ",K," resources."]})]})}function Re(h){if(!l)return null;const y=o.get(h)?.qualifiers;return!y||y.size===0?null:[...y.keys()].map(H=>{const K=`${H}:${h}`;return i.jsx(g.Item,{eventKey:K,active:q===K,children:i.jsxs("div",{className:"ms-3",children:[i.jsx("strong",{children:H}),":",h,F(h,H)]})},K)})}function Fe(){return le&&le.options?.length>0?i.jsxs(g,{onSelect:h=>Z(h??""),onBlur:I,children:[i.jsx(g.Toggle,{className:"form-select",children:S}),i.jsx(g.Menu,{children:le.options.map(h=>i.jsx(g.Item,{eventKey:h.value,active:S===h.value,children:h.label},h.value))})]}):i.jsx(X.Control,{className:"d-inline",style:{width:"10ch"},value:S,onChange:h=>Z(h.target.value),onBlur:I})}return i.jsxs("div",{className:["block input-block basic-expression position-relative focus-ring border rounded py-3 ps-2 pe-3 my-2 ms-1 me-2"].concat([v?"cursor-focus":""]).join(" "),children:[e&&i.jsx(Ct,{className:"position-absolute top-0 start-50 translate-middle rounded-circle p-1",onClick:h=>T(h,!0)}),i.jsxs("div",{className:"d-flex justify-content-center column-gap-2",children:[i.jsxs(g,{onSelect:E,children:[i.jsx(g.Toggle,{className:"form-select",children:q}),i.jsx(g.Menu,{children:i.jsxs("div",{className:"d-flex",children:[i.jsxs("div",{className:[].concat(c&&P?["border-end pe-1"]:[]).join(" "),children:[f&&i.jsxs(i.Fragment,{children:[i.jsx(g.Header,{children:"Basic Search Layer"}),i.jsx(g.Item,{eventKey:R,active:q===R,children:ie(R)}),i.jsx(g.Divider,{})]}),(f||c&&C.length>0)&&i.jsx(g.Header,{children:"Advanced Search Layers"}),Yt.filter(u?()=>!0:h=>o.has(h.id)).map(h=>i.jsxs(d.Fragment,{children:[i.jsxs(g.Item,{eventKey:h.id,active:q===h.id,children:[i.jsx("strong",{children:h.id}),": ",h.label,F(h.id)]}),Re(h.id)]},h.id)),!f&&!u&&C.length===0&&i.jsxs(g.ItemText,{style:{width:"max-content"},children:[i.jsx("em",{className:"text-warning-emphasis",children:"No supported layers available?!"}),i.jsx("br",{}),i.jsx("em",{className:"text-secondary",children:"Maybe select a few more resources."})]})]}),i.jsx("div",{className:[].concat(f&&w||O?["ps-1"]:[]).join(" "),children:c&&C.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(g.Header,{children:"Custom Layers"}),C.map(h=>i.jsxs(d.Fragment,{children:[i.jsxs(g.Item,{eventKey:h,active:q===h,children:[i.jsx("strong",{children:h}),F(h)]}),Re(h)]},h))]})})]})})]}),i.jsx(X.Select,{style:{width:"fit-content"},value:U,onChange:A,children:Zt.map(h=>i.jsx("option",{value:h.id,children:h.label},h.id))}),Fe()]}),e&&i.jsx(Ct,{className:"position-absolute top-100 start-50 translate-middle rounded-circle p-1",onClick:h=>T(h,!1)}),i.jsxs("div",{className:"actions position-absolute top-0 d-flex",children:[i.jsx(Ri,{allowedIds:fe,onClick:ne}),i.jsx(Pe,{onClick:re})]})]})}function bi({ctx:r,onChange:e}){const{rewriter:t}=be(),s=r.Q_ZERO_OR_MORE()!==null,o=r.Q_ONE_OR_MORE()!==null,f=r.Q_ZERO_OR_ONE()!==null,u=!(s||o||f),c=r.getChildCount(),l=c>=4,x=u&&(c===3||r.Q_COMMA()===r.getChild(2))?r.getChild(1).symbol:null,m=u&&c>=4&&r.Q_COMMA()===r.getChild(c-3)?r.getChild(c-2).symbol:null,v=x!==null?Number.parseInt(x.text):null,R=m!==null?Number.parseInt(m.text):null,_=u?v!==null&&R!==null?"n-m":v!==null?l?"n-":"n-n":R!==null?"-m":null:s?"*":f?"?":o?"+":null,[p,C]=d.useState(_??"?"),[w,O]=d.useState(v),[P,$]=d.useState(R);d.useEffect(()=>{O(v),$(R)},[v,R]);const M=w!==null&&P!==null&&w>P||w!==null&&w<0||P!==null&&P<1;function Q(j){const S=j.target.value;C(S);const Z=Zr[S].new??"?";t.replace(r.start,r.stop,Z),e?.()}function q(j){const S=Number.parseInt(j.target.value);O(Number.isNaN(S)?null:S),x!==null&&!Number.isNaN(S)&&(t.replaceSingle(x,S.toString()),e?.())}function Y(j){const S=Number.parseInt(j.target.value);$(Number.isNaN(S)?null:S),m!==null&&!Number.isNaN(S)&&(t.replaceSingle(m,S.toString()),e?.())}function U(){t.delete(r.start,r.stop),e?.()}return i.jsxs("div",{className:["block input-block quantifier position-relative border rounded p-1 pt-3 px-1 m-1 me-2 mt-2"].concat(M?["invalid-range"]:[]).join(" "),children:[i.jsxs("div",{className:"d-flex flex-column align-items-center row-gap-1",children:[i.jsx(X.Select,{size:"sm",style:{width:"fit-content"},value:p,onChange:Q,children:Jt.map(j=>i.jsx("option",{value:j.id,children:j.label},j.id))}),i.jsx("div",{className:"d-flex align-items-baseline column-gap-1",children:["+","*","?"].includes(p)?i.jsx("code",{className:"keyword",children:p}):i.jsxs(i.Fragment,{children:[i.jsx("code",{className:"keyword",children:"{"}),i.jsx(X.Text,{children:"Repeat"}),["n-m","n-","n-n"].includes(p)&&i.jsx(X.Control,{size:"sm",style:{width:"8ch"},type:"number",min:p==="n-n"?1:0,max:p==="n-m"?P??void 0:void 0,value:w??0,onChange:q}),p==="n-m"&&i.jsx(X.Text,{children:"to"}),["n-m","-m"].includes(p)&&i.jsx(X.Control,{size:"sm",style:{width:"8ch"},type:"number",min:p==="n-m"&&w||1,value:P??w??1,onChange:Y}),i.jsx("code",{className:"keyword",children:"}"})]})})]}),i.jsx(Pe,{className:"del-quantifier-btn position-absolute top-0 start-100 translate-middle",onClick:U})]})}function Ai({ctx:r,onChange:e}){const{rewriter:t}=be(),{enableQuantifiers:s}=ye(),{cursorPos:o}=sr(),f=r.query_implicit(),u=r.query_segment(),c=r.quantifier(),l=f!==null,x=Te(l?f:u,o);function m(){t.delete(r.start,r.stop),e?.()}function v(){t.insertAfter(r.stop,` ${zr}`),e?.()}function R(){if(f!==null){let _=function(O){t.replaceSingle(p.symbol,`"${ze(O)}"`),e?.()};const p=f.regexp().regexp_pattern().REGEXP(),C=p.symbol.text,w=lr(C?.slice(1,-1));return i.jsx(yi,{value:w??"",onChange:_})}if(u!==null){const _=u.expression();if(!_){let p=function(C){const w=Qe[C].new;t.insertAfter(r.start,` ${w} `),e?.()};return i.jsx(Ze,{onClick:C=>p(C)})}return i.jsx(Ni,{ctx:_,onChange:e})}throw Error('Invalid parse tree. Expected "query-segment" context.')}return i.jsxs("div",{className:["block query-simple focus-ring border rounded p-1 pe-2 my-2 position-relative d-flex align-items-center"].concat(x?"cursor-focus":"").join(" "),children:[l?i.jsx("code",{className:"delims",children:'"'}):i.jsx("code",{className:"delims",children:"["}),R(),l?i.jsx("code",{className:"delims",children:'"'}):i.jsx("code",{className:"delims",children:"]"}),s&&c!==null&&i.jsx(bi,{ctx:c,onChange:e}),i.jsx(Pe,{className:"del-query-segment-btn position-absolute top-0 start-100 translate-middle",onClick:m}),s&&c===null&&i.jsx(mi,{className:"position-absolute top-100 start-100 translate-middle",onClick:v})]})}function Ni({ctx:r,onChange:e}){const t=r.getChild(0);return t instanceof te?i.jsx(lt,{ctx:t,showChangeToExpressionListButton:!0,onChange:e}):t instanceof V||t instanceof W?i.jsx(ct,{ctx:t,onChange:e}):i.jsx(ut,{ctx:t,onChange:e})}function ct({ctx:r,onChange:e}){const t=r instanceof V,s=r instanceof W,o=r.getChild(1);return i.jsxs("div",{className:["block expression-wrap position-relative p-1 m-1 border rounded"].concat(t?["negation-expression d-flex align-items-center"]:[]).concat(s?["group-expression d-flex align-items-center"]:[]).join(" "),children:[t&&i.jsx("code",{className:"delims",children:"!"}),s&&i.jsx("code",{className:"delims",children:"("}),o instanceof te?i.jsx(lt,{ctx:o,showChangeToExpressionListButton:!t,onChange:e}):o instanceof V||o instanceof W?i.jsx(ct,{ctx:o,onChange:e}):i.jsx(ut,{ctx:o,onChange:e}),s&&i.jsx("code",{className:"delims",children:")"})]})}function ut({ctx:r,onChange:e}){const{rewriter:t}=be(),s=r instanceof he,o=r instanceof ue,f=Object.keys(Qe).filter(s?m=>m!=="and":()=>!0).filter(o?m=>m!=="or":()=>!0),u=s?"&":"|";function c(m){const v=r.children.length>0?r.children[0].start.tokenIndex:0,R=Qe[m].new,_=m==="basic"?R:`( ${R} )`;t.insertBefore(v,`${_} ${u} `),e?.()}function l(m,v){const R=v.stop.tokenIndex,_=Qe[m].new,p=m==="basic"?_:`( ${_} )`;t.insertAfter(R,` ${u} ${p}`),e?.()}function x(m){return m instanceof te?i.jsx(lt,{ctx:m,showChangeToExpressionListButton:!1,onChange:e}):m instanceof V||m instanceof W?i.jsx(ct,{ctx:m,onChange:e}):i.jsx(ut,{ctx:m,onChange:e})}return i.jsxs("div",{className:["block expression-list p-1 m-1 border rounded position-relative"].concat(o?["or-expression"]:[]).concat(s?["and-expression"]:[]).join(" "),children:[o&&i.jsx("code",{className:"delims position-absolute ps-1",children:"OR"}),s&&i.jsx("code",{className:"delims position-absolute ps-1",children:"AND"}),i.jsxs("div",{className:"d-flex flex-column align-items-center mt-1",children:[i.jsx(Ze,{allowedIds:f,onClick:c}),r.children.filter((m,v)=>v%2===0).map(m=>i.jsxs(d.Fragment,{children:[x(m),i.jsx(Ze,{allowedIds:f,onClick:v=>l(v,m)})]},`expression-${m.getSourceInterval().toString()}`))]})]})}class a extends Tt{static L_PAREN=1;static R_PAREN=2;static EQUAL=3;static GREATER=4;static LESSER=5;static GREATER_EQUAL=6;static LESSER_EQUAL=7;static NOT_EQUAL=8;static EQUAL_EQUAL=9;static SLASH=10;static AND=11;static OR=12;static NOT=13;static DOT=14;static QUOTED_STRING=15;static SIMPLE_STRING=16;static WS=17;static RULE_query=0;static RULE_boolean_query=1;static RULE_subquery=2;static RULE_search_clause=3;static RULE_search_term=4;static RULE_index=5;static RULE_relation_modified=6;static RULE_relation=7;static RULE_relation_name=8;static RULE_relation_symbol=9;static RULE_boolean_modified=10;static RULE_r_boolean=11;static RULE_modifier_list=12;static RULE_modifier=13;static RULE_modifier_name=14;static RULE_modifier_relation=15;static RULE_modifier_value=16;static RULE_prefix_name=17;static RULE_prefix=18;static RULE_simple_name=19;static literalNames=[null,"'('","')'","'='","'>'","'<'","'>='","'<='","'<>'","'=='","'/'",null,null,null,"'.'"];static symbolicNames=[null,"L_PAREN","R_PAREN","EQUAL","GREATER","LESSER","GREATER_EQUAL","LESSER_EQUAL","NOT_EQUAL","EQUAL_EQUAL","SLASH","AND","OR","NOT","DOT","QUOTED_STRING","SIMPLE_STRING","WS"];static ruleNames=["query","boolean_query","subquery","search_clause","search_term","index","relation_modified","relation","relation_name","relation_symbol","boolean_modified","r_boolean","modifier_list","modifier","modifier_name","modifier_relation","modifier_value","prefix_name","prefix","simple_name"];get grammarFileName(){return"LexParser.g4"}get literalNames(){return a.literalNames}get symbolicNames(){return a.symbolicNames}get ruleNames(){return a.ruleNames}get serializedATN(){return a._serializedATN}createFailedPredicateException(e,t){return new It(this,e,t)}constructor(e){super(e),this.interpreter=new Ot(this,a._ATN,a.decisionsToDFA,new Me)}query(){const e=new Ci(this.context,this.state);this.enterRule(e,0,a.RULE_query);try{this.enterOuterAlt(e,1),this.state=40,this.boolean_query(),this.state=41,this.match(a.EOF)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}boolean_query(){const e=new We(this.context,this.state);this.enterRule(e,2,a.RULE_boolean_query);let t;try{for(this.enterOuterAlt(e,1),this.state=43,this.subquery(),this.state=49,this.errorHandler.sync(this),t=this.tokenStream.LA(1);(t&-32)===0&&(1<<t&14336)!==0;)this.state=44,this.boolean_modified(),this.state=45,this.subquery(),this.state=51,this.errorHandler.sync(this),t=this.tokenStream.LA(1)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}subquery(){const e=new je(this.context,this.state);this.enterRule(e,4,a.RULE_subquery);try{switch(this.state=57,this.errorHandler.sync(this),this.tokenStream.LA(1)){case a.L_PAREN:this.enterOuterAlt(e,1),this.state=52,this.match(a.L_PAREN),this.state=53,this.boolean_query(),this.state=54,this.match(a.R_PAREN);break;case a.QUOTED_STRING:case a.SIMPLE_STRING:this.enterOuterAlt(e,2),this.state=56,this.search_clause();break;default:throw new ce(this)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}search_clause(){const e=new hr(this.context,this.state);this.enterRule(e,6,a.RULE_search_clause);try{this.enterOuterAlt(e,1);{switch(this.state=62,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,2,this.context)){case 1:this.state=59,this.index(),this.state=60,this.relation_modified();break}this.state=64,this.search_term()}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}search_term(){const e=new dr(this.context,this.state);this.enterRule(e,8,a.RULE_search_term);let t;try{this.enterOuterAlt(e,1),this.state=66,t=this.tokenStream.LA(1),t===15||t===16?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}index(){const e=new fr(this.context,this.state);this.enterRule(e,10,a.RULE_index);try{switch(this.state=70,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,3,this.context)){case 1:this.enterOuterAlt(e,1),this.state=68,this.simple_name();break;case 2:this.enterOuterAlt(e,2),this.state=69,this.prefix_name();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}relation_modified(){const e=new xr(this.context,this.state);this.enterRule(e,12,a.RULE_relation_modified);let t;try{this.enterOuterAlt(e,1),this.state=72,this.relation(),this.state=74,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===10&&(this.state=73,this.modifier_list())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}relation(){const e=new pr(this.context,this.state);this.enterRule(e,14,a.RULE_relation);try{switch(this.state=78,this.errorHandler.sync(this),this.tokenStream.LA(1)){case a.SIMPLE_STRING:this.enterOuterAlt(e,1),this.state=76,this.relation_name();break;case a.EQUAL:case a.GREATER:case a.LESSER:case a.GREATER_EQUAL:case a.LESSER_EQUAL:case a.NOT_EQUAL:case a.EQUAL_EQUAL:this.enterOuterAlt(e,2),this.state=77,this.relation_symbol();break;default:throw new ce(this)}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}relation_name(){const e=new _r(this.context,this.state);this.enterRule(e,16,a.RULE_relation_name);try{switch(this.state=82,this.errorHandler.sync(this),this.interpreter.adaptivePredict(this.tokenStream,6,this.context)){case 1:this.enterOuterAlt(e,1),this.state=80,this.simple_name();break;case 2:this.enterOuterAlt(e,2),this.state=81,this.prefix_name();break}}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}relation_symbol(){const e=new ht(this.context,this.state);this.enterRule(e,18,a.RULE_relation_symbol);let t;try{this.enterOuterAlt(e,1),this.state=84,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&1016)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}boolean_modified(){const e=new ke(this.context,this.state);this.enterRule(e,20,a.RULE_boolean_modified);let t;try{this.enterOuterAlt(e,1),this.state=86,this.r_boolean(),this.state=88,this.errorHandler.sync(this),t=this.tokenStream.LA(1),t===10&&(this.state=87,this.modifier_list())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}r_boolean(){const e=new Rr(this.context,this.state);this.enterRule(e,22,a.RULE_r_boolean);let t;try{this.enterOuterAlt(e,1),this.state=90,t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&14336)!==0?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}modifier_list(){const e=new dt(this.context,this.state);this.enterRule(e,24,a.RULE_modifier_list);let t;try{this.enterOuterAlt(e,1);{this.state=93,this.errorHandler.sync(this),t=this.tokenStream.LA(1);do this.state=92,this.modifier(),this.state=95,this.errorHandler.sync(this),t=this.tokenStream.LA(1);while(t===10)}}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}modifier(){const e=new Je(this.context,this.state);this.enterRule(e,26,a.RULE_modifier);let t;try{this.enterOuterAlt(e,1),this.state=97,this.match(a.SLASH),this.state=98,this.modifier_name(),this.state=100,this.errorHandler.sync(this),t=this.tokenStream.LA(1),(t&-32)===0&&(1<<t&1016)!==0&&(this.state=99,this.modifier_relation())}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}modifier_name(){const e=new mr(this.context,this.state);this.enterRule(e,28,a.RULE_modifier_name);try{this.enterOuterAlt(e,1),this.state=102,this.simple_name()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}modifier_relation(){const e=new Er(this.context,this.state);this.enterRule(e,30,a.RULE_modifier_relation);try{this.enterOuterAlt(e,1),this.state=104,this.relation_symbol(),this.state=105,this.modifier_value()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}modifier_value(){const e=new gr(this.context,this.state);this.enterRule(e,32,a.RULE_modifier_value);let t;try{this.enterOuterAlt(e,1),this.state=107,t=this.tokenStream.LA(1),t===15||t===16?(this.errorHandler.reportMatch(this),this.consume()):this.errorHandler.recoverInline(this)}catch(s){if(s instanceof N)this.errorHandler.reportError(this,s),this.errorHandler.recover(this,s);else throw s}finally{this.exitRule()}return e}prefix_name(){const e=new ft(this.context,this.state);this.enterRule(e,34,a.RULE_prefix_name);try{this.enterOuterAlt(e,1),this.state=109,this.prefix(),this.state=110,this.match(a.DOT),this.state=111,this.simple_name()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}prefix(){const e=new yr(this.context,this.state);this.enterRule(e,36,a.RULE_prefix);try{this.enterOuterAlt(e,1),this.state=113,this.simple_name()}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}simple_name(){const e=new Ae(this.context,this.state);this.enterRule(e,38,a.RULE_simple_name);try{this.enterOuterAlt(e,1),this.state=115,this.match(a.SIMPLE_STRING)}catch(t){if(t instanceof N)this.errorHandler.reportError(this,t),this.errorHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}static _serializedATN=[4,1,17,118,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,1,0,1,0,1,0,1,1,1,1,1,1,1,1,5,1,48,8,1,10,1,12,1,51,9,1,1,2,1,2,1,2,1,2,1,2,3,2,58,8,2,1,3,1,3,1,3,3,3,63,8,3,1,3,1,3,1,4,1,4,1,5,1,5,3,5,71,8,5,1,6,1,6,3,6,75,8,6,1,7,1,7,3,7,79,8,7,1,8,1,8,3,8,83,8,8,1,9,1,9,1,10,1,10,3,10,89,8,10,1,11,1,11,1,12,4,12,94,8,12,11,12,12,12,95,1,13,1,13,1,13,3,13,101,8,13,1,14,1,14,1,15,1,15,1,15,1,16,1,16,1,17,1,17,1,17,1,17,1,18,1,18,1,19,1,19,1,19,0,0,20,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,0,3,1,0,15,16,1,0,3,9,1,0,11,13,107,0,40,1,0,0,0,2,43,1,0,0,0,4,57,1,0,0,0,6,62,1,0,0,0,8,66,1,0,0,0,10,70,1,0,0,0,12,72,1,0,0,0,14,78,1,0,0,0,16,82,1,0,0,0,18,84,1,0,0,0,20,86,1,0,0,0,22,90,1,0,0,0,24,93,1,0,0,0,26,97,1,0,0,0,28,102,1,0,0,0,30,104,1,0,0,0,32,107,1,0,0,0,34,109,1,0,0,0,36,113,1,0,0,0,38,115,1,0,0,0,40,41,3,2,1,0,41,42,5,0,0,1,42,1,1,0,0,0,43,49,3,4,2,0,44,45,3,20,10,0,45,46,3,4,2,0,46,48,1,0,0,0,47,44,1,0,0,0,48,51,1,0,0,0,49,47,1,0,0,0,49,50,1,0,0,0,50,3,1,0,0,0,51,49,1,0,0,0,52,53,5,1,0,0,53,54,3,2,1,0,54,55,5,2,0,0,55,58,1,0,0,0,56,58,3,6,3,0,57,52,1,0,0,0,57,56,1,0,0,0,58,5,1,0,0,0,59,60,3,10,5,0,60,61,3,12,6,0,61,63,1,0,0,0,62,59,1,0,0,0,62,63,1,0,0,0,63,64,1,0,0,0,64,65,3,8,4,0,65,7,1,0,0,0,66,67,7,0,0,0,67,9,1,0,0,0,68,71,3,38,19,0,69,71,3,34,17,0,70,68,1,0,0,0,70,69,1,0,0,0,71,11,1,0,0,0,72,74,3,14,7,0,73,75,3,24,12,0,74,73,1,0,0,0,74,75,1,0,0,0,75,13,1,0,0,0,76,79,3,16,8,0,77,79,3,18,9,0,78,76,1,0,0,0,78,77,1,0,0,0,79,15,1,0,0,0,80,83,3,38,19,0,81,83,3,34,17,0,82,80,1,0,0,0,82,81,1,0,0,0,83,17,1,0,0,0,84,85,7,1,0,0,85,19,1,0,0,0,86,88,3,22,11,0,87,89,3,24,12,0,88,87,1,0,0,0,88,89,1,0,0,0,89,21,1,0,0,0,90,91,7,2,0,0,91,23,1,0,0,0,92,94,3,26,13,0,93,92,1,0,0,0,94,95,1,0,0,0,95,93,1,0,0,0,95,96,1,0,0,0,96,25,1,0,0,0,97,98,5,10,0,0,98,100,3,28,14,0,99,101,3,30,15,0,100,99,1,0,0,0,100,101,1,0,0,0,101,27,1,0,0,0,102,103,3,38,19,0,103,29,1,0,0,0,104,105,3,18,9,0,105,106,3,32,16,0,106,31,1,0,0,0,107,108,7,0,0,0,108,33,1,0,0,0,109,110,3,36,18,0,110,111,5,14,0,0,111,112,3,38,19,0,112,35,1,0,0,0,113,114,3,38,19,0,114,37,1,0,0,0,115,116,5,16,0,0,116,39,1,0,0,0,10,49,57,62,70,74,78,82,88,95,100];static __ATN;static get _ATN(){return a.__ATN||(a.__ATN=new qe().deserialize(a._serializedATN)),a.__ATN}static vocabulary=new He(a.literalNames,a.symbolicNames,[]);get vocabulary(){return a.vocabulary}static decisionsToDFA=a._ATN.decisionToState.map((e,t)=>new Be(e,t))}class Ci extends b{constructor(e,t){super(e,t)}boolean_query(){return this.getRuleContext(0,We)}EOF(){return this.getToken(a.EOF,0)}get ruleIndex(){return a.RULE_query}enterRule(e){e.enterQuery&&e.enterQuery(this)}exitRule(e){e.exitQuery&&e.exitQuery(this)}accept(e){return e.visitQuery?e.visitQuery(this):e.visitChildren(this)}}class We extends b{constructor(e,t){super(e,t)}subquery(e){return e===void 0?this.getRuleContexts(je):this.getRuleContext(e,je)}boolean_modified(e){return e===void 0?this.getRuleContexts(ke):this.getRuleContext(e,ke)}get ruleIndex(){return a.RULE_boolean_query}enterRule(e){e.enterBoolean_query&&e.enterBoolean_query(this)}exitRule(e){e.exitBoolean_query&&e.exitBoolean_query(this)}accept(e){return e.visitBoolean_query?e.visitBoolean_query(this):e.visitChildren(this)}}class je extends b{constructor(e,t){super(e,t)}L_PAREN(){return this.getToken(a.L_PAREN,0)}boolean_query(){return this.getRuleContext(0,We)}R_PAREN(){return this.getToken(a.R_PAREN,0)}search_clause(){return this.getRuleContext(0,hr)}get ruleIndex(){return a.RULE_subquery}enterRule(e){e.enterSubquery&&e.enterSubquery(this)}exitRule(e){e.exitSubquery&&e.exitSubquery(this)}accept(e){return e.visitSubquery?e.visitSubquery(this):e.visitChildren(this)}}class hr extends b{constructor(e,t){super(e,t)}search_term(){return this.getRuleContext(0,dr)}index(){return this.getRuleContext(0,fr)}relation_modified(){return this.getRuleContext(0,xr)}get ruleIndex(){return a.RULE_search_clause}enterRule(e){e.enterSearch_clause&&e.enterSearch_clause(this)}exitRule(e){e.exitSearch_clause&&e.exitSearch_clause(this)}accept(e){return e.visitSearch_clause?e.visitSearch_clause(this):e.visitChildren(this)}}class dr extends b{constructor(e,t){super(e,t)}SIMPLE_STRING(){return this.getToken(a.SIMPLE_STRING,0)}QUOTED_STRING(){return this.getToken(a.QUOTED_STRING,0)}get ruleIndex(){return a.RULE_search_term}enterRule(e){e.enterSearch_term&&e.enterSearch_term(this)}exitRule(e){e.exitSearch_term&&e.exitSearch_term(this)}accept(e){return e.visitSearch_term?e.visitSearch_term(this):e.visitChildren(this)}}class fr extends b{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ae)}prefix_name(){return this.getRuleContext(0,ft)}get ruleIndex(){return a.RULE_index}enterRule(e){e.enterIndex&&e.enterIndex(this)}exitRule(e){e.exitIndex&&e.exitIndex(this)}accept(e){return e.visitIndex?e.visitIndex(this):e.visitChildren(this)}}class xr extends b{constructor(e,t){super(e,t)}relation(){return this.getRuleContext(0,pr)}modifier_list(){return this.getRuleContext(0,dt)}get ruleIndex(){return a.RULE_relation_modified}enterRule(e){e.enterRelation_modified&&e.enterRelation_modified(this)}exitRule(e){e.exitRelation_modified&&e.exitRelation_modified(this)}accept(e){return e.visitRelation_modified?e.visitRelation_modified(this):e.visitChildren(this)}}class pr extends b{constructor(e,t){super(e,t)}relation_name(){return this.getRuleContext(0,_r)}relation_symbol(){return this.getRuleContext(0,ht)}get ruleIndex(){return a.RULE_relation}enterRule(e){e.enterRelation&&e.enterRelation(this)}exitRule(e){e.exitRelation&&e.exitRelation(this)}accept(e){return e.visitRelation?e.visitRelation(this):e.visitChildren(this)}}class _r extends b{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ae)}prefix_name(){return this.getRuleContext(0,ft)}get ruleIndex(){return a.RULE_relation_name}enterRule(e){e.enterRelation_name&&e.enterRelation_name(this)}exitRule(e){e.exitRelation_name&&e.exitRelation_name(this)}accept(e){return e.visitRelation_name?e.visitRelation_name(this):e.visitChildren(this)}}class ht extends b{constructor(e,t){super(e,t)}EQUAL(){return this.getToken(a.EQUAL,0)}GREATER(){return this.getToken(a.GREATER,0)}LESSER(){return this.getToken(a.LESSER,0)}GREATER_EQUAL(){return this.getToken(a.GREATER_EQUAL,0)}LESSER_EQUAL(){return this.getToken(a.LESSER_EQUAL,0)}NOT_EQUAL(){return this.getToken(a.NOT_EQUAL,0)}EQUAL_EQUAL(){return this.getToken(a.EQUAL_EQUAL,0)}get ruleIndex(){return a.RULE_relation_symbol}enterRule(e){e.enterRelation_symbol&&e.enterRelation_symbol(this)}exitRule(e){e.exitRelation_symbol&&e.exitRelation_symbol(this)}accept(e){return e.visitRelation_symbol?e.visitRelation_symbol(this):e.visitChildren(this)}}class ke extends b{constructor(e,t){super(e,t)}r_boolean(){return this.getRuleContext(0,Rr)}modifier_list(){return this.getRuleContext(0,dt)}get ruleIndex(){return a.RULE_boolean_modified}enterRule(e){e.enterBoolean_modified&&e.enterBoolean_modified(this)}exitRule(e){e.exitBoolean_modified&&e.exitBoolean_modified(this)}accept(e){return e.visitBoolean_modified?e.visitBoolean_modified(this):e.visitChildren(this)}}class Rr extends b{constructor(e,t){super(e,t)}AND(){return this.getToken(a.AND,0)}OR(){return this.getToken(a.OR,0)}NOT(){return this.getToken(a.NOT,0)}get ruleIndex(){return a.RULE_r_boolean}enterRule(e){e.enterR_boolean&&e.enterR_boolean(this)}exitRule(e){e.exitR_boolean&&e.exitR_boolean(this)}accept(e){return e.visitR_boolean?e.visitR_boolean(this):e.visitChildren(this)}}class dt extends b{constructor(e,t){super(e,t)}modifier(e){return e===void 0?this.getRuleContexts(Je):this.getRuleContext(e,Je)}get ruleIndex(){return a.RULE_modifier_list}enterRule(e){e.enterModifier_list&&e.enterModifier_list(this)}exitRule(e){e.exitModifier_list&&e.exitModifier_list(this)}accept(e){return e.visitModifier_list?e.visitModifier_list(this):e.visitChildren(this)}}class Je extends b{constructor(e,t){super(e,t)}SLASH(){return this.getToken(a.SLASH,0)}modifier_name(){return this.getRuleContext(0,mr)}modifier_relation(){return this.getRuleContext(0,Er)}get ruleIndex(){return a.RULE_modifier}enterRule(e){e.enterModifier&&e.enterModifier(this)}exitRule(e){e.exitModifier&&e.exitModifier(this)}accept(e){return e.visitModifier?e.visitModifier(this):e.visitChildren(this)}}class mr extends b{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ae)}get ruleIndex(){return a.RULE_modifier_name}enterRule(e){e.enterModifier_name&&e.enterModifier_name(this)}exitRule(e){e.exitModifier_name&&e.exitModifier_name(this)}accept(e){return e.visitModifier_name?e.visitModifier_name(this):e.visitChildren(this)}}class Er extends b{constructor(e,t){super(e,t)}relation_symbol(){return this.getRuleContext(0,ht)}modifier_value(){return this.getRuleContext(0,gr)}get ruleIndex(){return a.RULE_modifier_relation}enterRule(e){e.enterModifier_relation&&e.enterModifier_relation(this)}exitRule(e){e.exitModifier_relation&&e.exitModifier_relation(this)}accept(e){return e.visitModifier_relation?e.visitModifier_relation(this):e.visitChildren(this)}}class gr extends b{constructor(e,t){super(e,t)}SIMPLE_STRING(){return this.getToken(a.SIMPLE_STRING,0)}QUOTED_STRING(){return this.getToken(a.QUOTED_STRING,0)}get ruleIndex(){return a.RULE_modifier_value}enterRule(e){e.enterModifier_value&&e.enterModifier_value(this)}exitRule(e){e.exitModifier_value&&e.exitModifier_value(this)}accept(e){return e.visitModifier_value?e.visitModifier_value(this):e.visitChildren(this)}}class ft extends b{constructor(e,t){super(e,t)}prefix(){return this.getRuleContext(0,yr)}DOT(){return this.getToken(a.DOT,0)}simple_name(){return this.getRuleContext(0,Ae)}get ruleIndex(){return a.RULE_prefix_name}enterRule(e){e.enterPrefix_name&&e.enterPrefix_name(this)}exitRule(e){e.exitPrefix_name&&e.exitPrefix_name(this)}accept(e){return e.visitPrefix_name?e.visitPrefix_name(this):e.visitChildren(this)}}class yr extends b{constructor(e,t){super(e,t)}simple_name(){return this.getRuleContext(0,Ae)}get ruleIndex(){return a.RULE_prefix}enterRule(e){e.enterPrefix&&e.enterPrefix(this)}exitRule(e){e.exitPrefix&&e.exitPrefix(this)}accept(e){return e.visitPrefix?e.visitPrefix(this):e.visitChildren(this)}}class Ae extends b{constructor(e,t){super(e,t)}SIMPLE_STRING(){return this.getToken(a.SIMPLE_STRING,0)}get ruleIndex(){return a.RULE_simple_name}enterRule(e){e.enterSimple_name&&e.enterSimple_name(this)}exitRule(e){e.exitSimple_name&&e.exitSimple_name(this)}accept(e){return e.visitSimple_name?e.visitSimple_name(this):e.visitChildren(this)}}const vi=[{id:"lang",label:"Entry language",virtual:!0},{id:"lemma",label:"Lemma form"},{id:"entryId",label:"Identifier of the current entry"},{id:"phonetic",label:"Phonetic form"},{id:"translation",label:"Translation"},{id:"transcription",label:"Transcription or transliteration"},{id:"definition",label:"Definition or description"},{id:"etymology",label:"Etymology information"},{id:"case",label:"Morphological Case"},{id:"number",label:"Morphological Number"},{id:"gender",label:"Morphological Gender"},{id:"pos",label:"Part-of-Speech"},{id:"baseform",label:"Baseform (or stem …)"},{id:"segmentation",label:"Composita segmentation, hyphenation"},{id:"sentiment",label:"Sentiment information",unstructured:!0},{id:"frequency",label:"Frequency information",unstructured:!0},{id:"antonym",label:"Antonym"},{id:"hyponym",label:"Hyponym"},{id:"hypernym",label:"Hypernym"},{id:"meronym",label:"Meronym"},{id:"holonym",label:"Holonym"},{id:"synonym",label:"Synonym"},{id:"related",label:"Unspecified relation"},{id:"ref",label:"A URI referencing a related resource"},{id:"senseRef",label:"ID of a sense definition"},{id:"citation",label:"Citation, quotation or example"}],Li=Object.fromEntries(vi.map(r=>[r.id,r])),wi=[{id:"virtual",label:"Virtual fields",fields:["lang"]},{id:"core",label:"Basic fields",fields:["lemma","entryId","phonetic","translation","transcription"]},{id:"description",label:"Description fields",fields:["definition","etymology"]},{id:"grammar",label:"Grammar and morphology fields",fields:["case","number","gender","pos","baseform","segmentation"]},{id:"numeric",label:"Unstructured numeric fields",fields:["sentiment","frequency"]},{id:"relation",label:"Semantic relation fields",fields:["antonym","hyponym","hypernym","meronym","holonym","synonym","related"]},{id:"reference",label:"Reference fields",fields:["ref","senseRef"]},{id:"citation",label:"Citation and quotation fields",fields:["citation"]}],Si=[{id:"=",label:"equal"},{id:"==",label:"exact equal"},{id:"is",label:"is a"}],vt=[{id:"lang",label:"Language"},{id:"unmasked",label:"Unmasked"},{id:"ignoreCase",label:"Ignore Case"},{id:"respectCase",label:"Respect Case"},{id:"ignoreAccents",label:"Ignore Accents"},{id:"respectAccents",label:"Respect Accents"},{id:"honorWhitespace",label:"Honor Whitespace"},{id:"regexp",label:"Regular Expression"},{id:"partialMatch",label:"Partial Match"},{id:"fullMatch",label:"Full Match"}],Lt=[["masked","unmasked","regexp"],["ignoreCase","respectCase"],["ignoreAccents","respectAccents"],["partialMatch","fullMatch"]],Ti=[{id:"and",label:"AND"},{id:"or",label:"OR"},{id:"not",label:"NOT"}],wt="=",me='""',Oe="or",br=[{id:"search-clause",label:"Search Clause",new:`${me}`,newBefore:`${me} ${Oe}`,newAfter:`${Oe} ${me}`},{id:"sub-query",label:"Subquery",new:`( ${me} )`,newBefore:`( ${me} ) ${Oe}`,newAfter:`${Oe} ( ${me} )`}],et=Object.fromEntries(br.map(r=>[r.id,r])),xt=d.createContext(void 0);xt.displayName="LexCQLParserLexerContext";function Ii({parser:r,lexer:e,cursorPos:t,children:s}){const o={parser:r,lexer:e,cursorPos:t};return i.jsx(xt.Provider,{value:o,children:s})}function Ar(){const r=d.useContext(xt);if(!r)throw new Error('No parser and lexer "data" set, use LexCQLParserLexerProvider to set');return r}const pt=d.createContext(void 0);pt.displayName="LexCQLQueryBuilderConfigContext";function Oi({enableRelationModifiers:r=!0,forceSearchTermQuoting:e=!1,showAllFields:t=!0,showResourceCountForField:s=!0,children:o}){const f={enableRelationModifiers:r,forceSearchTermQuoting:e,showAllFields:t,showResourceCountForField:s};return i.jsx(pt.Provider,{value:f,children:o})}function Qi(){const r=d.useContext(pt);if(!r)throw new Error('No flags "data" set, use LexCQLQueryBuilderConfigProvider to set');return r}const _t=d.createContext(void 0);_t.displayName="LexCQLQueryUpdaterContext";function Ui({rewriter:r,children:e}){const t={rewriter:r};return i.jsx(_t.Provider,{value:t,children:e})}function Rt(){const r=d.useContext(_t);if(!r)throw new Error('No rewriter "data" set, use LexCQLQueryUpdaterProvider to set');return r}const mt=d.createContext(void 0);mt.displayName="LexCQLResourceFieldInfoContext";function ji({resources:r,fieldInfo:e,children:t}){const s={resources:r,fieldInfo:e};return i.jsx(mt.Provider,{value:s,children:t})}function ki(){const r=d.useContext(mt);if(!r)throw new Error('No resources and field info "data" set, use LexCQLResourceFieldInfoProvider to set');return r}class G extends Qt{static L_PAREN=1;static R_PAREN=2;static EQUAL=3;static GREATER=4;static LESSER=5;static GREATER_EQUAL=6;static LESSER_EQUAL=7;static NOT_EQUAL=8;static EQUAL_EQUAL=9;static SLASH=10;static AND=11;static OR=12;static NOT=13;static DOT=14;static QUOTED_STRING=15;static SIMPLE_STRING=16;static WS=17;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,"'('","')'","'='","'>'","'<'","'>='","'<='","'<>'","'=='","'/'",null,null,null,"'.'"];static symbolicNames=[null,"L_PAREN","R_PAREN","EQUAL","GREATER","LESSER","GREATER_EQUAL","LESSER_EQUAL","NOT_EQUAL","EQUAL_EQUAL","SLASH","AND","OR","NOT","DOT","QUOTED_STRING","SIMPLE_STRING","WS"];static modeNames=["DEFAULT_MODE"];static ruleNames=["L_PAREN","R_PAREN","EQUAL","GREATER","LESSER","GREATER_EQUAL","LESSER_EQUAL","NOT_EQUAL","EQUAL_EQUAL","SLASH","AND","OR","NOT","DOT","QUOTED_STRING","SIMPLE_STRING","WS"];constructor(e){super(e),this.interpreter=new Ut(this,G._ATN,G.decisionsToDFA,new Me)}get grammarFileName(){return"LexLexer.g4"}get literalNames(){return G.literalNames}get symbolicNames(){return G.symbolicNames}get ruleNames(){return G.ruleNames}get serializedATN(){return G._serializedATN}get channelNames(){return G.channelNames}get modeNames(){return G.modeNames}static _serializedATN=[4,0,17,92,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,1,5,1,5,1,5,1,6,1,6,1,6,1,7,1,7,1,7,1,8,1,8,1,8,1,9,1,9,1,10,1,10,1,10,1,10,1,11,1,11,1,11,1,12,1,12,1,12,1,12,1,13,1,13,1,14,1,14,1,14,1,14,5,14,77,8,14,10,14,12,14,80,9,14,1,14,1,14,1,15,4,15,85,8,15,11,15,12,15,86,1,16,1,16,1,16,1,16,0,0,17,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,1,0,9,2,0,65,65,97,97,2,0,78,78,110,110,2,0,68,68,100,100,2,0,79,79,111,111,2,0,82,82,114,114,2,0,84,84,116,116,2,0,34,34,92,92,8,0,9,10,13,13,32,32,34,34,40,41,47,47,60,62,92,92,3,0,9,10,13,13,32,32,94,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,1,35,1,0,0,0,3,37,1,0,0,0,5,39,1,0,0,0,7,41,1,0,0,0,9,43,1,0,0,0,11,45,1,0,0,0,13,48,1,0,0,0,15,51,1,0,0,0,17,54,1,0,0,0,19,57,1,0,0,0,21,59,1,0,0,0,23,63,1,0,0,0,25,66,1,0,0,0,27,70,1,0,0,0,29,72,1,0,0,0,31,84,1,0,0,0,33,88,1,0,0,0,35,36,5,40,0,0,36,2,1,0,0,0,37,38,5,41,0,0,38,4,1,0,0,0,39,40,5,61,0,0,40,6,1,0,0,0,41,42,5,62,0,0,42,8,1,0,0,0,43,44,5,60,0,0,44,10,1,0,0,0,45,46,5,62,0,0,46,47,5,61,0,0,47,12,1,0,0,0,48,49,5,60,0,0,49,50,5,61,0,0,50,14,1,0,0,0,51,52,5,60,0,0,52,53,5,62,0,0,53,16,1,0,0,0,54,55,5,61,0,0,55,56,5,61,0,0,56,18,1,0,0,0,57,58,5,47,0,0,58,20,1,0,0,0,59,60,7,0,0,0,60,61,7,1,0,0,61,62,7,2,0,0,62,22,1,0,0,0,63,64,7,3,0,0,64,65,7,4,0,0,65,24,1,0,0,0,66,67,7,1,0,0,67,68,7,3,0,0,68,69,7,5,0,0,69,26,1,0,0,0,70,71,5,46,0,0,71,28,1,0,0,0,72,78,5,34,0,0,73,74,5,92,0,0,74,77,7,6,0,0,75,77,8,6,0,0,76,73,1,0,0,0,76,75,1,0,0,0,77,80,1,0,0,0,78,76,1,0,0,0,78,79,1,0,0,0,79,81,1,0,0,0,80,78,1,0,0,0,81,82,5,34,0,0,82,30,1,0,0,0,83,85,8,7,0,0,84,83,1,0,0,0,85,86,1,0,0,0,86,84,1,0,0,0,86,87,1,0,0,0,87,32,1,0,0,0,88,89,7,8,0,0,89,90,1,0,0,0,90,91,6,16,0,0,91,34,1,0,0,0,4,0,76,78,86,1,0,1,0];static __ATN;static get _ATN(){return G.__ATN||(G.__ATN=new qe().deserialize(G._serializedATN)),G.__ATN}static vocabulary=new He(G.literalNames,G.symbolicNames,[]);get vocabulary(){return G.vocabulary}static decisionsToDFA=G._ATN.decisionToState.map((e,t)=>new Be(e,t))}class Mi extends jt{visitQuery;visitBoolean_query;visitSubquery;visitSearch_clause;visitSearch_term;visitIndex;visitRelation_modified;visitRelation;visitRelation_name;visitRelation_symbol;visitBoolean_modified;visitR_boolean;visitModifier_list;visitModifier;visitModifier_name;visitModifier_relation;visitModifier_value;visitPrefix_name;visitPrefix;visitSimple_name}function Nr(r){if(!r||!r.trim())return null;const e=kt.fromString(r),t=new G(e),s=new Mt(t),o=new qt(s),f=new a(s),u=new zt;return t.removeErrorListeners(),t.addErrorListener(u),f.removeErrorListeners(),f.addErrorListener(u),{tree:f.query(),lexer:t,parser:f,rewriter:o,errors:u.errors}}class qi extends Mi{fields=[];visitIndex=e=>{this.fields.push(e.getText())}}function Hi(r){const e=new qi;r&&e.visit(r);const t=e.fields;return[...new Set(t)]}function Bi(r,e){if(e.length===0||r.length===0)return{supported:r,unsupported:[],unsupportedByField:new Map};const t=r.map(u=>{const c=[];return e.forEach(l=>{u.availableLexFields?.find(x=>x.type===l)||c.push(l)}),[u,c]}),s=t.filter(([,u])=>u.length===0).map(([u])=>u),o=t.filter(([,u])=>u.length!==0),f=o.map(([u,c])=>c.map(l=>[l,u])).flat(1).reduce((u,[c,l])=>(u.has(c)||u.set(c,[]),u.get(c).push(l),u),new Map);return{supported:s,unsupported:o,unsupportedByField:f}}const Di=/([<>()=\\" ])/g,Gi=/([\\"])/g,Pi=/(?:\\)([\\"])/g;function Wi(r){if(!r)return"";if(r.startsWith('"')&&r.endsWith('"')){let e=r.slice(1,-1);return e=e.replace(Pi,"$1"),e}return r}function St(r,e=!1){return r?r.match(Di)?`"${r.replace(Gi,"\\$1")}"`:e?`"${r}"`:r:'""'}function Fi({query:r,cursorPos:e,resources:t,onChange:s,...o}){const[f,u]=d.useState(r??"");d.useEffect(()=>u(r??""),[r]);const c=d.useMemo(()=>{const R=t?.filter(_=>(_.availableDataViews?.find(p=>p.mimeType==="application/x-clarin-fcs-lex+xml")!==void 0||_.searchCapabilitiesResolved.includes("LEX_SEARCH"))&&_.availableLexFields!==null&&_.availableLexFields.length>0)??[];if(t&&t.length!==R.length){const _=t.filter(p=>!R.includes(p));console.warn("Filter out resource(s) that do(es) not correctly declare LexCQL query support",_)}return R},[t]),l=d.useMemo(()=>c.map(R=>{const _=new Set;return R.availableLexFields.forEach(p=>{_.has(p.type)||_.add(p.type)}),[..._.values()].map(p=>({fieldType:p,resource:R}))}).reduce((R,_)=>(_.forEach(({fieldType:p,resource:C})=>{R.has(p)||R.set(p,[]),R.get(p).push(C)}),R),new Map),[c]),x=d.useMemo(()=>Nr(f),[f]);function m(){if(x){const{rewriter:R}=x,_=R.getText();u(_),s?.(_)}else console.warn("No parsed query! Unable to handle change request",x)}function v(R){const _=et[R].new;u(_),s?.(_)}return i.jsx("div",{id:"query-builder",className:"lex-query d-flex justify-content-center",children:i.jsx(Oi,{enableRelationModifiers:o.enableRelationModifiers??!0,forceSearchTermQuoting:o.forceSearchTermQuoting??!1,showAllFields:o.showAllFields??!1,showResourceCountForField:o.showResourceCountForField??!0,children:i.jsx(ji,{resources:c,fieldInfo:l,children:x?i.jsx(Ii,{parser:x.parser,lexer:x.lexer,cursorPos:e,children:i.jsx(Ui,{rewriter:x.rewriter,children:i.jsx($i,{tree:x.tree,onChange:m})})}):i.jsx(tt,{onClick:v})})})})}function Cr({className:r,onClick:e}){return i.jsx(Ee,{variant:"link",className:["del-btn action-btn rounded-circle p-1"].concat(r??[]).join(" "),onClick:e,children:i.jsx("i",{dangerouslySetInnerHTML:{__html:cr},"aria-hidden":"true"})})}function tt({className:r,onClick:e}){function t(s){s&&e?.(s)}return i.jsxs(g,{className:[""].concat(r??[]).join(" "),onSelect:t,"aria-label":"Add search clause",children:[i.jsx(g.Toggle,{variant:"link",className:"add-search-clause-btn action-btn no-arrow",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Ge},"aria-hidden":"true"})}),i.jsx(g.Menu,{children:br.map(s=>i.jsx(g.Item,{eventKey:s.id,children:s.label},s.id))})]})}function $i({tree:r,onChange:e}){const t=r.boolean_query();return i.jsx("div",{className:"query flex-grow-1 justify-content-center d-flex flex-wrap row-gap-2 column-gap-1 rounded",children:i.jsx(vr,{ctx:t,onChange:e})})}function vr({ctx:r,onChange:e}){const{rewriter:t}=Rt(),s=r.getChildCount()>1;function o(c){if(r.getChildCount()===1){const l=r.subquery(0);if(!l||!l.start){console.warn("Invalid parse tree state. A subquery with associated token should exist!",{ctx:r,subqueryCtx:l,childIdx:c});return}t.delete(l.start,l.stop),e?.()}else if(c===0){const l=r.subquery(0),x=r.boolean_modified(0);if(!l||!x||!l.start||!x.stop){console.warn("Invalid parse tree state. A subquery and boolean_modified with associated tokens should exist!",{ctx:r,subqueryCtx:l,booleanModifiedCtx:x,childIdx:c});return}t.delete(l.start,x.stop),e?.()}else{const l=r.getChild(c),x=r.getChild(c-1);if(!l||!x||!l.stop||!x.start){console.warn("Invalid parse tree state. A subquery and boolean_modified with associated tokens should exist!",{ctx:r,subqueryCtx:l,booleanModifiedCtx:x,childIdx:c});return}t.delete(x.start,l.stop),e?.()}}function f(c){const l=r.start.tokenIndex,x=et[c].newBefore;t.insertBefore(l,`${x} `),e?.()}function u(c){const l=r.stop.tokenIndex,x=et[c].newAfter;t.insertAfter(l,` ${x}`),e?.()}return i.jsxs("div",{className:["boolean-query d-flex align-items-center row-gap-2 column-gap-1"].concat(s?"block justify-content-center flex-wrap border rounded p-1":"").join(" "),children:[i.jsx(tt,{onClick:f}),r.children.map((c,l)=>{if(c instanceof je)return i.jsx(Vi,{ctx:c,onChange:e,onDelete:()=>o(l)},l);if(c instanceof ke)return i.jsx(Ki,{ctx:c,onChange:e},l)}),i.jsx(tt,{onClick:u})]})}function Vi({ctx:r,onChange:e,onDelete:t}){const s=r.boolean_query(),o=r.search_clause(),f=s!==null,u=o!==null,c=f&&!(s.parent?.parent instanceof We&&s.parent?.parent.getChildCount()===1);return i.jsx("div",{className:["sub-query position-relative align-items-center justify-content-center d-flex"].concat(f?"block border rounded p-1":"").join(" "),children:f?i.jsxs(i.Fragment,{children:[i.jsx("code",{className:"delims",children:"("}),i.jsx(vr,{ctx:s,onChange:e}),i.jsx("code",{className:"delims",children:")"}),c&&i.jsx(Cr,{className:"del-within-clause-btn position-absolute top-0 start-100 translate-middle",onClick:t})]}):u?i.jsx(Xi,{ctx:o,onChange:e,onDelete:t}):i.jsx("div",{className:"text-danger px-1",title:"Parse error. Expected search clause or a sub query!",children:"???"})})}function Ki({ctx:r,onChange:e}){const{rewriter:t}=Rt(),{cursorPos:s}=Ar(),o=Te(r,s),f=r.getChild(0)?.getText().toLowerCase();function u(c){const l=c;if(!l||l===f)return;const x=r.r_boolean().getChild(0).symbol;if(!x){console.warn("Unexpected parse tree, expected terminal node as first child!",{ctx:r,boolean:r.r_boolean(),firstChild:r.r_boolean().getChild(0)});return}t.replaceSingle(x,l),e?.()}return i.jsx("div",{className:["boolean focus-ring rounded mx-1"].concat([o?"cursor-focus":""]).join(" "),children:i.jsxs(g,{onSelect:u,children:[i.jsx(g.Toggle,{className:"form-select",children:i.jsx("code",{className:"keyword",children:f})}),i.jsx(g.Menu,{children:Ti.map(c=>i.jsx(g.Item,{eventKey:c.id,children:c.label},c.id))})]})})}function Xi({ctx:r,onChange:e,onDelete:t}){const{rewriter:s}=Rt(),{cursorPos:o}=Ar(),{fieldInfo:f}=ki(),{forceSearchTermQuoting:u,enableRelationModifiers:c,showAllFields:l,showResourceCountForField:x}=Qi(),m=[...f.keys()],v=Te(r,o),R=r.parent?.parent?.getChildCount()!==1,_=r.index(),p=r.relation_modified(),C=r.search_term(),[w,O]=d.useState(null),[P,$]=d.useState(null),[M,Q]=d.useState([]),[q,Y]=d.useState("");d.useEffect(()=>{const E=_?.getText(),A=p?.relation().getText(),I=C.QUOTED_STRING(),T=C.SIMPLE_STRING(),ne=I?.symbol.text??T?.symbol.text;O(E??null),$(A??null),Q(Z(p)),Y(Wi(ne))},[_,p,C]);const U=c&&P!=="is";function j(E,A){const I=A.toLowerCase();return E.map(T=>T.toLowerCase()).includes(I)?E.filter(T=>T.toLowerCase()!==I):(Lt.flat(1).map(T=>T.toLowerCase()).includes(I)&&Lt.find(T=>{const ne=T.map(re=>re.toLowerCase());if(ne.includes(I)){const re=ne.filter(ie=>ie!==I);return E=E.filter(ie=>!re.includes(ie.toLowerCase())),!0}}),[...E,A])}function S(E,A){if(!A){console.warn("Unexpected parse state. For updating relation modifiers, the relation context should exist!",{relationModifiers:E,relationModifiedCtx:A});return}const I=A.stop.tokenIndex,T=A.modifier_list()?.modifier()??[],ne=E.map(F=>F.toLowerCase()),re=[];let ie=!1;for(const F of T){const Re=F.modifier_name().simple_name().SIMPLE_STRING().symbol.text?.toLowerCase()??"";ne.includes(Re)?re.push(Re):(s.delete(F.start,F.stop),ie=!0)}for(const F of E)re.includes(F.toLowerCase())||(s.insertAfter(I,`/${F}`),ie=!0);ie&&e?.()}function Z(E){const I=(E?.modifier_list()?.modifier()??[]).map(T=>T.modifier_name().simple_name().SIMPLE_STRING().symbol.text?.toLowerCase()??"").filter(T=>T!=="lang");return vt.map(T=>T.id).filter(T=>I.includes(T.toLowerCase()))}function z(E){const A=E;if(A&&A!==w){if(O(A),_===null){$(wt);const I=`${A} ${wt} ${St(q,u||C.QUOTED_STRING()!==null)}`;s.replace(r.start,r.stop,I)}else s.replace(_.start,_.stop,A);e?.()}}function de(E){const A=E;if(A&&A!==w){if($(A),p!==null){const I=p.relation();if(s.replace(I.start,I.stop,A),A==="is"){const T=p.modifier_list();T&&s.delete(T.start,T.stop)}}e?.()}}function fe(){const E=St(q,u||C.QUOTED_STRING()!==null);s.replace(C.start,C.stop,E),e?.()}function le(E){const A=j(M,E);S(A,p),Q(I=>j(I,E))}function Ne(){return i.jsx(X.Control,{className:"d-inline",style:{width:"10ch"},value:q,onChange:E=>Y(E.target.value),onBlur:fe})}function Ie(E,A=void 0){return i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:E}),A&&`: ${A}`,Ce(E)]})}function Ce(E){if(!x)return null;const A=f.get(E)?.length??0;return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsxs("small",{className:"text-body-secondary",children:["Supported by ",A," resources."]})]})}return i.jsxs("div",{className:["block input-block basic-expression position-relative focus-ring border rounded py-2 px-2"].concat([R?"me-2 mt-1":""]).concat([v?"cursor-focus":""]).join(" "),children:[i.jsxs("div",{className:"d-flex justify-content-center column-gap-2",children:[i.jsxs(g,{onSelect:z,children:[i.jsx(g.Toggle,{className:"form-select",children:w??i.jsx("em",{className:"text-muted",children:"(default)"})}),i.jsx(g.Menu,{children:wi.map(E=>m.find(A=>E.fields.includes(A))||E.id==="virtual"||E.fields.includes(w)?i.jsxs(d.Fragment,{children:[(l||f.size>5)&&i.jsx(g.Header,{children:E.label}),E.fields.map(A=>(l||m.includes(A)||E.id==="virtual"||A===w)&&i.jsx(g.Item,{eventKey:A,active:A===w,children:Ie(A,Li[A]?.label)},A))]},E.id):null)})]}),P&&i.jsxs(g,{onSelect:de,children:[i.jsx(g.Toggle,{className:"form-select",children:P}),i.jsx(g.Menu,{children:i.jsxs("div",{className:"d-flex",children:[i.jsxs("div",{className:["flex-grow-1"].concat(U?["border-end pe-1"]:[]).join(" "),children:[U&&i.jsx(g.Header,{children:"Relations"}),Si.map(E=>i.jsx(g.Item,{eventKey:E.id,active:E.id===w,children:E.label},E.id))]}),i.jsx("div",{className:["text-nowrap"].concat(U?["ps-1"]:[]).join(" "),children:U&&i.jsxs(i.Fragment,{children:[i.jsx(g.Header,{children:"Modifiers"}),vt.filter(E=>E.id!=="lang").map(E=>i.jsx(g.ItemText,{children:i.jsx(X.Check,{id:E.id,name:E.id,label:E.label,type:"checkbox",checked:M.includes(E.id),onChange:()=>le(E.id)})},E.id))]})})]})})]}),Ne()]}),R&&i.jsx(Cr,{className:"del-within-clause-btn position-absolute top-0 start-100 translate-middle",onClick:t})]})}function cs({show:r,query:e,queryType:t,resources:s,selectedResources:o,delay:f=1e3,onModalClose:u}){const{t:c}=Hr("querybuilder"),[l,x]=d.useState(e??""),[m,v]=d.useState(null);d.useEffect(()=>{x(e??""),v(null)},[e]);const R=Br(l,f),[_,p]=d.useState(!1),[C,w,O]=Vr(null,f),$=Dr(s??[]).filter(L=>t==="fcs"?L.availableLayers!==null&&L.availableLayers.length>0:!0).filter(L=>t==="lex"?L.availableLexFields!==null&&L.availableLexFields.length>0:!0),M=o?$.filter(L=>o.includes(L.id)):$,Q=d.useMemo(()=>t==="fcs"?nr(l):t==="lex"?Nr(l):(console.warn("Unexpected queryType, so will not parse query!",t),null),[l,t]);Q&&Q.errors.length>0&&C!==Q.errors[0]&&w(Q.errors[0]),(!Q||Q.errors.length===0)&&C!==null&&O(null);const[q,Y]=d.useState(0),[U,j]=d.useState(0),[S,Z]=d.useState(void 0);if(s&&Q){if(t==="fcs"){q!==M.length&&Y(M.length);const L=ai(Q?.tree),B=li(M,L),J=B.unsupported.length;J!==U&&j(J);const ee=[...B.unsupportedByLayer.keys()],we=S?[...S.keys()]:[];(ee.length!==we.length||!ee.every($e=>we.includes($e)))&&Z(B.unsupportedByLayer)}else if(t==="lex"){q!==M.length&&Y(M.length);const L=Hi(Q?.tree),B=Bi(M,L),J=B.unsupported.length;J!==U&&j(J);const ee=[...B.unsupportedByField.keys()],we=S?[...S.keys()]:[];(ee.length!==we.length||!ee.every($e=>we.includes($e)))&&Z(B.unsupportedByField)}}Q||U!==0&&(Y(s?.length??0),j(0),Z(void 0));function z(L){const B=S!==void 0?Array.from(S.values()).flat().map(ee=>ee.id):[],J=M.filter(ee=>!B.includes(ee.id)).map(ee=>ee.id);u({query:l,validResources:J,action:L})}function de(L){x(L)}function fe(L){if(L.target.nodeName==="INPUT"){const B=L.target.selectionStart,J=L.target.selectionEnd;v(B!==null&&J!==null&&B!==J?[B,J]:B)}}function le(L){x(L)}const[Ne,Ie]=d.useState(!1),[Ce,E]=d.useState(!1),[A,I]=d.useState(!1),[T,ne]=d.useState(!0),[re,ie]=d.useState(!0),[F,Re]=d.useState(!0),[Fe,h]=d.useState(!1),[y,k]=d.useState(!0),[H,K]=d.useState(!1),[oe,ve]=d.useState(!0),[ae,Le]=d.useState(!0),[xe,Et]=d.useState(!0),[Lr,zi]=d.useState(!1),[wr,Yi]=d.useState(!0),[Sr,Zi]=d.useState(!1),[Tr,Ji]=d.useState(!0);function Ir(){return i.jsxs(i.Fragment,{children:[!1,i.jsx(_i,{query:R,cursorPos:m??void 0,onChange:le,resources:M,enableWithin:Ne,enableWrapGroup:Ce,enableWrapNegation:A,enableImplicitQuery:T,enableMultipleQuerySegments:re,enableQuantifiers:F,enableRegexpFlags:Fe,showBasicLayer:y,showAllAdvancedLayers:H,showCustomLayers:oe,showLayerQualifiers:ae,showResourceCountForLayer:xe})]})}function Or(){return i.jsxs(i.Fragment,{children:[!1,i.jsx(Fi,{query:R,cursorPos:m??void 0,onChange:le,resources:M,enableRelationModifiers:wr,forceSearchTermQuoting:Lr,showAllFields:Sr,showResourceCountForField:Tr})]})}function Qr(){return t==="fcs"?Ir():t==="lex"?Or():null}return i.jsxs(Se,{id:"query-builder-modal",show:r,onHide:()=>z("close"),fullscreen:!0,centered:!0,children:[i.jsx(Se.Header,{className:"py-2",closeButton:!0,children:i.jsx(Se.Title,{children:c("title")})}),i.jsxs(Se.Body,{className:"px-0",children:[i.jsx(X,{className:"px-1 pb-3 border-bottom",onSubmit:L=>L.preventDefault(),children:i.jsx(Ve,{children:i.jsx(Ur,{className:"d-sm-flex row-gap-2 justify-content-around",children:i.jsx(jr,{children:i.jsxs(kr,{hasValidation:!0,children:[i.jsx(X.Control,{placeholder:c("queryInputPlaceholder"),"aria-label":c("queryInputAriaLabel"),className:"text-center query-builder-input",value:l,isInvalid:!!C,onBlur:()=>v(null),..._?{as:Gr,queryType:t,onChange:de,onCursorChange:(L,B)=>{v(L!==B&&L!==null&&B!==void 0?[L,B]:L)}}:{onChange:L=>{de(L.target.value),fe(L)},onKeyUp:fe,onClick:fe}}),i.jsx(Mr,{id:"fcs-query-builder-input-enhanced-button",value:"enhance-query",type:"checkbox",checked:_,onChange:()=>p(L=>!L),variant:"outline-secondary","aria-label":c("search.searchInput.buttonEnhanceQueryAriaLabel",{ns:"app",context:_?"enabled":"disabled"}),className:"d-flex align-items-center",children:i.jsx("i",{dangerouslySetInnerHTML:{__html:Pr},"aria-hidden":"true"})}),i.jsx(X.Control.Feedback,{type:"invalid",children:C})]})})})})}),U>0&&i.jsx(Ve,{className:"px-3",children:i.jsxs(qr,{variant:"warning",className:"mb-0 mt-3",dismissible:!0,children:[c("msgResourcesUnavailable",{count:U,total:q,context:q===U?"nothing":null}),S&&i.jsx("ul",{className:"mb-0",children:[...S.keys()].map(L=>i.jsx("li",{children:i.jsx(Wr,{i18nKey:"msgNumUnsupportedResources",count:S.get(L)?.length,values:{name:L},ns:"querybuilder"})},L))})]})}),i.jsx(Ve,{className:"px-3 pt-3",children:Qr()})]}),i.jsxs(Se.Footer,{className:"py-2",children:[i.jsx(Ee,{variant:"secondary",onClick:()=>z("abort"),children:c("buttonCancel")}),i.jsx(Ee,{variant:"primary",onClick:()=>z("confirm"),children:c("buttonUseQueryAndClose")})]})]})}Fr.loadNamespaces("querybuilder");export{cs as default};
//# sourceMappingURL=fcs-sru-aggregator-ui-query-builder-0.0.0.js.map
